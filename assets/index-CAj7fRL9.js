(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ew(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var tw={exports:{}},Uu={},nw={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),w1=Symbol.for("react.portal"),x1=Symbol.for("react.fragment"),C1=Symbol.for("react.strict_mode"),T1=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),A1=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),P1=Symbol.for("react.lazy"),sg=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=sg&&t[sg]||t["@@iterator"],typeof t=="function"?t:null)}var rw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iw=Object.assign,sw={};function Fs(t,e,n){this.props=t,this.context=e,this.refs=sw,this.updater=n||rw}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ow(){}ow.prototype=Fs.prototype;function kh(t,e,n){this.props=t,this.context=e,this.refs=sw,this.updater=n||rw}var Ih=kh.prototype=new ow;Ih.constructor=kh;iw(Ih,Fs.prototype);Ih.isPureReactComponent=!0;var og=Array.isArray,aw=Object.prototype.hasOwnProperty,Ph={current:null},lw={key:!0,ref:!0,__self:!0,__source:!0};function uw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)aw.call(e,r)&&!lw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pa,type:t,key:s,ref:o,props:i,_owner:Ph.current}}function b1(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rh(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function M1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ag=/\/+/g;function Ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?M1(""+t.key):e.toString(36)}function yl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pa:case w1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ac(o,0):r,og(i)?(n="",t!=null&&(n=t.replace(ag,"$&/")+"/"),yl(i,e,n,"",function(d){return d})):i!=null&&(Rh(i)&&(i=b1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ag,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",og(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Ac(s,a);o+=yl(s,e,n,c,i)}else if(c=R1(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Ac(s,a++),o+=yl(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fa(t,e,n){if(t==null)return t;var r=[],i=0;return yl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function N1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},vl={transition:null},D1={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:vl,ReactCurrentOwner:Ph};function cw(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Fa,forEach:function(t,e,n){Fa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fa(t,function(){e++}),e},toArray:function(t){return Fa(t,function(e){return e})||[]},only:function(t){if(!Rh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Fs;Ee.Fragment=x1;Ee.Profiler=T1;Ee.PureComponent=kh;Ee.StrictMode=C1;Ee.Suspense=k1;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D1;Ee.act=cw;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ph.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)aw.call(e,c)&&!lw.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:pa,type:t.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S1,_context:t},t.Consumer=t};Ee.createElement=uw;Ee.createFactory=function(t){var e=uw.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:A1,render:t}};Ee.isValidElement=Rh;Ee.lazy=function(t){return{$$typeof:P1,_payload:{_status:-1,_result:t},_init:N1}};Ee.memo=function(t,e){return{$$typeof:I1,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=vl.transition;vl.transition={};try{t()}finally{vl.transition=e}};Ee.unstable_act=cw;Ee.useCallback=function(t,e){return Ut.current.useCallback(t,e)};Ee.useContext=function(t){return Ut.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Ut.current.useEffect(t,e)};Ee.useId=function(){return Ut.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Ut.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};Ee.useRef=function(t){return Ut.current.useRef(t)};Ee.useState=function(t){return Ut.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Ut.current.useTransition()};Ee.version="18.3.1";nw.exports=Ee;var z=nw.exports;const Id=Ah(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=z,L1=Symbol.for("react.element"),V1=Symbol.for("react.fragment"),U1=Object.prototype.hasOwnProperty,O1=F1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B1={key:!0,ref:!0,__self:!0,__source:!0};function dw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)U1.call(e,r)&&!B1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:L1,type:t,key:s,ref:o,props:i,_owner:O1.current}}Uu.Fragment=V1;Uu.jsx=dw;Uu.jsxs=dw;tw.exports=Uu;var S=tw.exports,Pd={},fw={exports:{}},an={},hw={exports:{}},pw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,B){var K=H.length;H.push(B);e:for(;0<K;){var L=K-1>>>1,U=H[L];if(0<i(U,B))H[L]=B,H[K]=U,K=L;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var B=H[0],K=H.pop();if(K!==B){H[0]=K;e:for(var L=0,U=H.length,le=U>>>1;L<le;){var ne=2*(L+1)-1,X=H[ne],Ae=ne+1,Le=H[Ae];if(0>i(X,K))Ae<U&&0>i(Le,X)?(H[L]=Le,H[Ae]=K,L=Ae):(H[L]=X,H[ne]=K,L=ne);else if(Ae<U&&0>i(Le,K))H[L]=Le,H[Ae]=K,L=Ae;else break e}}return B}function i(H,B){var K=H.sortIndex-B.sortIndex;return K!==0?K:H.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,h=null,p=3,m=!1,_=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=H)r(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(d)}}function E(H){if(g=!1,w(H),!_)if(n(c)!==null)_=!0,te(A);else{var B=n(d);B!==null&&G(E,B.startTime-H)}}function A(H,B){_=!1,g&&(g=!1,y(N),N=-1),m=!0;var K=p;try{for(w(B),h=n(c);h!==null&&(!(h.expirationTime>B)||H&&!q());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var U=L(h.expirationTime<=B);B=t.unstable_now(),typeof U=="function"?h.callback=U:h===n(c)&&r(c),w(B)}else r(c);h=n(c)}if(h!==null)var le=!0;else{var ne=n(d);ne!==null&&G(E,ne.startTime-B),le=!1}return le}finally{h=null,p=K,m=!1}}var P=!1,R=null,N=-1,D=5,F=-1;function q(){return!(t.unstable_now()-F<D)}function I(){if(R!==null){var H=t.unstable_now();F=H;var B=!0;try{B=R(!0,H)}finally{B?M():(P=!1,R=null)}}else P=!1}var M;if(typeof v=="function")M=function(){v(I)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,O=C.port2;C.port1.onmessage=I,M=function(){O.postMessage(null)}}else M=function(){x(I,0)};function te(H){R=H,P||(P=!0,M())}function G(H,B){N=x(function(){H(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,te(A))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var K=p;p=B;try{return H()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,B){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return B()}finally{p=K}},t.unstable_scheduleCallback=function(H,B,K){var L=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?L+K:L):K=L,H){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,H={id:f++,callback:B,priorityLevel:H,startTime:K,expirationTime:U,sortIndex:-1},K>L?(H.sortIndex=K,e(d,H),n(c)===null&&H===n(d)&&(g?(y(N),N=-1):g=!0,G(E,K-L))):(H.sortIndex=U,e(c,H),_||m||(_=!0,te(A))),H},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(H){var B=p;return function(){var K=p;p=B;try{return H.apply(this,arguments)}finally{p=K}}}})(pw);hw.exports=pw;var $1=hw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=z,sn=$1;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mw=new Set,zo={};function Ai(t,e){_s(t,e),_s(t+"Capture",e)}function _s(t,e){for(zo[t]=e,t=0;t<e.length;t++)mw.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rd=Object.prototype.hasOwnProperty,G1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lg={},ug={};function H1(t){return Rd.call(ug,t)?!0:Rd.call(lg,t)?!1:G1.test(t)?ug[t]=!0:(lg[t]=!0,!1)}function W1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q1(t,e,n,r){if(e===null||typeof e>"u"||W1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var bh=/[\-:]([a-z])/g;function Mh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bh,Mh);Tt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bh,Mh);Tt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bh,Mh);Tt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nh(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q1(e,n,i,r)&&(n=null),r||i===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,La=Symbol.for("react.element"),Gi=Symbol.for("react.portal"),Hi=Symbol.for("react.fragment"),Dh=Symbol.for("react.strict_mode"),bd=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),yw=Symbol.for("react.context"),Fh=Symbol.for("react.forward_ref"),Md=Symbol.for("react.suspense"),Nd=Symbol.for("react.suspense_list"),Lh=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),vw=Symbol.for("react.offscreen"),cg=Symbol.iterator;function Ys(t){return t===null||typeof t!="object"?null:(t=cg&&t[cg]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,kc;function ao(t){if(kc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kc=e&&e[1]||""}return`
`+kc+t}var Ic=!1;function Pc(t,e){if(!t||Ic)return"";Ic=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ic=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ao(t):""}function J1(t){switch(t.tag){case 5:return ao(t.type);case 16:return ao("Lazy");case 13:return ao("Suspense");case 19:return ao("SuspenseList");case 0:case 2:case 15:return t=Pc(t.type,!1),t;case 11:return t=Pc(t.type.render,!1),t;case 1:return t=Pc(t.type,!0),t;default:return""}}function Dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hi:return"Fragment";case Gi:return"Portal";case bd:return"Profiler";case Dh:return"StrictMode";case Md:return"Suspense";case Nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yw:return(t.displayName||"Context")+".Consumer";case gw:return(t._context.displayName||"Context")+".Provider";case Fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lh:return e=t.displayName||null,e!==null?e:Dd(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return Dd(t(e))}catch{}}return null}function K1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dd(e);case 8:return e===Dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _w(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z1(t){var e=_w(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=Z1(t))}function ww(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_w(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fd(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xw(t,e){e=e.checked,e!=null&&Nh(t,"checked",e,!1)}function Ld(t,e){xw(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vd(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vd(t,e,n){(e!=="number"||zl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lo=Array.isArray;function ls(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(lo(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function Cw(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Od(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ua,Sw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ua=Ua||document.createElement("div"),Ua.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ua.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y1=["Webkit","ms","Moz","O"];Object.keys(Eo).forEach(function(t){Y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eo[e]=Eo[t]})});function Ew(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eo.hasOwnProperty(t)&&Eo[t]?(""+e).trim():e+"px"}function Aw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ew(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var X1=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bd(t,e){if(e){if(X1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function $d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zd=null;function Vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gd=null,us=null,cs=null;function mg(t){if(t=ya(t)){if(typeof Gd!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Gu(e),Gd(t.stateNode,t.type,e))}}function kw(t){us?cs?cs.push(t):cs=[t]:us=t}function Iw(){if(us){var t=us,e=cs;if(cs=us=null,mg(t),e)for(t=0;t<e.length;t++)mg(e[t])}}function Pw(t,e){return t(e)}function Rw(){}var Rc=!1;function bw(t,e,n){if(Rc)return t(e,n);Rc=!0;try{return Pw(t,e,n)}finally{Rc=!1,(us!==null||cs!==null)&&(Rw(),Iw())}}function Ho(t,e){var n=t.stateNode;if(n===null)return null;var r=Gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Hd=!1;if(or)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{Hd=!1}function Q1(t,e,n,r,i,s,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ao=!1,Gl=null,Hl=!1,Wd=null,j1={onError:function(t){Ao=!0,Gl=t}};function eA(t,e,n,r,i,s,o,a,c){Ao=!1,Gl=null,Q1.apply(j1,arguments)}function tA(t,e,n,r,i,s,o,a,c){if(eA.apply(this,arguments),Ao){if(Ao){var d=Gl;Ao=!1,Gl=null}else throw Error(Q(198));Hl||(Hl=!0,Wd=d)}}function ki(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gg(t){if(ki(t)!==t)throw Error(Q(188))}function nA(t){var e=t.alternate;if(!e){if(e=ki(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gg(i),t;if(s===r)return gg(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Nw(t){return t=nA(t),t!==null?Dw(t):null}function Dw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dw(t);if(e!==null)return e;t=t.sibling}return null}var Fw=sn.unstable_scheduleCallback,yg=sn.unstable_cancelCallback,rA=sn.unstable_shouldYield,iA=sn.unstable_requestPaint,ot=sn.unstable_now,sA=sn.unstable_getCurrentPriorityLevel,Uh=sn.unstable_ImmediatePriority,Lw=sn.unstable_UserBlockingPriority,Wl=sn.unstable_NormalPriority,oA=sn.unstable_LowPriority,Vw=sn.unstable_IdlePriority,Ou=null,Gn=null;function aA(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Ou,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:cA,lA=Math.log,uA=Math.LN2;function cA(t){return t>>>=0,t===0?32:31-(lA(t)/uA|0)|0}var Oa=64,Ba=4194304;function uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=uo(a):(s&=o,s!==0&&(r=uo(s)))}else o=n&~i,o!==0?r=uo(o):s!==0&&(r=uo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),i=1<<n,r|=t[n],e&=~i;return r}function dA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=dA(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function qd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uw(){var t=Oa;return Oa<<=1,!(Oa&4194240)&&(Oa=64),t}function bc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function hA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Oh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function Ow(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bw,Bh,$w,zw,Gw,Jd=!1,$a=[],Rr=null,br=null,Mr=null,Wo=new Map,qo=new Map,Er=[],pA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vg(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Wo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function Qs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ya(e),e!==null&&Bh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mA(t,e,n,r,i){switch(e){case"focusin":return Rr=Qs(Rr,t,e,n,r,i),!0;case"dragenter":return br=Qs(br,t,e,n,r,i),!0;case"mouseover":return Mr=Qs(Mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wo.set(s,Qs(Wo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qo.set(s,Qs(qo.get(s)||null,t,e,n,r,i)),!0}return!1}function Hw(t){var e=ui(t.target);if(e!==null){var n=ki(e);if(n!==null){if(e=n.tag,e===13){if(e=Mw(n),e!==null){t.blockedOn=e,Gw(t.priority,function(){$w(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _l(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zd=r,n.target.dispatchEvent(r),zd=null}else return e=ya(n),e!==null&&Bh(e),t.blockedOn=n,!1;e.shift()}return!0}function _g(t,e,n){_l(t)&&n.delete(e)}function gA(){Jd=!1,Rr!==null&&_l(Rr)&&(Rr=null),br!==null&&_l(br)&&(br=null),Mr!==null&&_l(Mr)&&(Mr=null),Wo.forEach(_g),qo.forEach(_g)}function js(t,e){t.blockedOn===e&&(t.blockedOn=null,Jd||(Jd=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,gA)))}function Jo(t){function e(i){return js(i,t)}if(0<$a.length){js($a[0],t);for(var n=1;n<$a.length;n++){var r=$a[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&js(Rr,t),br!==null&&js(br,t),Mr!==null&&js(Mr,t),Wo.forEach(e),qo.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)Hw(n),n.blockedOn===null&&Er.shift()}var ds=fr.ReactCurrentBatchConfig,Jl=!0;function yA(t,e,n,r){var i=Fe,s=ds.transition;ds.transition=null;try{Fe=1,$h(t,e,n,r)}finally{Fe=i,ds.transition=s}}function vA(t,e,n,r){var i=Fe,s=ds.transition;ds.transition=null;try{Fe=4,$h(t,e,n,r)}finally{Fe=i,ds.transition=s}}function $h(t,e,n,r){if(Jl){var i=Kd(t,e,n,r);if(i===null)$c(t,e,r,Kl,n),vg(t,r);else if(mA(i,t,e,n,r))r.stopPropagation();else if(vg(t,r),e&4&&-1<pA.indexOf(t)){for(;i!==null;){var s=ya(i);if(s!==null&&Bw(s),s=Kd(t,e,n,r),s===null&&$c(t,e,r,Kl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $c(t,e,r,null,n)}}var Kl=null;function Kd(t,e,n,r){if(Kl=null,t=Vh(r),t=ui(t),t!==null)if(e=ki(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kl=t,null}function Ww(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sA()){case Uh:return 1;case Lw:return 4;case Wl:case oA:return 16;case Vw:return 536870912;default:return 16}default:return 16}}var Ir=null,zh=null,wl=null;function qw(){if(wl)return wl;var t,e=zh,n=e.length,r,i="value"in Ir?Ir.value:Ir.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wl=i.slice(t,1<r?1-r:void 0)}function xl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function za(){return!0}function wg(){return!1}function ln(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?za:wg,this.isPropagationStopped=wg,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),e}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gh=ln(Ls),ga=tt({},Ls,{view:0,detail:0}),_A=ln(ga),Mc,Nc,eo,Bu=tt({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eo&&(eo&&t.type==="mousemove"?(Mc=t.screenX-eo.screenX,Nc=t.screenY-eo.screenY):Nc=Mc=0,eo=t),Mc)},movementY:function(t){return"movementY"in t?t.movementY:Nc}}),xg=ln(Bu),wA=tt({},Bu,{dataTransfer:0}),xA=ln(wA),CA=tt({},ga,{relatedTarget:0}),Dc=ln(CA),TA=tt({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),SA=ln(TA),EA=tt({},Ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AA=ln(EA),kA=tt({},Ls,{data:0}),Cg=ln(kA),IA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RA[t])?!!e[t]:!1}function Hh(){return bA}var MA=tt({},ga,{key:function(t){if(t.key){var e=IA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hh,charCode:function(t){return t.type==="keypress"?xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NA=ln(MA),DA=tt({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=ln(DA),FA=tt({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hh}),LA=ln(FA),VA=tt({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),UA=ln(VA),OA=tt({},Bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BA=ln(OA),$A=[9,13,27,32],Wh=or&&"CompositionEvent"in window,ko=null;or&&"documentMode"in document&&(ko=document.documentMode);var zA=or&&"TextEvent"in window&&!ko,Jw=or&&(!Wh||ko&&8<ko&&11>=ko),Sg=" ",Eg=!1;function Kw(t,e){switch(t){case"keyup":return $A.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wi=!1;function GA(t,e){switch(t){case"compositionend":return Zw(e);case"keypress":return e.which!==32?null:(Eg=!0,Sg);case"textInput":return t=e.data,t===Sg&&Eg?null:t;default:return null}}function HA(t,e){if(Wi)return t==="compositionend"||!Wh&&Kw(t,e)?(t=qw(),wl=zh=Ir=null,Wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jw&&e.locale!=="ko"?null:e.data;default:return null}}var WA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WA[t.type]:e==="textarea"}function Yw(t,e,n,r){kw(r),e=Zl(e,"onChange"),0<e.length&&(n=new Gh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Io=null,Ko=null;function qA(t){ax(t,0)}function $u(t){var e=Ki(t);if(ww(e))return t}function JA(t,e){if(t==="change")return e}var Xw=!1;if(or){var Fc;if(or){var Lc="oninput"in document;if(!Lc){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),Lc=typeof kg.oninput=="function"}Fc=Lc}else Fc=!1;Xw=Fc&&(!document.documentMode||9<document.documentMode)}function Ig(){Io&&(Io.detachEvent("onpropertychange",Qw),Ko=Io=null)}function Qw(t){if(t.propertyName==="value"&&$u(Ko)){var e=[];Yw(e,Ko,t,Vh(t)),bw(qA,e)}}function KA(t,e,n){t==="focusin"?(Ig(),Io=e,Ko=n,Io.attachEvent("onpropertychange",Qw)):t==="focusout"&&Ig()}function ZA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(Ko)}function YA(t,e){if(t==="click")return $u(e)}function XA(t,e){if(t==="input"||t==="change")return $u(e)}function QA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:QA;function Zo(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rd.call(e,i)||!Fn(t[i],e[i]))return!1}return!0}function Pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rg(t,e){var n=Pg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pg(n)}}function jw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ex(){for(var t=window,e=zl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zl(t.document)}return e}function qh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jA(t){var e=ex(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jw(n.ownerDocument.documentElement,n)){if(r!==null&&qh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Rg(n,s);var o=Rg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ek=or&&"documentMode"in document&&11>=document.documentMode,qi=null,Zd=null,Po=null,Yd=!1;function bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yd||qi==null||qi!==zl(r)||(r=qi,"selectionStart"in r&&qh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Po&&Zo(Po,r)||(Po=r,r=Zl(Zd,"onSelect"),0<r.length&&(e=new Gh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qi)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ji={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},Vc={},tx={};or&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function zu(t){if(Vc[t])return Vc[t];if(!Ji[t])return t;var e=Ji[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tx)return Vc[t]=e[n];return t}var nx=zu("animationend"),rx=zu("animationiteration"),ix=zu("animationstart"),sx=zu("transitionend"),ox=new Map,Mg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){ox.set(t,e),Ai(e,[t])}for(var Uc=0;Uc<Mg.length;Uc++){var Oc=Mg[Uc],tk=Oc.toLowerCase(),nk=Oc[0].toUpperCase()+Oc.slice(1);qr(tk,"on"+nk)}qr(nx,"onAnimationEnd");qr(rx,"onAnimationIteration");qr(ix,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(sx,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(co));function Ng(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tA(r,e,void 0,t),t.currentTarget=null}function ax(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Ng(i,a,d),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Ng(i,a,d),s=c}}}if(Hl)throw t=Wd,Hl=!1,Wd=null,t}function ze(t,e){var n=e[tf];n===void 0&&(n=e[tf]=new Set);var r=t+"__bubble";n.has(r)||(lx(e,t,2,!1),n.add(r))}function Bc(t,e,n){var r=0;e&&(r|=4),lx(n,t,r,e)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Yo(t){if(!t[Ha]){t[Ha]=!0,mw.forEach(function(n){n!=="selectionchange"&&(rk.has(n)||Bc(n,!1,t),Bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ha]||(e[Ha]=!0,Bc("selectionchange",!1,e))}}function lx(t,e,n,r){switch(Ww(e)){case 1:var i=yA;break;case 4:i=vA;break;default:i=$h}n=i.bind(null,e,n,t),i=void 0,!Hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $c(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ui(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}bw(function(){var d=s,f=Vh(n),h=[];e:{var p=ox.get(t);if(p!==void 0){var m=Gh,_=t;switch(t){case"keypress":if(xl(n)===0)break e;case"keydown":case"keyup":m=NA;break;case"focusin":_="focus",m=Dc;break;case"focusout":_="blur",m=Dc;break;case"beforeblur":case"afterblur":m=Dc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=xA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=LA;break;case nx:case rx:case ix:m=SA;break;case sx:m=UA;break;case"scroll":m=_A;break;case"wheel":m=BA;break;case"copy":case"cut":case"paste":m=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Tg}var g=(e&4)!==0,x=!g&&t==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var v=d,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=Ho(v,y),E!=null&&g.push(Xo(v,E,w)))),x)break;v=v.return}0<g.length&&(p=new m(p,_,null,n,f),h.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==zd&&(_=n.relatedTarget||n.fromElement)&&(ui(_)||_[ar]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=d,_=_?ui(_):null,_!==null&&(x=ki(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=d),m!==_)){if(g=xg,E="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Tg,E="onPointerLeave",y="onPointerEnter",v="pointer"),x=m==null?p:Ki(m),w=_==null?p:Ki(_),p=new g(E,v+"leave",m,n,f),p.target=x,p.relatedTarget=w,E=null,ui(f)===d&&(g=new g(y,v+"enter",_,n,f),g.target=w,g.relatedTarget=x,E=g),x=E,m&&_)t:{for(g=m,y=_,v=0,w=g;w;w=Ni(w))v++;for(w=0,E=y;E;E=Ni(E))w++;for(;0<v-w;)g=Ni(g),v--;for(;0<w-v;)y=Ni(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Ni(g),y=Ni(y)}g=null}else g=null;m!==null&&Dg(h,p,m,g,!1),_!==null&&x!==null&&Dg(h,x,_,g,!0)}}e:{if(p=d?Ki(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=JA;else if(Ag(p))if(Xw)A=XA;else{A=ZA;var P=KA}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=YA);if(A&&(A=A(t,d))){Yw(h,A,n,f);break e}P&&P(t,p,d),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Vd(p,"number",p.value)}switch(P=d?Ki(d):window,t){case"focusin":(Ag(P)||P.contentEditable==="true")&&(qi=P,Zd=d,Po=null);break;case"focusout":Po=Zd=qi=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,bg(h,n,f);break;case"selectionchange":if(ek)break;case"keydown":case"keyup":bg(h,n,f)}var R;if(Wh)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Wi?Kw(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Jw&&n.locale!=="ko"&&(Wi||N!=="onCompositionStart"?N==="onCompositionEnd"&&Wi&&(R=qw()):(Ir=f,zh="value"in Ir?Ir.value:Ir.textContent,Wi=!0)),P=Zl(d,N),0<P.length&&(N=new Cg(N,t,null,n,f),h.push({event:N,listeners:P}),R?N.data=R:(R=Zw(n),R!==null&&(N.data=R)))),(R=zA?GA(t,n):HA(t,n))&&(d=Zl(d,"onBeforeInput"),0<d.length&&(f=new Cg("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=R))}ax(h,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ho(t,n),s!=null&&r.unshift(Xo(t,s,i)),s=Ho(t,e),s!=null&&r.push(Xo(t,s,i))),t=t.return}return r}function Ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,i?(c=Ho(n,s),c!=null&&o.unshift(Xo(n,c,a))):i||(c=Ho(n,s),c!=null&&o.push(Xo(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ik=/\r\n?/g,sk=/\u0000|\uFFFD/g;function Fg(t){return(typeof t=="string"?t:""+t).replace(ik,`
`).replace(sk,"")}function Wa(t,e,n){if(e=Fg(e),Fg(t)!==e&&n)throw Error(Q(425))}function Yl(){}var Xd=null,Qd=null;function jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,ok=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,ak=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(t){return Lg.resolve(null).then(t).catch(lk)}:ef;function lk(t){setTimeout(function(){throw t})}function zc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jo(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),$n="__reactFiber$"+Vs,Qo="__reactProps$"+Vs,ar="__reactContainer$"+Vs,tf="__reactEvents$"+Vs,uk="__reactListeners$"+Vs,ck="__reactHandles$"+Vs;function ui(t){var e=t[$n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[$n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vg(t);t!==null;){if(n=t[$n])return n;t=Vg(t)}return e}t=n,n=t.parentNode}return null}function ya(t){return t=t[$n]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Gu(t){return t[Qo]||null}var nf=[],Zi=-1;function Jr(t){return{current:t}}function He(t){0>Zi||(t.current=nf[Zi],nf[Zi]=null,Zi--)}function $e(t,e){Zi++,nf[Zi]=t.current,t.current=e}var zr={},Nt=Jr(zr),Wt=Jr(!1),yi=zr;function ws(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qt(t){return t=t.childContextTypes,t!=null}function Xl(){He(Wt),He(Nt)}function Ug(t,e,n){if(Nt.current!==zr)throw Error(Q(168));$e(Nt,e),$e(Wt,n)}function ux(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,K1(t)||"Unknown",i));return tt({},n,r)}function Ql(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,yi=Nt.current,$e(Nt,t),$e(Wt,Wt.current),!0}function Og(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=ux(t,e,yi),r.__reactInternalMemoizedMergedChildContext=t,He(Wt),He(Nt),$e(Nt,t)):He(Wt),$e(Wt,n)}var jn=null,Hu=!1,Gc=!1;function cx(t){jn===null?jn=[t]:jn.push(t)}function dk(t){Hu=!0,cx(t)}function Kr(){if(!Gc&&jn!==null){Gc=!0;var t=0,e=Fe;try{var n=jn;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Hu=!1}catch(i){throw jn!==null&&(jn=jn.slice(t+1)),Fw(Uh,Kr),i}finally{Fe=e,Gc=!1}}return null}var Yi=[],Xi=0,jl=null,eu=0,fn=[],hn=0,vi=null,er=1,tr="";function ri(t,e){Yi[Xi++]=eu,Yi[Xi++]=jl,jl=t,eu=e}function dx(t,e,n){fn[hn++]=er,fn[hn++]=tr,fn[hn++]=vi,vi=t;var r=er;t=tr;var i=32-Nn(r)-1;r&=~(1<<i),n+=1;var s=32-Nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,er=1<<32-Nn(e)+i|n<<i|r,tr=s+t}else er=1<<s|n<<i|r,tr=t}function Jh(t){t.return!==null&&(ri(t,1),dx(t,1,0))}function Kh(t){for(;t===jl;)jl=Yi[--Xi],Yi[Xi]=null,eu=Yi[--Xi],Yi[Xi]=null;for(;t===vi;)vi=fn[--hn],fn[hn]=null,tr=fn[--hn],fn[hn]=null,er=fn[--hn],fn[hn]=null}var tn=null,en=null,Ke=!1,Rn=null;function fx(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,en=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,en=null,!0):!1;default:return!1}}function rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sf(t){if(Ke){var e=en;if(e){var n=e;if(!Bg(t,e)){if(rf(t))throw Error(Q(418));e=Nr(n.nextSibling);var r=tn;e&&Bg(t,e)?fx(r,n):(t.flags=t.flags&-4097|2,Ke=!1,tn=t)}}else{if(rf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ke=!1,tn=t}}}function $g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function qa(t){if(t!==tn)return!1;if(!Ke)return $g(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jd(t.type,t.memoizedProps)),e&&(e=en)){if(rf(t))throw hx(),Error(Q(418));for(;e;)fx(t,e),e=Nr(e.nextSibling)}if($g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=tn?Nr(t.stateNode.nextSibling):null;return!0}function hx(){for(var t=en;t;)t=Nr(t.nextSibling)}function xs(){en=tn=null,Ke=!1}function Zh(t){Rn===null?Rn=[t]:Rn.push(t)}var fk=fr.ReactCurrentBatchConfig;function to(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Ja(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zg(t){var e=t._init;return e(t._payload)}function px(t){function e(y,v){if(t){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Vr(y,v),y.index=0,y.sibling=null,y}function s(y,v,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,E){return v===null||v.tag!==6?(v=Yc(w,y.mode,E),v.return=y,v):(v=i(v,w),v.return=y,v)}function c(y,v,w,E){var A=w.type;return A===Hi?f(y,v,w.props.children,E,w.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===xr&&zg(A)===v.type)?(E=i(v,w.props),E.ref=to(y,v,w),E.return=y,E):(E=Il(w.type,w.key,w.props,null,y.mode,E),E.ref=to(y,v,w),E.return=y,E)}function d(y,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Xc(w,y.mode,E),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function f(y,v,w,E,A){return v===null||v.tag!==7?(v=mi(w,y.mode,E,A),v.return=y,v):(v=i(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Yc(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case La:return w=Il(v.type,v.key,v.props,null,y.mode,w),w.ref=to(y,null,v),w.return=y,w;case Gi:return v=Xc(v,y.mode,w),v.return=y,v;case xr:var E=v._init;return h(y,E(v._payload),w)}if(lo(v)||Ys(v))return v=mi(v,y.mode,w,null),v.return=y,v;Ja(y,v)}return null}function p(y,v,w,E){var A=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(y,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case La:return w.key===A?c(y,v,w,E):null;case Gi:return w.key===A?d(y,v,w,E):null;case xr:return A=w._init,p(y,v,A(w._payload),E)}if(lo(w)||Ys(w))return A!==null?null:f(y,v,w,E,null);Ja(y,w)}return null}function m(y,v,w,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,a(v,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case La:return y=y.get(E.key===null?w:E.key)||null,c(v,y,E,A);case Gi:return y=y.get(E.key===null?w:E.key)||null,d(v,y,E,A);case xr:var P=E._init;return m(y,v,w,P(E._payload),A)}if(lo(E)||Ys(E))return y=y.get(w)||null,f(v,y,E,A,null);Ja(v,E)}return null}function _(y,v,w,E){for(var A=null,P=null,R=v,N=v=0,D=null;R!==null&&N<w.length;N++){R.index>N?(D=R,R=null):D=R.sibling;var F=p(y,R,w[N],E);if(F===null){R===null&&(R=D);break}t&&R&&F.alternate===null&&e(y,R),v=s(F,v,N),P===null?A=F:P.sibling=F,P=F,R=D}if(N===w.length)return n(y,R),Ke&&ri(y,N),A;if(R===null){for(;N<w.length;N++)R=h(y,w[N],E),R!==null&&(v=s(R,v,N),P===null?A=R:P.sibling=R,P=R);return Ke&&ri(y,N),A}for(R=r(y,R);N<w.length;N++)D=m(R,y,N,w[N],E),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?N:D.key),v=s(D,v,N),P===null?A=D:P.sibling=D,P=D);return t&&R.forEach(function(q){return e(y,q)}),Ke&&ri(y,N),A}function g(y,v,w,E){var A=Ys(w);if(typeof A!="function")throw Error(Q(150));if(w=A.call(w),w==null)throw Error(Q(151));for(var P=A=null,R=v,N=v=0,D=null,F=w.next();R!==null&&!F.done;N++,F=w.next()){R.index>N?(D=R,R=null):D=R.sibling;var q=p(y,R,F.value,E);if(q===null){R===null&&(R=D);break}t&&R&&q.alternate===null&&e(y,R),v=s(q,v,N),P===null?A=q:P.sibling=q,P=q,R=D}if(F.done)return n(y,R),Ke&&ri(y,N),A;if(R===null){for(;!F.done;N++,F=w.next())F=h(y,F.value,E),F!==null&&(v=s(F,v,N),P===null?A=F:P.sibling=F,P=F);return Ke&&ri(y,N),A}for(R=r(y,R);!F.done;N++,F=w.next())F=m(R,y,N,F.value,E),F!==null&&(t&&F.alternate!==null&&R.delete(F.key===null?N:F.key),v=s(F,v,N),P===null?A=F:P.sibling=F,P=F);return t&&R.forEach(function(I){return e(y,I)}),Ke&&ri(y,N),A}function x(y,v,w,E){if(typeof w=="object"&&w!==null&&w.type===Hi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case La:e:{for(var A=w.key,P=v;P!==null;){if(P.key===A){if(A=w.type,A===Hi){if(P.tag===7){n(y,P.sibling),v=i(P,w.props.children),v.return=y,y=v;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===xr&&zg(A)===P.type){n(y,P.sibling),v=i(P,w.props),v.ref=to(y,P,w),v.return=y,y=v;break e}n(y,P);break}else e(y,P);P=P.sibling}w.type===Hi?(v=mi(w.props.children,y.mode,E,w.key),v.return=y,y=v):(E=Il(w.type,w.key,w.props,null,y.mode,E),E.ref=to(y,v,w),E.return=y,y=E)}return o(y);case Gi:e:{for(P=w.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Xc(w,y.mode,E),v.return=y,y=v}return o(y);case xr:return P=w._init,x(y,v,P(w._payload),E)}if(lo(w))return _(y,v,w,E);if(Ys(w))return g(y,v,w,E);Ja(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,w),v.return=y,y=v):(n(y,v),v=Yc(w,y.mode,E),v.return=y,y=v),o(y)):n(y,v)}return x}var Cs=px(!0),mx=px(!1),tu=Jr(null),nu=null,Qi=null,Yh=null;function Xh(){Yh=Qi=nu=null}function Qh(t){var e=tu.current;He(tu),t._currentValue=e}function of(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fs(t,e){nu=t,Yh=Qi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Yh!==t)if(t={context:t,memoizedValue:e,next:null},Qi===null){if(nu===null)throw Error(Q(308));Qi=t,nu.dependencies={lanes:0,firstContext:t}}else Qi=Qi.next=t;return e}var ci=null;function jh(t){ci===null?ci=[t]:ci.push(t)}function gx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jh(e)):(n.next=i.next,i.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,lr(t,n)}return i=r.interleaved,i===null?(e.next=e,jh(r)):(e.next=i.next,i.next=e),r.interleaved=e,lr(t,n)}function Cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oh(t,n)}}function Gg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ru(t,e,n,r){var i=t.updateQueue;Cr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(s!==null){var h=i.baseState;o=0,f=d=c=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,g=a;switch(p=e,m=n,g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=tt({},h,p);break e;case 2:Cr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=h}}function Hg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var va={},Hn=Jr(va),jo=Jr(va),ea=Jr(va);function di(t){if(t===va)throw Error(Q(174));return t}function tp(t,e){switch($e(ea,e),$e(jo,t),$e(Hn,va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Od(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Od(e,t)}He(Hn),$e(Hn,e)}function Ts(){He(Hn),He(jo),He(ea)}function vx(t){di(ea.current);var e=di(Hn.current),n=Od(e,t.type);e!==n&&($e(jo,t),$e(Hn,n))}function np(t){jo.current===t&&(He(Hn),He(jo))}var Qe=Jr(0);function iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hc=[];function rp(){for(var t=0;t<Hc.length;t++)Hc[t]._workInProgressVersionPrimary=null;Hc.length=0}var Tl=fr.ReactCurrentDispatcher,Wc=fr.ReactCurrentBatchConfig,_i=0,et=null,dt=null,gt=null,su=!1,Ro=!1,ta=0,hk=0;function At(){throw Error(Q(321))}function ip(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function sp(t,e,n,r,i,s){if(_i=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tl.current=t===null||t.memoizedState===null?yk:vk,t=n(r,i),Ro){s=0;do{if(Ro=!1,ta=0,25<=s)throw Error(Q(301));s+=1,gt=dt=null,e.updateQueue=null,Tl.current=_k,t=n(r,i)}while(Ro)}if(Tl.current=ou,e=dt!==null&&dt.next!==null,_i=0,gt=dt=et=null,su=!1,e)throw Error(Q(300));return t}function op(){var t=ta!==0;return ta=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?et.memoizedState=gt=t:gt=gt.next=t,gt}function xn(){if(dt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?et.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(Q(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?et.memoizedState=gt=t:gt=gt.next=t}return gt}function na(t,e){return typeof e=="function"?e(t):e}function qc(t){var e=xn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,d=s;do{var f=d.lane;if((_i&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,et.lanes|=f,wi|=f}d=d.next}while(d!==null&&d!==s);c===null?o=r:c.next=a,Fn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,wi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jc(t){var e=xn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Fn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _x(){}function wx(t,e){var n=et,r=xn(),i=e(),s=!Fn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ht=!0),r=r.queue,ap(Tx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,ra(9,Cx.bind(null,n,r,i,e),void 0,null),yt===null)throw Error(Q(349));_i&30||xx(n,e,i)}return i}function xx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cx(t,e,n,r){e.value=n,e.getSnapshot=r,Sx(e)&&Ex(t)}function Tx(t,e,n){return n(function(){Sx(e)&&Ex(t)})}function Sx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function Ex(t){var e=lr(t,1);e!==null&&Dn(e,t,1,-1)}function Wg(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:t},e.queue=t,t=t.dispatch=gk.bind(null,et,t),[e.memoizedState,t]}function ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ax(){return xn().memoizedState}function Sl(t,e,n,r){var i=Un();et.flags|=t,i.memoizedState=ra(1|e,n,void 0,r===void 0?null:r)}function Wu(t,e,n,r){var i=xn();r=r===void 0?null:r;var s=void 0;if(dt!==null){var o=dt.memoizedState;if(s=o.destroy,r!==null&&ip(r,o.deps)){i.memoizedState=ra(e,n,s,r);return}}et.flags|=t,i.memoizedState=ra(1|e,n,s,r)}function qg(t,e){return Sl(8390656,8,t,e)}function ap(t,e){return Wu(2048,8,t,e)}function kx(t,e){return Wu(4,2,t,e)}function Ix(t,e){return Wu(4,4,t,e)}function Px(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rx(t,e,n){return n=n!=null?n.concat([t]):null,Wu(4,4,Px.bind(null,e,t),n)}function lp(){}function bx(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ip(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mx(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ip(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Nx(t,e,n){return _i&21?(Fn(n,e)||(n=Uw(),et.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function pk(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Wc.transition;Wc.transition={};try{t(!1),e()}finally{Fe=n,Wc.transition=r}}function Dx(){return xn().memoizedState}function mk(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fx(t))Lx(e,n);else if(n=gx(t,e,n,r),n!==null){var i=Lt();Dn(n,t,r,i),Vx(n,e,r)}}function gk(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fx(t))Lx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Fn(a,o)){var c=e.interleaved;c===null?(i.next=i,jh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=gx(t,e,i,r),n!==null&&(i=Lt(),Dn(n,t,r,i),Vx(n,e,r))}}function Fx(t){var e=t.alternate;return t===et||e!==null&&e===et}function Lx(t,e){Ro=su=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oh(t,n)}}var ou={readContext:wn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},yk={readContext:wn,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:qg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sl(4194308,4,Px.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sl(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mk.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:Wg,useDebugValue:lp,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=Wg(!1),e=t[0];return t=pk.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=Un();if(Ke){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),yt===null)throw Error(Q(349));_i&30||xx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,qg(Tx.bind(null,r,s,t),[t]),r.flags|=2048,ra(9,Cx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Un(),e=yt.identifierPrefix;if(Ke){var n=tr,r=er;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vk={readContext:wn,useCallback:bx,useContext:wn,useEffect:ap,useImperativeHandle:Rx,useInsertionEffect:kx,useLayoutEffect:Ix,useMemo:Mx,useReducer:qc,useRef:Ax,useState:function(){return qc(na)},useDebugValue:lp,useDeferredValue:function(t){var e=xn();return Nx(e,dt.memoizedState,t)},useTransition:function(){var t=qc(na)[0],e=xn().memoizedState;return[t,e]},useMutableSource:_x,useSyncExternalStore:wx,useId:Dx,unstable_isNewReconciler:!1},_k={readContext:wn,useCallback:bx,useContext:wn,useEffect:ap,useImperativeHandle:Rx,useInsertionEffect:kx,useLayoutEffect:Ix,useMemo:Mx,useReducer:Jc,useRef:Ax,useState:function(){return Jc(na)},useDebugValue:lp,useDeferredValue:function(t){var e=xn();return dt===null?e.memoizedState=t:Nx(e,dt.memoizedState,t)},useTransition:function(){var t=Jc(na)[0],e=xn().memoizedState;return[t,e]},useMutableSource:_x,useSyncExternalStore:wx,useId:Dx,unstable_isNewReconciler:!1};function An(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qu={isMounted:function(t){return(t=t._reactInternals)?ki(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lt(),i=Lr(t),s=rr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Dr(t,s,i),e!==null&&(Dn(e,t,i,r),Cl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lt(),i=Lr(t),s=rr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Dr(t,s,i),e!==null&&(Dn(e,t,i,r),Cl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),r=Lr(t),i=rr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Dr(t,i,r),e!==null&&(Dn(e,t,r,n),Cl(e,t,r))}};function Jg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zo(n,r)||!Zo(i,s):!0}function Ux(t,e,n){var r=!1,i=zr,s=e.contextType;return typeof s=="object"&&s!==null?s=wn(s):(i=qt(e)?yi:Nt.current,r=e.contextTypes,s=(r=r!=null)?ws(t,i):zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Kg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qu.enqueueReplaceState(e,e.state,null)}function lf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ep(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wn(s):(s=qt(e)?yi:Nt.current,i.context=ws(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(af(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qu.enqueueReplaceState(i,i.state,null),ru(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ss(t,e){try{var n="",r=e;do n+=J1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wk=typeof WeakMap=="function"?WeakMap:Map;function Ox(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lu||(lu=!0,_f=r),uf(t,e)},n}function Bx(t,e,n){n=rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uf(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Dk.bind(null,t,e,n),e.then(t,t))}function Yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Dr(n,e,1))),n.lanes|=1),t)}var xk=fr.ReactCurrentOwner,Ht=!1;function Ft(t,e,n,r){e.child=t===null?mx(e,null,n,r):Cs(e,t.child,n,r)}function Qg(t,e,n,r,i){n=n.render;var s=e.ref;return fs(e,i),r=sp(t,e,n,r,s,i),n=op(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ur(t,e,i)):(Ke&&n&&Jh(e),e.flags|=1,Ft(t,e,r,i),e.child)}function jg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!gp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$x(t,e,s,r,i)):(t=Il(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zo,n(o,r)&&t.ref===e.ref)return ur(t,e,i)}return e.flags|=1,t=Vr(s,r),t.ref=e.ref,t.return=e,e.child=t}function $x(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zo(s,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,ur(t,e,i)}return cf(t,e,n,r,i)}function zx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(es,jt),jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(es,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(es,jt),jt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,$e(es,jt),jt|=r;return Ft(t,e,i,n),e.child}function Gx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cf(t,e,n,r,i){var s=qt(n)?yi:Nt.current;return s=ws(e,s),fs(e,i),n=sp(t,e,n,r,s,i),r=op(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ur(t,e,i)):(Ke&&r&&Jh(e),e.flags|=1,Ft(t,e,n,i),e.child)}function ey(t,e,n,r,i){if(qt(n)){var s=!0;Ql(e)}else s=!1;if(fs(e,i),e.stateNode===null)El(t,e),Ux(e,n,r),lf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=wn(d):(d=qt(n)?yi:Nt.current,d=ws(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Kg(e,o,r,d),Cr=!1;var p=e.memoizedState;o.state=p,ru(e,r,o,i),c=e.memoizedState,a!==r||p!==c||Wt.current||Cr?(typeof f=="function"&&(af(e,n,f,r),c=e.memoizedState),(a=Cr||Jg(e,n,a,r,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yx(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:An(e.type,a),o.props=d,h=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=qt(n)?yi:Nt.current,c=ws(e,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==c)&&Kg(e,o,r,c),Cr=!1,p=e.memoizedState,o.state=p,ru(e,r,o,i);var _=e.memoizedState;a!==h||p!==_||Wt.current||Cr?(typeof m=="function"&&(af(e,n,m,r),_=e.memoizedState),(d=Cr||Jg(e,n,d,r,p,_,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return df(t,e,n,r,s,i)}function df(t,e,n,r,i,s){Gx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Og(e,n,!1),ur(t,e,s);r=e.stateNode,xk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cs(e,t.child,null,s),e.child=Cs(e,null,a,s)):Ft(t,e,a,s),e.memoizedState=r.state,i&&Og(e,n,!0),e.child}function Hx(t){var e=t.stateNode;e.pendingContext?Ug(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ug(t,e.context,!1),tp(t,e.containerInfo)}function ty(t,e,n,r,i){return xs(),Zh(i),e.flags|=256,Ft(t,e,n,r),e.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function hf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wx(t,e,n){var r=e.pendingProps,i=Qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(Qe,i&1),t===null)return sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zu(o,r,0,null),t=mi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hf(n),e.memoizedState=ff,t):up(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ck(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Vr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Vr(a,s):(s=mi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ff,r}return s=t.child,t=s.sibling,r=Vr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function up(t,e){return e=Zu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ka(t,e,n,r){return r!==null&&Zh(r),Cs(e,t.child,null,n),t=up(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ck(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Kc(Error(Q(422))),Ka(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zu({mode:"visible",children:r.children},i,0,null),s=mi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Cs(e,t.child,null,o),e.child.memoizedState=hf(o),e.memoizedState=ff,s);if(!(e.mode&1))return Ka(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=Kc(s,r,void 0),Ka(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ht||a){if(r=yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lr(t,i),Dn(r,t,i,-1))}return mp(),r=Kc(Error(Q(421))),Ka(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Fk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,en=Nr(i.nextSibling),tn=e,Ke=!0,Rn=null,t!==null&&(fn[hn++]=er,fn[hn++]=tr,fn[hn++]=vi,er=t.id,tr=t.overflow,vi=e),e=up(e,r.children),e.flags|=4096,e)}function ny(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),of(t.return,e,n)}function Zc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ft(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ny(t,n,e);else if(t.tag===19)ny(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&iu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&iu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zc(e,!0,n,null,s);break;case"together":Zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function El(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tk(t,e,n){switch(e.tag){case 3:Hx(e),xs();break;case 5:vx(e);break;case 1:qt(e.type)&&Ql(e);break;case 4:tp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(tu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?Wx(t,e,n):($e(Qe,Qe.current&1),t=ur(t,e,n),t!==null?t.sibling:null);$e(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,zx(t,e,n)}return ur(t,e,n)}var Jx,pf,Kx,Zx;Jx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pf=function(){};Kx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,di(Hn.current);var s=null;switch(n){case"input":i=Fd(t,i),r=Fd(t,r),s=[];break;case"select":i=tt({},i,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":i=Ud(t,i),r=Ud(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yl)}Bd(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(zo.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(a=i?.[d],r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(zo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",t),s||a===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Zx=function(t,e,n,r){n!==r&&(e.flags|=4)};function no(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Sk(t,e,n){var r=e.pendingProps;switch(Kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return qt(e.type)&&Xl(),kt(e),null;case 3:return r=e.stateNode,Ts(),He(Wt),He(Nt),rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(Cf(Rn),Rn=null))),pf(t,e),kt(e),null;case 5:np(e);var i=di(ea.current);if(n=e.type,t!==null&&e.stateNode!=null)Kx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return kt(e),null}if(t=di(Hn.current),qa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[$n]=e,r[Qo]=s,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<co.length;i++)ze(co[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":dg(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":hg(r,s),ze("invalid",r)}Bd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wa(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wa(r.textContent,a,t),i=["children",""+a]):zo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Va(r),fg(r,s,!0);break;case"textarea":Va(r),pg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$n]=e,t[Qo]=r,Jx(t,e,!1,!1),e.stateNode=t;e:{switch(o=$d(n,r),n){case"dialog":ze("cancel",t),ze("close",t),i=r;break;case"iframe":case"object":case"embed":ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<co.length;i++)ze(co[i],t);i=r;break;case"source":ze("error",t),i=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),i=r;break;case"details":ze("toggle",t),i=r;break;case"input":dg(t,r),i=Fd(t,r),ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tt({},r,{value:void 0}),ze("invalid",t);break;case"textarea":hg(t,r),i=Ud(t,r),ze("invalid",t);break;default:i=r}Bd(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Aw(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sw(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Go(t,c):typeof c=="number"&&Go(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ze("scroll",t):c!=null&&Nh(t,s,c,o))}switch(n){case"input":Va(t),fg(t,r,!1);break;case"textarea":Va(t),pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ls(t,!!r.multiple,s,!1):r.defaultValue!=null&&ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Zx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=di(ea.current),di(Hn.current),qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[$n]=e,(s=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:Wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$n]=e,e.stateNode=r}return kt(e),null;case 13:if(He(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&en!==null&&e.mode&1&&!(e.flags&128))hx(),xs(),e.flags|=98560,s=!1;else if(s=qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[$n]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else Rn!==null&&(Cf(Rn),Rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?ft===0&&(ft=3):mp())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Ts(),pf(t,e),t===null&&Yo(e.stateNode.containerInfo),kt(e),null;case 10:return Qh(e.type._context),kt(e),null;case 17:return qt(e.type)&&Xl(),kt(e),null;case 19:if(He(Qe),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)no(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=iu(t),o!==null){for(e.flags|=128,no(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Qe,Qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ot()>Es&&(e.flags|=128,r=!0,no(s,!1),e.lanes=4194304)}else{if(!r)if(t=iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),no(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return kt(e),null}else 2*ot()-s.renderingStartTime>Es&&n!==1073741824&&(e.flags|=128,r=!0,no(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ot(),e.sibling=null,n=Qe.current,$e(Qe,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return pp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Ek(t,e){switch(Kh(e),e.tag){case 1:return qt(e.type)&&Xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ts(),He(Wt),He(Nt),rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return np(e),null;case 13:if(He(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(Qe),null;case 4:return Ts(),null;case 10:return Qh(e.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var Za=!1,Rt=!1,Ak=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function mf(t,e,n){try{n()}catch(r){it(t,e,r)}}var ry=!1;function kk(t,e){if(Xd=Jl,t=ex(),qh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++d===i&&(a=o),p===s&&++f===r&&(c=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qd={focusedElem:t,selectionRange:n},Jl=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,x=_.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:An(e.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(E){it(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return _=ry,ry=!1,_}function bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mf(e,n,s)}i=i.next}while(i!==r)}}function Ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yx(t){var e=t.alternate;e!==null&&(t.alternate=null,Yx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[Qo],delete e[tf],delete e[uk],delete e[ck])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xx(t){return t.tag===5||t.tag===3||t.tag===4}function iy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yl));else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}function vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vf(t,e,n),t=t.sibling;t!==null;)vf(t,e,n),t=t.sibling}var _t=null,In=!1;function gr(t,e,n){for(n=n.child;n!==null;)Qx(t,e,n),n=n.sibling}function Qx(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Ou,n)}catch{}switch(n.tag){case 5:Rt||ji(n,e);case 6:var r=_t,i=In;_t=null,gr(t,e,n),_t=r,In=i,_t!==null&&(In?(t=_t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(In?(t=_t,n=n.stateNode,t.nodeType===8?zc(t.parentNode,n):t.nodeType===1&&zc(t,n),Jo(t)):zc(_t,n.stateNode));break;case 4:r=_t,i=In,_t=n.stateNode.containerInfo,In=!0,gr(t,e,n),_t=r,In=i;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mf(n,e,o),i=i.next}while(i!==r)}gr(t,e,n);break;case 1:if(!Rt&&(ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){it(n,e,a)}gr(t,e,n);break;case 21:gr(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,gr(t,e,n),Rt=r):gr(t,e,n);break;default:gr(t,e,n)}}function sy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ak),e.forEach(function(r){var i=Lk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_t=a.stateNode,In=!1;break e;case 3:_t=a.stateNode.containerInfo,In=!0;break e;case 4:_t=a.stateNode.containerInfo,In=!0;break e}a=a.return}if(_t===null)throw Error(Q(160));Qx(s,o,i),_t=null,In=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){it(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jx(e,t),e=e.sibling}function jx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Ln(t),r&4){try{bo(3,t,t.return),Ju(3,t)}catch(g){it(t,t.return,g)}try{bo(5,t,t.return)}catch(g){it(t,t.return,g)}}break;case 1:Tn(e,t),Ln(t),r&512&&n!==null&&ji(n,n.return);break;case 5:if(Tn(e,t),Ln(t),r&512&&n!==null&&ji(n,n.return),t.flags&32){var i=t.stateNode;try{Go(i,"")}catch(g){it(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xw(i,s),$d(a,o);var d=$d(a,s);for(o=0;o<c.length;o+=2){var f=c[o],h=c[o+1];f==="style"?Aw(i,h):f==="dangerouslySetInnerHTML"?Sw(i,h):f==="children"?Go(i,h):Nh(i,f,h,d)}switch(a){case"input":Ld(i,s);break;case"textarea":Cw(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ls(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ls(i,!!s.multiple,s.defaultValue,!0):ls(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qo]=s}catch(g){it(t,t.return,g)}}break;case 6:if(Tn(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){it(t,t.return,g)}}break;case 3:if(Tn(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(e.containerInfo)}catch(g){it(t,t.return,g)}break;case 4:Tn(e,t),Ln(t);break;case 13:Tn(e,t),Ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fp=ot())),r&4&&sy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(d=Rt)||f,Tn(e,t),Rt=d):Tn(e,t),Ln(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ae=t,f=t.child;f!==null;){for(h=ae=f;ae!==null;){switch(p=ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:bo(4,p,p.return);break;case 1:ji(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(g){it(r,n,g)}}break;case 5:ji(p,p.return);break;case 22:if(p.memoizedState!==null){ay(h);continue}}m!==null?(m.return=p,ae=m):ay(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Ew("display",o))}catch(g){it(t,t.return,g)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){it(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Tn(e,t),Ln(t),r&4&&sy(t);break;case 21:break;default:Tn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xx(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Go(i,""),r.flags&=-33);var s=iy(t);vf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=iy(t);yf(t,a,o);break;default:throw Error(Q(161))}}catch(c){it(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ik(t,e,n){ae=t,eC(t)}function eC(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Za;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Rt;a=Za;var d=Rt;if(Za=o,(Rt=c)&&!d)for(ae=i;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?ly(i):c!==null?(c.return=o,ae=c):ly(i);for(;s!==null;)ae=s,eC(s),s=s.sibling;ae=i,Za=a,Rt=d}oy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):oy(t)}}function oy(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Ju(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:An(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Hg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Jo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Rt||e.flags&512&&gf(e)}catch(p){it(e,e.return,p)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function ay(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function ly(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ju(4,e)}catch(c){it(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){it(e,i,c)}}var s=e.return;try{gf(e)}catch(c){it(e,s,c)}break;case 5:var o=e.return;try{gf(e)}catch(c){it(e,o,c)}}}catch(c){it(e,e.return,c)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var Pk=Math.ceil,au=fr.ReactCurrentDispatcher,cp=fr.ReactCurrentOwner,yn=fr.ReactCurrentBatchConfig,Pe=0,yt=null,lt=null,Ct=0,jt=0,es=Jr(0),ft=0,ia=null,wi=0,Ku=0,dp=0,Mo=null,Gt=null,fp=0,Es=1/0,Qn=null,lu=!1,_f=null,Fr=null,Ya=!1,Pr=null,uu=0,No=0,wf=null,Al=-1,kl=0;function Lt(){return Pe&6?ot():Al!==-1?Al:Al=ot()}function Lr(t){return t.mode&1?Pe&2&&Ct!==0?Ct&-Ct:fk.transition!==null?(kl===0&&(kl=Uw()),kl):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Ww(t.type)),t):1}function Dn(t,e,n,r){if(50<No)throw No=0,wf=null,Error(Q(185));ma(t,n,r),(!(Pe&2)||t!==yt)&&(t===yt&&(!(Pe&2)&&(Ku|=n),ft===4&&Ar(t,Ct)),Jt(t,r),n===1&&Pe===0&&!(e.mode&1)&&(Es=ot()+500,Hu&&Kr()))}function Jt(t,e){var n=t.callbackNode;fA(t,e);var r=ql(t,t===yt?Ct:0);if(r===0)n!==null&&yg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yg(n),e===1)t.tag===0?dk(uy.bind(null,t)):cx(uy.bind(null,t)),ak(function(){!(Pe&6)&&Kr()}),n=null;else{switch(Ow(r)){case 1:n=Uh;break;case 4:n=Lw;break;case 16:n=Wl;break;case 536870912:n=Vw;break;default:n=Wl}n=lC(n,tC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tC(t,e){if(Al=-1,kl=0,Pe&6)throw Error(Q(327));var n=t.callbackNode;if(hs()&&t.callbackNode!==n)return null;var r=ql(t,t===yt?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cu(t,r);else{e=r;var i=Pe;Pe|=2;var s=rC();(yt!==t||Ct!==e)&&(Qn=null,Es=ot()+500,pi(t,e));do try{Mk();break}catch(a){nC(t,a)}while(!0);Xh(),au.current=s,Pe=i,lt!==null?e=0:(yt=null,Ct=0,e=ft)}if(e!==0){if(e===2&&(i=qd(t),i!==0&&(r=i,e=xf(t,i))),e===1)throw n=ia,pi(t,0),Ar(t,r),Jt(t,ot()),n;if(e===6)Ar(t,r);else{if(i=t.current.alternate,!(r&30)&&!Rk(i)&&(e=cu(t,r),e===2&&(s=qd(t),s!==0&&(r=s,e=xf(t,s))),e===1))throw n=ia,pi(t,0),Ar(t,r),Jt(t,ot()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:ii(t,Gt,Qn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=fp+500-ot(),10<e)){if(ql(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ef(ii.bind(null,t,Gt,Qn),e);break}ii(t,Gt,Qn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pk(r/1960))-r,10<r){t.timeoutHandle=ef(ii.bind(null,t,Gt,Qn),r);break}ii(t,Gt,Qn);break;case 5:ii(t,Gt,Qn);break;default:throw Error(Q(329))}}}return Jt(t,ot()),t.callbackNode===n?tC.bind(null,t):null}function xf(t,e){var n=Mo;return t.current.memoizedState.isDehydrated&&(pi(t,e).flags|=256),t=cu(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&Cf(e)),t}function Cf(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function Rk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Fn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~dp,e&=~Ku,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function uy(t){if(Pe&6)throw Error(Q(327));hs();var e=ql(t,0);if(!(e&1))return Jt(t,ot()),null;var n=cu(t,e);if(t.tag!==0&&n===2){var r=qd(t);r!==0&&(e=r,n=xf(t,r))}if(n===1)throw n=ia,pi(t,0),Ar(t,e),Jt(t,ot()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,Gt,Qn),Jt(t,ot()),null}function hp(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(Es=ot()+500,Hu&&Kr())}}function xi(t){Pr!==null&&Pr.tag===0&&!(Pe&6)&&hs();var e=Pe;Pe|=1;var n=yn.transition,r=Fe;try{if(yn.transition=null,Fe=1,t)return t()}finally{Fe=r,yn.transition=n,Pe=e,!(Pe&6)&&Kr()}}function pp(){jt=es.current,He(es)}function pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ok(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:Ts(),He(Wt),He(Nt),rp();break;case 5:np(r);break;case 4:Ts();break;case 13:He(Qe);break;case 19:He(Qe);break;case 10:Qh(r.type._context);break;case 22:case 23:pp()}n=n.return}if(yt=t,lt=t=Vr(t.current,null),Ct=jt=e,ft=0,ia=null,dp=Ku=wi=0,Gt=Mo=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ci=null}return t}function nC(t,e){do{var n=lt;try{if(Xh(),Tl.current=ou,su){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}su=!1}if(_i=0,gt=dt=et=null,Ro=!1,ta=0,cp.current=null,n===null||n.return===null){ft=1,ia=e,lt=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=Ct,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Yg(o);if(m!==null){m.flags&=-257,Xg(m,o,a,s,e),m.mode&1&&Zg(s,d,e),e=m,c=d;var _=e.updateQueue;if(_===null){var g=new Set;g.add(c),e.updateQueue=g}else _.add(c);break e}else{if(!(e&1)){Zg(s,d,e),mp();break e}c=Error(Q(426))}}else if(Ke&&a.mode&1){var x=Yg(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Xg(x,o,a,s,e),Zh(Ss(c,a));break e}}s=c=Ss(c,a),ft!==4&&(ft=2),Mo===null?Mo=[s]:Mo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Ox(s,c,e);Gg(s,y);break e;case 1:a=c;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fr===null||!Fr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Bx(s,a,e);Gg(s,E);break e}}s=s.return}while(s!==null)}sC(n)}catch(A){e=A,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function rC(){var t=au.current;return au.current=ou,t===null?ou:t}function mp(){(ft===0||ft===3||ft===2)&&(ft=4),yt===null||!(wi&268435455)&&!(Ku&268435455)||Ar(yt,Ct)}function cu(t,e){var n=Pe;Pe|=2;var r=rC();(yt!==t||Ct!==e)&&(Qn=null,pi(t,e));do try{bk();break}catch(i){nC(t,i)}while(!0);if(Xh(),Pe=n,au.current=r,lt!==null)throw Error(Q(261));return yt=null,Ct=0,ft}function bk(){for(;lt!==null;)iC(lt)}function Mk(){for(;lt!==null&&!rA();)iC(lt)}function iC(t){var e=aC(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?sC(t):lt=e,cp.current=null}function sC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ek(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,lt=null;return}}else if(n=Sk(n,e,jt),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);ft===0&&(ft=5)}function ii(t,e,n){var r=Fe,i=yn.transition;try{yn.transition=null,Fe=1,Nk(t,e,n,r)}finally{yn.transition=i,Fe=r}return null}function Nk(t,e,n,r){do hs();while(Pr!==null);if(Pe&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hA(t,s),t===yt&&(lt=yt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ya||(Ya=!0,lC(Wl,function(){return hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yn.transition,yn.transition=null;var o=Fe;Fe=1;var a=Pe;Pe|=4,cp.current=null,kk(t,n),jx(n,t),jA(Qd),Jl=!!Xd,Qd=Xd=null,t.current=n,Ik(n),iA(),Pe=a,Fe=o,yn.transition=s}else t.current=n;if(Ya&&(Ya=!1,Pr=t,uu=i),s=t.pendingLanes,s===0&&(Fr=null),aA(n.stateNode),Jt(t,ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lu)throw lu=!1,t=_f,_f=null,t;return uu&1&&t.tag!==0&&hs(),s=t.pendingLanes,s&1?t===wf?No++:(No=0,wf=t):No=0,Kr(),null}function hs(){if(Pr!==null){var t=Ow(uu),e=yn.transition,n=Fe;try{if(yn.transition=null,Fe=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,uu=0,Pe&6)throw Error(Q(331));var i=Pe;for(Pe|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ae=d;ae!==null;){var f=ae;switch(f.tag){case 0:case 11:case 15:bo(8,f,s)}var h=f.child;if(h!==null)h.return=f,ae=h;else for(;ae!==null;){f=ae;var p=f.sibling,m=f.return;if(Yx(f),f===d){ae=null;break}if(p!==null){p.return=m,ae=p;break}ae=m}}}var _=s.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bo(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ae=y;break e}ae=s.return}}var v=t.current;for(ae=v;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=v;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ju(9,a)}}catch(A){it(a,a.return,A)}if(a===o){ae=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ae=E;break e}ae=a.return}}if(Pe=i,Kr(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Ou,t)}catch{}r=!0}return r}finally{Fe=n,yn.transition=e}}return!1}function cy(t,e,n){e=Ss(n,e),e=Ox(t,e,1),t=Dr(t,e,1),e=Lt(),t!==null&&(ma(t,1,e),Jt(t,e))}function it(t,e,n){if(t.tag===3)cy(t,t,n);else for(;e!==null;){if(e.tag===3){cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Ss(n,t),t=Bx(e,t,1),e=Dr(e,t,1),t=Lt(),e!==null&&(ma(e,1,t),Jt(e,t));break}}e=e.return}}function Dk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(Ct&n)===n&&(ft===4||ft===3&&(Ct&130023424)===Ct&&500>ot()-fp?pi(t,0):dp|=n),Jt(t,e)}function oC(t,e){e===0&&(t.mode&1?(e=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):e=1);var n=Lt();t=lr(t,e),t!==null&&(ma(t,e,n),Jt(t,n))}function Fk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oC(t,n)}function Lk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),oC(t,n)}var aC;aC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,Tk(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,Ke&&e.flags&1048576&&dx(e,eu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;El(t,e),t=e.pendingProps;var i=ws(e,Nt.current);fs(e,n),i=sp(null,e,r,t,i,n);var s=op();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(s=!0,Ql(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ep(e),i.updater=qu,e.stateNode=i,i._reactInternals=e,lf(e,r,t,n),e=df(null,e,r,!0,s,n)):(e.tag=0,Ke&&s&&Jh(e),Ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(El(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Uk(r),t=An(r,t),i){case 0:e=cf(null,e,r,t,n);break e;case 1:e=ey(null,e,r,t,n);break e;case 11:e=Qg(null,e,r,t,n);break e;case 14:e=jg(null,e,r,An(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),cf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),ey(t,e,r,i,n);case 3:e:{if(Hx(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yx(t,e),ru(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ss(Error(Q(423)),e),e=ty(t,e,r,n,i);break e}else if(r!==i){i=Ss(Error(Q(424)),e),e=ty(t,e,r,n,i);break e}else for(en=Nr(e.stateNode.containerInfo.firstChild),tn=e,Ke=!0,Rn=null,n=mx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),r===i){e=ur(t,e,n);break e}Ft(t,e,r,n)}e=e.child}return e;case 5:return vx(e),t===null&&sf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jd(r,i)?o=null:s!==null&&jd(r,s)&&(e.flags|=32),Gx(t,e),Ft(t,e,o,n),e.child;case 6:return t===null&&sf(e),null;case 13:return Wx(t,e,n);case 4:return tp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cs(e,null,r,n):Ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),Qg(t,e,r,i,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$e(tu,r._currentValue),r._currentValue=o,s!==null)if(Fn(s.value,o)){if(s.children===i.children&&!Wt.current){e=ur(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=rr(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),of(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),of(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fs(e,n),i=wn(i),r=r(i),e.flags|=1,Ft(t,e,r,n),e.child;case 14:return r=e.type,i=An(r,e.pendingProps),i=An(r.type,i),jg(t,e,r,i,n);case 15:return $x(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:An(r,i),El(t,e),e.tag=1,qt(r)?(t=!0,Ql(e)):t=!1,fs(e,n),Ux(e,r,i),lf(e,r,i,n),df(null,e,r,!0,t,n);case 19:return qx(t,e,n);case 22:return zx(t,e,n)}throw Error(Q(156,e.tag))};function lC(t,e){return Fw(t,e)}function Vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new Vk(t,e,n,r)}function gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uk(t){if(typeof t=="function")return gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fh)return 11;if(t===Lh)return 14}return 2}function Vr(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Il(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hi:return mi(n.children,i,s,e);case Dh:o=8,i|=8;break;case bd:return t=pn(12,n,e,i|2),t.elementType=bd,t.lanes=s,t;case Md:return t=pn(13,n,e,i),t.elementType=Md,t.lanes=s,t;case Nd:return t=pn(19,n,e,i),t.elementType=Nd,t.lanes=s,t;case vw:return Zu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gw:o=10;break e;case yw:o=9;break e;case Fh:o=11;break e;case Lh:o=14;break e;case xr:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function mi(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function Zu(t,e,n,r){return t=pn(22,t,r,e),t.elementType=vw,t.lanes=n,t.stateNode={isHidden:!1},t}function Yc(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function Xc(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ok(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bc(0),this.expirationTimes=bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yp(t,e,n,r,i,s,o,a,c){return t=new Ok(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(s),t}function Bk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uC(t){if(!t)return zr;t=t._reactInternals;e:{if(ki(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(qt(n))return ux(t,n,e)}return e}function cC(t,e,n,r,i,s,o,a,c){return t=yp(n,r,!0,t,i,s,o,a,c),t.context=uC(null),n=t.current,r=Lt(),i=Lr(n),s=rr(r,i),s.callback=e??null,Dr(n,s,i),t.current.lanes=i,ma(t,i,r),Jt(t,r),t}function Yu(t,e,n,r){var i=e.current,s=Lt(),o=Lr(i);return n=uC(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dr(i,e,o),t!==null&&(Dn(t,i,o,s),Cl(t,i,o)),o}function du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vp(t,e){dy(t,e),(t=t.alternate)&&dy(t,e)}function $k(){return null}var dC=typeof reportError=="function"?reportError:function(t){console.error(t)};function _p(t){this._internalRoot=t}Xu.prototype.render=_p.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Yu(t,e,null,null)};Xu.prototype.unmount=_p.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){Yu(null,t,null,null)}),e[ar]=null}};function Xu(t){this._internalRoot=t}Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=zw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&Hw(t)}};function wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fy(){}function zk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=du(o);s.call(d)}}var o=cC(e,r,t,0,null,!1,!1,"",fy);return t._reactRootContainer=o,t[ar]=o.current,Yo(t.nodeType===8?t.parentNode:t),xi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=du(c);a.call(d)}}var c=yp(t,0,!1,null,null,!1,!1,"",fy);return t._reactRootContainer=c,t[ar]=c.current,Yo(t.nodeType===8?t.parentNode:t),xi(function(){Yu(e,c,n,r)}),c}function ju(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=du(o);a.call(c)}}Yu(e,o,t,i)}else o=zk(n,e,t,i,r);return du(o)}Bw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uo(e.pendingLanes);n!==0&&(Oh(e,n|1),Jt(e,ot()),!(Pe&6)&&(Es=ot()+500,Kr()))}break;case 13:xi(function(){var r=lr(t,1);if(r!==null){var i=Lt();Dn(r,t,1,i)}}),vp(t,1)}};Bh=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=Lt();Dn(e,t,134217728,n)}vp(t,134217728)}};$w=function(t){if(t.tag===13){var e=Lr(t),n=lr(t,e);if(n!==null){var r=Lt();Dn(n,t,e,r)}vp(t,e)}};zw=function(){return Fe};Gw=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Gd=function(t,e,n){switch(e){case"input":if(Ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Gu(r);if(!i)throw Error(Q(90));ww(r),Ld(r,i)}}}break;case"textarea":Cw(t,n);break;case"select":e=n.value,e!=null&&ls(t,!!n.multiple,e,!1)}};Pw=hp;Rw=xi;var Gk={usingClientEntryPoint:!1,Events:[ya,Ki,Gu,kw,Iw,hp]},ro={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hk={bundleType:ro.bundleType,version:ro.version,rendererPackageName:ro.rendererPackageName,rendererConfig:ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nw(t),t===null?null:t.stateNode},findFiberByHostInstance:ro.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{Ou=Xa.inject(Hk),Gn=Xa}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(e))throw Error(Q(200));return Bk(t,e,null,n)};an.createRoot=function(t,e){if(!wp(t))throw Error(Q(299));var n=!1,r="",i=dC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yp(t,1,!1,null,null,n,!1,r,i),t[ar]=e.current,Yo(t.nodeType===8?t.parentNode:t),new _p(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Nw(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return xi(t)};an.hydrate=function(t,e,n){if(!Qu(e))throw Error(Q(200));return ju(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!wp(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cC(e,null,t,1,n??null,i,!1,s,o),t[ar]=e.current,Yo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xu(e)};an.render=function(t,e,n){if(!Qu(e))throw Error(Q(200));return ju(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!Qu(t))throw Error(Q(40));return t._reactRootContainer?(xi(function(){ju(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};an.unstable_batchedUpdates=hp;an.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qu(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return ju(t,e,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function fC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fC)}catch(t){console.error(t)}}fC(),fw.exports=an;var Wk=fw.exports,hy=Wk;Pd.createRoot=hy.createRoot,Pd.hydrateRoot=hy.hydrateRoot;function Qa(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hC={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(d,f){if(!i[d]){if(!r[d]){var h=typeof Qa=="function"&&Qa;if(!f&&h)return h(d,!0);if(a)return a(d,!0);var p=new Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[d]={exports:{}};r[d][0].call(m.exports,function(_){var g=r[d][1][_];return o(g||_)},m,m.exports,n,r,i,s)}return i[d].exports}for(var a=typeof Qa=="function"&&Qa,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var d,f,h,p,m,_,g,x=[],y=0,v=c.length,w=v,E=s.getTypeOf(c)!=="string";y<c.length;)w=v-y,h=E?(d=c[y++],f=y<v?c[y++]:0,y<v?c[y++]:0):(d=c.charCodeAt(y++),f=y<v?c.charCodeAt(y++):0,y<v?c.charCodeAt(y++):0),p=d>>2,m=(3&d)<<4|f>>4,_=1<w?(15&f)<<2|h>>6:64,g=2<w?63&h:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(_)+a.charAt(g));return x.join("")},i.decode=function(c){var d,f,h,p,m,_,g=0,x=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&w--,c.charAt(c.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|w):new Array(0|w);g<c.length;)d=a.indexOf(c.charAt(g++))<<2|(p=a.indexOf(c.charAt(g++)))>>4,f=(15&p)<<4|(m=a.indexOf(c.charAt(g++)))>>2,h=(3&m)<<6|(_=a.indexOf(c.charAt(g++))),v[x++]=d,m!==64&&(v[x++]=f),_!==64&&(v[x++]=h);return v}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function d(f,h,p,m,_){this.compressedSize=f,this.uncompressedSize=h,this.crc32=p,this.compression=m,this.compressedContent=_}d.prototype={getContentWorker:function(){var f=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,h,p){return f.pipe(new a).pipe(new c("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,c=[],d=0;d<256;d++){a=d;for(var f=0;f<8;f++)a=1&a?3988292384^a>>>1:a>>>1;c[d]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(d,f,h,p){var m=o,_=p+h;d^=-1;for(var g=p;g<_;g++)d=d>>>8^m[255&(d^f[g])];return-1^d}(0|c,a,a.length,0):function(d,f,h,p){var m=o,_=p+h;d^=-1;for(var g=p;g<_;g++)d=d>>>8^m[255&(d^f.charCodeAt(g))];return-1^d}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),d=s?"uint8array":"array";function f(h,p){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(f,c),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(d,h.data),!1)},f.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},i.compressWorker=function(h){return new f("Deflate",h)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(m,_){var g,x="";for(g=0;g<_;g++)x+=String.fromCharCode(255&m),m>>>=8;return x}function o(m,_,g,x,y,v){var w,E,A=m.file,P=m.compression,R=v!==d.utf8encode,N=a.transformTo("string",v(A.name)),D=a.transformTo("string",d.utf8encode(A.name)),F=A.comment,q=a.transformTo("string",v(F)),I=a.transformTo("string",d.utf8encode(F)),M=D.length!==A.name.length,C=I.length!==F.length,O="",te="",G="",H=A.dir,B=A.date,K={crc32:0,compressedSize:0,uncompressedSize:0};_&&!g||(K.crc32=m.crc32,K.compressedSize=m.compressedSize,K.uncompressedSize=m.uncompressedSize);var L=0;_&&(L|=8),R||!M&&!C||(L|=2048);var U=0,le=0;H&&(U|=16),y==="UNIX"?(le=798,U|=function(X,Ae){var Le=X;return X||(Le=Ae?16893:33204),(65535&Le)<<16}(A.unixPermissions,H)):(le=20,U|=function(X){return 63&(X||0)}(A.dosPermissions)),w=B.getUTCHours(),w<<=6,w|=B.getUTCMinutes(),w<<=5,w|=B.getUTCSeconds()/2,E=B.getUTCFullYear()-1980,E<<=4,E|=B.getUTCMonth()+1,E<<=5,E|=B.getUTCDate(),M&&(te=s(1,1)+s(f(N),4)+D,O+="up"+s(te.length,2)+te),C&&(G=s(1,1)+s(f(q),4)+I,O+="uc"+s(G.length,2)+G);var ne="";return ne+=`
\0`,ne+=s(L,2),ne+=P.magic,ne+=s(w,2),ne+=s(E,2),ne+=s(K.crc32,4),ne+=s(K.compressedSize,4),ne+=s(K.uncompressedSize,4),ne+=s(N.length,2),ne+=s(O.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ne+N+O,dirRecord:h.CENTRAL_FILE_HEADER+s(le,2)+ne+s(q.length,2)+"\0\0\0\0"+s(U,4)+s(x,4)+N+O+q}}var a=n("../utils"),c=n("../stream/GenericWorker"),d=n("../utf8"),f=n("../crc32"),h=n("../signature");function p(m,_,g,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=g,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,c),p.prototype.push=function(m){var _=m.meta.percent||0,g=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(_+100*(g-x-1))/g:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var g=o(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,g=o(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),_)this.push({data:function(x){return h.DATA_DESCRIPTOR+s(x.crc32,4)+s(x.compressedSize,4)+s(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var g=this.bytesWritten-m,x=function(y,v,w,E,A){var P=a.transformTo("string",A(E));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(v,4)+s(w,4)+s(P.length,2)+P}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(g){_.processChunk(g)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(g){_.error(g)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var _=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var g=0;g<_.length;g++)try{_[g].error(m)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,c,d){var f=new o(c.streamFiles,d,c.platform,c.encodeFileName),h=0;try{a.forEach(function(p,m){h++;var _=function(v,w){var E=v||w,A=s[E];if(!A)throw new Error(E+" is not a valid compression method !");return A}(m.options.compression,c.compression),g=m.options.compressionOptions||c.compressionOptions||{},x=m.dir,y=m.date;m._compressWorker(_,g).withStreamInfo("file",{name:p,dir:x,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(p){f.error(p)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),c=n("./zipEntries"),d=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(p){return new o.Promise(function(m,_){var g=p.decompressed.getContentWorker().pipe(new d);g.on("error",function(x){_(x)}).on("end",function(){g.streamInfo.crc32!==p.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var _=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),f.isNode&&f.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(g){var x=new c(m);return x.load(g),x}).then(function(g){var x=[o.Promise.resolve(g)],y=g.files;if(m.checkCRC32)for(var v=0;v<y.length;v++)x.push(h(y[v]));return o.Promise.all(x)}).then(function(g){for(var x=g.shift(),y=x.files,v=0;v<y.length;v++){var w=y[v],E=w.fileNameStr,A=s.resolve(w.fileNameStr);_.file(A,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:m.createFolders}),w.dir||(_.file(A).unsafeOriginalName=E)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(c,d){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(a,o),a.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,c,d){s.call(this,c),this._helper=a;var f=this;a.on("data",function(h,p){f.push(h)||f._helper.pause(),d&&d(p)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(A,P,R){var N,D=a.getTypeOf(P),F=a.extend(R||{},f);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(A=y(A)),F.createFolders&&(N=x(A))&&v.call(this,N,!0);var q=D==="string"&&F.binary===!1&&F.base64===!1;R&&R.binary!==void 0||(F.binary=!q),(P instanceof h&&P.uncompressedSize===0||F.dir||!P||P.length===0)&&(F.base64=!1,F.binary=!0,P="",F.compression="STORE",D="string");var I=null;I=P instanceof h||P instanceof c?P:_.isNode&&_.isStream(P)?new g(A,P):a.prepareContent(A,P,F.binary,F.optimizedBinaryString,F.base64);var M=new p(A,I,F);this.files[A]=M}var o=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),x=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var P=A.lastIndexOf("/");return 0<P?A.substring(0,P):""},y=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},v=function(A,P){return P=P!==void 0?P:f.createFolders,A=y(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:P}),this.files[A]};function w(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var P,R,N;for(P in this.files)N=this.files[P],(R=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&A(R,N)},filter:function(A){var P=[];return this.forEach(function(R,N){A(R,N)&&P.push(N)}),P},file:function(A,P,R){if(arguments.length!==1)return A=this.root+A,s.call(this,A,P,R),this;if(w(A)){var N=A;return this.filter(function(F,q){return!q.dir&&N.test(F)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(w(A))return this.filter(function(D,F){return F.dir&&A.test(D)});var P=this.root+A,R=v.call(this,P),N=this.clone();return N.root=R.name,N},remove:function(A){A=this.root+A;var P=this.files[A];if(P||(A.slice(-1)!=="/"&&(A+="/"),P=this.files[A]),P&&!P.dir)delete this.files[A];else for(var R=this.filter(function(D,F){return F.name.slice(0,A.length)===A}),N=0;N<R.length;N++)delete this.files[R[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var P,R={};try{if((R=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var N=R.comment||this.comment||"";P=m.generateWorker(this,R,N)}catch(D){(P=new c("error")).error(D)}return new d(P,R.type||"string",R.mimeType)},generateAsync:function(A,P){return this.generateInternalStream(A).accumulate(P)},generateNodeStream:function(A,P){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(P)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),d=a.charCodeAt(1),f=a.charCodeAt(2),h=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===d&&this.data[p+2]===f&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),d=a.charCodeAt(1),f=a.charCodeAt(2),h=a.charCodeAt(3),p=this.readData(4);return c===p[0]&&d===p[1]&&f===p[2]&&h===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,d=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=a,d},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),d=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var p=s.getTypeOf(h);return s.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new d(h):o.uint8array?new f(s.transformTo("uint8array",h)):new a(s.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(c){s.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(a,s),a.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(a,o),a.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}o.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=s.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(c){a.processChunk(c)}),o.on("end",function(){a.end()}),o.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),d=n("../support"),f=n("../external"),h=null;if(d.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(_,g){return new f.Promise(function(x,y){var v=[],w=_._internalType,E=_._outputType,A=_._mimeType;_.on("data",function(P,R){v.push(P),g&&g(R)}).on("error",function(P){v=[],y(P)}).on("end",function(){try{var P=function(R,N,D){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),D);case"base64":return c.encode(N);default:return s.transformTo(R,N)}}(E,function(R,N){var D,F=0,q=null,I=0;for(D=0;D<N.length;D++)I+=N[D].length;switch(R){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(q=new Uint8Array(I),D=0;D<N.length;D++)q.set(N[D],F),F+=N[D].length;return q;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+R+"'")}}(w,v),A);x(P)}catch(R){y(R)}v=[]}).resume()})}function m(_,g,x){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=x,s.checkSupport(y),this._worker=_.pipe(new o(y)),_.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}m.prototype={accumulate:function(_){return p(this,_)},on:function(_,g){var x=this;return _==="data"?this._worker.on(_,function(y){g.call(x,y.data,y.meta)}):this._worker.on(_,function(){s.delay(g,arguments,x)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(_){var g,x,y,v,w,E=_.length,A=0;for(v=0;v<E;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<E&&(64512&(y=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),v++),A+=x<128?1:x<2048?2:x<65536?3:4;for(g=o.uint8array?new Uint8Array(A):new Array(A),v=w=0;w<A;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<E&&(64512&(y=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),v++),x<128?g[w++]=x:(x<2048?g[w++]=192|x>>>6:(x<65536?g[w++]=224|x>>>12:(g[w++]=240|x>>>18,g[w++]=128|x>>>12&63),g[w++]=128|x>>>6&63),g[w++]=128|63&x);return g}(m)},i.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(_){var g,x,y,v,w=_.length,E=new Array(2*w);for(g=x=0;g<w;)if((y=_[g++])<128)E[x++]=y;else if(4<(v=d[y]))E[x++]=65533,g+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&g<w;)y=y<<6|63&_[g++],v--;1<v?E[x++]=65533:y<65536?E[x++]=y:(y-=65536,E[x++]=55296|y>>10&1023,E[x++]=56320|1023&y)}return E.length!==x&&(E.subarray?E=E.subarray(0,x):E.length=x),s.applyFromCharCode(E)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(h,c),h.prototype.processChunk=function(m){var _=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=_;(_=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),_.set(g,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(v,w){var E;for((w=w||v.length)>v.length&&(w=v.length),E=w-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?w:E+d[v[E]]>w?E:w}(_),y=_;x!==_.length&&(o.uint8array?(y=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(y=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:i.utf8decode(y),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,s.inherits(p,c),p.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function d(g){return g}function f(g,x){for(var y=0;y<g.length;++y)x[y]=255&g.charCodeAt(y);return x}n("setimmediate"),i.newBlob=function(g,x){i.checkSupport("blob");try{return new Blob([g],{type:x})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,x,y){var v=[],w=0,E=g.length;if(E<=y)return String.fromCharCode.apply(null,g);for(;w<E;)x==="array"||x==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+y,E)))):v.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+y,E)))),w+=y;return v.join("")},stringifyByChar:function(g){for(var x="",y=0;y<g.length;y++)x+=String.fromCharCode(g[y]);return x},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(g){var x=65536,y=i.getTypeOf(g),v=!0;if(y==="uint8array"?v=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<x;)try{return h.stringifyByChunk(g,y,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(g)}function m(g,x){for(var y=0;y<g.length;y++)x[y]=g[y];return x}i.applyFromCharCode=p;var _={};_.string={string:d,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return _.string.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:function(g){return f(g,a.allocBuffer(g.length))}},_.array={string:p,array:d,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},_.arraybuffer={string:function(g){return p(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:d,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},_.uint8array={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:d,nodebuffer:function(g){return a.newBufferFrom(g)}},_.nodebuffer={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return _.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:d},i.transformTo=function(g,x){if(x=x||"",!g)return x;i.checkSupport(g);var y=i.getTypeOf(x);return _[y][g](x)},i.resolve=function(g){for(var x=g.split("/"),y=[],v=0;v<x.length;v++){var w=x[v];w==="."||w===""&&v!==0&&v!==x.length-1||(w===".."?y.pop():y.push(w))}return y.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var x,y,v="";for(y=0;y<(g||"").length;y++)v+="\\x"+((x=g.charCodeAt(y))<16?"0":"")+x.toString(16).toUpperCase();return v},i.delay=function(g,x,y){setImmediate(function(){g.apply(y||null,x||[])})},i.inherits=function(g,x){function y(){}y.prototype=x.prototype,g.prototype=new y},i.extend=function(){var g,x,y={};for(g=0;g<arguments.length;g++)for(x in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],x)&&y[x]===void 0&&(y[x]=arguments[g][x]);return y},i.prepareContent=function(g,x,y,v,w){return c.Promise.resolve(x).then(function(E){return s.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,P){var R=new FileReader;R.onload=function(N){A(N.target.result)},R.onerror=function(N){P(N.target.error)},R.readAsArrayBuffer(E)}):E}).then(function(E){var A=i.getTypeOf(E);return A?(A==="arraybuffer"?E=i.transformTo("uint8array",E):A==="string"&&(w?E=o.decode(E):y&&v!==!0&&(E=function(P){return f(P,s.uint8array?new Uint8Array(P.length):new Array(P.length))}(E))),E):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),c=n("./zipEntry"),d=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var m=this.reader.index;this.reader.setIndex(h);var _=this.reader.readString(4)===p;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=d.uint8array?"uint8array":"array",m=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,m,_=this.zip64EndOfCentralSize-44;0<_;)h=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=p-m;if(0<_)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),d=n("./utf8"),f=n("./compressions"),h=n("./support");function p(m,_){this.options=m,this.loadOptions=_}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var y in f)if(Object.prototype.hasOwnProperty.call(f,y)&&f[y].magic===x)return f[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,g,x,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)_=m.readInt(2),g=m.readInt(2),x=m.readData(g),this.extraFields[_]={id:_,length:g,value:x};m.setIndex(y)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var g=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var y=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=s(m.value);return _.readInt(1)!==1||c(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=s(m.value);return _.readInt(1)!==1||c(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(_,g,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=g,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),d=n("./compressedObject"),f=n("./stream/GenericWorker");s.prototype={internalStream:function(_){var g=null,x="string";try{if(!_)throw new Error("No output type specified.");var y=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(g=g.pipe(new c.Utf8EncodeWorker)),!v&&y&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(w){(g=new f("error")).error(w)}return new o(g,x,"")},async:function(_,g){return this.internalStream(_).accumulate(g)},nodeStream:function(_,g){return this.internalStream(_||"nodebuffer").toNodejsStream(g)},_compressWorker:function(_,g){if(this._data instanceof d&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(x,_,g)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)s.prototype[h[m]]=p;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var d=0,f=new c(_),h=s.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){_(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(_,0)};else{var p=new s.MessageChannel;p.port1.onmessage=_,o=function(){p.port2.postMessage(0)}}var m=[];function _(){var g,x;a=!0;for(var y=m.length;y;){for(x=m,m=[],g=-1;++g<y;)x[g]();y=m.length}a=!1}r.exports=function(g){m.push(g)!==1||a||o()}}).call(this,typeof Da<"u"?Da:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},c=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,y!==o&&g(this,y)}function p(y,v,w){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function m(y,v,w){s(function(){var E;try{E=v(w)}catch(A){return a.reject(y,A)}E===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,E)})}function _(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function g(y,v){var w=!1;function E(R){w||(w=!0,a.reject(y,R))}function A(R){w||(w=!0,a.resolve(y,R))}var P=x(function(){v(A,E)});P.status==="error"&&E(P.value)}function x(y,v){var w={};try{w.value=y(v),w.status="success"}catch(E){w.status="error",w.value=E}return w}(r.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(y()).then(function(){return w})},function(w){return v.resolve(y()).then(function(){throw w})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,v){if(typeof y!="function"&&this.state===d||typeof v!="function"&&this.state===c)return this;var w=new this.constructor(o);return this.state!==f?m(w,this.state===d?y:v,this.outcome):this.queue.push(new p(w,y,v)),w},p.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},p.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},p.prototype.callRejected=function(y){a.reject(this.promise,y)},p.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},a.resolve=function(y,v){var w=x(_,v);if(w.status==="error")return a.reject(y,w.value);var E=w.value;if(E)g(y,E);else{y.state=d,y.outcome=v;for(var A=-1,P=y.queue.length;++A<P;)y.queue[A].callFulfilled(v)}return y},a.reject=function(y,v){y.state=c,y.outcome=v;for(var w=-1,E=y.queue.length;++w<E;)y.queue[w].callRejected(v);return y},h.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},h.reject=function(y){var v=new this(o);return a.reject(v,y)},h.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,E=!1;if(!w)return this.resolve([]);for(var A=new Array(w),P=0,R=-1,N=new this(o);++R<w;)D(y[R],R);return N;function D(F,q){v.resolve(F).then(function(I){A[q]=I,++P!==w||E||(E=!0,a.resolve(N,A))},function(I){E||(E=!0,a.reject(N,I))})}},h.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,E=!1;if(!w)return this.resolve([]);for(var A=-1,P=new this(o);++A<w;)R=y[A],v.resolve(R).then(function(N){E||(E=!0,a.resolve(P,N))},function(N){E||(E=!0,a.reject(P,N))});var R;return P}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),d=n("./zlib/zstream"),f=Object.prototype.toString,h=0,p=-1,m=0,_=8;function g(y){if(!(this instanceof g))return new g(y);this.options=o.assign({level:p,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==h)throw new Error(c[w]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var E;if(E=typeof v.dictionary=="string"?a.string2buf(v.dictionary):f.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=s.deflateSetDictionary(this.strm,E))!==h)throw new Error(c[w]);this._dict_set=!0}}function x(y,v){var w=new g(v);if(w.push(y,!0),w.err)throw w.msg||c[w.err];return w.result}g.prototype.push=function(y,v){var w,E,A=this.strm,P=this.options.chunkSize;if(this.ended)return!1;E=v===~~v?v:v===!0?4:0,typeof y=="string"?A.input=a.string2buf(y):f.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(P),A.next_out=0,A.avail_out=P),(w=s.deflate(A,E))!==1&&w!==h)return this.onEnd(w),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&w!==1);return E===4?(w=s.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===h):E!==2||(this.onEnd(h),!(A.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=g,i.deflate=x,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,x(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,x(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),d=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||g&&g.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,x.windowBits);if(y!==c.Z_OK)throw new Error(d[y]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function _(g,x){var y=new m(x);if(y.push(g,!0),y.err)throw y.msg||d[y.err];return y.result}m.prototype.push=function(g,x){var y,v,w,E,A,P,R=this.strm,N=this.options.chunkSize,D=this.options.dictionary,F=!1;if(this.ended)return!1;v=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?R.input=a.binstring2buf(g):p.call(g)==="[object ArrayBuffer]"?R.input=new Uint8Array(g):R.input=g,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(N),R.next_out=0,R.avail_out=N),(y=s.inflate(R,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(P=typeof D=="string"?a.string2buf(D):p.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,y=s.inflateSetDictionary(this.strm,P)),y===c.Z_BUF_ERROR&&F===!0&&(y=c.Z_OK,F=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&y!==c.Z_STREAM_END&&(R.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(R.output,R.next_out),E=R.next_out-w,A=a.buf2string(R.output,w),R.next_out=E,R.avail_out=N-E,E&&o.arraySet(R.output,R.output,w,E,0),this.onData(A)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(F=!0)}while((0<R.avail_in||R.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=m,i.inflate=_,i.inflateRaw=function(g,x){return(x=x||{}).raw=!0,_(g,x)},i.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])}}return c},i.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var o={arraySet:function(c,d,f,h,p){if(d.subarray&&c.subarray)c.set(d.subarray(f,f+h),p);else for(var m=0;m<h;m++)c[p+m]=d[f+m]},flattenChunks:function(c){var d,f,h,p,m,_;for(d=h=0,f=c.length;d<f;d++)h+=c[d].length;for(_=new Uint8Array(h),d=p=0,f=c.length;d<f;d++)m=c[d],_.set(m,p),p+=m.length;return _}},a={arraySet:function(c,d,f,h,p){for(var m=0;m<h;m++)c[p+m]=d[f+m]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new s.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(h,p){if(p<65537&&(h.subarray&&a||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,p));for(var m="",_=0;_<p;_++)m+=String.fromCharCode(h[_]);return m}c[254]=c[254]=1,i.string2buf=function(h){var p,m,_,g,x,y=h.length,v=0;for(g=0;g<y;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(_=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),g++),v+=m<128?1:m<2048?2:m<65536?3:4;for(p=new s.Buf8(v),g=x=0;x<v;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(_=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),g++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},i.buf2binstring=function(h){return f(h,h.length)},i.binstring2buf=function(h){for(var p=new s.Buf8(h.length),m=0,_=p.length;m<_;m++)p[m]=h.charCodeAt(m);return p},i.buf2string=function(h,p){var m,_,g,x,y=p||h.length,v=new Array(2*y);for(m=_=0;m<y;)if((g=h[m++])<128)v[_++]=g;else if(4<(x=c[g]))v[_++]=65533,m+=x-1;else{for(g&=x===2?31:x===3?15:7;1<x&&m<y;)g=g<<6|63&h[m++],x--;1<x?v[_++]=65533:g<65536?v[_++]=g:(g-=65536,v[_++]=55296|g>>10&1023,v[_++]=56320|1023&g)}return f(v,_)},i.utf8border=function(h,p){var m;for((p=p||h.length)>h.length&&(p=h.length),m=p-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?p:m+c[h[m]]>p?m:p}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,c){for(var d=65535&s|0,f=s>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;f=f+(d=d+o[c++]|0)|0,--h;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a}();r.exports=function(o,a,c,d){var f=s,h=d+c;o^=-1;for(var p=d;p<h;p++)o=o>>>8^f[255&(o^a[p])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),c=n("./adler32"),d=n("./crc32"),f=n("./messages"),h=0,p=4,m=0,_=-2,g=-1,x=4,y=2,v=8,w=9,E=286,A=30,P=19,R=2*E+1,N=15,D=3,F=258,q=F+D+1,I=42,M=113,C=1,O=2,te=3,G=4;function H(T,J){return T.msg=f[J],J}function B(T){return(T<<1)-(4<T?9:0)}function K(T){for(var J=T.length;0<=--J;)T[J]=0}function L(T){var J=T.state,W=J.pending;W>T.avail_out&&(W=T.avail_out),W!==0&&(o.arraySet(T.output,J.pending_buf,J.pending_out,W,T.next_out),T.next_out+=W,J.pending_out+=W,T.total_out+=W,T.avail_out-=W,J.pending-=W,J.pending===0&&(J.pending_out=0))}function U(T,J){a._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,J),T.block_start=T.strstart,L(T.strm)}function le(T,J){T.pending_buf[T.pending++]=J}function ne(T,J){T.pending_buf[T.pending++]=J>>>8&255,T.pending_buf[T.pending++]=255&J}function X(T,J){var W,b,k=T.max_chain_length,V=T.strstart,Z=T.prev_length,Y=T.nice_match,$=T.strstart>T.w_size-q?T.strstart-(T.w_size-q):0,j=T.window,se=T.w_mask,re=T.prev,fe=T.strstart+F,Me=j[V+Z-1],Te=j[V+Z];T.prev_length>=T.good_match&&(k>>=2),Y>T.lookahead&&(Y=T.lookahead);do if(j[(W=J)+Z]===Te&&j[W+Z-1]===Me&&j[W]===j[V]&&j[++W]===j[V+1]){V+=2,W++;do;while(j[++V]===j[++W]&&j[++V]===j[++W]&&j[++V]===j[++W]&&j[++V]===j[++W]&&j[++V]===j[++W]&&j[++V]===j[++W]&&j[++V]===j[++W]&&j[++V]===j[++W]&&V<fe);if(b=F-(fe-V),V=fe-F,Z<b){if(T.match_start=J,Y<=(Z=b))break;Me=j[V+Z-1],Te=j[V+Z]}}while((J=re[J&se])>$&&--k!=0);return Z<=T.lookahead?Z:T.lookahead}function Ae(T){var J,W,b,k,V,Z,Y,$,j,se,re=T.w_size;do{if(k=T.window_size-T.lookahead-T.strstart,T.strstart>=re+(re-q)){for(o.arraySet(T.window,T.window,re,re,0),T.match_start-=re,T.strstart-=re,T.block_start-=re,J=W=T.hash_size;b=T.head[--J],T.head[J]=re<=b?b-re:0,--W;);for(J=W=re;b=T.prev[--J],T.prev[J]=re<=b?b-re:0,--W;);k+=re}if(T.strm.avail_in===0)break;if(Z=T.strm,Y=T.window,$=T.strstart+T.lookahead,j=k,se=void 0,se=Z.avail_in,j<se&&(se=j),W=se===0?0:(Z.avail_in-=se,o.arraySet(Y,Z.input,Z.next_in,se,$),Z.state.wrap===1?Z.adler=c(Z.adler,Y,se,$):Z.state.wrap===2&&(Z.adler=d(Z.adler,Y,se,$)),Z.next_in+=se,Z.total_in+=se,se),T.lookahead+=W,T.lookahead+T.insert>=D)for(V=T.strstart-T.insert,T.ins_h=T.window[V],T.ins_h=(T.ins_h<<T.hash_shift^T.window[V+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[V+D-1])&T.hash_mask,T.prev[V&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=V,V++,T.insert--,!(T.lookahead+T.insert<D)););}while(T.lookahead<q&&T.strm.avail_in!==0)}function Le(T,J){for(var W,b;;){if(T.lookahead<q){if(Ae(T),T.lookahead<q&&J===h)return C;if(T.lookahead===0)break}if(W=0,T.lookahead>=D&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),W!==0&&T.strstart-W<=T.w_size-q&&(T.match_length=X(T,W)),T.match_length>=D)if(b=a._tr_tally(T,T.strstart-T.match_start,T.match_length-D),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=D){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else b=a._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(b&&(U(T,!1),T.strm.avail_out===0))return C}return T.insert=T.strstart<D-1?T.strstart:D-1,J===p?(U(T,!0),T.strm.avail_out===0?te:G):T.last_lit&&(U(T,!1),T.strm.avail_out===0)?C:O}function xe(T,J){for(var W,b,k;;){if(T.lookahead<q){if(Ae(T),T.lookahead<q&&J===h)return C;if(T.lookahead===0)break}if(W=0,T.lookahead>=D&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=D-1,W!==0&&T.prev_length<T.max_lazy_match&&T.strstart-W<=T.w_size-q&&(T.match_length=X(T,W),T.match_length<=5&&(T.strategy===1||T.match_length===D&&4096<T.strstart-T.match_start)&&(T.match_length=D-1)),T.prev_length>=D&&T.match_length<=T.prev_length){for(k=T.strstart+T.lookahead-D,b=a._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-D),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=k&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=D-1,T.strstart++,b&&(U(T,!1),T.strm.avail_out===0))return C}else if(T.match_available){if((b=a._tr_tally(T,0,T.window[T.strstart-1]))&&U(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return C}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(b=a._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<D-1?T.strstart:D-1,J===p?(U(T,!0),T.strm.avail_out===0?te:G):T.last_lit&&(U(T,!1),T.strm.avail_out===0)?C:O}function Ie(T,J,W,b,k){this.good_length=T,this.max_lazy=J,this.nice_length=W,this.max_chain=b,this.func=k}function Ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*P+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*E+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*E+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qe(T){var J;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=y,(J=T.state).pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?I:M,T.adler=J.wrap===2?0:1,J.last_flush=h,a._tr_init(J),m):H(T,_)}function Kt(T){var J=qe(T);return J===m&&function(W){W.window_size=2*W.w_size,K(W.head),W.max_lazy_match=s[W.level].max_lazy,W.good_match=s[W.level].good_length,W.nice_match=s[W.level].nice_length,W.max_chain_length=s[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=D-1,W.match_available=0,W.ins_h=0}(T.state),J}function Zt(T,J,W,b,k,V){if(!T)return _;var Z=1;if(J===g&&(J=6),b<0?(Z=0,b=-b):15<b&&(Z=2,b-=16),k<1||w<k||W!==v||b<8||15<b||J<0||9<J||V<0||x<V)return H(T,_);b===8&&(b=9);var Y=new Ve;return(T.state=Y).strm=T,Y.wrap=Z,Y.gzhead=null,Y.w_bits=b,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=k+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+D-1)/D),Y.window=new o.Buf8(2*Y.w_size),Y.head=new o.Buf16(Y.hash_size),Y.prev=new o.Buf16(Y.w_size),Y.lit_bufsize=1<<k+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new o.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=J,Y.strategy=V,Y.method=W,Kt(T)}s=[new Ie(0,0,0,0,function(T,J){var W=65535;for(W>T.pending_buf_size-5&&(W=T.pending_buf_size-5);;){if(T.lookahead<=1){if(Ae(T),T.lookahead===0&&J===h)return C;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var b=T.block_start+W;if((T.strstart===0||T.strstart>=b)&&(T.lookahead=T.strstart-b,T.strstart=b,U(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-q&&(U(T,!1),T.strm.avail_out===0))return C}return T.insert=0,J===p?(U(T,!0),T.strm.avail_out===0?te:G):(T.strstart>T.block_start&&(U(T,!1),T.strm.avail_out),C)}),new Ie(4,4,8,4,Le),new Ie(4,5,16,8,Le),new Ie(4,6,32,32,Le),new Ie(4,4,16,16,xe),new Ie(8,16,32,32,xe),new Ie(8,16,128,128,xe),new Ie(8,32,128,256,xe),new Ie(32,128,258,1024,xe),new Ie(32,258,258,4096,xe)],i.deflateInit=function(T,J){return Zt(T,J,v,15,8,0)},i.deflateInit2=Zt,i.deflateReset=Kt,i.deflateResetKeep=qe,i.deflateSetHeader=function(T,J){return T&&T.state?T.state.wrap!==2?_:(T.state.gzhead=J,m):_},i.deflate=function(T,J){var W,b,k,V;if(!T||!T.state||5<J||J<0)return T?H(T,_):_;if(b=T.state,!T.output||!T.input&&T.avail_in!==0||b.status===666&&J!==p)return H(T,T.avail_out===0?-5:_);if(b.strm=T,W=b.last_flush,b.last_flush=J,b.status===I)if(b.wrap===2)T.adler=0,le(b,31),le(b,139),le(b,8),b.gzhead?(le(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),le(b,255&b.gzhead.time),le(b,b.gzhead.time>>8&255),le(b,b.gzhead.time>>16&255),le(b,b.gzhead.time>>24&255),le(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),le(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(le(b,255&b.gzhead.extra.length),le(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(T.adler=d(T.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(le(b,0),le(b,0),le(b,0),le(b,0),le(b,0),le(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),le(b,3),b.status=M);else{var Z=v+(b.w_bits-8<<4)<<8;Z|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(Z|=32),Z+=31-Z%31,b.status=M,ne(b,Z),b.strstart!==0&&(ne(b,T.adler>>>16),ne(b,65535&T.adler)),T.adler=1}if(b.status===69)if(b.gzhead.extra){for(k=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>k&&(T.adler=d(T.adler,b.pending_buf,b.pending-k,k)),L(T),k=b.pending,b.pending!==b.pending_buf_size));)le(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>k&&(T.adler=d(T.adler,b.pending_buf,b.pending-k,k)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){k=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>k&&(T.adler=d(T.adler,b.pending_buf,b.pending-k,k)),L(T),k=b.pending,b.pending===b.pending_buf_size)){V=1;break}V=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,le(b,V)}while(V!==0);b.gzhead.hcrc&&b.pending>k&&(T.adler=d(T.adler,b.pending_buf,b.pending-k,k)),V===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){k=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>k&&(T.adler=d(T.adler,b.pending_buf,b.pending-k,k)),L(T),k=b.pending,b.pending===b.pending_buf_size)){V=1;break}V=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,le(b,V)}while(V!==0);b.gzhead.hcrc&&b.pending>k&&(T.adler=d(T.adler,b.pending_buf,b.pending-k,k)),V===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&L(T),b.pending+2<=b.pending_buf_size&&(le(b,255&T.adler),le(b,T.adler>>8&255),T.adler=0,b.status=M)):b.status=M),b.pending!==0){if(L(T),T.avail_out===0)return b.last_flush=-1,m}else if(T.avail_in===0&&B(J)<=B(W)&&J!==p)return H(T,-5);if(b.status===666&&T.avail_in!==0)return H(T,-5);if(T.avail_in!==0||b.lookahead!==0||J!==h&&b.status!==666){var Y=b.strategy===2?function($,j){for(var se;;){if($.lookahead===0&&(Ae($),$.lookahead===0)){if(j===h)return C;break}if($.match_length=0,se=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,se&&(U($,!1),$.strm.avail_out===0))return C}return $.insert=0,j===p?(U($,!0),$.strm.avail_out===0?te:G):$.last_lit&&(U($,!1),$.strm.avail_out===0)?C:O}(b,J):b.strategy===3?function($,j){for(var se,re,fe,Me,Te=$.window;;){if($.lookahead<=F){if(Ae($),$.lookahead<=F&&j===h)return C;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=D&&0<$.strstart&&(re=Te[fe=$.strstart-1])===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]){Me=$.strstart+F;do;while(re===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]&&re===Te[++fe]&&fe<Me);$.match_length=F-(Me-fe),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=D?(se=a._tr_tally($,1,$.match_length-D),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(se=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),se&&(U($,!1),$.strm.avail_out===0))return C}return $.insert=0,j===p?(U($,!0),$.strm.avail_out===0?te:G):$.last_lit&&(U($,!1),$.strm.avail_out===0)?C:O}(b,J):s[b.level].func(b,J);if(Y!==te&&Y!==G||(b.status=666),Y===C||Y===te)return T.avail_out===0&&(b.last_flush=-1),m;if(Y===O&&(J===1?a._tr_align(b):J!==5&&(a._tr_stored_block(b,0,0,!1),J===3&&(K(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),L(T),T.avail_out===0))return b.last_flush=-1,m}return J!==p?m:b.wrap<=0?1:(b.wrap===2?(le(b,255&T.adler),le(b,T.adler>>8&255),le(b,T.adler>>16&255),le(b,T.adler>>24&255),le(b,255&T.total_in),le(b,T.total_in>>8&255),le(b,T.total_in>>16&255),le(b,T.total_in>>24&255)):(ne(b,T.adler>>>16),ne(b,65535&T.adler)),L(T),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?m:1)},i.deflateEnd=function(T){var J;return T&&T.state?(J=T.state.status)!==I&&J!==69&&J!==73&&J!==91&&J!==103&&J!==M&&J!==666?H(T,_):(T.state=null,J===M?H(T,-3):m):_},i.deflateSetDictionary=function(T,J){var W,b,k,V,Z,Y,$,j,se=J.length;if(!T||!T.state||(V=(W=T.state).wrap)===2||V===1&&W.status!==I||W.lookahead)return _;for(V===1&&(T.adler=c(T.adler,J,se,0)),W.wrap=0,se>=W.w_size&&(V===0&&(K(W.head),W.strstart=0,W.block_start=0,W.insert=0),j=new o.Buf8(W.w_size),o.arraySet(j,J,se-W.w_size,W.w_size,0),J=j,se=W.w_size),Z=T.avail_in,Y=T.next_in,$=T.input,T.avail_in=se,T.next_in=0,T.input=J,Ae(W);W.lookahead>=D;){for(b=W.strstart,k=W.lookahead-(D-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[b+D-1])&W.hash_mask,W.prev[b&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=b,b++,--k;);W.strstart=b,W.lookahead=D-1,Ae(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=D-1,W.match_available=0,T.next_in=Y,T.input=$,T.avail_in=Z,W.wrap=V,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,c,d,f,h,p,m,_,g,x,y,v,w,E,A,P,R,N,D,F,q,I,M,C,O;a=s.state,c=s.next_in,C=s.input,d=c+(s.avail_in-5),f=s.next_out,O=s.output,h=f-(o-s.avail_out),p=f+(s.avail_out-257),m=a.dmax,_=a.wsize,g=a.whave,x=a.wnext,y=a.window,v=a.hold,w=a.bits,E=a.lencode,A=a.distcode,P=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{w<15&&(v+=C[c++]<<w,w+=8,v+=C[c++]<<w,w+=8),N=E[v&P];t:for(;;){if(v>>>=D=N>>>24,w-=D,(D=N>>>16&255)===0)O[f++]=65535&N;else{if(!(16&D)){if(!(64&D)){N=E[(65535&N)+(v&(1<<D)-1)];continue t}if(32&D){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}F=65535&N,(D&=15)&&(w<D&&(v+=C[c++]<<w,w+=8),F+=v&(1<<D)-1,v>>>=D,w-=D),w<15&&(v+=C[c++]<<w,w+=8,v+=C[c++]<<w,w+=8),N=A[v&R];n:for(;;){if(v>>>=D=N>>>24,w-=D,!(16&(D=N>>>16&255))){if(!(64&D)){N=A[(65535&N)+(v&(1<<D)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(q=65535&N,w<(D&=15)&&(v+=C[c++]<<w,(w+=8)<D&&(v+=C[c++]<<w,w+=8)),m<(q+=v&(1<<D)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=D,w-=D,(D=f-h)<q){if(g<(D=q-D)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(M=y,(I=0)===x){if(I+=_-D,D<F){for(F-=D;O[f++]=y[I++],--D;);I=f-q,M=O}}else if(x<D){if(I+=_+x-D,(D-=x)<F){for(F-=D;O[f++]=y[I++],--D;);if(I=0,x<F){for(F-=D=x;O[f++]=y[I++],--D;);I=f-q,M=O}}}else if(I+=x-D,D<F){for(F-=D;O[f++]=y[I++],--D;);I=f-q,M=O}for(;2<F;)O[f++]=M[I++],O[f++]=M[I++],O[f++]=M[I++],F-=3;F&&(O[f++]=M[I++],1<F&&(O[f++]=M[I++]))}else{for(I=f-q;O[f++]=O[I++],O[f++]=O[I++],O[f++]=O[I++],2<(F-=3););F&&(O[f++]=O[I++],1<F&&(O[f++]=O[I++]))}break}}break}}while(c<d&&f<p);c-=F=w>>3,v&=(1<<(w-=F<<3))-1,s.next_in=c,s.next_out=f,s.avail_in=c<d?d-c+5:5-(c-d),s.avail_out=f<p?p-f+257:257-(f-p),a.hold=v,a.bits=w}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),c=n("./inffast"),d=n("./inftrees"),f=1,h=2,p=0,m=-2,_=1,g=852,x=592;function y(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(I){var M;return I&&I.state?(M=I.state,I.total_in=I.total_out=M.total=0,I.msg="",M.wrap&&(I.adler=1&M.wrap),M.mode=_,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new s.Buf32(g),M.distcode=M.distdyn=new s.Buf32(x),M.sane=1,M.back=-1,p):m}function E(I){var M;return I&&I.state?((M=I.state).wsize=0,M.whave=0,M.wnext=0,w(I)):m}function A(I,M){var C,O;return I&&I.state?(O=I.state,M<0?(C=0,M=-M):(C=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?m:(O.window!==null&&O.wbits!==M&&(O.window=null),O.wrap=C,O.wbits=M,E(I))):m}function P(I,M){var C,O;return I?(O=new v,(I.state=O).window=null,(C=A(I,M))!==p&&(I.state=null),C):m}var R,N,D=!0;function F(I){if(D){var M;for(R=new s.Buf32(512),N=new s.Buf32(32),M=0;M<144;)I.lens[M++]=8;for(;M<256;)I.lens[M++]=9;for(;M<280;)I.lens[M++]=7;for(;M<288;)I.lens[M++]=8;for(d(f,I.lens,0,288,R,0,I.work,{bits:9}),M=0;M<32;)I.lens[M++]=5;d(h,I.lens,0,32,N,0,I.work,{bits:5}),D=!1}I.lencode=R,I.lenbits=9,I.distcode=N,I.distbits=5}function q(I,M,C,O){var te,G=I.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),O>=G.wsize?(s.arraySet(G.window,M,C-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(O<(te=G.wsize-G.wnext)&&(te=O),s.arraySet(G.window,M,C-O,te,G.wnext),(O-=te)?(s.arraySet(G.window,M,C-O,O,0),G.wnext=O,G.whave=G.wsize):(G.wnext+=te,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=te))),0}i.inflateReset=E,i.inflateReset2=A,i.inflateResetKeep=w,i.inflateInit=function(I){return P(I,15)},i.inflateInit2=P,i.inflate=function(I,M){var C,O,te,G,H,B,K,L,U,le,ne,X,Ae,Le,xe,Ie,Ve,qe,Kt,Zt,T,J,W,b,k=0,V=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return m;(C=I.state).mode===12&&(C.mode=13),H=I.next_out,te=I.output,K=I.avail_out,G=I.next_in,O=I.input,B=I.avail_in,L=C.hold,U=C.bits,le=B,ne=K,J=p;e:for(;;)switch(C.mode){case _:if(C.wrap===0){C.mode=13;break}for(;U<16;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(2&C.wrap&&L===35615){V[C.check=0]=255&L,V[1]=L>>>8&255,C.check=a(C.check,V,2,0),U=L=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&L)<<8)+(L>>8))%31){I.msg="incorrect header check",C.mode=30;break}if((15&L)!=8){I.msg="unknown compression method",C.mode=30;break}if(U-=4,T=8+(15&(L>>>=4)),C.wbits===0)C.wbits=T;else if(T>C.wbits){I.msg="invalid window size",C.mode=30;break}C.dmax=1<<T,I.adler=C.check=1,C.mode=512&L?10:12,U=L=0;break;case 2:for(;U<16;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(C.flags=L,(255&C.flags)!=8){I.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){I.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=L>>8&1),512&C.flags&&(V[0]=255&L,V[1]=L>>>8&255,C.check=a(C.check,V,2,0)),U=L=0,C.mode=3;case 3:for(;U<32;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}C.head&&(C.head.time=L),512&C.flags&&(V[0]=255&L,V[1]=L>>>8&255,V[2]=L>>>16&255,V[3]=L>>>24&255,C.check=a(C.check,V,4,0)),U=L=0,C.mode=4;case 4:for(;U<16;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}C.head&&(C.head.xflags=255&L,C.head.os=L>>8),512&C.flags&&(V[0]=255&L,V[1]=L>>>8&255,C.check=a(C.check,V,2,0)),U=L=0,C.mode=5;case 5:if(1024&C.flags){for(;U<16;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}C.length=L,C.head&&(C.head.extra_len=L),512&C.flags&&(V[0]=255&L,V[1]=L>>>8&255,C.check=a(C.check,V,2,0)),U=L=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(B<(X=C.length)&&(X=B),X&&(C.head&&(T=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),s.arraySet(C.head.extra,O,G,X,T)),512&C.flags&&(C.check=a(C.check,O,X,G)),B-=X,G+=X,C.length-=X),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(B===0)break e;for(X=0;T=O[G+X++],C.head&&T&&C.length<65536&&(C.head.name+=String.fromCharCode(T)),T&&X<B;);if(512&C.flags&&(C.check=a(C.check,O,X,G)),B-=X,G+=X,T)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(B===0)break e;for(X=0;T=O[G+X++],C.head&&T&&C.length<65536&&(C.head.comment+=String.fromCharCode(T)),T&&X<B;);if(512&C.flags&&(C.check=a(C.check,O,X,G)),B-=X,G+=X,T)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;U<16;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(L!==(65535&C.check)){I.msg="header crc mismatch",C.mode=30;break}U=L=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),I.adler=C.check=0,C.mode=12;break;case 10:for(;U<32;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}I.adler=C.check=y(L),U=L=0,C.mode=11;case 11:if(C.havedict===0)return I.next_out=H,I.avail_out=K,I.next_in=G,I.avail_in=B,C.hold=L,C.bits=U,2;I.adler=C.check=1,C.mode=12;case 12:if(M===5||M===6)break e;case 13:if(C.last){L>>>=7&U,U-=7&U,C.mode=27;break}for(;U<3;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}switch(C.last=1&L,U-=1,3&(L>>>=1)){case 0:C.mode=14;break;case 1:if(F(C),C.mode=20,M!==6)break;L>>>=2,U-=2;break e;case 2:C.mode=17;break;case 3:I.msg="invalid block type",C.mode=30}L>>>=2,U-=2;break;case 14:for(L>>>=7&U,U-=7&U;U<32;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if((65535&L)!=(L>>>16^65535)){I.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&L,U=L=0,C.mode=15,M===6)break e;case 15:C.mode=16;case 16:if(X=C.length){if(B<X&&(X=B),K<X&&(X=K),X===0)break e;s.arraySet(te,O,G,X,H),B-=X,G+=X,K-=X,H+=X,C.length-=X;break}C.mode=12;break;case 17:for(;U<14;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(C.nlen=257+(31&L),L>>>=5,U-=5,C.ndist=1+(31&L),L>>>=5,U-=5,C.ncode=4+(15&L),L>>>=4,U-=4,286<C.nlen||30<C.ndist){I.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;U<3;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}C.lens[Z[C.have++]]=7&L,L>>>=3,U-=3}for(;C.have<19;)C.lens[Z[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,W={bits:C.lenbits},J=d(0,C.lens,0,19,C.lencode,0,C.work,W),C.lenbits=W.bits,J){I.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;Ie=(k=C.lencode[L&(1<<C.lenbits)-1])>>>16&255,Ve=65535&k,!((xe=k>>>24)<=U);){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(Ve<16)L>>>=xe,U-=xe,C.lens[C.have++]=Ve;else{if(Ve===16){for(b=xe+2;U<b;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(L>>>=xe,U-=xe,C.have===0){I.msg="invalid bit length repeat",C.mode=30;break}T=C.lens[C.have-1],X=3+(3&L),L>>>=2,U-=2}else if(Ve===17){for(b=xe+3;U<b;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}U-=xe,T=0,X=3+(7&(L>>>=xe)),L>>>=3,U-=3}else{for(b=xe+7;U<b;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}U-=xe,T=0,X=11+(127&(L>>>=xe)),L>>>=7,U-=7}if(C.have+X>C.nlen+C.ndist){I.msg="invalid bit length repeat",C.mode=30;break}for(;X--;)C.lens[C.have++]=T}}if(C.mode===30)break;if(C.lens[256]===0){I.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,W={bits:C.lenbits},J=d(f,C.lens,0,C.nlen,C.lencode,0,C.work,W),C.lenbits=W.bits,J){I.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,W={bits:C.distbits},J=d(h,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,W),C.distbits=W.bits,J){I.msg="invalid distances set",C.mode=30;break}if(C.mode=20,M===6)break e;case 20:C.mode=21;case 21:if(6<=B&&258<=K){I.next_out=H,I.avail_out=K,I.next_in=G,I.avail_in=B,C.hold=L,C.bits=U,c(I,ne),H=I.next_out,te=I.output,K=I.avail_out,G=I.next_in,O=I.input,B=I.avail_in,L=C.hold,U=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;Ie=(k=C.lencode[L&(1<<C.lenbits)-1])>>>16&255,Ve=65535&k,!((xe=k>>>24)<=U);){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(Ie&&!(240&Ie)){for(qe=xe,Kt=Ie,Zt=Ve;Ie=(k=C.lencode[Zt+((L&(1<<qe+Kt)-1)>>qe)])>>>16&255,Ve=65535&k,!(qe+(xe=k>>>24)<=U);){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}L>>>=qe,U-=qe,C.back+=qe}if(L>>>=xe,U-=xe,C.back+=xe,C.length=Ve,Ie===0){C.mode=26;break}if(32&Ie){C.back=-1,C.mode=12;break}if(64&Ie){I.msg="invalid literal/length code",C.mode=30;break}C.extra=15&Ie,C.mode=22;case 22:if(C.extra){for(b=C.extra;U<b;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}C.length+=L&(1<<C.extra)-1,L>>>=C.extra,U-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;Ie=(k=C.distcode[L&(1<<C.distbits)-1])>>>16&255,Ve=65535&k,!((xe=k>>>24)<=U);){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(!(240&Ie)){for(qe=xe,Kt=Ie,Zt=Ve;Ie=(k=C.distcode[Zt+((L&(1<<qe+Kt)-1)>>qe)])>>>16&255,Ve=65535&k,!(qe+(xe=k>>>24)<=U);){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}L>>>=qe,U-=qe,C.back+=qe}if(L>>>=xe,U-=xe,C.back+=xe,64&Ie){I.msg="invalid distance code",C.mode=30;break}C.offset=Ve,C.extra=15&Ie,C.mode=24;case 24:if(C.extra){for(b=C.extra;U<b;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}C.offset+=L&(1<<C.extra)-1,L>>>=C.extra,U-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){I.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(K===0)break e;if(X=ne-K,C.offset>X){if((X=C.offset-X)>C.whave&&C.sane){I.msg="invalid distance too far back",C.mode=30;break}Ae=X>C.wnext?(X-=C.wnext,C.wsize-X):C.wnext-X,X>C.length&&(X=C.length),Le=C.window}else Le=te,Ae=H-C.offset,X=C.length;for(K<X&&(X=K),K-=X,C.length-=X;te[H++]=Le[Ae++],--X;);C.length===0&&(C.mode=21);break;case 26:if(K===0)break e;te[H++]=C.length,K--,C.mode=21;break;case 27:if(C.wrap){for(;U<32;){if(B===0)break e;B--,L|=O[G++]<<U,U+=8}if(ne-=K,I.total_out+=ne,C.total+=ne,ne&&(I.adler=C.check=C.flags?a(C.check,te,ne,H-ne):o(C.check,te,ne,H-ne)),ne=K,(C.flags?L:y(L))!==C.check){I.msg="incorrect data check",C.mode=30;break}U=L=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;U<32;){if(B===0)break e;B--,L+=O[G++]<<U,U+=8}if(L!==(4294967295&C.total)){I.msg="incorrect length check",C.mode=30;break}U=L=0}C.mode=29;case 29:J=1;break e;case 30:J=-3;break e;case 31:return-4;case 32:default:return m}return I.next_out=H,I.avail_out=K,I.next_in=G,I.avail_in=B,C.hold=L,C.bits=U,(C.wsize||ne!==I.avail_out&&C.mode<30&&(C.mode<27||M!==4))&&q(I,I.output,I.next_out,ne-I.avail_out)?(C.mode=31,-4):(le-=I.avail_in,ne-=I.avail_out,I.total_in+=le,I.total_out+=ne,C.total+=ne,C.wrap&&ne&&(I.adler=C.check=C.flags?a(C.check,te,ne,I.next_out-ne):o(C.check,te,ne,I.next_out-ne)),I.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(le==0&&ne===0||M===4)&&J===p&&(J=-5),J)},i.inflateEnd=function(I){if(!I||!I.state)return m;var M=I.state;return M.window&&(M.window=null),I.state=null,p},i.inflateGetHeader=function(I,M){var C;return I&&I.state&&2&(C=I.state).wrap?((C.head=M).done=!1,p):m},i.inflateSetDictionary=function(I,M){var C,O=M.length;return I&&I.state?(C=I.state).wrap!==0&&C.mode!==11?m:C.mode===11&&o(1,M,O,0)!==C.check?-3:q(I,M,O,O)?(C.mode=31,-4):(C.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,p,m,_,g,x,y){var v,w,E,A,P,R,N,D,F,q=y.bits,I=0,M=0,C=0,O=0,te=0,G=0,H=0,B=0,K=0,L=0,U=null,le=0,ne=new s.Buf16(16),X=new s.Buf16(16),Ae=null,Le=0;for(I=0;I<=15;I++)ne[I]=0;for(M=0;M<m;M++)ne[h[p+M]]++;for(te=q,O=15;1<=O&&ne[O]===0;O--);if(O<te&&(te=O),O===0)return _[g++]=20971520,_[g++]=20971520,y.bits=1,0;for(C=1;C<O&&ne[C]===0;C++);for(te<C&&(te=C),I=B=1;I<=15;I++)if(B<<=1,(B-=ne[I])<0)return-1;if(0<B&&(f===0||O!==1))return-1;for(X[1]=0,I=1;I<15;I++)X[I+1]=X[I]+ne[I];for(M=0;M<m;M++)h[p+M]!==0&&(x[X[h[p+M]]++]=M);if(R=f===0?(U=Ae=x,19):f===1?(U=o,le-=257,Ae=a,Le-=257,256):(U=c,Ae=d,-1),I=C,P=g,H=M=L=0,E=-1,A=(K=1<<(G=te))-1,f===1&&852<K||f===2&&592<K)return 1;for(;;){for(N=I-H,F=x[M]<R?(D=0,x[M]):x[M]>R?(D=Ae[Le+x[M]],U[le+x[M]]):(D=96,0),v=1<<I-H,C=w=1<<G;_[P+(L>>H)+(w-=v)]=N<<24|D<<16|F|0,w!==0;);for(v=1<<I-1;L&v;)v>>=1;if(v!==0?(L&=v-1,L+=v):L=0,M++,--ne[I]==0){if(I===O)break;I=h[p+x[M]]}if(te<I&&(L&A)!==E){for(H===0&&(H=te),P+=C,B=1<<(G=I-H);G+H<O&&!((B-=ne[G+H])<=0);)G++,B<<=1;if(K+=1<<G,f===1&&852<K||f===2&&592<K)return 1;_[E=L&A]=te<<24|G<<16|P-g|0}}return L!==0&&(_[P+L]=I-H<<24|64<<16|0),y.bits=te,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function c(k){for(var V=k.length;0<=--V;)k[V]=0}var d=0,f=29,h=256,p=h+1+f,m=30,_=19,g=2*p+1,x=15,y=16,v=7,w=256,E=16,A=17,P=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(p+2));c(q);var I=new Array(2*m);c(I);var M=new Array(512);c(M);var C=new Array(256);c(C);var O=new Array(f);c(O);var te,G,H,B=new Array(m);function K(k,V,Z,Y,$){this.static_tree=k,this.extra_bits=V,this.extra_base=Z,this.elems=Y,this.max_length=$,this.has_stree=k&&k.length}function L(k,V){this.dyn_tree=k,this.max_code=0,this.stat_desc=V}function U(k){return k<256?M[k]:M[256+(k>>>7)]}function le(k,V){k.pending_buf[k.pending++]=255&V,k.pending_buf[k.pending++]=V>>>8&255}function ne(k,V,Z){k.bi_valid>y-Z?(k.bi_buf|=V<<k.bi_valid&65535,le(k,k.bi_buf),k.bi_buf=V>>y-k.bi_valid,k.bi_valid+=Z-y):(k.bi_buf|=V<<k.bi_valid&65535,k.bi_valid+=Z)}function X(k,V,Z){ne(k,Z[2*V],Z[2*V+1])}function Ae(k,V){for(var Z=0;Z|=1&k,k>>>=1,Z<<=1,0<--V;);return Z>>>1}function Le(k,V,Z){var Y,$,j=new Array(x+1),se=0;for(Y=1;Y<=x;Y++)j[Y]=se=se+Z[Y-1]<<1;for($=0;$<=V;$++){var re=k[2*$+1];re!==0&&(k[2*$]=Ae(j[re]++,re))}}function xe(k){var V;for(V=0;V<p;V++)k.dyn_ltree[2*V]=0;for(V=0;V<m;V++)k.dyn_dtree[2*V]=0;for(V=0;V<_;V++)k.bl_tree[2*V]=0;k.dyn_ltree[2*w]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function Ie(k){8<k.bi_valid?le(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function Ve(k,V,Z,Y){var $=2*V,j=2*Z;return k[$]<k[j]||k[$]===k[j]&&Y[V]<=Y[Z]}function qe(k,V,Z){for(var Y=k.heap[Z],$=Z<<1;$<=k.heap_len&&($<k.heap_len&&Ve(V,k.heap[$+1],k.heap[$],k.depth)&&$++,!Ve(V,Y,k.heap[$],k.depth));)k.heap[Z]=k.heap[$],Z=$,$<<=1;k.heap[Z]=Y}function Kt(k,V,Z){var Y,$,j,se,re=0;if(k.last_lit!==0)for(;Y=k.pending_buf[k.d_buf+2*re]<<8|k.pending_buf[k.d_buf+2*re+1],$=k.pending_buf[k.l_buf+re],re++,Y===0?X(k,$,V):(X(k,(j=C[$])+h+1,V),(se=R[j])!==0&&ne(k,$-=O[j],se),X(k,j=U(--Y),Z),(se=N[j])!==0&&ne(k,Y-=B[j],se)),re<k.last_lit;);X(k,w,V)}function Zt(k,V){var Z,Y,$,j=V.dyn_tree,se=V.stat_desc.static_tree,re=V.stat_desc.has_stree,fe=V.stat_desc.elems,Me=-1;for(k.heap_len=0,k.heap_max=g,Z=0;Z<fe;Z++)j[2*Z]!==0?(k.heap[++k.heap_len]=Me=Z,k.depth[Z]=0):j[2*Z+1]=0;for(;k.heap_len<2;)j[2*($=k.heap[++k.heap_len]=Me<2?++Me:0)]=1,k.depth[$]=0,k.opt_len--,re&&(k.static_len-=se[2*$+1]);for(V.max_code=Me,Z=k.heap_len>>1;1<=Z;Z--)qe(k,j,Z);for($=fe;Z=k.heap[1],k.heap[1]=k.heap[k.heap_len--],qe(k,j,1),Y=k.heap[1],k.heap[--k.heap_max]=Z,k.heap[--k.heap_max]=Y,j[2*$]=j[2*Z]+j[2*Y],k.depth[$]=(k.depth[Z]>=k.depth[Y]?k.depth[Z]:k.depth[Y])+1,j[2*Z+1]=j[2*Y+1]=$,k.heap[1]=$++,qe(k,j,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],function(Te,pt){var Zn,Bt,Qr,Ze,bi,Js,un=pt.dyn_tree,Ks=pt.max_code,Zs=pt.stat_desc.static_tree,Ec=pt.stat_desc.has_stree,$t=pt.stat_desc.extra_bits,Ue=pt.stat_desc.extra_base,jr=pt.stat_desc.max_length,Mi=0;for(Ze=0;Ze<=x;Ze++)Te.bl_count[Ze]=0;for(un[2*Te.heap[Te.heap_max]+1]=0,Zn=Te.heap_max+1;Zn<g;Zn++)jr<(Ze=un[2*un[2*(Bt=Te.heap[Zn])+1]+1]+1)&&(Ze=jr,Mi++),un[2*Bt+1]=Ze,Ks<Bt||(Te.bl_count[Ze]++,bi=0,Ue<=Bt&&(bi=$t[Bt-Ue]),Js=un[2*Bt],Te.opt_len+=Js*(Ze+bi),Ec&&(Te.static_len+=Js*(Zs[2*Bt+1]+bi)));if(Mi!==0){do{for(Ze=jr-1;Te.bl_count[Ze]===0;)Ze--;Te.bl_count[Ze]--,Te.bl_count[Ze+1]+=2,Te.bl_count[jr]--,Mi-=2}while(0<Mi);for(Ze=jr;Ze!==0;Ze--)for(Bt=Te.bl_count[Ze];Bt!==0;)Ks<(Qr=Te.heap[--Zn])||(un[2*Qr+1]!==Ze&&(Te.opt_len+=(Ze-un[2*Qr+1])*un[2*Qr],un[2*Qr+1]=Ze),Bt--)}}(k,V),Le(j,Me,k.bl_count)}function T(k,V,Z){var Y,$,j=-1,se=V[1],re=0,fe=7,Me=4;for(se===0&&(fe=138,Me=3),V[2*(Z+1)+1]=65535,Y=0;Y<=Z;Y++)$=se,se=V[2*(Y+1)+1],++re<fe&&$===se||(re<Me?k.bl_tree[2*$]+=re:$!==0?($!==j&&k.bl_tree[2*$]++,k.bl_tree[2*E]++):re<=10?k.bl_tree[2*A]++:k.bl_tree[2*P]++,j=$,Me=(re=0)===se?(fe=138,3):$===se?(fe=6,3):(fe=7,4))}function J(k,V,Z){var Y,$,j=-1,se=V[1],re=0,fe=7,Me=4;for(se===0&&(fe=138,Me=3),Y=0;Y<=Z;Y++)if($=se,se=V[2*(Y+1)+1],!(++re<fe&&$===se)){if(re<Me)for(;X(k,$,k.bl_tree),--re!=0;);else $!==0?($!==j&&(X(k,$,k.bl_tree),re--),X(k,E,k.bl_tree),ne(k,re-3,2)):re<=10?(X(k,A,k.bl_tree),ne(k,re-3,3)):(X(k,P,k.bl_tree),ne(k,re-11,7));j=$,Me=(re=0)===se?(fe=138,3):$===se?(fe=6,3):(fe=7,4)}}c(B);var W=!1;function b(k,V,Z,Y){ne(k,(d<<1)+(Y?1:0),3),function($,j,se,re){Ie($),le($,se),le($,~se),s.arraySet($.pending_buf,$.window,j,se,$.pending),$.pending+=se}(k,V,Z)}i._tr_init=function(k){W||(function(){var V,Z,Y,$,j,se=new Array(x+1);for($=Y=0;$<f-1;$++)for(O[$]=Y,V=0;V<1<<R[$];V++)C[Y++]=$;for(C[Y-1]=$,$=j=0;$<16;$++)for(B[$]=j,V=0;V<1<<N[$];V++)M[j++]=$;for(j>>=7;$<m;$++)for(B[$]=j<<7,V=0;V<1<<N[$]-7;V++)M[256+j++]=$;for(Z=0;Z<=x;Z++)se[Z]=0;for(V=0;V<=143;)q[2*V+1]=8,V++,se[8]++;for(;V<=255;)q[2*V+1]=9,V++,se[9]++;for(;V<=279;)q[2*V+1]=7,V++,se[7]++;for(;V<=287;)q[2*V+1]=8,V++,se[8]++;for(Le(q,p+1,se),V=0;V<m;V++)I[2*V+1]=5,I[2*V]=Ae(V,5);te=new K(q,R,h+1,p,x),G=new K(I,N,0,m,x),H=new K(new Array(0),D,0,_,v)}(),W=!0),k.l_desc=new L(k.dyn_ltree,te),k.d_desc=new L(k.dyn_dtree,G),k.bl_desc=new L(k.bl_tree,H),k.bi_buf=0,k.bi_valid=0,xe(k)},i._tr_stored_block=b,i._tr_flush_block=function(k,V,Z,Y){var $,j,se=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=function(re){var fe,Me=4093624447;for(fe=0;fe<=31;fe++,Me>>>=1)if(1&Me&&re.dyn_ltree[2*fe]!==0)return o;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return a;for(fe=32;fe<h;fe++)if(re.dyn_ltree[2*fe]!==0)return a;return o}(k)),Zt(k,k.l_desc),Zt(k,k.d_desc),se=function(re){var fe;for(T(re,re.dyn_ltree,re.l_desc.max_code),T(re,re.dyn_dtree,re.d_desc.max_code),Zt(re,re.bl_desc),fe=_-1;3<=fe&&re.bl_tree[2*F[fe]+1]===0;fe--);return re.opt_len+=3*(fe+1)+5+5+4,fe}(k),$=k.opt_len+3+7>>>3,(j=k.static_len+3+7>>>3)<=$&&($=j)):$=j=Z+5,Z+4<=$&&V!==-1?b(k,V,Z,Y):k.strategy===4||j===$?(ne(k,2+(Y?1:0),3),Kt(k,q,I)):(ne(k,4+(Y?1:0),3),function(re,fe,Me,Te){var pt;for(ne(re,fe-257,5),ne(re,Me-1,5),ne(re,Te-4,4),pt=0;pt<Te;pt++)ne(re,re.bl_tree[2*F[pt]+1],3);J(re,re.dyn_ltree,fe-1),J(re,re.dyn_dtree,Me-1)}(k,k.l_desc.max_code+1,k.d_desc.max_code+1,se+1),Kt(k,k.dyn_ltree,k.dyn_dtree)),xe(k),Y&&Ie(k)},i._tr_tally=function(k,V,Z){return k.pending_buf[k.d_buf+2*k.last_lit]=V>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&V,k.pending_buf[k.l_buf+k.last_lit]=255&Z,k.last_lit++,V===0?k.dyn_ltree[2*Z]++:(k.matches++,V--,k.dyn_ltree[2*(C[Z]+h+1)]++,k.dyn_dtree[2*U(V)]++),k.last_lit===k.lit_bufsize-1},i._tr_align=function(k){ne(k,2,3),X(k,w,q),function(V){V.bi_valid===16?(le(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)}(k)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var c,d,f,h,p=1,m={},_=!1,g=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,c={}.toString.call(o.process)==="[object process]"?function(E){process.nextTick(function(){v(E)})}:function(){if(o.postMessage&&!o.importScripts){var E=!0,A=o.onmessage;return o.onmessage=function(){E=!1},o.postMessage("","*"),o.onmessage=A,E}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(E){o.postMessage(h+E,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(E){v(E.data)},function(E){f.port2.postMessage(E)}):g&&"onreadystatechange"in g.createElement("script")?(d=g.documentElement,function(E){var A=g.createElement("script");A.onreadystatechange=function(){v(E),A.onreadystatechange=null,d.removeChild(A),A=null},d.appendChild(A)}):function(E){setTimeout(v,0,E)},x.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var A=new Array(arguments.length-1),P=0;P<A.length;P++)A[P]=arguments[P+1];var R={callback:E,args:A};return m[p]=R,c(p),p++},x.clearImmediate=y}function y(E){delete m[E]}function v(E){if(_)setTimeout(v,0,E);else{var A=m[E];if(A){_=!0;try{(function(P){var R=P.callback,N=P.args;switch(N.length){case 0:R();break;case 1:R(N[0]);break;case 2:R(N[0],N[1]);break;case 3:R(N[0],N[1],N[2]);break;default:R.apply(a,N)}})(A)}finally{y(E),_=!1}}}}function w(E){E.source===o&&typeof E.data=="string"&&E.data.indexOf(h)===0&&v(+E.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Da<"u"?Da:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hC);var qk=hC.exports;const Jk=Ah(qk),pC=z.createContext({});function Kk(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const xp=z.createContext(null),mC=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Zk(t=!0){const e=z.useContext(xp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=z.useId();z.useEffect(()=>{t&&i(s)},[t]);const o=z.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Cp=typeof window<"u",Yk=Cp?z.useLayoutEffect:z.useEffect,nn=t=>t;let gC=nn;function Tp(t){let e;return()=>(e===void 0&&(e=t()),e)}const As=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ir=t=>t*1e3,sr=t=>t/1e3,Xk={useManualTiming:!1};function Qk(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(d){s.has(d)&&(c.schedule(d),t()),d(o)}const c={schedule:(d,f=!1,h=!1)=>{const m=h&&r?e:n;return f&&s.add(d),m.has(d)||m.add(d),d},cancel:d=>{n.delete(d),s.delete(d)},process:d=>{if(o=d,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,c.process(d))}};return c}const ja=["read","resolveKeyframes","update","preRender","render","postRender"],jk=40;function yC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=ja.reduce((y,v)=>(y[v]=Qk(s),y),{}),{read:a,resolveKeyframes:c,update:d,preRender:f,render:h,postRender:p}=o,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,jk),1),i.timestamp=y,i.isProcessing=!0,a.process(i),c.process(i),d.process(i),f.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:ja.reduce((y,v)=>{const w=o[v];return y[v]=(E,A=!1,P=!1)=>(n||_(),w.schedule(E,A,P)),y},{}),cancel:y=>{for(let v=0;v<ja.length;v++)o[ja[v]].cancel(y)},state:i,steps:o}}const{schedule:We,cancel:Gr,state:wt,steps:Qc}=yC(typeof requestAnimationFrame<"u"?requestAnimationFrame:nn,!0),vC=z.createContext({strict:!1}),py={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ks={};for(const t in py)ks[t]={isEnabled:e=>py[t].some(n=>!!e[n])};function eI(t){for(const e in t)ks[e]={...ks[e],...t[e]}}const tI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tI.has(t)}let _C=t=>!fu(t);function nI(t){t&&(_C=e=>e.startsWith("on")?!fu(e):t(e))}try{nI(require("@emotion/is-prop-valid").default)}catch{}function rI(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(_C(i)||n===!0&&fu(i)||!e&&!fu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function iI(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const ec=z.createContext({});function sa(t){return typeof t=="string"||Array.isArray(t)}function tc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Sp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ep=["initial",...Sp];function nc(t){return tc(t.animate)||Ep.some(e=>sa(t[e]))}function wC(t){return!!(nc(t)||t.variants)}function sI(t,e){if(nc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||sa(n)?n:void 0,animate:sa(r)?r:void 0}}return t.inherit!==!1?e:{}}function oI(t){const{initial:e,animate:n}=sI(t,z.useContext(ec));return z.useMemo(()=>({initial:e,animate:n}),[my(e),my(n)])}function my(t){return Array.isArray(t)?t.join(" "):t}const aI=Symbol.for("motionComponentSymbol");function ts(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lI(t,e,n){return z.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ts(n)&&(n.current=r))},[e])}const Ap=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uI="framerAppearId",xC="data-"+Ap(uI),{schedule:kp}=yC(queueMicrotask,!1),CC=z.createContext({});function cI(t,e,n,r,i){var s,o;const{visualElement:a}=z.useContext(ec),c=z.useContext(vC),d=z.useContext(xp),f=z.useContext(mC).reducedMotion,h=z.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const p=h.current,m=z.useContext(CC);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&dI(h.current,n,i,m);const _=z.useRef(!1);z.useInsertionEffect(()=>{p&&_.current&&p.update(n,d)});const g=n[xC],x=z.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return Yk(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),kp.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),z.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),x.current=!1))}),p}function dI(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:TC(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ts(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:d})}function TC(t){if(t)return t.options.allowProjection!==!1?t.projection:TC(t.parent)}function fI({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&eI(t);function a(d,f){let h;const p={...z.useContext(mC),...d,layoutId:hI(d)},{isStatic:m}=p,_=oI(d),g=r(d,m);if(!m&&Cp){pI();const x=mI(p);h=x.MeasureLayout,_.visualElement=cI(i,g,p,e,x.ProjectionNode)}return S.jsxs(ec.Provider,{value:_,children:[h&&_.visualElement?S.jsx(h,{visualElement:_.visualElement,...p}):null,n(i,d,lI(g,_.visualElement,f),g,m,_.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const c=z.forwardRef(a);return c[aI]=i,c}function hI({layoutId:t}){const e=z.useContext(pC).id;return e&&t!==void 0?e+"-"+t:t}function pI(t,e){z.useContext(vC).strict}function mI(t){const{drag:e,layout:n}=ks;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const gI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ip(t){return typeof t!="string"||t.includes("-")?!1:!!(gI.indexOf(t)>-1||/[A-Z]/u.test(t))}function gy(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Pp(t,e,n,r){if(typeof e=="function"){const[i,s]=gy(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=gy(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const Tf=t=>Array.isArray(t),yI=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),vI=t=>Tf(t)?t[t.length-1]||0:t,bt=t=>!!(t&&t.getVelocity);function Pl(t){const e=bt(t)?t.get():t;return yI(e)?e.toValue():e}function _I({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:wI(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const SC=t=>(e,n)=>{const r=z.useContext(ec),i=z.useContext(xp),s=()=>_I(t,e,r,i);return n?s():Kk(s)};function wI(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Pl(s[p]);let{initial:o,animate:a}=t;const c=nc(t),d=wC(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const h=f?a:o;if(h&&typeof h!="boolean"&&!tc(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const _=Pp(t,p[m]);if(_){const{transitionEnd:g,transition:x,...y}=_;for(const v in y){let w=y[v];if(Array.isArray(w)){const E=f?w.length-1:0;w=w[E]}w!==null&&(i[v]=w)}for(const v in g)i[v]=g[v]}}}return i}const Us=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ii=new Set(Us),EC=t=>e=>typeof e=="string"&&e.startsWith(t),AC=EC("--"),xI=EC("var(--"),Rp=t=>xI(t)?CI.test(t.split("/*")[0].trim()):!1,CI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,cr=(t,e,n)=>n>e?e:n<t?t:n,Os={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},oa={...Os,transform:t=>cr(0,1,t)},el={...Os,default:1},_a=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wr=_a("deg"),Wn=_a("%"),pe=_a("px"),TI=_a("vh"),SI=_a("vw"),yy={...Wn,parse:t=>Wn.parse(t)/100,transform:t=>Wn.transform(t*100)},EI={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe},AI={rotate:wr,rotateX:wr,rotateY:wr,rotateZ:wr,scale:el,scaleX:el,scaleY:el,scaleZ:el,skew:wr,skewX:wr,skewY:wr,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:oa,originX:yy,originY:yy,originZ:pe},vy={...Os,transform:Math.round},bp={...EI,...AI,zIndex:vy,size:pe,fillOpacity:oa,strokeOpacity:oa,numOctaves:vy},kI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},II=Us.length;function PI(t,e,n){let r="",i=!0;for(let s=0;s<II;s++){const o=Us[s],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const d=kC(a,bp[o]);if(!c){i=!1;const f=kI[o]||o;r+=`${f}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mp(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const d=e[c];if(Ii.has(c)){o=!0;continue}else if(AC(c)){i[c]=d;continue}else{const f=kC(d,bp[c]);c.startsWith("origin")?(a=!0,s[c]=f):r[c]=f}}if(e.transform||(o||n?r.transform=PI(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:d="50%",originZ:f=0}=s;r.transformOrigin=`${c} ${d} ${f}`}}const RI={offset:"stroke-dashoffset",array:"stroke-dasharray"},bI={offset:"strokeDashoffset",array:"strokeDasharray"};function MI(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?RI:bI;t[s.offset]=pe.transform(-r);const o=pe.transform(e),a=pe.transform(n);t[s.array]=`${o} ${a}`}function _y(t,e,n){return typeof t=="string"?t:pe.transform(e+n*t)}function NI(t,e,n){const r=_y(e,t.x,t.width),i=_y(n,t.y,t.height);return`${r} ${i}`}function Np(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...d},f,h){if(Mp(t,d,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:_}=t;p.transform&&(_&&(m.transform=p.transform),delete p.transform),_&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=NI(_,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&MI(p,o,a,c,!1)}const Dp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),IC=()=>({...Dp(),attrs:{}}),Fp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PC(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const RC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bC(t,e,n,r){PC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(RC.has(i)?i:Ap(i),e.attrs[i])}const hu={};function DI(t){Object.assign(hu,t)}function MC(t,{layout:e,layoutId:n}){return Ii.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!hu[t]||t==="opacity")}function Lp(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(bt(i[o])||e.style&&bt(e.style[o])||MC(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function NC(t,e,n){const r=Lp(t,e,n);for(const i in t)if(bt(t[i])||bt(e[i])){const s=Us.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function FI(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const wy=["x","y","width","height","cx","cy","r"],LI={useVisualState:SC({scrapeMotionValuesFromProps:NC,createRenderState:IC,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Ii.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<wy.length;a++){const c=wy[a];t[c]!==e[c]&&(o=!0)}o&&We.read(()=>{FI(n,r),We.render(()=>{Np(r,i,Fp(n.tagName),t.transformTemplate),bC(n,r)})})}})},VI={useVisualState:SC({scrapeMotionValuesFromProps:Lp,createRenderState:Dp})};function DC(t,e,n){for(const r in e)!bt(e[r])&&!MC(r,n)&&(t[r]=e[r])}function UI({transformTemplate:t},e){return z.useMemo(()=>{const n=Dp();return Mp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function OI(t,e){const n=t.style||{},r={};return DC(r,n,t),Object.assign(r,UI(t,e)),r}function BI(t,e){const n={},r=OI(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function $I(t,e,n,r){const i=z.useMemo(()=>{const s=IC();return Np(s,e,Fp(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};DC(s,t.style,t),i.style={...s,...i.style}}return i}function zI(t=!1){return(n,r,i,{latestValues:s},o)=>{const c=(Ip(n)?$I:BI)(r,s,o,n),d=rI(r,typeof n=="string",t),f=n!==z.Fragment?{...d,...c,ref:i}:{},{children:h}=r,p=z.useMemo(()=>bt(h)?h.get():h,[h]);return z.createElement(n,{...f,children:p})}}function GI(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Ip(r)?LI:VI,preloadedFeatures:t,useRender:zI(i),createVisualElement:e,Component:r};return fI(o)}}function FC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function rc(t,e,n){const r=t.getProps();return Pp(r,e,n!==void 0?n:r.custom,t)}const HI=Tp(()=>window.ScrollTimeline!==void 0);class WI{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(HI()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class qI extends WI{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Vp(t,e){return t?t[e]||t.default||t:void 0}const Sf=2e4;function LC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Sf;)e+=n,r=t.next(e);return e>=Sf?1/0:e}function Up(t){return typeof t=="function"}function xy(t,e){t.timeline=e,t.onfinish=null}const Op=t=>Array.isArray(t)&&typeof t[0]=="number",JI={linearEasing:void 0};function KI(t,e){const n=Tp(t);return()=>{var r;return(r=JI[e])!==null&&r!==void 0?r:n()}}const pu=KI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),VC=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(As(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function UC(t){return!!(typeof t=="function"&&pu()||!t||typeof t=="string"&&(t in Ef||pu())||Op(t)||Array.isArray(t)&&t.every(UC))}const fo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ef={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fo([0,.65,.55,1]),circOut:fo([.55,0,1,.45]),backIn:fo([.31,.01,.66,-.59]),backOut:fo([.33,1.53,.69,.99])};function OC(t,e){if(t)return typeof t=="function"&&pu()?VC(t,e):Op(t)?fo(t):Array.isArray(t)?t.map(n=>OC(n,e)||Ef.easeOut):Ef[t]}const Sn={x:!1,y:!1};function BC(){return Sn.x||Sn.y}function ZI(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function $C(t,e){const n=ZI(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Cy(t){return e=>{e.pointerType==="touch"||BC()||t(e)}}function YI(t,e,n={}){const[r,i,s]=$C(t,n),o=Cy(a=>{const{target:c}=a,d=e(a);if(typeof d!="function"||!c)return;const f=Cy(h=>{d(h),c.removeEventListener("pointerleave",f)});c.addEventListener("pointerleave",f,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const zC=(t,e)=>e?t===e?!0:zC(t,e.parentElement):!1,Bp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,XI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QI(t){return XI.has(t.tagName)||t.tabIndex!==-1}const ho=new WeakSet;function Ty(t){return e=>{e.key==="Enter"&&t(e)}}function jc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const jI=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Ty(()=>{if(ho.has(n))return;jc(n,"down");const i=Ty(()=>{jc(n,"up")}),s=()=>jc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Sy(t){return Bp(t)&&!BC()}function eP(t,e,n={}){const[r,i,s]=$C(t,n),o=a=>{const c=a.currentTarget;if(!Sy(a)||ho.has(c))return;ho.add(c);const d=e(a),f=(m,_)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!Sy(m)||!ho.has(c))&&(ho.delete(c),typeof d=="function"&&d(m,{success:_}))},h=m=>{f(m,n.useGlobalTarget||zC(c,m.target))},p=m=>{f(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!QI(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",d=>jI(d,i),i)}),s}function tP(t){return t==="x"||t==="y"?Sn[t]?null:(Sn[t]=!0,()=>{Sn[t]=!1}):Sn.x||Sn.y?null:(Sn.x=Sn.y=!0,()=>{Sn.x=Sn.y=!1})}const GC=new Set(["width","height","top","left","right","bottom",...Us]);let Rl;function nP(){Rl=void 0}const qn={now:()=>(Rl===void 0&&qn.set(wt.isProcessing||Xk.useManualTiming?wt.timestamp:performance.now()),Rl),set:t=>{Rl=t,queueMicrotask(nP)}};function $p(t,e){t.indexOf(e)===-1&&t.push(e)}function zp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Gp{constructor(){this.subscriptions=[]}add(e){return $p(this.subscriptions,e),()=>zp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function HC(t,e){return e?t*(1e3/e):0}const Ey=30,rP=t=>!isNaN(parseFloat(t));class iP{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=qn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=qn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Gp);const r=this.events[e].add(n);return e==="change"?()=>{r(),We.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ey)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ey);return HC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function aa(t,e){return new iP(t,e)}function sP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,aa(n))}function oP(t,e){const n=rc(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=vI(s[o]);sP(t,o,a)}}function aP(t){return!!(bt(t)&&t.add)}function Af(t,e){const n=t.getValue("willChange");if(aP(n))return n.add(e)}function WC(t){return t.props[xC]}const qC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,lP=1e-7,uP=12;function cP(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=qC(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>lP&&++a<uP);return o}function wa(t,e,n,r){if(t===e&&n===r)return nn;const i=s=>cP(s,0,1,t,n);return s=>s===0||s===1?s:qC(i(s),e,r)}const JC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KC=t=>e=>1-t(1-e),ZC=wa(.33,1.53,.69,.99),Hp=KC(ZC),YC=JC(Hp),XC=t=>(t*=2)<1?.5*Hp(t):.5*(2-Math.pow(2,-10*(t-1))),Wp=t=>1-Math.sin(Math.acos(t)),QC=KC(Wp),jC=JC(Wp),eT=t=>/^0[^.\s]+$/u.test(t);function dP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||eT(t):!0}const Do=t=>Math.round(t*1e5)/1e5,qp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fP(t){return t==null}const hP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jp=(t,e)=>n=>!!(typeof n=="string"&&hP.test(n)&&n.startsWith(t)||e&&!fP(n)&&Object.prototype.hasOwnProperty.call(n,e)),tT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(qp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},pP=t=>cr(0,255,t),ed={...Os,transform:t=>Math.round(pP(t))},fi={test:Jp("rgb","red"),parse:tT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ed.transform(t)+", "+ed.transform(e)+", "+ed.transform(n)+", "+Do(oa.transform(r))+")"};function mP(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kf={test:Jp("#"),parse:mP,transform:fi.transform},ns={test:Jp("hsl","hue"),parse:tT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wn.transform(Do(e))+", "+Wn.transform(Do(n))+", "+Do(oa.transform(r))+")"},Pt={test:t=>fi.test(t)||kf.test(t)||ns.test(t),parse:t=>fi.test(t)?fi.parse(t):ns.test(t)?ns.parse(t):kf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fi.transform(t):ns.transform(t)},gP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function yP(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(gP))===null||n===void 0?void 0:n.length)||0)>0}const nT="number",rT="color",vP="var",_P="var(",Ay="${}",wP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function la(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(wP,c=>(Pt.test(c)?(r.color.push(s),i.push(rT),n.push(Pt.parse(c))):c.startsWith(_P)?(r.var.push(s),i.push(vP),n.push(c)):(r.number.push(s),i.push(nT),n.push(parseFloat(c))),++s,Ay)).split(Ay);return{values:n,split:a,indexes:r,types:i}}function iT(t){return la(t).values}function sT(t){const{split:e,types:n}=la(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===nT?s+=Do(i[o]):a===rT?s+=Pt.transform(i[o]):s+=i[o]}return s}}const xP=t=>typeof t=="number"?0:t;function CP(t){const e=iT(t);return sT(t)(e.map(xP))}const Hr={test:yP,parse:iT,createTransformer:sT,getAnimatableNone:CP},TP=new Set(["brightness","contrast","saturate","opacity"]);function SP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(qp)||[];if(!r)return t;const i=n.replace(r,"");let s=TP.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const EP=/\b([a-z-]*)\(.*?\)/gu,If={...Hr,getAnimatableNone:t=>{const e=t.match(EP);return e?e.map(SP).join(" "):t}},AP={...bp,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:If,WebkitFilter:If},Kp=t=>AP[t];function oT(t,e){let n=Kp(t);return n!==If&&(n=Hr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kP=new Set(["auto","none","0"]);function IP(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!kP.has(s)&&la(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=oT(n,i)}const ky=t=>t===Os||t===pe,Iy=(t,e)=>parseFloat(t.split(", ")[e]),Py=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Iy(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Iy(s[1],t):0}},PP=new Set(["x","y","z"]),RP=Us.filter(t=>!PP.has(t));function bP(t){const e=[];return RP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Is={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Py(4,13),y:Py(5,14)};Is.translateX=Is.x;Is.translateY=Is.y;const gi=new Set;let Pf=!1,Rf=!1;function aT(){if(Rf){const t=Array.from(gi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=bP(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Rf=!1,Pf=!1,gi.forEach(t=>t.complete()),gi.clear()}function lT(){gi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Rf=!0)})}function MP(){lT(),aT()}class Zp{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(gi.add(this),Pf||(Pf=!0,We.read(lT),We.resolveKeyframes(aT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),gi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,gi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const uT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),NP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DP(t){const e=NP.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function cT(t,e,n=1){const[r,i]=DP(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return uT(o)?parseFloat(o):o}return Rp(i)?cT(i,e,n+1):i}const dT=t=>e=>e.test(t),FP={test:t=>t==="auto",parse:t=>t},fT=[Os,pe,Wn,wr,SI,TI,FP],Ry=t=>fT.find(dT(t));class hT extends Zp{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Rp(d))){const f=cT(d,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!GC.has(r)||e.length!==2)return;const[i,s]=e,o=Ry(i),a=Ry(s);if(o!==a)if(ky(o)&&ky(a))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)dP(e[i])&&r.push(i);r.length&&IP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Is[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Is[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const by=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Hr.test(t)||t==="0")&&!t.startsWith("url("));function LP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function VP(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=by(i,e),a=by(s,e);return!o||!a?!1:LP(t)||(n==="spring"||Up(n))&&r}const UP=t=>t!==null;function ic(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(UP),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const OP=40;class pT{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=qn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>OP?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&MP(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=qn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:c,isGenerator:d}=this.options;if(!d&&!VP(e,r,i,s))if(o)this.options.duration=0;else{c&&c(ic(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const je=(t,e,n)=>t+(e-t)*n;function td(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function BP({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=td(c,a,t+1/3),s=td(c,a,t),o=td(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function mu(t,e){return n=>n>0?e:t}const nd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$P=[kf,fi,ns],zP=t=>$P.find(e=>e.test(t));function My(t){const e=zP(t);if(!e)return!1;let n=e.parse(t);return e===ns&&(n=BP(n)),n}const Ny=(t,e)=>{const n=My(t),r=My(e);if(!n||!r)return mu(t,e);const i={...n};return s=>(i.red=nd(n.red,r.red,s),i.green=nd(n.green,r.green,s),i.blue=nd(n.blue,r.blue,s),i.alpha=je(n.alpha,r.alpha,s),fi.transform(i))},GP=(t,e)=>n=>e(t(n)),xa=(...t)=>t.reduce(GP),bf=new Set(["none","hidden"]);function HP(t,e){return bf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function WP(t,e){return n=>je(t,e,n)}function Yp(t){return typeof t=="number"?WP:typeof t=="string"?Rp(t)?mu:Pt.test(t)?Ny:KP:Array.isArray(t)?mT:typeof t=="object"?Pt.test(t)?Ny:qP:mu}function mT(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Yp(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function qP(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Yp(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function JP(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],c=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=c,i[o]++}return r}const KP=(t,e)=>{const n=Hr.createTransformer(e),r=la(t),i=la(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?bf.has(t)&&!i.values.length||bf.has(e)&&!r.values.length?HP(t,e):xa(mT(JP(r,i),i.values),n):mu(t,e)};function gT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?je(t,e,n):Yp(t)(t,e)}const ZP=5;function yT(t,e,n){const r=Math.max(e-ZP,0);return HC(n-t(r),e-r)}const rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rd=.001;function YP({duration:t=rt.duration,bounce:e=rt.bounce,velocity:n=rt.velocity,mass:r=rt.mass}){let i,s,o=1-e;o=cr(rt.minDamping,rt.maxDamping,o),t=cr(rt.minDuration,rt.maxDuration,sr(t)),o<1?(i=d=>{const f=d*o,h=f*t,p=f-n,m=Mf(d,o),_=Math.exp(-h);return rd-p/m*_},s=d=>{const h=d*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(d,2)*t,_=Math.exp(-h),g=Mf(Math.pow(d,2),o);return(-i(d)+rd>0?-1:1)*((p-m)*_)/g}):(i=d=>{const f=Math.exp(-d*t),h=(d-n)*t+1;return-rd+f*h},s=d=>{const f=Math.exp(-d*t),h=(n-d)*(t*t);return f*h});const a=5/t,c=QP(i,s,a);if(t=ir(t),isNaN(c))return{stiffness:rt.stiffness,damping:rt.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const XP=12;function QP(t,e,n){let r=n;for(let i=1;i<XP;i++)r=r-t(r)/e(r);return r}function Mf(t,e){return t*Math.sqrt(1-e*e)}const jP=["duration","bounce"],eR=["stiffness","damping","mass"];function Dy(t,e){return e.some(n=>t[n]!==void 0)}function tR(t){let e={velocity:rt.velocity,stiffness:rt.stiffness,damping:rt.damping,mass:rt.mass,isResolvedFromDuration:!1,...t};if(!Dy(t,eR)&&Dy(t,jP))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*cr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:rt.mass,stiffness:i,damping:s}}else{const n=YP(t);e={...e,...n,mass:rt.mass},e.isResolvedFromDuration=!0}return e}function vT(t=rt.visualDuration,e=rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:d,mass:f,duration:h,velocity:p,isResolvedFromDuration:m}=tR({...n,velocity:-sr(n.velocity||0)}),_=p||0,g=d/(2*Math.sqrt(c*f)),x=o-s,y=sr(Math.sqrt(c/f)),v=Math.abs(x)<5;r||(r=v?rt.restSpeed.granular:rt.restSpeed.default),i||(i=v?rt.restDelta.granular:rt.restDelta.default);let w;if(g<1){const A=Mf(y,g);w=P=>{const R=Math.exp(-g*y*P);return o-R*((_+g*y*x)/A*Math.sin(A*P)+x*Math.cos(A*P))}}else if(g===1)w=A=>o-Math.exp(-y*A)*(x+(_+y*x)*A);else{const A=y*Math.sqrt(g*g-1);w=P=>{const R=Math.exp(-g*y*P),N=Math.min(A*P,300);return o-R*((_+g*y*x)*Math.sinh(N)+A*x*Math.cosh(N))/A}}const E={calculatedDuration:m&&h||null,next:A=>{const P=w(A);if(m)a.done=A>=h;else{let R=0;g<1&&(R=A===0?ir(_):yT(w,A,P));const N=Math.abs(R)<=r,D=Math.abs(o-P)<=i;a.done=N&&D}return a.value=a.done?o:P,a},toString:()=>{const A=Math.min(LC(E),Sf),P=VC(R=>E.next(A*R).value,A,30);return A+"ms "+P}};return E}function Fy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:d=.5,restSpeed:f}){const h=t[0],p={done:!1,value:h},m=N=>a!==void 0&&N<a||c!==void 0&&N>c,_=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let g=n*e;const x=h+g,y=o===void 0?x:o(x);y!==x&&(g=y-h);const v=N=>-g*Math.exp(-N/r),w=N=>y+v(N),E=N=>{const D=v(N),F=w(N);p.done=Math.abs(D)<=d,p.value=p.done?y:F};let A,P;const R=N=>{m(p.value)&&(A=N,P=vT({keyframes:[p.value,_(p.value)],velocity:yT(w,N,p.value),damping:i,stiffness:s,restDelta:d,restSpeed:f}))};return R(0),{calculatedDuration:null,next:N=>{let D=!1;return!P&&A===void 0&&(D=!0,E(N),R(N)),A!==void 0&&N>=A?P.next(N-A):(!D&&E(N),p)}}}const nR=wa(.42,0,1,1),rR=wa(0,0,.58,1),_T=wa(.42,0,.58,1),iR=t=>Array.isArray(t)&&typeof t[0]!="number",sR={linear:nn,easeIn:nR,easeInOut:_T,easeOut:rR,circIn:Wp,circInOut:jC,circOut:QC,backIn:Hp,backInOut:YC,backOut:ZC,anticipate:XC},Ly=t=>{if(Op(t)){gC(t.length===4);const[e,n,r,i]=t;return wa(e,n,r,i)}else if(typeof t=="string")return sR[t];return t};function oR(t,e,n){const r=[],i=n||gT,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||nn:e;a=xa(c,a)}r.push(a)}return r}function aR(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(gC(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=oR(e,r,i),c=a.length,d=f=>{if(o&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const p=As(t[h],t[h+1],f);return a[h](p)};return n?f=>d(cr(t[0],t[s-1],f)):d}function lR(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=As(0,e,r);t.push(je(n,1,i))}}function uR(t){const e=[0];return lR(e,t.length-1),e}function cR(t,e){return t.map(n=>n*e)}function dR(t,e){return t.map(()=>e||_T).splice(0,t.length-1)}function gu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=iR(r)?r.map(Ly):Ly(r),s={done:!1,value:e[0]},o=cR(n&&n.length===e.length?n:uR(e),t),a=aR(o,e,{ease:Array.isArray(i)?i:dR(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}const fR=t=>{const e=({timestamp:n})=>t(n);return{start:()=>We.update(e,!0),stop:()=>Gr(e),now:()=>wt.isProcessing?wt.timestamp:qn.now()}},hR={decay:Fy,inertia:Fy,tween:gu,keyframes:gu,spring:vT},pR=t=>t/100;class Xp extends pT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||Zp,a=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Up(n)?n:hR[n]||gu;let c,d;a!==gu&&typeof e[0]!="number"&&(c=xa(pR,gT(e[0],e[1])),e=[0,100]);const f=a({...this.options,keyframes:e});s==="mirror"&&(d=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=LC(f));const{calculatedDuration:h}=f,p=h+i,m=p*(r+1)-i;return{generator:f,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:d,totalDuration:f,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:_,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>f;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let w=this.currentTime,E=s;if(m){const N=Math.min(this.currentTime,f)/h;let D=Math.floor(N),F=N%1;!F&&N>=1&&(F=1),F===1&&D--,D=Math.min(D,m+1),!!(D%2)&&(_==="reverse"?(F=1-F,g&&(F-=g/h)):_==="mirror"&&(E=o)),w=cr(0,1,F)*h}const A=v?{done:!1,value:c[0]}:E.next(w);a&&(A.value=a(A.value));let{done:P}=A;!v&&d!==null&&(P=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return R&&i!==void 0&&(A.value=ic(c,this.options,i)),x&&x(A.value),R&&this.finish(),A}get duration(){const{resolved:e}=this;return e?sr(e.calculatedDuration):0}get time(){return sr(this.currentTime)}set time(e){e=ir(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=sr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=fR,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const mR=new Set(["opacity","clipPath","filter","transform"]);function gR(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:c}={}){const d={[e]:n};c&&(d.offset=c);const f=OC(a,i);return Array.isArray(f)&&(d.easing=f),t.animate(d,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const yR=Tp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yu=10,vR=2e4;function _R(t){return Up(t.type)||t.type==="spring"||!UC(t.ease)}function wR(t,e){const n=new Xp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<vR;)r=n.sample(s),i.push(r.value),s+=yu;return{times:void 0,keyframes:i,duration:s-yu,ease:"linear"}}const wT={anticipate:XC,backInOut:YC,circInOut:jC};function xR(t){return t in wT}class Vy extends pT{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new hT(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:c,startTime:d}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&pu()&&xR(s)&&(s=wT[s]),_R(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:_,...g}=this.options,x=wR(e,g);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const f=gR(a.owner.current,c,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=d??this.calcStartTime(),this.pendingTimeline?(xy(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;a.set(ic(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return sr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return sr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ir(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return nn;const{animation:r}=n;xy(r,e)}return nn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:f,onComplete:h,element:p,...m}=this.options,_=new Xp({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),g=ir(this.time);d.setWithVelocity(_.sample(g-yu).value,_.sample(g).value,yu)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=n.owner.getProps();return yR()&&r&&mR.has(r)&&!c&&!d&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const CR={type:"spring",stiffness:500,damping:25,restSpeed:10},TR=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SR={type:"keyframes",duration:.8},ER={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AR=(t,{keyframes:e})=>e.length>2?SR:Ii.has(t)?t.startsWith("scale")?TR(e[1]):CR:ER;function kR({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:d,...f}){return!!Object.keys(f).length}const Qp=(t,e,n,r={},i,s)=>o=>{const a=Vp(r,t)||{},c=a.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ir(c);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-d,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};kR(a)||(f={...f,...AR(t,f)}),f.duration&&(f.duration=ir(f.duration)),f.repeatDelay&&(f.repeatDelay=ir(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const p=ic(f.keyframes,a);if(p!==void 0)return We.update(()=>{f.onUpdate(p),f.onComplete()}),new qI([])}return!s&&Vy.supports(f)?new Vy(f):new Xp(f)};function IR({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function xT(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(o=r);const d=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const p=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),m=c[h];if(m===void 0||f&&IR(f,h))continue;const _={delay:n,...Vp(o||{},h)};let g=!1;if(window.MotionHandoffAnimation){const y=WC(t);if(y){const v=window.MotionHandoffAnimation(y,h,We);v!==null&&(_.startTime=v,g=!0)}}Af(t,h),p.start(Qp(h,p,m,t.shouldReduceMotion&&GC.has(h)?{type:!1}:_,t,g));const x=p.animation;x&&d.push(x)}return a&&Promise.all(d).then(()=>{We.update(()=>{a&&oP(t,a)})}),d}function Nf(t,e,n={}){var r;const i=rc(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(xT(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=s;return PR(t,e,f+d,h,p,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,f]=c==="beforeChildren"?[o,a]:[a,o];return d().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function PR(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,c=i===1?(d=0)=>d*r:(d=0)=>a-d*r;return Array.from(t.variantChildren).sort(RR).forEach((d,f)=>{d.notify("AnimationStart",e),o.push(Nf(d,e,{...s,delay:n+c(f)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function RR(t,e){return t.sortNodePosition(e)}function bR(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Nf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Nf(t,e,n);else{const i=typeof e=="function"?rc(t,e,n.custom):e;r=Promise.all(xT(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const MR=Ep.length;function CT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?CT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<MR;n++){const r=Ep[n],i=t.props[r];(sa(i)||i===!1)&&(e[r]=i)}return e}const NR=[...Sp].reverse(),DR=Sp.length;function FR(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bR(t,n,r)))}function LR(t){let e=FR(t),n=Uy(),r=!0;const i=c=>(d,f)=>{var h;const p=rc(t,f,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:_,...g}=p;d={...d,...g,..._}}return d};function s(c){e=c(t)}function o(c){const{props:d}=t,f=CT(t.parent)||{},h=[],p=new Set;let m={},_=1/0;for(let x=0;x<DR;x++){const y=NR[x],v=n[y],w=d[y]!==void 0?d[y]:f[y],E=sa(w),A=y===c?v.isActive:null;A===!1&&(_=x);let P=w===f[y]&&w!==d[y]&&E;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),v.protectedKeys={...m},!v.isActive&&A===null||!w&&!v.prevProp||tc(w)||typeof w=="boolean")continue;const R=VR(v.prevProp,w);let N=R||y===c&&v.isActive&&!P&&E||x>_&&E,D=!1;const F=Array.isArray(w)?w:[w];let q=F.reduce(i(y),{});A===!1&&(q={});const{prevResolvedValues:I={}}=v,M={...I,...q},C=G=>{N=!0,p.has(G)&&(D=!0,p.delete(G)),v.needsAnimating[G]=!0;const H=t.getValue(G);H&&(H.liveStyle=!1)};for(const G in M){const H=q[G],B=I[G];if(m.hasOwnProperty(G))continue;let K=!1;Tf(H)&&Tf(B)?K=!FC(H,B):K=H!==B,K?H!=null?C(G):p.add(G):H!==void 0&&p.has(G)?C(G):v.protectedKeys[G]=!0}v.prevProp=w,v.prevResolvedValues=q,v.isActive&&(m={...m,...q}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(P&&R)||D)&&h.push(...F.map(G=>({animation:G,options:{type:y}})))}if(p.size){const x={};p.forEach(y=>{const v=t.getBaseTarget(y),w=t.getValue(y);w&&(w.liveStyle=!0),x[y]=v??null}),h.push({animation:x})}let g=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(c,d){var f;if(n[c].isActive===d)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Uy(),r=!0}}}function VR(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FC(e,t):!1}function ei(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Uy(){return{animate:ei(!0),whileInView:ei(),whileHover:ei(),whileTap:ei(),whileDrag:ei(),whileFocus:ei(),exit:ei()}}class Zr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class UR extends Zr{constructor(e){super(e),e.animationState||(e.animationState=LR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();tc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let OR=0;class BR extends Zr{constructor(){super(...arguments),this.id=OR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $R={animation:{Feature:UR},exit:{Feature:BR}};function ua(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ca(t){return{point:{x:t.pageX,y:t.pageY}}}const zR=t=>e=>Bp(e)&&t(e,Ca(e));function Fo(t,e,n,r){return ua(t,e,zR(n),r)}const Oy=(t,e)=>Math.abs(t-e);function GR(t,e){const n=Oy(t.x,e.x),r=Oy(t.y,e.y);return Math.sqrt(n**2+r**2)}class TT{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=sd(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=GR(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:_}=h,{timestamp:g}=wt;this.history.push({..._,timestamp:g});const{onStart:x,onMove:y}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=id(p,this.transformPagePoint),We.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:_,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=sd(h.type==="pointercancel"?this.lastMoveEventInfo:id(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),_&&_(h,x)},!Bp(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Ca(e),a=id(o,this.transformPagePoint),{point:c}=a,{timestamp:d}=wt;this.history=[{...c,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,sd(a,this.history)),this.removeListeners=xa(Fo(this.contextWindow,"pointermove",this.handlePointerMove),Fo(this.contextWindow,"pointerup",this.handlePointerUp),Fo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Gr(this.updatePoint)}}function id(t,e){return e?{point:e(t.point)}:t}function By(t,e){return{x:t.x-e.x,y:t.y-e.y}}function sd({point:t},e){return{point:t,delta:By(t,ST(e)),offset:By(t,HR(e)),velocity:WR(e,.1)}}function HR(t){return t[0]}function ST(t){return t[t.length-1]}function WR(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ST(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ir(e)));)n--;if(!r)return{x:0,y:0};const s=sr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const ET=1e-4,qR=1-ET,JR=1+ET,AT=.01,KR=0-AT,ZR=0+AT;function on(t){return t.max-t.min}function YR(t,e,n){return Math.abs(t-e)<=n}function $y(t,e,n,r=.5){t.origin=r,t.originPoint=je(e.min,e.max,t.origin),t.scale=on(n)/on(e),t.translate=je(n.min,n.max,t.origin)-t.originPoint,(t.scale>=qR&&t.scale<=JR||isNaN(t.scale))&&(t.scale=1),(t.translate>=KR&&t.translate<=ZR||isNaN(t.translate))&&(t.translate=0)}function Lo(t,e,n,r){$y(t.x,e.x,n.x,r?r.originX:void 0),$y(t.y,e.y,n.y,r?r.originY:void 0)}function zy(t,e,n){t.min=n.min+e.min,t.max=t.min+on(e)}function XR(t,e,n){zy(t.x,e.x,n.x),zy(t.y,e.y,n.y)}function Gy(t,e,n){t.min=e.min-n.min,t.max=t.min+on(e)}function Vo(t,e,n){Gy(t.x,e.x,n.x),Gy(t.y,e.y,n.y)}function QR(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?je(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?je(n,t,r.max):Math.min(t,n)),t}function Hy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jR(t,{top:e,left:n,bottom:r,right:i}){return{x:Hy(t.x,n,i),y:Hy(t.y,e,r)}}function Wy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function eb(t,e){return{x:Wy(t.x,e.x),y:Wy(t.y,e.y)}}function tb(t,e){let n=.5;const r=on(t),i=on(e);return i>r?n=As(e.min,e.max-r,t.min):r>i&&(n=As(t.min,t.max-i,e.min)),cr(0,1,n)}function nb(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Df=.35;function rb(t=Df){return t===!1?t=0:t===!0&&(t=Df),{x:qy(t,"left","right"),y:qy(t,"top","bottom")}}function qy(t,e,n){return{min:Jy(t,e),max:Jy(t,n)}}function Jy(t,e){return typeof t=="number"?t:t[e]||0}const Ky=()=>({translate:0,scale:1,origin:0,originPoint:0}),rs=()=>({x:Ky(),y:Ky()}),Zy=()=>({min:0,max:0}),st=()=>({x:Zy(),y:Zy()});function dn(t){return[t("x"),t("y")]}function kT({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ib({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sb(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function od(t){return t===void 0||t===1}function Ff({scale:t,scaleX:e,scaleY:n}){return!od(t)||!od(e)||!od(n)}function si(t){return Ff(t)||IT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function IT(t){return Yy(t.x)||Yy(t.y)}function Yy(t){return t&&t!=="0%"}function vu(t,e,n){const r=t-n,i=e*r;return n+i}function Xy(t,e,n,r,i){return i!==void 0&&(t=vu(t,i,r)),vu(t,n,r)+e}function Lf(t,e=0,n=1,r,i){t.min=Xy(t.min,e,n,r,i),t.max=Xy(t.max,e,n,r,i)}function PT(t,{x:e,y:n}){Lf(t.x,e.translate,e.scale,e.originPoint),Lf(t.y,n.translate,n.scale,n.originPoint)}const Qy=.999999999999,jy=1.0000000000001;function ob(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ss(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,PT(t,o)),r&&si(s.latestValues)&&ss(t,s.latestValues))}e.x<jy&&e.x>Qy&&(e.x=1),e.y<jy&&e.y>Qy&&(e.y=1)}function is(t,e){t.min=t.min+e,t.max=t.max+e}function ev(t,e,n,r,i=.5){const s=je(t.min,t.max,i);Lf(t,e,n,s,r)}function ss(t,e){ev(t.x,e.x,e.scaleX,e.scale,e.originX),ev(t.y,e.y,e.scaleY,e.scale,e.originY)}function RT(t,e){return kT(sb(t.getBoundingClientRect(),e))}function ab(t,e,n){const r=RT(t,n),{scroll:i}=e;return i&&(is(r.x,i.offset.x),is(r.y,i.offset.y)),r}const bT=({current:t})=>t?t.ownerDocument.defaultView:null,lb=new WeakMap;class ub{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=st(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ca(f).point)},s=(f,h)=>{const{drag:p,dragPropagation:m,onDragStart:_}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tP(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),dn(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Wn.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[x];w&&(y=on(w)*(parseFloat(y)/100))}}this.originPoint[x]=y}),_&&We.postRender(()=>_(f,h)),Af(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(f,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:_,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=cb(x),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),g&&g(f,h)},a=(f,h)=>this.stop(f,h),c=()=>dn(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new TT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:bT(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&We.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!tl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=QR(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ts(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=jR(i.layoutBox,n):this.constraints=!1,this.elastic=rb(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&dn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=nb(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ts(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=ab(r,i.root,this.visualElement.getTransformPagePoint());let o=eb(i.layout.layoutBox,s);if(n){const a=n(ib(o));this.hasMutatedConstraints=!!a,a&&(o=kT(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},d=dn(f=>{if(!tl(f,n,this.currentDirection))return;let h=c&&c[f]||{};o&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,_={type:"inertia",velocity:r?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(f,_)});return Promise.all(d).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Af(this.visualElement,e),r.start(Qp(e,r,0,n,this.visualElement,!1))}stopAnimation(){dn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){dn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){dn(n=>{const{drag:r}=this.getProps();if(!tl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-je(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ts(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};dn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=tb({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),dn(o=>{if(!tl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];a.set(je(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;lb.set(this.visualElement,this);const e=this.visualElement.current,n=Fo(e,"pointerdown",c=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ts(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),We.read(r);const o=ua(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(dn(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Df,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function tl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function cb(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class db extends Zr{constructor(e){super(e),this.removeGroupControls=nn,this.removeListeners=nn,this.controls=new ub(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const tv=t=>(e,n)=>{t&&We.postRender(()=>t(e,n))};class fb extends Zr{constructor(){super(...arguments),this.removePointerDownListener=nn}onPointerDown(e){this.session=new TT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:tv(e),onStart:tv(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&We.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Fo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const io={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=nv(t,e.target.x),r=nv(t,e.target.y);return`${n}% ${r}%`}},hb={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Hr.parse(t);if(i.length>5)return r;const s=Hr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const d=je(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class pb extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;DI(mb),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),bl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||We.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MT(t){const[e,n]=Zk(),r=z.useContext(pC);return S.jsx(pb,{...t,layoutGroup:r,switchLayoutGroup:z.useContext(CC),isPresent:e,safeToRemove:n})}const mb={borderRadius:{...io,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:io,borderTopRightRadius:io,borderBottomLeftRadius:io,borderBottomRightRadius:io,boxShadow:hb};function gb(t,e,n){const r=bt(t)?t:aa(t);return r.start(Qp("",r,e,n)),r.animation}function yb(t){return t instanceof SVGElement&&t.tagName!=="svg"}const vb=(t,e)=>t.depth-e.depth;class _b{constructor(){this.children=[],this.isDirty=!1}add(e){$p(this.children,e),this.isDirty=!0}remove(e){zp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vb),this.isDirty=!1,this.children.forEach(e)}}function wb(t,e){const n=qn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Gr(r),t(s-e))};return We.read(r,!0),()=>Gr(r)}const NT=["TopLeft","TopRight","BottomLeft","BottomRight"],xb=NT.length,rv=t=>typeof t=="string"?parseFloat(t):t,iv=t=>typeof t=="number"||pe.test(t);function Cb(t,e,n,r,i,s){i?(t.opacity=je(0,n.opacity!==void 0?n.opacity:1,Tb(r)),t.opacityExit=je(e.opacity!==void 0?e.opacity:1,0,Sb(r))):s&&(t.opacity=je(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<xb;o++){const a=`border${NT[o]}Radius`;let c=sv(e,a),d=sv(n,a);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||iv(c)===iv(d)?(t[a]=Math.max(je(rv(c),rv(d),r),0),(Wn.test(d)||Wn.test(c))&&(t[a]+="%")):t[a]=d}(e.rotate||n.rotate)&&(t.rotate=je(e.rotate||0,n.rotate||0,r))}function sv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Tb=DT(0,.5,QC),Sb=DT(.5,.95,nn);function DT(t,e,n){return r=>r<t?0:r>e?1:n(As(t,e,r))}function ov(t,e){t.min=e.min,t.max=e.max}function cn(t,e){ov(t.x,e.x),ov(t.y,e.y)}function av(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lv(t,e,n,r,i){return t-=e,t=vu(t,1/n,r),i!==void 0&&(t=vu(t,1/i,r)),t}function Eb(t,e=0,n=1,r=.5,i,s=t,o=t){if(Wn.test(e)&&(e=parseFloat(e),e=je(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=je(s.min,s.max,r);t===s&&(a-=e),t.min=lv(t.min,e,n,a,i),t.max=lv(t.max,e,n,a,i)}function uv(t,e,[n,r,i],s,o){Eb(t,e[n],e[r],e[i],e.scale,s,o)}const Ab=["x","scaleX","originX"],kb=["y","scaleY","originY"];function cv(t,e,n,r){uv(t.x,e,Ab,n?n.x:void 0,r?r.x:void 0),uv(t.y,e,kb,n?n.y:void 0,r?r.y:void 0)}function dv(t){return t.translate===0&&t.scale===1}function FT(t){return dv(t.x)&&dv(t.y)}function fv(t,e){return t.min===e.min&&t.max===e.max}function Ib(t,e){return fv(t.x,e.x)&&fv(t.y,e.y)}function hv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function LT(t,e){return hv(t.x,e.x)&&hv(t.y,e.y)}function pv(t){return on(t.x)/on(t.y)}function mv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Pb{constructor(){this.members=[]}add(e){$p(this.members,e),e.scheduleRender()}remove(e){if(zp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rb(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:h,rotateY:p,skewX:m,skewY:_}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const oi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},po=typeof window<"u"&&window.MotionDebug!==void 0,ad=["","X","Y","Z"],bb={visibility:"hidden"},gv=1e3;let Mb=0;function ld(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function VT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=WC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",We,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&VT(r)}function UT({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Mb++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,po&&(oi.totalNodes=oi.resolvedTargetDeltas=oi.recalculatedProjection=0),this.nodes.forEach(Fb),this.nodes.forEach(Bb),this.nodes.forEach($b),this.nodes.forEach(Lb),po&&window.MotionDebug.record(oi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _b)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Gp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yb(o),this.instance=o;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(d||c)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=wb(p,250),bl.hasAnimatedSinceResize&&(bl.hasAnimatedSinceResize=!1,this.nodes.forEach(vv))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||f.getDefaultTransition()||qb,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=f.getProps(),v=!this.targetLayout||!LT(this.targetLayout,_)||m,w=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const E={...Vp(g,"layout"),onPlay:x,onComplete:y};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||vv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Gr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zb),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yv);return}this.isUpdating||this.nodes.forEach(Ub),this.isUpdating=!1,this.nodes.forEach(Ob),this.nodes.forEach(Nb),this.nodes.forEach(Db),this.clearAllSnapshots();const a=qn.now();wt.delta=cr(0,1e3/60,a-wt.timestamp),wt.timestamp=a,wt.isProcessing=!0,Qc.update.process(wt),Qc.preRender.process(wt),Qc.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vb),this.sharedNodes.forEach(Gb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,We.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){We.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=st(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!FT(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&(a||si(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),Jb(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return st();const c=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Kb))){const{scroll:f}=this.root;f&&(is(c.x,f.offset.x),is(c.y,f.offset.y))}return c}removeElementScroll(o){var a;const c=st();if(cn(c,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&cn(c,o),is(c.x,h.offset.x),is(c.y,h.offset.y))}return c}applyTransform(o,a=!1){const c=st();cn(c,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ss(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),si(f.latestValues)&&ss(c,f.latestValues)}return si(this.latestValues)&&ss(c,this.latestValues),c}removeTransform(o){const a=st();cn(a,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!si(d.latestValues))continue;Ff(d.latestValues)&&d.updateSnapshot();const f=st(),h=d.measurePageBox();cn(f,h),cv(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return si(this.latestValues)&&cv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=wt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),Vo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=st(),this.targetWithTransforms=st()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cn(this.target,this.layout.layoutBox),PT(this.target,this.targetDelta)):cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),Vo(this.relativeTargetOrigin,this.target,m.target),cn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}po&&oi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ff(this.parent.latestValues)||IT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(d=!1),d)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;cn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;ob(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=st());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(av(this.prevProjectionDelta.x,this.projectionDelta.x),av(this.prevProjectionDelta.y,this.projectionDelta.y)),Lo(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!mv(this.projectionDelta.x,this.prevProjectionDelta.x)||!mv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),po&&oi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rs(),this.projectionDelta=rs(),this.projectionDeltaWithTransform=rs()}setAnimationOrigin(o,a=!1){const c=this.snapshot,d=c?c.latestValues:{},f={...this.latestValues},h=rs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=st(),m=c?c.source:void 0,_=this.layout?this.layout.source:void 0,g=m!==_,x=this.getStack(),y=!x||x.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(Wb));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const A=E/1e3;_v(h.x,o.x,A),_v(h.y,o.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hb(this.relativeTarget,this.relativeTargetOrigin,p,A),w&&Ib(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=st()),cn(w,this.relativeTarget)),g&&(this.animationValues=f,Cb(f,d,this.latestValues,A,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Gr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=We.update(()=>{bl.hasAnimatedSinceResize=!0,this.currentAnimation=gb(0,gv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:d,latestValues:f}=o;if(!(!a||!c||!d)){if(this!==o&&this.layout&&d&&OT(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||st();const h=on(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const p=on(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}cn(a,c),ss(a,f),Lo(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Pb),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const d={};c.z&&ld("z",o,d,this.animationValues);for(let f=0;f<ad.length;f++)ld(`rotate${ad[f]}`,o,d,this.animationValues),ld(`skew${ad[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bb;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Pl(o?.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Pl(o?.pointerEvents)||""),this.hasProjected&&!si(this.latestValues)&&(g.transform=f?f({},""):"none",this.hasProjected=!1),g}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=Rb(this.projectionDeltaWithTransform,this.treeScale,p),f&&(d.transform=f(p,d.transform));const{x:m,y:_}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${_.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in hu){if(p[g]===void 0)continue;const{correct:x,applyTo:y}=hu[g],v=d.transform==="none"?p[g]:x(p[g],h);if(y){const w=y.length;for(let E=0;E<w;E++)d[y[E]]=v}else d[g]=v}return this.options.layoutId&&(d.pointerEvents=h===this?Pl(o?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(yv),this.root.sharedNodes.clear()}}}function Nb(t){t.updateLayout()}function Db(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?dn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=on(p);p.min=r[h].min,p.max=p.min+m}):OT(s,n.layoutBox,r)&&dn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=on(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=rs();Lo(a,r,n.layoutBox);const c=rs();o?Lo(c,t.applyTransform(i,!0),n.measuredBox):Lo(c,r,n.layoutBox);const d=!FT(a);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const _=st();Vo(_,n.layoutBox,p.layoutBox);const g=st();Vo(g,r,m.layoutBox),LT(_,g)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Fb(t){po&&oi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Lb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Vb(t){t.clearSnapshot()}function yv(t){t.clearMeasurements()}function Ub(t){t.isLayoutDirty=!1}function Ob(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Bb(t){t.resolveTargetDelta()}function $b(t){t.calcProjection()}function zb(t){t.resetSkewAndRotation()}function Gb(t){t.removeLeadSnapshot()}function _v(t,e,n){t.translate=je(e.translate,0,n),t.scale=je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wv(t,e,n,r){t.min=je(e.min,n.min,r),t.max=je(e.max,n.max,r)}function Hb(t,e,n,r){wv(t.x,e.x,n.x,r),wv(t.y,e.y,n.y,r)}function Wb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const qb={duration:.45,ease:[.4,0,.1,1]},xv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Cv=xv("applewebkit/")&&!xv("chrome/")?Math.round:nn;function Tv(t){t.min=Cv(t.min),t.max=Cv(t.max)}function Jb(t){Tv(t.x),Tv(t.y)}function OT(t,e,n){return t==="position"||t==="preserve-aspect"&&!YR(pv(e),pv(n),.2)}function Kb(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Zb=UT({attachResizeListener:(t,e)=>ua(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ud={current:void 0},BT=UT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ud.current){const t=new Zb({});t.mount(window),t.setOptions({layoutScroll:!0}),ud.current=t}return ud.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Yb={pan:{Feature:fb},drag:{Feature:db,ProjectionNode:BT,MeasureLayout:MT}};function Sv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&We.postRender(()=>s(e,Ca(e)))}class Xb extends Zr{mount(){const{current:e}=this.node;e&&(this.unmount=YI(e,n=>(Sv(this.node,n,"Start"),r=>Sv(this.node,r,"End"))))}unmount(){}}class Qb extends Zr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xa(ua(this.node.current,"focus",()=>this.onFocus()),ua(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ev(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&We.postRender(()=>s(e,Ca(e)))}class jb extends Zr{mount(){const{current:e}=this.node;e&&(this.unmount=eP(e,n=>(Ev(this.node,n,"Start"),(r,{success:i})=>Ev(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vf=new WeakMap,cd=new WeakMap,eM=t=>{const e=Vf.get(t.target);e&&e(t)},tM=t=>{t.forEach(eM)};function nM({root:t,...e}){const n=t||document;cd.has(n)||cd.set(n,{});const r=cd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(tM,{root:t,...e})),r[i]}function rM(t,e,n){const r=nM(e);return Vf.set(t,n),r.observe(t),()=>{Vf.delete(t),r.unobserve(t)}}const iM={some:0,all:1};class sM extends Zr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:iM[i]},a=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),p=d?f:h;p&&p(c)};return rM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(oM(e,n))&&this.startObserver()}unmount(){}}function oM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const aM={inView:{Feature:sM},tap:{Feature:jb},focus:{Feature:Qb},hover:{Feature:Xb}},lM={layout:{ProjectionNode:BT,MeasureLayout:MT}},Uf={current:null},$T={current:!1};function uM(){if($T.current=!0,!!Cp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Uf.current=t.matches;t.addListener(e),e()}else Uf.current=!1}const cM=[...fT,Pt,Hr],dM=t=>cM.find(dT(t)),Av=new WeakMap;function fM(t,e,n){for(const r in e){const i=e[r],s=n[r];if(bt(i))t.addValue(r,i);else if(bt(s))t.addValue(r,aa(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,aa(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const kv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hM{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=qn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,We.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:f}=o;this.onUpdate=f,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=nc(n),this.isVariantNode=wC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const _=p[m];c[m]!==void 0&&bt(_)&&_.set(c[m],!1)}}mount(e){this.current=e,Av.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$T.current||uM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Av.delete(this.current),this.projection&&this.projection.unmount(),Gr(this.notifyUpdate),Gr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ii.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&We.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ks){const n=ks[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):st()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<kv.length;r++){const i=kv[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=fM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=aa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(uT(i)||eT(i))?i=parseFloat(i):!dM(i)&&Hr.test(n)&&(i=oT(e,n)),this.setBaseTarget(e,bt(i)?i.get():i)),bt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Pp(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!bt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Gp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class zT extends hM{constructor(){super(...arguments),this.KeyframeResolver=hT}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pM(t){return window.getComputedStyle(t)}class mM extends zT{constructor(){super(...arguments),this.type="html",this.renderInstance=PC}readValueFromInstance(e,n){if(Ii.has(n)){const r=Kp(n);return r&&r.default||0}else{const r=pM(e),i=(AC(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return RT(e,n)}build(e,n,r){Mp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Lp(e,n,r)}}class gM extends zT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=st}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ii.has(n)){const r=Kp(n);return r&&r.default||0}return n=RC.has(n)?n:Ap(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return NC(e,n,r)}build(e,n,r){Np(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){bC(e,n,r,i)}mount(e){this.isSVGTag=Fp(e.tagName),super.mount(e)}}const yM=(t,e)=>Ip(t)?new gM(e):new mM(e,{allowProjection:t!==z.Fragment}),vM=GI({...$R,...aM,...Yb,...lM},yM),Di=iI(vM);var jp={exports:{}};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var GT=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],_u=GT.join(","),HT=typeof Element>"u",Ci=HT?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,wu=!HT&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},xu=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},_M=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},WT=function(e,n,r){if(xu(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(_u));return n&&Ci.call(e,_u)&&i.unshift(e),i=i.filter(r),i},qT=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!xu(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),c=a.length?a:o.children,d=t(c,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else{var f=Ci.call(o,_u);f&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!xu(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,m):i.push({scopeParent:o,candidates:m})}else s.unshift.apply(s,o.children)}}return i},JT=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},kr=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||_M(e))&&!JT(e)?0:e.tabIndex},wM=function(e,n){var r=kr(e);return r<0&&n&&!JT(e)?0:r},xM=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},KT=function(e){return e.tagName==="INPUT"},CM=function(e){return KT(e)&&e.type==="hidden"},TM=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},SM=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},EM=function(e){if(!e.name)return!0;var n=e.form||wu(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=SM(i,e.form);return!s||s===e},AM=function(e){return KT(e)&&e.type==="radio"},kM=function(e){return AM(e)&&!EM(e)},IM=function(e){var n,r=e&&wu(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,c;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!s&&i;){var d,f,h;r=wu(i),i=(d=r)===null||d===void 0?void 0:d.host,s=!!((f=i)!==null&&f!==void 0&&(h=f.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},Iv=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},PM=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Ci.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Ci.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var c=e.parentElement,d=wu(e);if(c&&!c.shadowRoot&&i(c)===!0)return Iv(e);e.assignedSlot?e=e.assignedSlot:!c&&d!==e.ownerDocument?e=d.host:e=c}e=a}if(IM(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Iv(e);return!1},RM=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Ci.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Cu=function(e,n){return!(n.disabled||xu(n)||CM(n)||PM(n,e)||TM(n)||RM(n))},Of=function(e,n){return!(kM(n)||kr(n)<0||!Cu(e,n))},bM=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},MM=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,c=wM(a,o),d=o?t(i.candidates):a;c===0?o?n.push.apply(n,d):n.push(a):r.push({documentOrder:s,tabIndex:c,item:i,isScope:o,content:d})}),r.sort(xM).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},ZT=function(e,n){n=n||{};var r;return n.getShadowRoot?r=qT([e],n.includeContainer,{filter:Of.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:bM}):r=WT(e,n.includeContainer,Of.bind(null,n)),MM(r)},YT=function(e,n){n=n||{};var r;return n.getShadowRoot?r=qT([e],n.includeContainer,{filter:Cu.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=WT(e,n.includeContainer,Cu.bind(null,n)),r},ai=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ci.call(e,_u)===!1?!1:Of(n,e)},NM=GT.concat("iframe").join(","),Ml=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ci.call(e,NM)===!1?!1:Cu(n,e)};const DM=Object.freeze(Object.defineProperty({__proto__:null,focusable:YT,getTabIndex:kr,isFocusable:Ml,isTabbable:ai,tabbable:ZT},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Bf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function FM(t){if(Array.isArray(t))return Bf(t)}function LM(t,e,n){return(e=$M(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VM(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pv(Object(n),!0).forEach(function(r){LM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OM(t){return FM(t)||VM(t)||zM(t)||UM()}function BM(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $M(t){var e=BM(t,"string");return typeof e=="symbol"?e:e+""}function zM(t,e){if(t){if(typeof t=="string")return Bf(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bf(t,e):void 0}}var bv={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r._setPausedState(!0)}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},GM=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},HM=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},Uo=function(e){return e?.key==="Tab"||e?.keyCode===9},WM=function(e){return Uo(e)&&!e.shiftKey},qM=function(e){return Uo(e)&&e.shiftKey},Mv=function(e){return setTimeout(e,0)},so=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},nl=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},JM=[],KM=function(e,n){var r=n?.document||document,i=n?.trapStack||JM,s=Rv({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:WM,isKeyBackward:qM},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(M,C,O){return M&&M[C]!==void 0?M[C]:s[O||C]},d=function(M,C){var O=typeof C?.composedPath=="function"?C.composedPath():void 0;return o.containerGroups.findIndex(function(te){var G=te.container,H=te.tabbableNodes;return G.contains(M)||O?.includes(G)||H.find(function(B){return B===M})})},f=function(M){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=C.hasFallback,te=O===void 0?!1:O,G=C.params,H=G===void 0?[]:G,B=s[M];if(typeof B=="function"&&(B=B.apply(void 0,OM(H))),B===!0&&(B=void 0),!B){if(B===void 0||B===!1)return B;throw new Error("`".concat(M,"` was specified but was not a node, or did not return a node"))}var K=B;if(typeof B=="string"){try{K=r.querySelector(B)}catch(L){throw new Error("`".concat(M,'` appears to be an invalid selector; error="').concat(L.message,'"'))}if(!K&&!te)throw new Error("`".concat(M,"` as selector refers to no known node"))}return K},h=function(){var M=f("initialFocus",{hasFallback:!0});if(M===!1)return!1;if(M===void 0||M&&!Ml(M,s.tabbableOptions))if(d(r.activeElement)>=0)M=r.activeElement;else{var C=o.tabbableGroups[0],O=C&&C.firstTabbableNode;M=O||f("fallbackFocus")}else M===null&&(M=f("fallbackFocus"));if(!M)throw new Error("Your focus-trap needs to have at least one focusable element");return M},p=function(){if(o.containerGroups=o.containers.map(function(M){var C=ZT(M,s.tabbableOptions),O=YT(M,s.tabbableOptions),te=C.length>0?C[0]:void 0,G=C.length>0?C[C.length-1]:void 0,H=O.find(function(L){return ai(L)}),B=O.slice().reverse().find(function(L){return ai(L)}),K=!!C.find(function(L){return kr(L)>0});return{container:M,tabbableNodes:C,focusableNodes:O,posTabIndexesFound:K,firstTabbableNode:te,lastTabbableNode:G,firstDomTabbableNode:H,lastDomTabbableNode:B,nextTabbableNode:function(U){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=C.indexOf(U);return ne<0?le?O.slice(O.indexOf(U)+1).find(function(X){return ai(X)}):O.slice(0,O.indexOf(U)).reverse().find(function(X){return ai(X)}):C[ne+(le?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(M){return M.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(M){return M.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},m=function(M){var C=M.activeElement;if(C)return C.shadowRoot&&C.shadowRoot.activeElement!==null?m(C.shadowRoot):C},_=function(M){if(M!==!1&&M!==m(document)){if(!M||!M.focus){_(h());return}M.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=M,GM(M)&&M.select()}},g=function(M){var C=f("setReturnFocus",{params:[M]});return C||(C===!1?!1:M)},x=function(M){var C=M.target,O=M.event,te=M.isBackward,G=te===void 0?!1:te;C=C||nl(O),p();var H=null;if(o.tabbableGroups.length>0){var B=d(C,O),K=B>=0?o.containerGroups[B]:void 0;if(B<0)G?H=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:H=o.tabbableGroups[0].firstTabbableNode;else if(G){var L=o.tabbableGroups.findIndex(function(Le){var xe=Le.firstTabbableNode;return C===xe});if(L<0&&(K.container===C||Ml(C,s.tabbableOptions)&&!ai(C,s.tabbableOptions)&&!K.nextTabbableNode(C,!1))&&(L=B),L>=0){var U=L===0?o.tabbableGroups.length-1:L-1,le=o.tabbableGroups[U];H=kr(C)>=0?le.lastTabbableNode:le.lastDomTabbableNode}else Uo(O)||(H=K.nextTabbableNode(C,!1))}else{var ne=o.tabbableGroups.findIndex(function(Le){var xe=Le.lastTabbableNode;return C===xe});if(ne<0&&(K.container===C||Ml(C,s.tabbableOptions)&&!ai(C,s.tabbableOptions)&&!K.nextTabbableNode(C))&&(ne=B),ne>=0){var X=ne===o.tabbableGroups.length-1?0:ne+1,Ae=o.tabbableGroups[X];H=kr(C)>=0?Ae.firstTabbableNode:Ae.firstDomTabbableNode}else Uo(O)||(H=K.nextTabbableNode(C))}}else H=f("fallbackFocus");return H},y=function(M){var C=nl(M);if(!(d(C,M)>=0)){if(so(s.clickOutsideDeactivates,M)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}so(s.allowOutsideClick,M)||M.preventDefault()}},v=function(M){var C=nl(M),O=d(C,M)>=0;if(O||C instanceof Document)O&&(o.mostRecentlyFocusedNode=C);else{M.stopImmediatePropagation();var te,G=!0;if(o.mostRecentlyFocusedNode)if(kr(o.mostRecentlyFocusedNode)>0){var H=d(o.mostRecentlyFocusedNode),B=o.containerGroups[H].tabbableNodes;if(B.length>0){var K=B.findIndex(function(L){return L===o.mostRecentlyFocusedNode});K>=0&&(s.isKeyForward(o.recentNavEvent)?K+1<B.length&&(te=B[K+1],G=!1):K-1>=0&&(te=B[K-1],G=!1))}}else o.containerGroups.some(function(L){return L.tabbableNodes.some(function(U){return kr(U)>0})})||(G=!1);else G=!1;G&&(te=x({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),_(te||o.mostRecentlyFocusedNode||h())}o.recentNavEvent=void 0},w=function(M){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=M;var O=x({event:M,isBackward:C});O&&(Uo(M)&&M.preventDefault(),_(O))},E=function(M){(s.isKeyForward(M)||s.isKeyBackward(M))&&w(M,s.isKeyBackward(M))},A=function(M){HM(M)&&so(s.escapeDeactivates,M)!==!1&&(M.preventDefault(),a.deactivate())},P=function(M){var C=nl(M);d(C,M)>=0||so(s.clickOutsideDeactivates,M)||so(s.allowOutsideClick,M)||(M.preventDefault(),M.stopImmediatePropagation())},R=function(){if(o.active)return bv.activateTrap(i,a),o.delayInitialFocusTimer=s.delayInitialFocus?Mv(function(){_(h())}):_(h()),r.addEventListener("focusin",v,!0),r.addEventListener("mousedown",y,{capture:!0,passive:!1}),r.addEventListener("touchstart",y,{capture:!0,passive:!1}),r.addEventListener("click",P,{capture:!0,passive:!1}),r.addEventListener("keydown",E,{capture:!0,passive:!1}),r.addEventListener("keydown",A),a},N=function(){if(o.active)return r.removeEventListener("focusin",v,!0),r.removeEventListener("mousedown",y,!0),r.removeEventListener("touchstart",y,!0),r.removeEventListener("click",P,!0),r.removeEventListener("keydown",E,!0),r.removeEventListener("keydown",A),a},D=function(M){var C=M.some(function(O){var te=Array.from(O.removedNodes);return te.some(function(G){return G===o.mostRecentlyFocusedNode})});C&&_(h())},F=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(D):void 0,q=function(){F&&(F.disconnect(),o.active&&!o.paused&&o.containers.map(function(M){F.observe(M,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(M){if(o.active)return this;var C=c(M,"onActivate"),O=c(M,"onPostActivate"),te=c(M,"checkCanFocusTrap");te||p(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=m(r),C?.();var G=function(){te&&p(),R(),q(),O?.()};return te?(te(o.containers.concat()).then(G,G),this):(G(),this)},deactivate:function(M){if(!o.active)return this;var C=Rv({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},M);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,N(),o.active=!1,o.paused=!1,q(),bv.deactivateTrap(i,a);var O=c(C,"onDeactivate"),te=c(C,"onPostDeactivate"),G=c(C,"checkCanReturnFocus"),H=c(C,"returnFocus","returnFocusOnDeactivate");O?.();var B=function(){Mv(function(){H&&_(g(o.nodeFocusedBeforeActivation)),te?.()})};return H&&G?(G(g(o.nodeFocusedBeforeActivation)).then(B,B),this):(B(),this)},pause:function(M){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,M)):this},unpause:function(M){return o.active?(o.manuallyPaused=!1,i[i.length-1]!==this?this:this._setPausedState(!1,M)):this},updateContainerElements:function(M){var C=[].concat(M).filter(Boolean);return o.containers=C.map(function(O){return typeof O=="string"?r.querySelector(O):O}),o.active&&p(),q(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(M,C){if(o.paused===M)return this;if(o.paused=M,M){var O=c(C,"onPause"),te=c(C,"onPostPause");O?.(),N(),q(),te?.()}else{var G=c(C,"onUnpause"),H=c(C,"onPostUnpause");G?.(),p(),R(),q(),H?.()}return this}}}),a.updateContainerElements(e),a};const ZM=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:KM},Symbol.toStringTag,{value:"Module"})),YM=ew(ZM),XM=ew(DM);function Ps(t){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(t)}var dd,fd;function QM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QT(r.key),r)}}function eN(t,e,n){return e&&jM(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tN(t,e,n){return e=Tu(e),nN(t,XT()?Reflect.construct(e,n||[],Tu(t).constructor):e.apply(t,n))}function nN(t,e){if(e&&(Ps(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rN(t)}function rN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XT=function(){return!!t})()}function Tu(t){return Tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tu(t)}function iN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$f(t,e)}function $f(t,e){return $f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$f(t,e)}function sN(t,e,n){return(e=QT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QT(t){var e=oN(t,"string");return Ps(e)=="symbol"?e:e+""}function oN(t,e){if(Ps(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ps(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mo=z,aN=YM,lN=aN.createFocusTrap,uN=XM,cN=uN.isFocusable,dN=parseInt((dd=(fd=/^(\d+)\./.exec(mo.version))===null||fd===void 0?void 0:fd[1])!==null&&dd!==void 0?dd:0,10),em=function(t){function e(n){var r;QM(this,e),r=tN(this,e,[n]),sN(r,"getNodeForOption",function(o){var a,c=(a=this.internalOptions[o])!==null&&a!==void 0?a:this.originalOptions[o];if(typeof c=="function"){for(var d=arguments.length,f=new Array(d>1?d-1:0),h=1;h<d;h++)f[h-1]=arguments[h];c=c.apply(void 0,f)}if(c===!0&&(c=void 0),!c){if(c===void 0||c===!1)return c;throw new Error("`".concat(o,"` was specified but was not a node, or did not return a node"))}var p=c;if(typeof c=="string"){var m;if(p=(m=this.getDocument())===null||m===void 0?void 0:m.querySelector(c),!p)throw new Error("`".concat(o,"` as selector refers to no known node"))}return p}),r.handleDeactivate=r.handleDeactivate.bind(r),r.handlePostDeactivate=r.handlePostDeactivate.bind(r),r.handleClickOutsideDeactivates=r.handleClickOutsideDeactivates.bind(r),r.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:r.handleDeactivate,onPostDeactivate:r.handlePostDeactivate,clickOutsideDeactivates:r.handleClickOutsideDeactivates},r.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var i=n.focusTrapOptions;for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(s==="returnFocusOnDeactivate"||s==="onDeactivate"||s==="onPostDeactivate"||s==="checkCanReturnFocus"||s==="clickOutsideDeactivates"){r.originalOptions[s]=i[s];continue}r.internalOptions[s]=i[s]}return r.outsideClick=null,r.focusTrapElements=n.containerElements||[],r.updatePreviousElement(),r}return iN(e,t),eN(e,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var r=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return r||(r===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var r=this.getDocument();r&&(this.previouslyFocusedElement=r.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(r){var i=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,r):this.originalOptions.clickOutsideDeactivates;return i&&(this.outsideClick={target:r.target,allowDeactivation:i}),i}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var r=this,i=function(){var o=r.getReturnFocusNode(),a=!!(r.originalOptions.returnFocusOnDeactivate&&o!==null&&o!==void 0&&o.focus&&(!r.outsideClick||r.outsideClick.allowDeactivation&&!cN(r.outsideClick.target,r.internalOptions.tabbableOptions))),c=r.internalOptions.preventScroll,d=c===void 0?!1:c;a&&o.focus({preventScroll:d}),r.originalOptions.onPostDeactivate&&r.originalOptions.onPostDeactivate.call(null),r.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(i,i):i()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var r=this.focusTrapElements.some(Boolean);r&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(r){if(this.focusTrap){r.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var i=!r.active&&this.props.active,s=r.active&&!this.props.active,o=!r.paused&&this.props.paused,a=r.paused&&!this.props.paused;if(i&&(this.updatePreviousElement(),this.focusTrap.activate()),s){this.deactivateTrap();return}o&&this.focusTrap.pause(),a&&this.focusTrap.unpause()}else r.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var r=this,i=this.props.children?mo.Children.only(this.props.children):void 0;if(i){if(i.type&&i.type===mo.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var s=function(c){var d=r.props.containerElements;i&&(dN>=19?typeof i.props.ref=="function"?i.props.ref(c):i.props.ref&&(i.props.ref.current=c):typeof i.ref=="function"?i.ref(c):i.ref&&(i.ref.current=c)),r.focusTrapElements=d||[c]},o=mo.cloneElement(i,{ref:s});return o}return null}}])}(mo.Component);em.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:lN};jp.exports=em;jp.exports.FocusTrap=em;var fN=jp.exports;const hN=Ah(fN);var be;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(be||(be={}));var Nv;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Nv||(Nv={}));const ue=be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Tr=t=>{switch(typeof t){case"undefined":return ue.undefined;case"string":return ue.string;case"number":return Number.isNaN(t)?ue.nan:ue.number;case"boolean":return ue.boolean;case"function":return ue.function;case"bigint":return ue.bigint;case"symbol":return ue.symbol;case"object":return Array.isArray(t)?ue.array:t===null?ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ue.promise:typeof Map<"u"&&t instanceof Map?ue.map:typeof Set<"u"&&t instanceof Set?ue.set:typeof Date<"u"&&t instanceof Date?ue.date:ue.object;default:return ue.unknown}},ee=be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class dr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return i(this),r}static assert(e){if(!(e instanceof dr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}dr.create=t=>new dr(t);const zf=(t,e)=>{let n;switch(t.code){case ee.invalid_type:t.received===ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,be.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:n=`Unrecognized key(s) in object: ${be.joinValues(t.keys,", ")}`;break;case ee.invalid_union:n="Invalid input";break;case ee.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${be.joinValues(t.options)}`;break;case ee.invalid_enum_value:n=`Invalid enum value. Expected ${be.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:n="Invalid function arguments";break;case ee.invalid_return_type:n="Invalid function return type";break;case ee.invalid_date:n="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:be.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ee.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ee.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ee.custom:n="Invalid input";break;case ee.invalid_intersection_types:n="Intersection results could not be merged";break;case ee.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:n="Number must be finite";break;default:n=e.defaultError,be.assertNever(t)}return{message:n}};let pN=zf;function mN(){return pN}const gN=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)a=d(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function ie(t,e){const n=mN(),r=gN({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===zf?void 0:zf].filter(i=>!!i)});t.common.issues.push(r)}class Vt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return _e;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Vt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return _e;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const _e=Object.freeze({status:"aborted"}),go=t=>({status:"dirty",value:t}),Cn=t=>({status:"valid",value:t}),Dv=t=>t.status==="aborted",Fv=t=>t.status==="dirty",Rs=t=>t.status==="valid",Su=t=>typeof Promise<"u"&&t instanceof Promise;var de;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(de||(de={}));class Kn{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Lv=(t,e)=>{if(Rs(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new dr(t.common.issues);return this._error=n,this._error}}};function Ce(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:i}}class ke{get description(){return this._def.description}_getType(e){return Tr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Tr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vt,ctx:{common:e.parent.common,data:e.data,parsedType:Tr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Su(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tr(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Lv(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tr(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return Rs(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>Rs(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Tr(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Su(i)?i:Promise.resolve(i));return Lv(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ee.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ns({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ur.create(this,this._def)}nullable(){return Ds.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jn.create(this)}promise(){return Pu.create(this,this._def)}or(e){return Au.create([this,e],this._def)}and(e){return ku.create(this,e,this._def)}transform(e){return new Ns({...Ce(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new qf({...Ce(this._def),innerType:this,defaultValue:n,typeName:ye.ZodDefault})}brand(){return new ON({typeName:ye.ZodBranded,type:this,...Ce(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Jf({...Ce(this._def),innerType:this,catchValue:n,typeName:ye.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return tm.create(this,e)}readonly(){return Kf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yN=/^c[^\s-]{8,}$/i,vN=/^[0-9a-z]+$/,_N=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wN=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xN=/^[a-z0-9_-]{21}$/i,CN=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,TN=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,SN=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,EN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hd;const AN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IN=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,PN=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RN=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bN=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MN=new RegExp(`^${jT}$`);function eS(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function NN(t){return new RegExp(`^${eS(t)}$`)}function DN(t){let e=`${jT}T${eS(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function FN(t,e){return!!((e==="v4"||!e)&&AN.test(t)||(e==="v6"||!e)&&IN.test(t))}function LN(t,e){if(!CN.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function VN(t,e){return!!((e==="v4"||!e)&&kN.test(t)||(e==="v6"||!e)&&PN.test(t))}class nr extends ke{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ue.string){const s=this._getOrReturnCtx(e);return ie(s,{code:ee.invalid_type,expected:ue.string,received:s.parsedType}),_e}const r=new Vt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ie(i,{code:ee.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ie(i,{code:ee.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")SN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"email",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")hd||(hd=new RegExp(EN,"u")),hd.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"emoji",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")wN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"uuid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")xN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"nanoid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")yN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")vN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid2",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")_N.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ulid",code:ee.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ie(i,{validation:"url",code:ee.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"regex",code:ee.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?DN(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?MN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?NN(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?TN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"duration",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?FN(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ip",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?LN(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"jwt",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?VN(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cidr",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?RN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"base64",code:ee.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?bN.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"base64url",code:ee.invalid_string,message:s.message}),r.dirty()):be.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ee.invalid_string,...de.errToObj(r)})}_addCheck(e){return new nr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...de.errToObj(e)})}url(e){return this._addCheck({kind:"url",...de.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...de.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...de.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...de.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...de.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...de.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...de.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...de.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...de.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...de.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...de.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...de.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...de.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...de.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...de.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...de.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...de.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...de.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...de.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...de.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...de.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...de.errToObj(n)})}nonempty(e){return this.min(1,de.errToObj(e))}trim(){return new nr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}nr.create=t=>new nr({checks:[],typeName:ye.ZodString,coerce:t?.coerce??!1,...Ce(t)});function UN(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class bs extends ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ue.number){const s=this._getOrReturnCtx(e);return ie(s,{code:ee.invalid_type,expected:ue.number,received:s.parsedType}),_e}let r;const i=new Vt;for(const s of this._def.checks)s.kind==="int"?be.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?UN(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.not_finite,message:s.message}),i.dirty()):be.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,de.toString(n))}gt(e,n){return this.setLimit("min",e,!1,de.toString(n))}lte(e,n){return this.setLimit("max",e,!0,de.toString(n))}lt(e,n){return this.setLimit("max",e,!1,de.toString(n))}setLimit(e,n,r,i){return new bs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:de.toString(i)}]})}_addCheck(e){return new bs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:de.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:de.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:de.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:de.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:de.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:de.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:de.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:de.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:de.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&be.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}bs.create=t=>new bs({checks:[],typeName:ye.ZodNumber,coerce:t?.coerce||!1,...Ce(t)});class ca extends ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ue.bigint)return this._getInvalidInput(e);let r;const i=new Vt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:ee.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):be.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ie(n,{code:ee.invalid_type,expected:ue.bigint,received:n.parsedType}),_e}gte(e,n){return this.setLimit("min",e,!0,de.toString(n))}gt(e,n){return this.setLimit("min",e,!1,de.toString(n))}lte(e,n){return this.setLimit("max",e,!0,de.toString(n))}lt(e,n){return this.setLimit("max",e,!1,de.toString(n))}setLimit(e,n,r,i){return new ca({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:de.toString(i)}]})}_addCheck(e){return new ca({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:de.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:de.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:de.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:de.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:de.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ca.create=t=>new ca({checks:[],typeName:ye.ZodBigInt,coerce:t?.coerce??!1,...Ce(t)});class Vv extends ke{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ue.boolean){const r=this._getOrReturnCtx(e);return ie(r,{code:ee.invalid_type,expected:ue.boolean,received:r.parsedType}),_e}return Cn(e.data)}}Vv.create=t=>new Vv({typeName:ye.ZodBoolean,coerce:t?.coerce||!1,...Ce(t)});class Eu extends ke{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ue.date){const s=this._getOrReturnCtx(e);return ie(s,{code:ee.invalid_type,expected:ue.date,received:s.parsedType}),_e}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ie(s,{code:ee.invalid_date}),_e}const r=new Vt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:ee.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):be.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Eu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:de.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:de.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Eu.create=t=>new Eu({checks:[],coerce:t?.coerce||!1,typeName:ye.ZodDate,...Ce(t)});class Uv extends ke{_parse(e){if(this._getType(e)!==ue.symbol){const r=this._getOrReturnCtx(e);return ie(r,{code:ee.invalid_type,expected:ue.symbol,received:r.parsedType}),_e}return Cn(e.data)}}Uv.create=t=>new Uv({typeName:ye.ZodSymbol,...Ce(t)});class Ov extends ke{_parse(e){if(this._getType(e)!==ue.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:ee.invalid_type,expected:ue.undefined,received:r.parsedType}),_e}return Cn(e.data)}}Ov.create=t=>new Ov({typeName:ye.ZodUndefined,...Ce(t)});class Bv extends ke{_parse(e){if(this._getType(e)!==ue.null){const r=this._getOrReturnCtx(e);return ie(r,{code:ee.invalid_type,expected:ue.null,received:r.parsedType}),_e}return Cn(e.data)}}Bv.create=t=>new Bv({typeName:ye.ZodNull,...Ce(t)});class $v extends ke{constructor(){super(...arguments),this._any=!0}_parse(e){return Cn(e.data)}}$v.create=t=>new $v({typeName:ye.ZodAny,...Ce(t)});class Gf extends ke{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Cn(e.data)}}Gf.create=t=>new Gf({typeName:ye.ZodUnknown,...Ce(t)});class Wr extends ke{_parse(e){const n=this._getOrReturnCtx(e);return ie(n,{code:ee.invalid_type,expected:ue.never,received:n.parsedType}),_e}}Wr.create=t=>new Wr({typeName:ye.ZodNever,...Ce(t)});class zv extends ke{_parse(e){if(this._getType(e)!==ue.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:ee.invalid_type,expected:ue.void,received:r.parsedType}),_e}return Cn(e.data)}}zv.create=t=>new zv({typeName:ye.ZodVoid,...Ce(t)});class Jn extends ke{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ue.array)return ie(n,{code:ee.invalid_type,expected:ue.array,received:n.parsedType}),_e;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(ie(n,{code:o?ee.too_big:ee.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ie(n,{code:ee.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ie(n,{code:ee.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Kn(n,o,n.path,a)))).then(o=>Vt.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Kn(n,o,n.path,a)));return Vt.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Jn({...this._def,minLength:{value:e,message:de.toString(n)}})}max(e,n){return new Jn({...this._def,maxLength:{value:e,message:de.toString(n)}})}length(e,n){return new Jn({...this._def,exactLength:{value:e,message:de.toString(n)}})}nonempty(e){return this.min(1,e)}}Jn.create=(t,e)=>new Jn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Ce(e)});function Bi(t){if(t instanceof at){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ur.create(Bi(r))}return new at({...t._def,shape:()=>e})}else return t instanceof Jn?new Jn({...t._def,type:Bi(t.element)}):t instanceof Ur?Ur.create(Bi(t.unwrap())):t instanceof Ds?Ds.create(Bi(t.unwrap())):t instanceof Ti?Ti.create(t.items.map(e=>Bi(e))):t}class at extends ke{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=be.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ue.object){const d=this._getOrReturnCtx(e);return ie(d,{code:ee.invalid_type,expected:ue.object,received:d.parsedType}),_e}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Wr&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||a.push(d);const c=[];for(const d of o){const f=s[d],h=i.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Kn(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Wr){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(d==="strict")a.length>0&&(ie(i,{code:ee.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of a){const h=i.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Kn(i,h,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const h=await f.key,p=await f.value;d.push({key:h,value:p,alwaysSet:f.alwaysSet})}return d}).then(d=>Vt.mergeObjectSync(r,d)):Vt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return de.errToObj,new at({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:de.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new at({...this._def,unknownKeys:"strip"})}passthrough(){return new at({...this._def,unknownKeys:"passthrough"})}extend(e){return new at({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new at({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new at({...this._def,catchall:e})}pick(e){const n={};for(const r of be.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new at({...this._def,shape:()=>n})}omit(e){const n={};for(const r of be.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new at({...this._def,shape:()=>n})}deepPartial(){return Bi(this)}partial(e){const n={};for(const r of be.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new at({...this._def,shape:()=>n})}required(e){const n={};for(const r of be.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Ur;)s=s._def.innerType;n[r]=s}return new at({...this._def,shape:()=>n})}keyof(){return tS(be.objectKeys(this.shape))}}at.create=(t,e)=>new at({shape:()=>t,unknownKeys:"strip",catchall:Wr.create(),typeName:ye.ZodObject,...Ce(e)});at.strictCreate=(t,e)=>new at({shape:()=>t,unknownKeys:"strict",catchall:Wr.create(),typeName:ye.ZodObject,...Ce(e)});at.lazycreate=(t,e)=>new at({shape:t,unknownKeys:"strip",catchall:Wr.create(),typeName:ye.ZodObject,...Ce(e)});class Au extends ke{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new dr(a.ctx.common.issues));return ie(n,{code:ee.invalid_union,unionErrors:o}),_e}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new dr(c));return ie(n,{code:ee.invalid_union,unionErrors:a}),_e}}get options(){return this._def.options}}Au.create=(t,e)=>new Au({options:t,typeName:ye.ZodUnion,...Ce(e)});function Hf(t,e){const n=Tr(t),r=Tr(e);if(t===e)return{valid:!0,data:t};if(n===ue.object&&r===ue.object){const i=be.objectKeys(e),s=be.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=Hf(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ue.array&&r===ue.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=Hf(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===ue.date&&r===ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ku extends ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Dv(s)||Dv(o))return _e;const a=Hf(s.value,o.value);return a.valid?((Fv(s)||Fv(o))&&n.dirty(),{status:n.value,value:a.data}):(ie(r,{code:ee.invalid_intersection_types}),_e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ku.create=(t,e,n)=>new ku({left:t,right:e,typeName:ye.ZodIntersection,...Ce(n)});class Ti extends ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.array)return ie(r,{code:ee.invalid_type,expected:ue.array,received:r.parsedType}),_e;if(r.data.length<this._def.items.length)return ie(r,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&r.data.length>this._def.items.length&&(ie(r,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Kn(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Vt.mergeArray(n,o)):Vt.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Ti({...this._def,rest:e})}}Ti.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ti({items:t,typeName:ye.ZodTuple,rest:null,...Ce(e)})};class Iu extends ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.object)return ie(r,{code:ee.invalid_type,expected:ue.object,received:r.parsedType}),_e;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Kn(r,a,r.path,a)),value:o._parse(new Kn(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Vt.mergeObjectAsync(n,i):Vt.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ke?new Iu({keyType:e,valueType:n,typeName:ye.ZodRecord,...Ce(r)}):new Iu({keyType:nr.create(),valueType:e,typeName:ye.ZodRecord,...Ce(n)})}}class Gv extends ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.map)return ie(r,{code:ee.invalid_type,expected:ue.map,received:r.parsedType}),_e;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],d)=>({key:i._parse(new Kn(r,a,r.path,[d,"key"])),value:s._parse(new Kn(r,c,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return _e;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(d.value,f.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return _e;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(d.value,f.value)}return{status:n.value,value:a}}}}Gv.create=(t,e,n)=>new Gv({valueType:e,keyType:t,typeName:ye.ZodMap,...Ce(n)});class da extends ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ue.set)return ie(r,{code:ee.invalid_type,expected:ue.set,received:r.parsedType}),_e;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ie(r,{code:ee.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ie(r,{code:ee.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const d=new Set;for(const f of c){if(f.status==="aborted")return _e;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const a=[...r.data.values()].map((c,d)=>s._parse(new Kn(r,c,r.path,d)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new da({...this._def,minSize:{value:e,message:de.toString(n)}})}max(e,n){return new da({...this._def,maxSize:{value:e,message:de.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}da.create=(t,e)=>new da({valueType:t,minSize:null,maxSize:null,typeName:ye.ZodSet,...Ce(e)});class Hv extends ke{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Hv.create=(t,e)=>new Hv({getter:t,typeName:ye.ZodLazy,...Ce(e)});class Wf extends ke{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ie(n,{received:n.data,code:ee.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:e.data}}get value(){return this._def.value}}Wf.create=(t,e)=>new Wf({value:t,typeName:ye.ZodLiteral,...Ce(e)});function tS(t,e){return new Ms({values:t,typeName:ye.ZodEnum,...Ce(e)})}class Ms extends ke{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{expected:be.joinValues(r),received:n.parsedType,code:ee.invalid_type}),_e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{received:n.data,code:ee.invalid_enum_value,options:r}),_e}return Cn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ms.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ms.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ms.create=tS;class Wv extends ke{_parse(e){const n=be.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ue.string&&r.parsedType!==ue.number){const i=be.objectValues(n);return ie(r,{expected:be.joinValues(i),received:r.parsedType,code:ee.invalid_type}),_e}if(this._cache||(this._cache=new Set(be.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=be.objectValues(n);return ie(r,{received:r.data,code:ee.invalid_enum_value,options:i}),_e}return Cn(e.data)}get enum(){return this._def.values}}Wv.create=(t,e)=>new Wv({values:t,typeName:ye.ZodNativeEnum,...Ce(e)});class Pu extends ke{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ue.promise&&n.common.async===!1)return ie(n,{code:ee.invalid_type,expected:ue.promise,received:n.parsedType}),_e;const r=n.parsedType===ue.promise?n.data:Promise.resolve(n.data);return Cn(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Pu.create=(t,e)=>new Pu({type:t,typeName:ye.ZodPromise,...Ce(e)});class Ns extends ke{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{ie(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return _e;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?_e:c.status==="dirty"||n.value==="dirty"?go(c.value):c});{if(n.value==="aborted")return _e;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?_e:a.status==="dirty"||n.value==="dirty"?go(a.value):a}}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?_e:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?_e:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Rs(o))return _e;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Rs(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):_e);be.assertNever(i)}}Ns.create=(t,e,n)=>new Ns({schema:t,typeName:ye.ZodEffects,effect:e,...Ce(n)});Ns.createWithPreprocess=(t,e,n)=>new Ns({schema:e,effect:{type:"preprocess",transform:t},typeName:ye.ZodEffects,...Ce(n)});class Ur extends ke{_parse(e){return this._getType(e)===ue.undefined?Cn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ur.create=(t,e)=>new Ur({innerType:t,typeName:ye.ZodOptional,...Ce(e)});class Ds extends ke{_parse(e){return this._getType(e)===ue.null?Cn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ds.create=(t,e)=>new Ds({innerType:t,typeName:ye.ZodNullable,...Ce(e)});class qf extends ke{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qf.create=(t,e)=>new qf({innerType:t,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ce(e)});class Jf extends ke{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Su(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new dr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new dr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Jf.create=(t,e)=>new Jf({innerType:t,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ce(e)});class qv extends ke{_parse(e){if(this._getType(e)!==ue.nan){const r=this._getOrReturnCtx(e);return ie(r,{code:ee.invalid_type,expected:ue.nan,received:r.parsedType}),_e}return{status:"valid",value:e.data}}}qv.create=t=>new qv({typeName:ye.ZodNaN,...Ce(t)});class ON extends ke{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class tm extends ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?_e:s.status==="dirty"?(n.dirty(),go(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?_e:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new tm({in:e,out:n,typeName:ye.ZodPipeline})}}class Kf extends ke{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Rs(i)&&(i.value=Object.freeze(i.value)),i);return Su(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Kf.create=(t,e)=>new Kf({innerType:t,typeName:ye.ZodReadonly,...Ce(e)});var ye;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ye||(ye={}));const Sr=nr.create,Pn=bs.create,BN=Gf.create;Wr.create;const Jv=Jn.create,sc=at.create,$N=Au.create;ku.create;Ti.create;const zN=Iu.create,pd=Wf.create,Or=Ms.create;Pu.create;Ur.create;Ds.create;const nS=sc({generationStrategy:Or(["single","deepconf-offline","deepconf-online"]).optional(),confidenceSource:pd("judge").optional(),traceCount:Pn().optional(),deepConfEta:$N([pd(10),pd(90)]).optional(),tau:Pn().optional(),groupWindow:Pn().optional()}).strict(),GN=nS.extend({effort:Or(["dynamic","high","medium","low","none"]).optional()}).strict(),HN=nS.extend({effort:Or(["medium","high"]).optional(),verbosity:Or(["low","medium","high"]).optional()}).strict(),WN=sc({temperature:Pn().optional(),topP:Pn().optional(),topK:Pn().optional(),frequencyPenalty:Pn().optional(),presencePenalty:Pn().optional(),repetitionPenalty:Pn().optional(),maxTokens:Pn().optional()}).strict(),qN={gemini:GN,openai:HN,openrouter:WN},JN=zN(BN()),KN=sc({expertId:Sr().optional(),model:Sr().optional(),provider:Or(["gemini","openai","openrouter"]).optional(),settings:JN.optional()}),ZN=KN.superRefine((t,e)=>{if(!t.provider||!t.settings)return;const r=qN[t.provider].safeParse(t.settings);if(!r.success)for(const i of r.error.issues)e.addIssue({...i,path:["settings",...i.path]})}),Kv=2,md=`You are a world-class arbiter and editor. Your task is to synthesize multiple expert drafts into a single, coherent, and comprehensive answer that is superior to any individual draft.

Instructions:
1.  Read the original user question carefully.
2.  Review all the provided candidate answers, labeled A, B, C, etc.
3.  Identify the strengths, weaknesses, and unique insights from each draft.
4.  Synthesize the best elements from all drafts into a single, well-structured, and easy-to-read response.
5.  Do NOT simply list the drafts. Create a new, unified answer.
6.  If drafts contradict, use your judgment to determine the most likely correct information or acknowledge the controversy.
7.  Ensure your final answer directly and thoroughly addresses the original user's question.
8.  Do not include headings like "Final Answer" or "Synthesized Response". Begin the response directly.`,vn="gemini-2.5-flash",rn="gemini-2.5-pro",oc="gpt-5",ac="gpt-5-mini",YN="gpt-5",XN=ac,nm="openai/gpt-4o",QN="google/gemini-flash-1.5",rS="anthropic/claude-3-haiku-20240307",rm="You are a world-class expert. Reason step-by-step before providing your answer. ",jN=`
Your reasoning and synthesis abilities are paramount. Before writing the final answer, explicitly outline the key points from each draft, identify convergences and divergences, and then construct a synthesis that resolves contradictions and builds upon the strongest arguments. Your final output should only be the synthesized answer itself.`;function e2(t){if(typeof t!="object"||t===null)return null;const e=t,n=e.id??e.key??e.slug??e.uuid??(typeof e.name=="string"?e.name.toLowerCase().replace(/\s+/g,"-"):null)??null,r=e.name??e.title??e.label??(typeof e.id=="string"?e.id:null)??null,i=e.persona;return typeof n!="string"||typeof r!="string"||typeof i!="string"||!i?null:{id:n,name:r,persona:i}}async function t2(){const e=await fetch("/HeavyOrc/config/experts.json");if(!e.ok)throw new Error(`Failed to fetch experts.json: ${e.status} ${e.statusText}`);const n=await e.json(),r=Array.isArray(n)?n:n&&Array.isArray(n.experts)?n.experts:[],i=[];for(const s of r){const o=e2(s);o?i.push(o):console.warn("Skipping expert missing id, name, or persona:",s)}return i}let Zf;try{Zf=await t2()}catch(t){console.error("Fatal: Could not load experts configuration. The application will run with no agents.",t),Zf=[]}const im=Zf;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let n2,r2;function i2(){return{geminiUrl:n2,vertexUrl:r2}}function s2(t,e,n,r){var i,s;if(!t?.baseUrl){const o=i2();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pi{}function ce(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function u(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,e.slice(s+1),n[d])}else for(const d of c)u(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>l(o,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zv||(Zv={}));var Yv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Yv||(Yv={}));var mn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(mn||(mn={}));var Xv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Xv||(Xv={}));var Qv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qv||(Qv={}));var jv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(jv||(jv={}));var e0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(e0||(e0={}));var t0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(t0||(t0={}));var n0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(n0||(n0={}));var r0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(r0||(r0={}));var i0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(i0||(i0={}));var s0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(s0||(s0={}));var o0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(o0||(o0={}));var a0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(a0||(a0={}));var l0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(l0||(l0={}));var Ru;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ru||(Ru={}));var u0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(u0||(u0={}));var Xf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xf||(Xf={}));var c0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(c0||(c0={}));var d0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(d0||(d0={}));var f0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(f0||(f0={}));var h0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(h0||(h0={}));var p0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(p0||(p0={}));var m0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(m0||(m0={}));var g0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(g0||(g0={}));var y0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(y0||(y0={}));var v0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(v0||(v0={}));var _0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(_0||(_0={}));var w0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(w0||(w0={}));var x0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(x0||(x0={}));var C0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(C0||(C0={}));var T0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(T0||(T0={}));var S0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(S0||(S0={}));var E0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(E0||(E0={}));var A0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(A0||(A0={}));var k0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(k0||(k0={}));var I0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(I0||(I0={}));var P0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(P0||(P0={}));var R0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(R0||(R0={}));var b0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(b0||(b0={}));var M0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(M0||(M0={}));var N0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(N0||(N0={}));var D0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(D0||(D0={}));var F0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(F0||(F0={}));var os;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(os||(os={}));class Qf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class oo{get text(){var e,n,r,i,s,o,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const p of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,_]of Object.entries(p))m!=="text"&&m!=="thought"&&(_!==null||_!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,i,s,o,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,s,o,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,r,i,s,o,a,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,s,o,a,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}}class L0{}class V0{}class o2{}class a2{}class l2{}class u2{}class U0{}class O0{}class B0{}class c2{}class $0{}class z0{}class G0{}class H0{}class d2{}class f2{}class h2{}class W0{}class p2{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(o))a!=="inlineData"&&c!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class bu{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new bu;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const s=new $0,o=i.videos;s.generatedVideos=o?.map(a=>({video:{uri:a.gcsUri,videoBytes:a.bytesBase64Encoded?Yf(a.bytesBase64Encoded):void 0,mimeType:a.mimeType}})),s.raiMediaFilteredCount=i.raiMediaFilteredCount,s.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=s}}else{const i=e.response;if(i){const s=new $0,o=i.generateVideoResponse,a=o?.generatedSamples;s.generatedVideos=a?.map(c=>{const d=c.video;return{video:{uri:d?.uri,videoBytes:d?.encodedVideo?Yf(d?.encodedVideo):void 0,mimeType:c.encoding}}}),s.raiMediaFilteredCount=o?.raiMediaFilteredCount,s.raiMediaFilteredReasons=o?.raiMediaFilteredReasons,r.response=s}}return r}}class m2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ne(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function iS(t,e){const n=Ne(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function sS(t){return Array.isArray(t)?t.map(e=>Mu(e)):[Mu(t)]}function Mu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function oS(t){const e=Mu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aS(t){const e=Mu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function q0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function lS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>q0(e)):[q0(t)]}function jf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function J0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function K0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Mt(t){if(t==null)throw new Error("ContentUnion is required");return jf(t)?t:{role:"user",parts:lS(t)}}function uS(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Mt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Mt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Mt(n)):[Mt(e)]}function _n(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(J0(t)||K0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Mt(t)]}const e=[],n=[],r=jf(t[0]);for(const i of t){const s=jf(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(J0(i)||K0(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:lS(n)}),e}function g2(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(mn).includes(n[0].toUpperCase())?n[0].toUpperCase():mn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(mn).includes(r.toUpperCase())?r.toUpperCase():mn.TYPE_UNSPECIFIED})}}function ps(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&g2(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(mn).includes(a.toUpperCase())?a.toUpperCase():mn.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=ps(a);else if(r.includes(o)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(ps(d))}e[o]=c}else if(i.includes(o)){const c={};for(const[d,f]of Object.entries(a))c[d]=ps(f);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=a}return e}function sm(t){return ps(t)}function om(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function am(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Bs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ps(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ps(e.response));return t}function $s(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function y2(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function hr(t,e){if(typeof e!="string")throw new Error("name must be a string");return y2(t,e,"cachedContents")}function cS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ri(t){return Yf(t)}function v2(t){return t!=null&&typeof t=="object"&&"name"in t}function _2(t){return t!=null&&typeof t=="object"&&"video"in t}function w2(t){return t!=null&&typeof t=="object"&&"uri"in t}function dS(t){var e;let n;if(v2(t)&&(n=t.name),!(w2(t)&&(n=t.uri,n===void 0))&&!(_2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function fS(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function hS(t){for(const e of["models","tunedModels","publisherModels"])if(x2(t,e))return t[e];return[]}function x2(t,e){return t!==null&&typeof t=="object"&&e in t}function C2(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function T2(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=C2(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function pS(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function S2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zs(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function mS(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E2(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function A2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function k2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function I2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],E2(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],A2(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],k2(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function gS(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>I2(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function P2(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["enum"]);s!=null&&u(e,["enum"],s);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&u(e,["maxItems"],d);const f=l(t,["maxLength"]);f!=null&&u(e,["maxLength"],f);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const x=l(t,["minimum"]);x!=null&&u(e,["minimum"],x);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const P=l(t,["title"]);P!=null&&u(e,["title"],P);const R=l(t,["type"]);return R!=null&&u(e,["type"],R),e}function R2(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function b2(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function M2(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function N2(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],M2(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function D2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function F2(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],D2(n)),e}function L2(){return{}}function V2(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function U2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>b2(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],N2(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],F2(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],L2());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],V2(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function O2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function B2(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function $2(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],B2(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function z2(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],O2(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],$2(r)),e}function G2(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function yS(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],G2(n)),e}function H2(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],yS(r)),e}function W2(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>H2(i))),u(e,["speakerVoiceConfigs"],r)}return e}function q2(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],yS(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],W2(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function J2(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function K2(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],gS(Mt(i)));const s=l(e,["temperature"]);s!=null&&u(r,["temperature"],s);const o=l(e,["topP"]);o!=null&&u(r,["topP"],o);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const x=l(e,["responseMimeType"]);x!=null&&u(r,["responseMimeType"],x);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],P2(sm(y)));const v=l(e,["responseJsonSchema"]);if(v!=null&&u(r,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let q=w;Array.isArray(q)&&(q=q.map(I=>R2(I))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=$s(E);Array.isArray(q)&&(q=q.map(I=>U2(Bs(I)))),u(n,["tools"],q)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],z2(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=l(e,["cachedContent"]);n!==void 0&&P!=null&&u(n,["cachedContent"],hr(t,P));const R=l(e,["responseModalities"]);R!=null&&u(r,["responseModalities"],R);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],q2(om(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=l(e,["thinkingConfig"]);return F!=null&&u(r,["thinkingConfig"],J2(F)),r}function Z2(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],Ne(t,r));const i=l(e,["contents"]);if(i!=null){let o=_n(i);Array.isArray(o)&&(o=o.map(a=>gS(a))),u(n,["request","contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["request","generationConfig"],K2(t,s,n)),n}function Y2(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Z2(t,o))),u(n,["requests","requests"],s)}return n}function X2(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Z0(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["src"]);i!=null&&u(n,["batch","inputConfig"],Y2(t,pS(t,i)));const s=l(e,["config"]);return s!=null&&u(n,["config"],X2(s,n)),n}function Q2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],zs(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function j2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],zs(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function eD(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function tD(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],eD(n,e)),e}function nD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],zs(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function rD(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iD(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function sD(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&u(e,["outputConfig"],iD(S2(i))),n}function oD(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Ne(t,r));const i=l(e,["src"]);i!=null&&u(n,["inputConfig"],rD(pS(t,i)));const s=l(e,["config"]);return s!=null&&u(n,["config"],sD(s,n)),n}function aD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],zs(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function lD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],zs(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function uD(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function cD(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],uD(n,e)),e}function dD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],zs(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function fD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function hD(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function pD(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function mD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],fD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],hD(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],pD(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function gD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>mD(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function yD(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function vD(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function _D(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vD(i))),u(e,["urlMetadata"],r)}return e}function wD(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],gD(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],yD(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],_D(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(e,["index"],d);const f=l(t,["logprobsResult"]);f!=null&&u(e,["logprobsResult"],f);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function xD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>wD(d))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const o=l(t,["responseId"]);o!=null&&u(e,["responseId"],o);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function vS(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function CD(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],xD(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],vS(r)),e}function TD(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>CD(s))),u(e,["inlinedResponses"],i)}return e}function Nl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&u(e,["state"],mS(i));const s=l(t,["metadata","createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["metadata","endTime"]);o!=null&&u(e,["endTime"],o);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],TD(d)),e}function SD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Nl(o))),u(e,["batchJobs"],s)}return e}function ED(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const s=l(t,["error"]);return s!=null&&u(e,["error"],vS(s)),e}function _S(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function AD(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function kD(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function eh(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],mS(i));const s=l(t,["error"]);s!=null&&u(e,["error"],_S(s));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&u(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],AD(h));const p=l(t,["outputConfig"]);return p!=null&&u(e,["dest"],kD(p)),e}function ID(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>eh(o))),u(e,["batchJobs"],s)}return e}function PD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const s=l(t,["error"]);return s!=null&&u(e,["error"],_S(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Si;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Si||(Si={}));class Ta{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RD=class extends Pi{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${o}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let s="",o={};const a=Z0(this.apiClient,n);s=ce("{model}:batchGenerateContent",a._url),o=a._query;const f=a.batch.inputConfig.requests,h=f.requests,p=[];for(const _ of h){const g=_;if(g.systemInstruction){const x=g.systemInstruction;delete g.systemInstruction;const y=g.request;y.systemInstruction=x,g.request=y}p.push(g)}return f.requests=p,delete a.config,delete a._url,delete a._query,this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()).then(_=>Nl(_))}return await this.createInternal(n)},this.list=async(n={})=>new Ta(Si.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=oD(this.apiClient,e);return a=ce("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>eh(f))}else{const d=Z0(this.apiClient,e);return a=ce("{model}:batchGenerateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Nl(f))}}async get(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=aD(this.apiClient,e);return a=ce("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>eh(f))}else{const d=Q2(this.apiClient,e);return a=ce("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Nl(f))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const c=lD(this.apiClient,e);o=ce("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=j2(this.apiClient,e);o=ce("batches/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=cD(e);return a=ce("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=ID(f),p=new W0;return Object.assign(p,h),p})}else{const d=tD(e);return a=ce("batches",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=SD(f),p=new W0;return Object.assign(p,h),p})}}async delete(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=dD(this.apiClient,e);return a=ce("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>PD(f))}else{const d=nD(this.apiClient,e);return a=ce("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>ED(f))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function MD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ND(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function DD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],bD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],MD(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],ND(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Y0(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>DD(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function FD(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function LD(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function VD(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],LD(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function UD(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function OD(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],UD(n)),e}function BD(){return{}}function $D(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function zD(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>FD(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],VD(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],OD(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],BD());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],$D(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function GD(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function HD(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function WD(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],HD(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function qD(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],GD(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],WD(r)),e}function JD(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const s=l(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const o=l(t,["contents"]);if(e!==void 0&&o!=null){let f=_n(o);Array.isArray(f)&&(f=f.map(h=>Y0(h))),u(e,["contents"],f)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Y0(Mt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>zD(h))),u(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],qD(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function KD(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],iS(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],JD(i,n)),n}function ZD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],hr(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function YD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],hr(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function XD(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function QD(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],hr(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],XD(i,n)),n}function jD(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function e5(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],jD(n,e)),e}function t5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function n5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function r5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function i5(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],t5(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],n5(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],r5(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function X0(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>i5(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function s5(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function o5(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function a5(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],o5(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function l5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function u5(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],l5(n)),e}function c5(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function d5(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function f5(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],d5(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const s=l(t,["httpBasicAuthConfig"]);s!=null&&u(e,["httpBasicAuthConfig"],s);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function h5(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],f5(n)),e}function p5(){return{}}function m5(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function g5(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>s5(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],a5(i));const s=l(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],u5(s));const o=l(t,["enterpriseWebSearch"]);o!=null&&u(e,["enterpriseWebSearch"],c5(o));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],h5(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],p5());const d=l(t,["computerUse"]);d!=null&&u(e,["computerUse"],m5(d));const f=l(t,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}function y5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function v5(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function _5(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],v5(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function w5(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],y5(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],_5(r)),e}function x5(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const s=l(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const o=l(t,["contents"]);if(e!==void 0&&o!=null){let h=_n(o);Array.isArray(h)&&(h=h.map(p=>X0(p))),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],X0(Mt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>g5(p))),u(e,["tools"],h)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],w5(d));const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function C5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],iS(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],x5(i,n)),n}function T5(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],hr(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function S5(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],hr(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function E5(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function A5(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],hr(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],E5(i,n)),n}function k5(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function I5(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],k5(n,e)),e}function Dl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["updateTime"]);o!=null&&u(e,["updateTime"],o);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function P5(){return{}}function R5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Dl(o))),u(e,["cachedContents"],s)}return e}function Fl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["updateTime"]);o!=null&&u(e,["updateTime"],o);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function b5(){return{}}function M5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Fl(o))),u(e,["cachedContents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N5 extends Pi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ta(Si.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=C5(this.apiClient,e);return a=ce("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Fl(f))}else{const d=KD(this.apiClient,e);return a=ce("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Dl(f))}}async get(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=T5(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Fl(f))}else{const d=ZD(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Dl(f))}}async delete(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=S5(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(()=>{const f=b5(),h=new G0;return Object.assign(h,f),h})}else{const d=YD(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=P5(),h=new G0;return Object.assign(h,f),h})}}async update(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=A5(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Fl(f))}else{const d=QD(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Dl(f))}}async listInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=I5(e);return a=ce("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=M5(f),p=new H0;return Object.assign(p,h),p})}else{const d=e5(e);return a=ce("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=R5(f),p=new H0;return Object.assign(p,h),p})}}}function Q0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(t){return this instanceof Ge?(this.v=t,this):new Ge(t)}function ms(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(i[m]=function(g){return new Promise(function(x,y){s.push([m,g,x,y])>1||c(m,g)})},_&&(i[m]=_(i[m])))}function c(m,_){try{d(r[m](_))}catch(g){p(s[0][3],g)}}function d(m){m.value instanceof Ge?Promise.resolve(m.value.v).then(f,h):p(s[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function p(m,_){m(_),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Oo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Q0=="function"?Q0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D5(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:wS(n)}function wS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function F5(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function j0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!wS(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class L5{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new V5(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let V5=class{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),F5(s)}async sendMessage(e){var n;await this.sendPromise;const r=Mt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const c=await i,d=(o=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(a=f.slice(h))!==null&&a!==void 0?a:[]);const m=d?[d]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Mt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?j0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return ms(this,arguments,function*(){var o,a,c,d;const f=[];try{for(var h=!0,p=Oo(e),m;m=yield Ge(p.next()),o=m.done,!o;h=!0){d=m.value,h=!1;const _=d;if(D5(_)){const g=(i=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;g!==void 0&&f.push(g)}yield yield Ge(_)}}catch(_){a={error:_}}finally{try{!h&&!o&&(c=p.return)&&(yield Ge(c.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...j0(r)):this.history.push(e),this.history.push(...i)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,lc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U5(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function O5(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],U5(n,e)),e}function B5(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function $5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const s=l(t,["sizeBytes"]);s!=null&&u(e,["sizeBytes"],s);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&u(e,["sha256Hash"],d);const f=l(t,["uri"]);f!=null&&u(e,["uri"],f);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const _=l(t,["videoMetadata"]);_!=null&&u(e,["videoMetadata"],_);const g=l(t,["error"]);return g!=null&&u(e,["error"],B5(g)),e}function z5(t){const e={},n=l(t,["file"]);n!=null&&u(e,["file"],$5(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function G5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],dS(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function H5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],dS(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function W5(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function th(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const s=l(t,["sizeBytes"]);s!=null&&u(e,["sizeBytes"],s);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&u(e,["sha256Hash"],d);const f=l(t,["uri"]);f!=null&&u(e,["uri"],f);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const _=l(t,["videoMetadata"]);_!=null&&u(e,["videoMetadata"],_);const g=l(t,["error"]);return g!=null&&u(e,["error"],W5(g)),e}function q5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>th(o))),u(e,["files"],s)}return e}function J5(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function K5(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Z5=class extends Pi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ta(Si.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>th(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=O5(e);return s=ce("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=q5(c),f=new d2;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=z5(e);return s=ce("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=J5(c),f=new f2;return Object.assign(f,d),f})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=G5(e);return s=ce("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>th(c))}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=H5(e);return s=ce("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{const c=K5(),d=new h2;return Object.assign(d,c),d})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y5(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function xS(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],Y5(n)),e}function X5(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],xS(r)),e}function Q5(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>X5(i))),u(e,["speakerVoiceConfigs"],r)}return e}function j5(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],xS(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],Q5(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function eF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function tF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function nF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function rF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],eF(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],tF(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],nF(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function iF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rF(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function sF(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function oF(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function aF(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],oF(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function lF(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function uF(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],lF(n)),e}function cF(){return{}}function dF(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function fF(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>sF(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],aF(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],uF(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],cF());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],dF(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function hF(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e_(){return{}}function pF(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const s=l(t,["prefixPaddingMs"]);s!=null&&u(e,["prefixPaddingMs"],s);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function mF(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],pF(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function gF(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function yF(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],gF(r)),e}function vF(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function _F(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],j5(am(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],iF(Mt(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=$s(_);Array.isArray(A)&&(A=A.map(P=>fF(Bs(P)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],hF(g));const x=l(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&u(e,["setup","inputAudioTranscription"],e_());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],e_());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],mF(v));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],yF(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],vF(E)),n}function wF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],_F(i,n)),n}function xF(){return{}}function CF(){return{}}function TF(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],sS(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],aS(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const s=l(t,["video"]);s!=null&&u(e,["video"],oS(s));const o=l(t,["text"]);return o!=null&&u(e,["text"],o),l(t,["activityStart"])!=null&&u(e,["activityStart"],xF()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],CF()),e}function CS(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function SF(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>CS(i))),u(e,["weightedPrompts"],r)}return e}function TS(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const s=l(t,["guidance"]);s!=null&&u(e,["guidance"],s);const o=l(t,["bpm"]);o!=null&&u(e,["bpm"],o);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&u(e,["scale"],d);const f=l(t,["muteBass"]);f!=null&&u(e,["muteBass"],f);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function EF(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],TS(n)),e}function SS(t){const e={},n=l(t,["model"]);return n!=null&&u(e,["model"],n),e}function ES(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>CS(i))),u(e,["weightedPrompts"],r)}return e}function nh(t){const e={},n=l(t,["setup"]);n!=null&&u(e,["setup"],SS(n));const r=l(t,["clientContent"]);r!=null&&u(e,["clientContent"],ES(r));const i=l(t,["musicGenerationConfig"]);i!=null&&u(e,["musicGenerationConfig"],TS(i));const s=l(t,["playbackControl"]);return s!=null&&u(e,["playbackControl"],s),e}function AF(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function kF(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],AF(n)),e}function IF(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],kF(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function PF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function RF(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function bF(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function MF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],PF(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],RF(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],bF(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function NF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>MF(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function DF(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function FF(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function LF(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],FF(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function VF(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function UF(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],VF(n)),e}function OF(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function BF(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function $F(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],BF(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const s=l(t,["httpBasicAuthConfig"]);s!=null&&u(e,["httpBasicAuthConfig"],s);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function zF(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],$F(n)),e}function GF(){return{}}function HF(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function WF(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>DF(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],LF(i));const s=l(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],UF(s));const o=l(t,["enterpriseWebSearch"]);o!=null&&u(e,["enterpriseWebSearch"],OF(o));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],zF(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],GF());const d=l(t,["computerUse"]);d!=null&&u(e,["computerUse"],HF(d));const f=l(t,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}function qF(t){const e={},n=l(t,["handle"]);n!=null&&u(e,["handle"],n);const r=l(t,["transparent"]);return r!=null&&u(e,["transparent"],r),e}function t_(){return{}}function JF(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const s=l(t,["prefixPaddingMs"]);s!=null&&u(e,["prefixPaddingMs"],s);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function KF(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],JF(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function ZF(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function YF(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],ZF(r)),e}function XF(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function QF(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],IF(am(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],NF(Mt(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=$s(_);Array.isArray(A)&&(A=A.map(P=>WF(Bs(P)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],qF(g));const x=l(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&u(e,["setup","inputAudioTranscription"],t_());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],t_());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],KF(v));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],YF(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],XF(E)),n}function jF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],QF(i,n)),n}function eL(){return{}}function tL(){return{}}function nL(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],sS(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],aS(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const s=l(t,["video"]);s!=null&&u(e,["video"],oS(s));const o=l(t,["text"]);return o!=null&&u(e,["text"],o),l(t,["activityStart"])!=null&&u(e,["activityStart"],eL()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],tL()),e}function rL(){return{}}function iL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function sL(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function oL(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function aL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],iL(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],sL(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],oL(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function lL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>aL(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function n_(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function uL(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function cL(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>uL(i))),u(e,["urlMetadata"],r)}return e}function dL(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],lL(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const s=l(t,["groundingMetadata"]);s!=null&&u(e,["groundingMetadata"],s);const o=l(t,["generationComplete"]);o!=null&&u(e,["generationComplete"],o);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],n_(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],n_(c));const d=l(t,["urlContextMetadata"]);return d!=null&&u(e,["urlContextMetadata"],cL(d)),e}function fL(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);return i!=null&&u(e,["name"],i),e}function hL(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fL(i))),u(e,["functionCalls"],r)}return e}function pL(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function rl(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function mL(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["responseTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const s=l(t,["toolUsePromptTokenCount"]);s!=null&&u(e,["toolUsePromptTokenCount"],s);const o=l(t,["thoughtsTokenCount"]);o!=null&&u(e,["thoughtsTokenCount"],o);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>rl(m))),u(e,["promptTokensDetails"],p)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>rl(m))),u(e,["cacheTokensDetails"],p)}const f=l(t,["responseTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>rl(m))),u(e,["responseTokensDetails"],p)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>rl(m))),u(e,["toolUsePromptTokensDetails"],p)}return e}function gL(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function yL(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function vL(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],rL());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],dL(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],hL(i));const s=l(t,["toolCallCancellation"]);s!=null&&u(e,["toolCallCancellation"],pL(s));const o=l(t,["usageMetadata"]);o!=null&&u(e,["usageMetadata"],mL(o));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],gL(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],yL(c)),e}function _L(){return{}}function wL(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function xL(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wL(i))),u(e,["weightedPrompts"],r)}return e}function CL(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const s=l(t,["guidance"]);s!=null&&u(e,["guidance"],s);const o=l(t,["bpm"]);o!=null&&u(e,["bpm"],o);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&u(e,["scale"],d);const f=l(t,["muteBass"]);f!=null&&u(e,["muteBass"],f);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function TL(t){const e={},n=l(t,["clientContent"]);n!=null&&u(e,["clientContent"],xL(n));const r=l(t,["musicGenerationConfig"]);return r!=null&&u(e,["musicGenerationConfig"],CL(r)),e}function SL(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);r!=null&&u(e,["mimeType"],r);const i=l(t,["sourceMetadata"]);return i!=null&&u(e,["sourceMetadata"],TL(i)),e}function EL(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>SL(i))),u(e,["audioChunks"],r)}return e}function AL(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["filteredReason"]);return r!=null&&u(e,["filteredReason"],r),e}function kL(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],_L());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],EL(r));const i=l(t,["filteredPrompt"]);return i!=null&&u(e,["filteredPrompt"],AL(i)),e}function IL(t){const e={},n=l(t,["sessionId"]);return n!=null&&u(e,["sessionId"],n),e}function PL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function RL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function bL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function ML(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],PL(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],RL(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],bL(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function NL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ML(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function r_(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function DL(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],NL(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const s=l(t,["groundingMetadata"]);s!=null&&u(e,["groundingMetadata"],s);const o=l(t,["generationComplete"]);o!=null&&u(e,["generationComplete"],o);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],r_(a));const c=l(t,["outputTranscription"]);return c!=null&&u(e,["outputTranscription"],r_(c)),e}function FL(t){const e={},n=l(t,["args"]);n!=null&&u(e,["args"],n);const r=l(t,["name"]);return r!=null&&u(e,["name"],r),e}function LL(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>FL(i))),u(e,["functionCalls"],r)}return e}function VL(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function il(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function UL(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const s=l(t,["toolUsePromptTokenCount"]);s!=null&&u(e,["toolUsePromptTokenCount"],s);const o=l(t,["thoughtsTokenCount"]);o!=null&&u(e,["thoughtsTokenCount"],o);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(_=>il(_))),u(e,["promptTokensDetails"],m)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>il(_))),u(e,["cacheTokensDetails"],m)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>il(_))),u(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>il(_))),u(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}function OL(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function BL(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function $L(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],IL(n));const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],DL(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],LL(i));const s=l(t,["toolCallCancellation"]);s!=null&&u(e,["toolCallCancellation"],VL(s));const o=l(t,["usageMetadata"]);o!=null&&u(e,["usageMetadata"],UL(o));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],OL(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],BL(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function GL(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function HL(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function WL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],zL(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],GL(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],HL(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function uc(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>WL(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function qL(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["enum"]);s!=null&&u(e,["enum"],s);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&u(e,["maxItems"],d);const f=l(t,["maxLength"]);f!=null&&u(e,["maxLength"],f);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const x=l(t,["minimum"]);x!=null&&u(e,["minimum"],x);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const P=l(t,["title"]);P!=null&&u(e,["title"],P);const R=l(t,["type"]);return R!=null&&u(e,["type"],R),e}function JL(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function KL(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function ZL(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function YL(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],ZL(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function XL(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function QL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],XL(n)),e}function jL(){return{}}function eV(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function tV(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>KL(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],YL(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],QL(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],jL());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],eV(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function nV(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function rV(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function iV(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],rV(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function sV(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],nV(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],iV(r)),e}function oV(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function AS(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],oV(n)),e}function aV(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],AS(r)),e}function lV(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aV(i))),u(e,["speakerVoiceConfigs"],r)}return e}function uV(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],AS(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],lV(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function cV(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function dV(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],uc(Mt(i)));const s=l(e,["temperature"]);s!=null&&u(r,["temperature"],s);const o=l(e,["topP"]);o!=null&&u(r,["topP"],o);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const x=l(e,["responseMimeType"]);x!=null&&u(r,["responseMimeType"],x);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],qL(sm(y)));const v=l(e,["responseJsonSchema"]);if(v!=null&&u(r,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let q=w;Array.isArray(q)&&(q=q.map(I=>JL(I))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=$s(E);Array.isArray(q)&&(q=q.map(I=>tV(Bs(I)))),u(n,["tools"],q)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],sV(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=l(e,["cachedContent"]);n!==void 0&&P!=null&&u(n,["cachedContent"],hr(t,P));const R=l(e,["responseModalities"]);R!=null&&u(r,["responseModalities"],R);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],uV(om(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=l(e,["thinkingConfig"]);return F!=null&&u(r,["thinkingConfig"],cV(F)),r}function i_(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);if(i!=null){let o=_n(i);Array.isArray(o)&&(o=o.map(a=>uc(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["generationConfig"],dV(t,s,n)),n}function fV(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&u(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);i!=null&&u(n,["requests[]","content"],uS(t,i));const s=l(e,["config"]);s!=null&&u(n,["config"],fV(s,n));const o=l(e,["model"]);return o!==void 0&&u(n,["requests[]","model"],Ne(t,o)),n}function pV(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&u(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&u(e,["parameters","safetySetting"],o);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&u(e,["parameters","language"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const m=l(t,["imageSize"]);if(e!==void 0&&m!=null&&u(e,["parameters","sampleImageSize"],m),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function mV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const s=l(e,["config"]);return s!=null&&u(n,["config"],pV(s,n)),n}function gV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function yV(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const o=l(e,["filter"]);n!==void 0&&o!=null&&u(n,["_query","filter"],o);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],fS(t,a)),r}function vV(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],yV(t,r,n)),n}function _V(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),n}function wV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],_V(i,n)),n}function xV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function CV(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function TV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);if(i!=null){let o=_n(i);Array.isArray(o)&&(o=o.map(a=>uc(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["config"],CV(s)),n}function SV(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Ri(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function EV(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["aspectRatio"]);if(e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=l(t,["personGeneration"]);if(e!==void 0&&o!=null&&u(e,["parameters","personGeneration"],o),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=l(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&u(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function AV(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const s=l(e,["image"]);if(s!=null&&u(n,["instances[0]","image"],SV(s)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=l(e,["config"]);return o!=null&&u(n,["config"],EV(o,n)),n}function kV(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function IV(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function PV(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function RV(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],kV(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],IV(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],PV(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Gs(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>RV(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function bV(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["enum"]);s!=null&&u(e,["enum"],s);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&u(e,["maxItems"],d);const f=l(t,["maxLength"]);f!=null&&u(e,["maxLength"],f);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const x=l(t,["minimum"]);x!=null&&u(e,["minimum"],x);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const P=l(t,["title"]);P!=null&&u(e,["title"],P);const R=l(t,["type"]);return R!=null&&u(e,["type"],R),e}function MV(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&u(e,["featureSelectionPreference"],n),e}function NV(t){const e={},n=l(t,["method"]);n!=null&&u(e,["method"],n);const r=l(t,["category"]);r!=null&&u(e,["category"],r);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function DV(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function FV(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function LV(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],FV(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function VV(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function UV(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],VV(n)),e}function OV(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function BV(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function $V(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],BV(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const s=l(t,["httpBasicAuthConfig"]);s!=null&&u(e,["httpBasicAuthConfig"],s);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function zV(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],$V(n)),e}function GV(){return{}}function HV(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function kS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>DV(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],LV(i));const s=l(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],UV(s));const o=l(t,["enterpriseWebSearch"]);o!=null&&u(e,["enterpriseWebSearch"],OV(o));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],zV(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],GV());const d=l(t,["computerUse"]);d!=null&&u(e,["computerUse"],HV(d));const f=l(t,["codeExecution"]);return f!=null&&u(e,["codeExecution"],f),e}function WV(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function qV(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function JV(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],qV(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function KV(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],WV(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],JV(r)),e}function ZV(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function YV(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],ZV(n)),e}function XV(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],YV(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function QV(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function jV(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],Gs(Mt(i)));const s=l(e,["temperature"]);s!=null&&u(r,["temperature"],s);const o=l(e,["topP"]);o!=null&&u(r,["topP"],o);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const x=l(e,["responseMimeType"]);x!=null&&u(r,["responseMimeType"],x);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],bV(sm(y)));const v=l(e,["responseJsonSchema"]);v!=null&&u(r,["responseJsonSchema"],v);const w=l(e,["routingConfig"]);w!=null&&u(r,["routingConfig"],w);const E=l(e,["modelSelectionConfig"]);E!=null&&u(r,["modelConfig"],MV(E));const A=l(e,["safetySettings"]);if(n!==void 0&&A!=null){let O=A;Array.isArray(O)&&(O=O.map(te=>NV(te))),u(n,["safetySettings"],O)}const P=l(e,["tools"]);if(n!==void 0&&P!=null){let O=$s(P);Array.isArray(O)&&(O=O.map(te=>kS(Bs(te)))),u(n,["tools"],O)}const R=l(e,["toolConfig"]);n!==void 0&&R!=null&&u(n,["toolConfig"],KV(R));const N=l(e,["labels"]);n!==void 0&&N!=null&&u(n,["labels"],N);const D=l(e,["cachedContent"]);n!==void 0&&D!=null&&u(n,["cachedContent"],hr(t,D));const F=l(e,["responseModalities"]);F!=null&&u(r,["responseModalities"],F);const q=l(e,["mediaResolution"]);q!=null&&u(r,["mediaResolution"],q);const I=l(e,["speechConfig"]);I!=null&&u(r,["speechConfig"],XV(om(I)));const M=l(e,["audioTimestamp"]);M!=null&&u(r,["audioTimestamp"],M);const C=l(e,["thinkingConfig"]);return C!=null&&u(r,["thinkingConfig"],QV(C)),r}function s_(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);if(i!=null){let o=_n(i);Array.isArray(o)&&(o=o.map(a=>Gs(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["generationConfig"],jV(t,s,n)),n}function e3(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["instances[]","title"],i);const s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&u(e,["parameters","outputDimensionality"],s);const o=l(t,["mimeType"]);e!==void 0&&o!=null&&u(e,["instances[]","mimeType"],o);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function t3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);i!=null&&u(n,["instances[]","content"],uS(t,i));const s=l(e,["config"]);return s!=null&&u(n,["config"],e3(s,n)),n}function n3(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const x=l(t,["addWatermark"]);e!==void 0&&x!=null&&u(e,["parameters","addWatermark"],x);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v),n}function r3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const s=l(e,["config"]);return s!=null&&u(n,["config"],n3(s,n)),n}function pr(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Ri(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function i3(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&u(e,["dilation"],i),e}function s3(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function o3(t){const e={},n=l(t,["styleDescription"]);return n!=null&&u(e,["styleDescription"],n),e}function a3(t){const e={},n=l(t,["subjectType"]);n!=null&&u(e,["subjectType"],n);const r=l(t,["subjectDescription"]);return r!=null&&u(e,["subjectDescription"],r),e}function l3(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],pr(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&u(e,["referenceType"],i);const s=l(t,["maskImageConfig"]);s!=null&&u(e,["maskImageConfig"],i3(s));const o=l(t,["controlImageConfig"]);o!=null&&u(e,["controlImageConfig"],s3(o));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],o3(a));const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],a3(c)),e}function u3(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const x=l(t,["addWatermark"]);e!==void 0&&x!=null&&u(e,["parameters","addWatermark"],x);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&u(e,["parameters","editConfig","baseSteps"],v),n}function c3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const s=l(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>l3(c))),u(n,["instances[0]","referenceImages"],a)}const o=l(e,["config"]);return o!=null&&u(n,["config"],u3(o,n)),n}function d3(t,e){const n={},r=l(t,["includeRaiReason"]);e!==void 0&&r!=null&&u(e,["parameters","includeRaiReason"],r);const i=l(t,["outputMimeType"]);e!==void 0&&i!=null&&u(e,["parameters","outputOptions","mimeType"],i);const s=l(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&u(e,["parameters","outputOptions","compressionQuality"],s);const o=l(t,["enhanceInputImage"]);e!==void 0&&o!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=l(t,["imagePreservationFactor"]);e!==void 0&&a!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const c=l(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const d=l(t,["mode"]);return e!==void 0&&d!=null&&u(e,["parameters","mode"],d),n}function f3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],pr(i));const s=l(e,["upscaleFactor"]);s!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=l(e,["config"]);return o!=null&&u(n,["config"],d3(o,n)),n}function h3(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],pr(n)),e}function p3(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&u(e,["instances[0]","personImage","image"],pr(i));const s=l(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>h3(a))),u(e,["instances[0]","productImages"],o)}return n}function m3(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&u(e,["parameters","editConfig","baseSteps"],i);const s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const o=l(t,["seed"]);e!==void 0&&o!=null&&u(e,["parameters","seed"],o);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["outputMimeType"]);e!==void 0&&d!=null&&u(e,["parameters","outputOptions","mimeType"],d);const f=l(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","compressionQuality"],f);const h=l(t,["enhancePrompt"]);return e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h),n}function g3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],p3(i,n));const s=l(e,["config"]);return s!=null&&u(n,["config"],m3(s,n)),n}function y3(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],pr(n)),e}function v3(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],pr(i));const s=l(t,["scribbleImage"]);return e!==void 0&&s!=null&&u(e,["instances[0]","scribble"],y3(s)),n}function _3(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&u(e,["parameters","maxPredictions"],i);const s=l(t,["confidenceThreshold"]);e!==void 0&&s!=null&&u(e,["parameters","confidenceThreshold"],s);const o=l(t,["maskDilation"]);e!==void 0&&o!=null&&u(e,["parameters","maskDilation"],o);const a=l(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a),n}function w3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],v3(i,n));const s=l(e,["config"]);return s!=null&&u(n,["config"],_3(s,n)),n}function x3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function C3(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const o=l(e,["filter"]);n!==void 0&&o!=null&&u(n,["_query","filter"],o);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],fS(t,a)),r}function T3(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],C3(t,r,n)),n}function S3(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),n}function E3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],S3(i,n)),n}function A3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function k3(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],Gs(Mt(r)));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>kS(a))),u(e,["tools"],o)}const s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&u(e,["generationConfig"],s),n}function I3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);if(i!=null){let o=_n(i);Array.isArray(o)&&(o=o.map(a=>Gs(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["config"],k3(s,n)),n}function P3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["contents"]);if(i!=null){let o=_n(i);Array.isArray(o)&&(o=o.map(a=>Gs(a))),u(n,["contents"],o)}const s=l(e,["config"]);return s!=null&&u(n,["config"],s),n}function R3(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Ri(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function b3(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],pr(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function M3(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["fps"]);e!==void 0&&s!=null&&u(e,["parameters","fps"],s);const o=l(t,["durationSeconds"]);e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const _=l(t,["generateAudio"]);e!==void 0&&_!=null&&u(e,["parameters","generateAudio"],_);const g=l(t,["lastFrame"]);e!==void 0&&g!=null&&u(e,["instances[0]","lastFrame"],pr(g));const x=l(t,["referenceImages"]);if(e!==void 0&&x!=null){let v=x;Array.isArray(v)&&(v=v.map(w=>b3(w))),u(e,["instances[0]","referenceImages"],v)}const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),n}function N3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ne(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const s=l(e,["image"]);s!=null&&u(n,["instances[0]","image"],pr(s));const o=l(e,["video"]);o!=null&&u(n,["instances[0]","video"],R3(o));const a=l(e,["config"]);return a!=null&&u(n,["config"],M3(a,n)),n}function D3(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function F3(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function L3(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function V3(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],D3(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],F3(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],L3(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function U3(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>V3(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function O3(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function B3(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function $3(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>B3(i))),u(e,["urlMetadata"],r)}return e}function z3(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],U3(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],O3(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],$3(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(e,["index"],d);const f=l(t,["logprobsResult"]);f!=null&&u(e,["logprobsResult"],f);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function o_(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>z3(d))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const o=l(t,["responseId"]);o!=null&&u(e,["responseId"],o);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function G3(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function H3(){return{}}function W3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>G3(o))),u(e,["embeddings"],s)}return l(t,["metadata"])!=null&&u(e,["metadata"],H3()),e}function q3(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Ri(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function IS(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function J3(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],q3(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&u(e,["safetyAttributes"],IS(i)),e}function K3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>J3(o))),u(e,["generatedImages"],s)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],IS(i)),e}function Z3(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function rh(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["version"]);s!=null&&u(e,["version"],s);const o=l(t,["_self"]);o!=null&&u(e,["tunedModelInfo"],Z3(o));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);return d!=null&&u(e,["supportedActions"],d),e}function Y3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let s=hS(i);Array.isArray(s)&&(s=s.map(o=>rh(o))),u(e,["models"],s)}return e}function X3(){return{}}function Q3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(e,["cachedContentTokenCount"],i),e}function j3(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["video","encodedVideo"]);r!=null&&u(e,["videoBytes"],Ri(r));const i=l(t,["encoding"]);return i!=null&&u(e,["mimeType"],i),e}function eU(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],j3(n)),e}function tU(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>eU(o))),u(e,["generatedVideos"],s)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function nU(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const o=l(t,["response","generateVideoResponse"]);return o!=null&&u(e,["response"],tU(o)),e}function rU(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function iU(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function sU(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function oU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],rU(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],iU(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],sU(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function aU(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>oU(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function lU(t){const e={},n=l(t,["citations"]);return n!=null&&u(e,["citations"],n),e}function uU(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function cU(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>uU(i))),u(e,["urlMetadata"],r)}return e}function dU(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],aU(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],lU(r));const i=l(t,["finishMessage"]);i!=null&&u(e,["finishMessage"],i);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],cU(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(e,["index"],d);const f=l(t,["logprobsResult"]);f!=null&&u(e,["logprobsResult"],f);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function a_(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>dU(f))),u(e,["candidates"],d)}const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const s=l(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function fU(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function hU(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],fU(r)),e}function pU(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&u(e,["billableCharacterCount"],n),e}function mU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>hU(o))),u(e,["embeddings"],s)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],pU(i)),e}function PS(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],Ri(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function RS(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function cc(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],PS(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&u(e,["safetyAttributes"],RS(i));const s=l(t,["prompt"]);return s!=null&&u(e,["enhancedPrompt"],s),e}function gU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>cc(o))),u(e,["generatedImages"],s)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],RS(i)),e}function yU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>cc(s))),u(e,["generatedImages"],i)}return e}function vU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>cc(s))),u(e,["generatedImages"],i)}return e}function _U(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cc(i))),u(e,["generatedImages"],r)}return e}function wU(t){const e={},n=l(t,["label"]);n!=null&&u(e,["label"],n);const r=l(t,["score"]);return r!=null&&u(e,["score"],r),e}function xU(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],PS(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>wU(s))),u(e,["labels"],i)}return e}function CU(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xU(i))),u(e,["generatedMasks"],r)}return e}function TU(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function SU(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function EU(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);return i!=null&&u(e,["step"],i),e}function ih(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["versionId"]);s!=null&&u(e,["version"],s);const o=l(t,["deployedModels"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(p=>TU(p))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],SU(c));const d=l(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>EU(p))),u(e,["checkpoints"],h)}return e}function AU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let s=hS(i);Array.isArray(s)&&(s=s.map(o=>ih(o))),u(e,["models"],s)}return e}function kU(){return{}}function IU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function PU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);return r!=null&&u(e,["tokensInfo"],r),e}function RU(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Ri(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function bU(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],RU(n)),e}function MU(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>bU(o))),u(e,["generatedVideos"],s)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function NU(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const o=l(t,["response"]);return o!=null&&u(e,["response"],MU(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DU="Content-Type",FU="X-Server-Timeout",LU="User-Agent",sh="x-goog-api-client",VU="1.15.0",UU=`google-genai-sdk/${VU}`,OU="v1beta1",BU="v1beta",l_=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class $U{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:OU,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:BU,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&n?.timeout>0){const o=setTimeout(()=>i.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&zU(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await u_(i),new Qf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await u_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return ms(this,arguments,function*(){const i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:c}=yield Ge(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,_=p.code,g=`got status: ${m}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new lc({message:g,status:_})}}catch(h){if(h.name==="ApiError")throw h}o+=d;let f=o.match(l_);for(;f;){const h=f[1];try{const p=new Response(h,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ge(new Qf(p)),o=o.slice(f[0].length),f=o.match(l_)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=UU+" "+this.clientOptions.userAgentExtra;return e[LU]=n,e[sh]=n,e[DU]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(FU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n?.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n?.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:ce("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!o?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=o?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function u_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new lc({message:i,status:n}):new Error(i)}}function zU(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c],f=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GU="mcp_used/unknown";let HU=!1;function bS(t){for(const e of t)if(WU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return HU}function MS(t){var e;const n=(e=t[sh])!==null&&e!==void 0?e:"";t[sh]=(n+` ${GU}`).trimStart()}function WU(t){return t!==null&&typeof t=="object"&&t instanceof lm}function qU(t,e=100){return ms(this,arguments,function*(){let r,i=0;for(;i<e;){const s=yield Ge(t.listTools({cursor:r}));for(const o of s.tools)yield yield Ge(o),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class lm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new lm(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const f of this.mcpClients)try{for(var a=!0,c=(n=void 0,Oo(qU(f))),d;d=await c.next(),e=d.done,!e;a=!0){i=d.value,a=!1;const h=i;o.push(h);const p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=f}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),T2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JU(t,e,n){const r=new m2;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const s=kL(i);Object.assign(r,s),e(r)}class KU{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=XU(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const f=new Promise(w=>{d=w}),h=e.callbacks,p=function(){d({})},m=this.apiClient,_={onopen:p,onmessage:w=>{JU(m,h.onmessage,w)},onerror:(n=h?.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=h?.onclose)!==null&&r!==void 0?r:function(w){}},g=this.webSocketFactory.create(c,YU(o),_);g.connect(),await f;const x=Ne(this.apiClient,e.model),y=SS({model:x}),v=nh({setup:y});return g.send(JSON.stringify(v)),new ZU(g,this.apiClient)}}class ZU{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=SF(e),r=ES(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=EF(e),r=nh(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=nh({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(os.PLAY)}pause(){this.sendPlaybackControl(os.PAUSE)}stop(){this.sendPlaybackControl(os.STOP)}resetContext(){this.sendPlaybackControl(os.RESET_CONTEXT)}close(){this.conn.close()}}function YU(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function XU(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jU(t,e,n){const r=new p2;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=$L(s);Object.assign(r,o)}else{const o=vL(s);Object.assign(r,o)}e(r)}class e4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new KU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&bS(e.config.tools)&&MS(h);const p=i4(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const D=this.apiClient.getApiKey();let F="BidiGenerateContent",q="key";D?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",q="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${q}=${D}`}let m=()=>{};const _=new Promise(D=>{m=D}),g=e.callbacks,x=function(){var D;(D=g?.onopen)===null||D===void 0||D.call(g),m({})},y=this.apiClient,v={onopen:x,onmessage:D=>{jU(y,g.onmessage,D)},onerror:(n=g?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=g?.onclose)!==null&&r!==void 0?r:function(D){}},w=this.webSocketFactory.create(f,r4(p),v);w.connect(),await _;let E=Ne(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const D=this.apiClient.getProject(),F=this.apiClient.getLocation();E=`projects/${D}/locations/${F}/`+E}let A={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ru.AUDIO]}:e.config.responseModalities=[Ru.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],R=[];for(const D of P)if(this.isCallableTool(D)){const F=D;R.push(await F.tool())}else R.push(D);R.length>0&&(e.config.tools=R);const N={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=jF(this.apiClient,N):A=wF(this.apiClient,N),delete A.config,w.send(JSON.stringify(A)),new n4(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const t4={turnComplete:!0};class n4{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=_n(n.turns),e.isVertexAI()?r=r.map(i=>Gs(i)):r=r.map(i=>uc(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(QU)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},t4),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:nL(e)}:n={realtimeInput:TF(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function r4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function i4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c_=10;function d_(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t?.tools)!==null&&n!==void 0?n:[])if(gs(o)){i=!0;break}if(!i)return!0;const s=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function gs(t){return"callTool"in t&&typeof t.callTool=="function"}function s4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>gs(i)))!==null&&r!==void 0?r:!1}function o4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!gs(i)))!==null&&r!==void 0?r:!1}function f_(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let a4=class extends Pi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!s4(n)||d_(n.config))return await this.generateContentInternal(c);if(o4(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f;const h=_n(c.contents),p=(s=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:c_;let m=0;for(;m<p&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const _=d.candidates[0].content,g=[];for(const x of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(gs(x)){const v=await x.callTool(d.functionCalls);g.push(...v)}m++,f={role:"user",parts:g},c.contents=_n(c.contents),c.contents.push(_),c.contents.push(f),f_(c.config)&&(h.push(_),h.push(f))}return f_(c.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),d_(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c?.safetyAttributes:o.push(c);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Ta(Si.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async c=>gs(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&bS(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),MS(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(gs(o)){const a=o,c=await a.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:c_;let o=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,f,h){var p,m;return ms(this,arguments,function*(){for(var _,g,x,y;a<s;){o&&(a++,o=!1);const A=yield Ge(d.processParamsMaybeAddMcpUsage(h)),P=yield Ge(d.generateContentStreamInternal(A)),R=[],N=[];try{for(var v=!0,w=(g=void 0,Oo(P)),E;E=yield Ge(w.next()),_=E.done,!_;v=!0){y=E.value,v=!1;const D=y;if(yield yield Ge(D),D.candidates&&(!((p=D.candidates[0])===null||p===void 0)&&p.content)){N.push(D.candidates[0].content);for(const F of(m=D.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(a<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const q=yield Ge(f.get(F.functionCall.name).callTool([F.functionCall]));R.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(D){g={error:D}}finally{try{!v&&!_&&(x=w.return)&&(yield Ge(x.call(w)))}finally{if(g)throw g.error}}if(R.length>0){o=!0;const D=new oo;D.candidates=[{content:{role:"user",parts:R}}],yield yield Ge(D);const F=[];F.push(...N),F.push({role:"user",parts:R});const q=_n(h.contents).concat(F);h.contents=q}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=s_(this.apiClient,e);return a=ce("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=a_(f),p=new oo;return Object.assign(p,h),p})}else{const d=i_(this.apiClient,e);return a=ce("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=o_(f),p=new oo;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=s_(this.apiClient,e);return a=ce("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return ms(this,arguments,function*(){var p,m,_,g;try{for(var x=!0,y=Oo(h),v;v=yield Ge(y.next()),p=v.done,!p;x=!0){g=v.value,x=!1;const w=g,E=a_(yield Ge(w.json()));E.sdkHttpResponse={headers:w.headers};const A=new oo;Object.assign(A,E),yield yield Ge(A)}}catch(w){m={error:w}}finally{try{!x&&!p&&(_=y.return)&&(yield Ge(_.call(y)))}finally{if(m)throw m.error}}})})}else{const d=i_(this.apiClient,e);return a=ce("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return ms(this,arguments,function*(){var p,m,_,g;try{for(var x=!0,y=Oo(h),v;v=yield Ge(y.next()),p=v.done,!p;x=!0){g=v.value,x=!1;const w=g,E=o_(yield Ge(w.json()));E.sdkHttpResponse={headers:w.headers};const A=new oo;Object.assign(A,E),yield yield Ge(A)}}catch(w){m={error:w}}finally{try{!x&&!p&&(_=y.return)&&(yield Ge(_.call(y)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=t3(this.apiClient,e);return a=ce("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=mU(f),p=new L0;return Object.assign(p,h),p})}else{const d=hV(this.apiClient,e);return a=ce("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=W3(f),p=new L0;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=r3(this.apiClient,e);return a=ce("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=gU(f),p=new V0;return Object.assign(p,h),p})}else{const d=mV(this.apiClient,e);return a=ce("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=K3(f),p=new V0;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=c3(this.apiClient,e);return s=ce("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=yU(c),f=new o2;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=f3(this.apiClient,e);return s=ce("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=vU(c),f=new a2;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=g3(this.apiClient,e);return s=ce("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=_U(c),f=new l2;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=w3(this.apiClient,e);return s=ce("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=CU(c),f=new u2;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=x3(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>ih(f))}else{const d=gV(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>rh(f))}}async listInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=T3(this.apiClient,e);return a=ce("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=AU(f),p=new U0;return Object.assign(p,h),p})}else{const d=vV(this.apiClient,e);return a=ce("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=Y3(f),p=new U0;return Object.assign(p,h),p})}}async update(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=E3(this.apiClient,e);return a=ce("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>ih(f))}else{const d=wV(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>rh(f))}}async delete(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=A3(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(()=>{const f=kU(),h=new O0;return Object.assign(h,f),h})}else{const d=xV(this.apiClient,e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=X3(),h=new O0;return Object.assign(h,f),h})}}async countTokens(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=I3(this.apiClient,e);return a=ce("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=IU(f),p=new B0;return Object.assign(p,h),p})}else{const d=TV(this.apiClient,e);return a=ce("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=Q3(f),p=new B0;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=P3(this.apiClient,e);return s=ce("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=PU(c),f=new c2;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=N3(this.apiClient,e);return a=ce("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const h=NU(f),p=new bu;return Object.assign(p,h),p})}else{const d=AV(this.apiClient,e);return a=ce("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const h=nU(f),p=new bu;return Object.assign(p,h),p})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l4(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function u4(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function c4(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);r!=null&&u(e,["_url","resourceName"],r);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d4 extends Pi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=u4(e);return a=ce("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o}else{const d=l4(e);return a=ce("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=c4(e);return s=ce("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f4(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function NS(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],f4(n)),e}function h4(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],NS(r)),e}function p4(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>h4(i))),u(e,["speakerVoiceConfigs"],r)}return e}function m4(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],NS(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],p4(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function g4(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function y4(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function v4(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function _4(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],g4(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],y4(i));const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],v4(s));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&u(e,["functionCall"],d);const f=l(t,["functionResponse"]);f!=null&&u(e,["functionResponse"],f);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function w4(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>_4(s))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function x4(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function C4(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function T4(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],C4(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function S4(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function E4(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],S4(n)),e}function A4(){return{}}function k4(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function I4(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>x4(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],T4(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],E4(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],A4());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],k4(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function P4(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function h_(){return{}}function R4(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const s=l(t,["prefixPaddingMs"]);s!=null&&u(e,["prefixPaddingMs"],s);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function b4(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],R4(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function M4(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function N4(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],M4(r)),e}function D4(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function F4(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],m4(am(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],w4(Mt(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=$s(_);Array.isArray(A)&&(A=A.map(P=>I4(Bs(P)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],P4(g));const x=l(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&u(e,["setup","inputAudioTranscription"],h_());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],h_());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],b4(v));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],N4(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],D4(E)),n}function L4(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ne(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],F4(i,n)),n}function V4(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&u(n,["expireTime"],i);const s=l(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&u(n,["newSessionExpireTime"],s);const o=l(e,["uses"]);n!==void 0&&o!=null&&u(n,["uses"],o);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],L4(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function U4(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],V4(t,r,n)),n}function O4(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B4(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function $4(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=B4(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(d=>o.includes(d)?`generationConfig.${d}`:d));const c=[];s&&c.push(s),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class z4 extends Pi{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=U4(this.apiClient,e);s=ce("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const c=$4(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>O4(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G4(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function H4(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function W4(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],H4(n,e)),e}function q4(t){const e={},n=l(t,["textInput"]);n!=null&&u(e,["textInput"],n);const r=l(t,["output"]);return r!=null&&u(e,["output"],r),e}function J4(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>q4(i))),u(e,["examples","examples"],r)}return e}function K4(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&u(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=l(t,["batchSize"]);e!==void 0&&o!=null&&u(e,["tuningTask","hyperparameters","batchSize"],o);const a=l(t,["learningRate"]);return e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","learningRate"],a),n}function Z4(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["tuningTask","trainingData"],J4(i));const s=l(t,["config"]);return s!=null&&u(e,["config"],K4(s,e)),e}function Y4(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function X4(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function Q4(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],X4(n,e)),e}function j4(t,e){const n={},r=l(t,["gcsUri"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function eO(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function tO(t,e){const n={},r=l(t,["validationDataset"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec"],eO(r,n));const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const o=l(t,["epochCount"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=l(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=l(t,["preTunedModelCheckpointId"]);d!=null&&u(n,["preTunedModel","checkpointId"],d);const f=l(t,["adapterSize"]);if(e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function nO(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],j4(i,e));const s=l(t,["config"]);return s!=null&&u(e,["config"],tO(s,e)),e}function rO(t){const e={},n=l(t,["name"]);n!=null&&u(e,["model"],n);const r=l(t,["name"]);return r!=null&&u(e,["endpoint"],r),e}function DS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],cS(i));const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["tuningTask","startTime"]);o!=null&&u(e,["startTime"],o);const a=l(t,["tuningTask","completeTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["description"]);d!=null&&u(e,["description"],d);const f=l(t,["baseModel"]);f!=null&&u(e,["baseModel"],f);const h=l(t,["_self"]);h!=null&&u(e,["tunedModel"],rO(h));const p=l(t,["customBaseModel"]);p!=null&&u(e,["customBaseModel"],p);const m=l(t,["experiment"]);m!=null&&u(e,["experiment"],m);const _=l(t,["labels"]);_!=null&&u(e,["labels"],_);const g=l(t,["outputUri"]);g!=null&&u(e,["outputUri"],g);const x=l(t,["pipelineJob"]);x!=null&&u(e,["pipelineJob"],x);const y=l(t,["serviceAccount"]);y!=null&&u(e,["serviceAccount"],y);const v=l(t,["tunedModelDisplayName"]);return v!=null&&u(e,["tunedModelDisplayName"],v),e}function iO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>DS(o))),u(e,["tuningJobs"],s)}return e}function sO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const o=l(t,["error"]);return o!=null&&u(e,["error"],o),e}function oO(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);i!=null&&u(e,["step"],i);const s=l(t,["endpoint"]);return s!=null&&u(e,["endpoint"],s),e}function aO(t){const e={},n=l(t,["model"]);n!=null&&u(e,["model"],n);const r=l(t,["endpoint"]);r!=null&&u(e,["endpoint"],r);const i=l(t,["checkpoints"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>oO(o))),u(e,["checkpoints"],s)}return e}function oh(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],cS(i));const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const o=l(t,["startTime"]);o!=null&&u(e,["startTime"],o);const a=l(t,["endTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["error"]);d!=null&&u(e,["error"],d);const f=l(t,["description"]);f!=null&&u(e,["description"],f);const h=l(t,["baseModel"]);h!=null&&u(e,["baseModel"],h);const p=l(t,["tunedModel"]);p!=null&&u(e,["tunedModel"],aO(p));const m=l(t,["preTunedModel"]);m!=null&&u(e,["preTunedModel"],m);const _=l(t,["supervisedTuningSpec"]);_!=null&&u(e,["supervisedTuningSpec"],_);const g=l(t,["tuningDataStats"]);g!=null&&u(e,["tuningDataStats"],g);const x=l(t,["encryptionSpec"]);x!=null&&u(e,["encryptionSpec"],x);const y=l(t,["partnerModelTuningSpec"]);y!=null&&u(e,["partnerModelTuningSpec"],y);const v=l(t,["customBaseModel"]);v!=null&&u(e,["customBaseModel"],v);const w=l(t,["experiment"]);w!=null&&u(e,["experiment"],w);const E=l(t,["labels"]);E!=null&&u(e,["labels"],E);const A=l(t,["outputUri"]);A!=null&&u(e,["outputUri"],A);const P=l(t,["pipelineJob"]);P!=null&&u(e,["pipelineJob"],P);const R=l(t,["serviceAccount"]);R!=null&&u(e,["serviceAccount"],R);const N=l(t,["tunedModelDisplayName"]);return N!=null&&u(e,["tunedModelDisplayName"],N),e}function lO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>oh(o))),u(e,["tuningJobs"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uO extends Pi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ta(Si.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Xf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=Y4(e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>oh(f))}else{const d=G4(e);return a=ce("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>DS(f))}}async listInternal(e){var n,r,i,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=Q4(e);return a=ce("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=lO(f),p=new z0;return Object.assign(p,h),p})}else{const d=W4(e);return a=ce("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const h=iO(f),p=new z0;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=nO(e);return s=ce("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>oh(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Z4(e);return s=ce("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>sO(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cO{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dO=1024*1024*8,fO=3,hO=1e3,pO=2,gd="x-goog-upload-status";async function mO(t,e,n){var r,i,s;let o=0,a=0,c=new Qf(new Response),d="upload";for(o=t.size;a<o;){const h=Math.min(dO,o-a),p=t.slice(a,a+h);a+h>=o&&(d+=", finalize");let m=0,_=hO;for(;m<fO&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[gd]));)m++,await yO(_),_=_*pO;if(a+=h,((i=c?.headers)===null||i===void 0?void 0:i[gd])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await c?.json();if(((s=c?.headers)===null||s===void 0?void 0:s[gd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function gO(t){return{size:t.size,type:t.type}}function yO(t){return new Promise(e=>setTimeout(e,t))}class vO{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mO(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _O{create(e,n,r){return new wO(e,n,r)}}class wO{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p_="x-goog-api-key";class xO{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(p_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(p_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CO="gl-node/";class TO{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=s2(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new xO(this.apiKey);this.apiClient=new $U({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:CO+"web",uploader:new vO,downloader:new cO}),this.models=new a4(this.apiClient),this.live=new e4(this.apiClient,i,new _O),this.batches=new RD(this.apiClient),this.chats=new L5(this.models,this.apiClient),this.caches=new N5(this.apiClient),this.files=new Z5(this.apiClient),this.operations=new d4(this.apiClient),this.authTokens=new z4(this.apiClient),this.tunings=new uO(this.apiClient)}}const ah="RFC3986",lh={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},SO="RFC1738",EO=Array.isArray,Vn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),yd=1024,AO=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=yd){const c=s.length>=yd?s.slice(a,a+yd):s,d=[];for(let f=0;f<c.length;++f){let h=c.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===SO&&(h===40||h===41)){d[d.length]=c.charAt(f);continue}if(h<128){d[d.length]=Vn[h];continue}if(h<2048){d[d.length]=Vn[192|h>>6]+Vn[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=Vn[224|h>>12]+Vn[128|h>>6&63]+Vn[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|c.charCodeAt(f)&1023),d[d.length]=Vn[240|h>>18]+Vn[128|h>>12&63]+Vn[128|h>>6&63]+Vn[128|h&63]}o+=d.join("")}return o};function kO(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function m_(t,e){if(EO(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const IO=Object.prototype.hasOwnProperty,FS={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},On=Array.isArray,PO=Array.prototype.push,LS=function(t,e){PO.apply(t,On(e)?e:[e])},RO=Date.prototype.toISOString,ct={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:AO,encodeValuesOnly:!1,format:ah,formatter:lh[ah],indices:!1,serializeDate(t){return RO.call(t)},skipNulls:!1,strictNullHandling:!1};function bO(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const vd={};function VS(t,e,n,r,i,s,o,a,c,d,f,h,p,m,_,g,x,y){let v=t,w=y,E=0,A=!1;for(;(w=w.get(vd))!==void 0&&!A;){const F=w.get(t);if(E+=1,typeof F<"u"){if(F===E)throw new RangeError("Cyclic object value");A=!0}typeof w.get(vd)>"u"&&(E=0)}if(typeof d=="function"?v=d(e,v):v instanceof Date?v=p?.(v):n==="comma"&&On(v)&&(v=m_(v,function(F){return F instanceof Date?p?.(F):F})),v===null){if(s)return c&&!g?c(e,ct.encoder,x,"key",m):e;v=""}if(bO(v)||kO(v)){if(c){const F=g?e:c(e,ct.encoder,x,"key",m);return[_?.(F)+"="+_?.(c(v,ct.encoder,x,"value",m))]}return[_?.(e)+"="+_?.(String(v))]}const P=[];if(typeof v>"u")return P;let R;if(n==="comma"&&On(v))g&&c&&(v=m_(v,c)),R=[{value:v.length>0?v.join(",")||null:void 0}];else if(On(d))R=d;else{const F=Object.keys(v);R=f?F.sort(f):F}const N=a?String(e).replace(/\./g,"%2E"):String(e),D=r&&On(v)&&v.length===1?N+"[]":N;if(i&&On(v)&&v.length===0)return D+"[]";for(let F=0;F<R.length;++F){const q=R[F],I=typeof q=="object"&&typeof q.value<"u"?q.value:v[q];if(o&&I===null)continue;const M=h&&a?q.replace(/\./g,"%2E"):q,C=On(v)?typeof n=="function"?n(D,M):D:D+(h?"."+M:"["+M+"]");y.set(t,E);const O=new WeakMap;O.set(vd,y),LS(P,VS(I,C,n,r,i,s,o,a,n==="comma"&&g&&On(v)?null:c,d,f,h,p,m,_,g,x,O))}return P}function MO(t=ct){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||ct.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=ah;if(typeof t.format<"u"){if(!IO.call(lh,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=lh[n];let i=ct.filter;(typeof t.filter=="function"||On(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in FS?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=ct.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:ct.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ct.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ct.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ct.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ct.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ct.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ct.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ct.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ct.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ct.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ct.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ct.strictNullHandling}}function NO(t,e={}){let n=t;const r=MO(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):On(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=FS[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const d=new WeakMap;for(let p=0;p<i.length;++p){const m=i[p];r.skipNulls&&n[m]===null||LS(o,VS(n[m],m,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const f=o.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}const $i="4.104.0";let g_=!1,Bo,US,OS,uh,BS,$S,zS,GS,HS;function DO(t,e={auto:!1}){if(g_)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Bo)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Bo}'\``);g_=e.auto,Bo=t.kind,US=t.fetch,OS=t.FormData,uh=t.File,BS=t.ReadableStream,$S=t.getMultipartRequestOptions,zS=t.getDefaultAgent,GS=t.fileFromPath,HS=t.isFsReadStream}class FO{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function LO({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new FO(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const WS=()=>{Bo||DO(LO(),{auto:!0})};WS();class me extends Error{}class St extends me{constructor(e,n,r,i){super(`${St.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i?.["x-request-id"],this.error=n;const s=n;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new dc({message:r,cause:dh(n)});const s=n?.error;return e===400?new qS(e,s,r,i):e===401?new JS(e,s,r,i):e===403?new KS(e,s,r,i):e===404?new ZS(e,s,r,i):e===409?new YS(e,s,r,i):e===422?new XS(e,s,r,i):e===429?new QS(e,s,r,i):e>=500?new jS(e,s,r,i):new St(e,s,r,i)}}class gn extends St{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class dc extends St{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class um extends dc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class qS extends St{}class JS extends St{}class KS extends St{}class ZS extends St{}class YS extends St{}class XS extends St{}class QS extends St{}class jS extends St{}class eE extends me{constructor(){super("Could not parse response content as the length limit was reached")}}class tE extends me{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var sl=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ti=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Xt;class fc{constructor(){Xt.set(this,void 0),this.buffer=new Uint8Array,sl(this,Xt,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let s;for(;(s=VO(this.buffer,ti(this,Xt,"f")))!=null;){if(s.carriage&&ti(this,Xt,"f")==null){sl(this,Xt,s.index,"f");continue}if(ti(this,Xt,"f")!=null&&(s.index!==ti(this,Xt,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,ti(this,Xt,"f")-1))),this.buffer=this.buffer.slice(ti(this,Xt,"f")),sl(this,Xt,null,"f");continue}const o=ti(this,Xt,"f")!==null?s.preceding-1:s.preceding,a=this.decodeText(this.buffer.slice(0,o));i.push(a),this.buffer=this.buffer.slice(s.index),sl(this,Xt,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new me(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new me(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new me("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Xt=new WeakMap;fc.NEWLINE_CHARS=new Set([`
`,"\r"]);fc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VO(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function UO(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function nE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class zn{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const o of OO(e,n))if(!s){if(o.data.startsWith("[DONE]")){s=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let a;try{a=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(a&&a.error)throw new St(void 0,a.error,void 0,cE(e.headers));yield a}else{let a;try{a=JSON.parse(o.data)}catch(c){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),c}if(o.event=="error")throw new St(void 0,a.error,a.message,void 0);yield{event:o.event,data:a}}}s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||n.abort()}}return new zn(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const o=new fc,a=nE(e);for await(const c of a)for(const d of o.decode(c))yield d;for(const c of o.flush())yield c}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const a of i())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||n.abort()}}return new zn(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new zn(()=>i(e),this.controller),new zn(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new BS({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:o}=await n.next();if(o)return i.close();const a=r.encode(JSON.stringify(s)+`
`);i.enqueue(a)}catch(s){i.error(s)}},async cancel(){await n.return?.()}})}}async function*OO(t,e){if(!t.body)throw e.abort(),new me("Attempted to iterate over a response with no body");const n=new $O,r=new fc,i=nE(t.body);for await(const s of BO(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*BO(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=UO(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class $O{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=zO(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function zO(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const rE=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",iE=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hc(t),hc=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",GO=t=>iE(t)||rE(t)||HS(t);async function sE(t,e,n){if(t=await t,iE(t))return t;if(rE(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=hc(i)?[await i.arrayBuffer()]:[i];return new uh(s,e,n)}const r=await HO(t);if(e||(e=qO(t)??"unknown_file"),!n?.type){const i=r[0]?.type;typeof i=="string"&&(n={...n,type:i})}return new uh(r,e,n)}async function HO(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(hc(t))e.push(await t.arrayBuffer());else if(JO(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${WO(t)}`);return e}function WO(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function qO(t){return _d(t.name)||_d(t.filename)||_d(t.path)?.split(/[\\/]/).pop()}const _d=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},JO=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",y_=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Ei=async t=>{const e=await KO(t.body);return $S(e,t)},KO=async t=>{const e=new OS;return await Promise.all(Object.entries(t||{}).map(([n,r])=>ch(e,n,r))),e},ch=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(GO(n)){const r=await sE(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>ch(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>ch(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var oE={},ZO=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},YO=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ol;WS();async function aE(t){const{response:e}=t;if(t.options.stream)return Br("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):zn.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const o=await e.json();return Br("response",e.status,e.url,e.headers,o),lE(o,e)}const s=await e.text();return Br("response",e.status,e.url,e.headers,s),s}function lE(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class pc extends Promise{constructor(e,n=aE){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new pc(this.responsePromise,async n=>lE(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class XO{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=wd("maxRetries",n),this.timeout=wd("timeout",r),this.httpAgent=i,this.fetch=s??US}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...nB(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${oB()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&hc(i?.body)?new DataView(await i.body.arrayBuffer()):i?.body instanceof DataView?i.body:i?.body instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i?.body)?new DataView(i.body.buffer):i?.body;return{method:e,path:n,...i,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:y_(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,d=this.calculateContentLength(c),f=this.buildURL(s,o);"timeout"in r&&wd("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??zS(f),p=r.timeout+1e3;typeof h?.options?.timeout=="number"&&p>(h.options.timeout??0)&&(h.options.timeout=p),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:r,headers:a,contentLength:d,retryCount:n});return{req:{method:i,...c&&{body:c},headers:m,...h&&{agent:h},signal:r.signal??null},url:f,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const o=this.defaultHeaders(e);return x_(s,o),x_(s,n),y_(e.body)&&Bo!=="node"&&delete s["content-type"],ll(o,"x-stainless-retry-count")===void 0&&ll(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),ll(o,"x-stainless-timeout")===void 0&&ll(n,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,n),s}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return St.generate(e,n,r,i)}request(e,n=null){return new pc(this.makeRequest(e,n))}async makeRequest(e,n){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:o,timeout:a}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:o,options:r}),Br("request",o,r,s.headers),r.signal?.aborted)throw new gn;const c=new AbortController,d=await this.fetchWithTimeout(o,s,a,c).catch(dh);if(d instanceof Error){if(r.signal?.aborted)throw new gn;if(n)return this.retryRequest(r,n);throw d.name==="AbortError"?new um:new dc({cause:d})}const f=cE(d.headers);if(!d.ok){if(n&&this.shouldRetry(d)){const x=`retrying, ${n} attempts remaining`;return Br(`response (error; ${x})`,d.status,o,f),this.retryRequest(r,n,f)}const h=await d.text().catch(x=>dh(x).message),p=rB(h),m=p?void 0:h;throw Br(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,d.status,o,f,m),this.makeStatusError(d.status,p,m,f)}return{response:d,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new QO(this,r,e)}buildURL(e,n){const r=sB(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return dE(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new me(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...o}=n||{};s&&s.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),r),c={signal:i.signal,...o};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r?.["retry-after-ms"];if(s){const a=parseFloat(s);Number.isNaN(a)||(i=a)}const o=r?.["retry-after"];if(o&&!i){const a=parseFloat(o);Number.isNaN(a)?i=Date.parse(o)-Date.now():i=a*1e3}if(!(i&&0<=i&&i<60*1e3)){const a=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,a)}return await Sa(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${$i}`}}class uE{constructor(e,n,r,i){ol.set(this,void 0),ZO(this,ol,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new me("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,s]of r)e.url.searchParams.set(i,s);n.query=void 0,n.path=e.url.toString()}return await YO(this,ol,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ol=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class QO extends pc{constructor(e,n,r){super(n,async i=>new r(e,i.response,await aE(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const cE=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),jO={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},nt=t=>typeof t=="object"&&t!==null&&!dE(t)&&Object.keys(t).every(e=>fE(jO,e)),eB=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":__(Deno.build.os),"X-Stainless-Arch":v_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":__(process.platform),"X-Stainless-Arch":v_(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=tB();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$i,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const v_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",__=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let w_;const nB=()=>w_??(w_=eB()),rB=t=>{try{return JSON.parse(t)}catch{return}},iB=/^[a-z][a-z0-9+.-]*:/i,sB=t=>iB.test(t),Sa=t=>new Promise(e=>setTimeout(e,t)),wd=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new me(`${t} must be an integer`);if(e<0)throw new me(`${t} must be a positive integer`);return e},dh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},al=t=>{if(typeof process<"u")return oE?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function dE(t){if(!t)return!0;for(const e in t)return!1;return!0}function fE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function x_(t,e){for(const n in e){if(!fE(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const C_=new Set(["authorization","api-key"]);function Br(t,...e){if(typeof process<"u"&&oE?.DEBUG==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const s={...r,headers:{...r.headers}};for(const o in r.headers)C_.has(o.toLowerCase())&&(s.headers[o]="REDACTED");return s}let i=null;for(const s in r)C_.has(s.toLowerCase())&&(i??(i={...r}),i[s]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const oB=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),aB=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",lB=t=>typeof t?.get=="function",ll=(t,e)=>{const n=e.toLowerCase();if(lB(t)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(i,s,o)=>s+o.toUpperCase());for(const i of[e,n,e.toUpperCase(),r]){const s=t.get(i);if(s)return s}}for(const[r,i]of Object.entries(t))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},uB=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function xd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class mc extends uE{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class ht extends uE{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const n=e[e.length-1]?.id;return n?{params:{after:n}}:null}}class ge{constructor(e){this._client=e}}let hE=class extends ge{list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,cB,{query:n,...r})}},gc=class extends ge{constructor(){super(...arguments),this.messages=new hE(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/chat/completions",yc,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class yc extends ht{}class cB extends ht{}gc.ChatCompletionsPage=yc;gc.Messages=hE;let vc=class extends ge{constructor(){super(...arguments),this.completions=new gc(this._client)}};vc.Completions=gc;vc.ChatCompletionsPage=yc;class pE extends ge{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class mE extends ge{create(e,n){return this._client.post("/audio/transcriptions",Ei({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class gE extends ge{create(e,n){return this._client.post("/audio/translations",Ei({body:e,...n,__metadata:{model:e.model}}))}}class Ea extends ge{constructor(){super(...arguments),this.transcriptions=new mE(this._client),this.translations=new gE(this._client),this.speech=new pE(this._client)}}Ea.Transcriptions=mE;Ea.Translations=gE;Ea.Speech=pE;class cm extends ge{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/batches",dm,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class dm extends ht{}cm.BatchesPage=dm;var En=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Xe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},fh,Ll,Vl,yo,vo,Ul,_o,Xn,wo,Nu,Du,zi,yE;class fm{constructor(){fh.add(this),this.controller=new AbortController,Ll.set(this,void 0),Vl.set(this,()=>{}),yo.set(this,()=>{}),vo.set(this,void 0),Ul.set(this,()=>{}),_o.set(this,()=>{}),Xn.set(this,{}),wo.set(this,!1),Nu.set(this,!1),Du.set(this,!1),zi.set(this,!1),En(this,Ll,new Promise((e,n)=>{En(this,Vl,e,"f"),En(this,yo,n,"f")}),"f"),En(this,vo,new Promise((e,n)=>{En(this,Ul,e,"f"),En(this,_o,n,"f")}),"f"),Xe(this,Ll,"f").catch(()=>{}),Xe(this,vo,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Xe(this,fh,"m",yE).bind(this))},0)}_connected(){this.ended||(Xe(this,Vl,"f").call(this),this._emit("connect"))}get ended(){return Xe(this,wo,"f")}get errored(){return Xe(this,Nu,"f")}get aborted(){return Xe(this,Du,"f")}abort(){this.controller.abort()}on(e,n){return(Xe(this,Xn,"f")[e]||(Xe(this,Xn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Xe(this,Xn,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(Xe(this,Xn,"f")[e]||(Xe(this,Xn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{En(this,zi,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){En(this,zi,!0,"f"),await Xe(this,vo,"f")}_emit(e,...n){if(Xe(this,wo,"f"))return;e==="end"&&(En(this,wo,!0,"f"),Xe(this,Ul,"f").call(this));const r=Xe(this,Xn,"f")[e];if(r&&(Xe(this,Xn,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!Xe(this,zi,"f")&&!r?.length&&Promise.reject(i),Xe(this,yo,"f").call(this,i),Xe(this,_o,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!Xe(this,zi,"f")&&!r?.length&&Promise.reject(i),Xe(this,yo,"f").call(this,i),Xe(this,_o,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Ll=new WeakMap,Vl=new WeakMap,yo=new WeakMap,vo=new WeakMap,Ul=new WeakMap,_o=new WeakMap,Xn=new WeakMap,wo=new WeakMap,Nu=new WeakMap,Du=new WeakMap,zi=new WeakMap,fh=new WeakSet,yE=function(e){if(En(this,Nu,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new gn),e instanceof gn)return En(this,Du,!0,"f"),this._emit("abort",e);if(e instanceof me)return this._emit("error",e);if(e instanceof Error){const n=new me(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new me(String(e)))};var he=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Yt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},xt,hh,Bn,Ol,kn,hi,as,li,Fu,Qt,Bl,$l,$o,xo,Co,T_,S_,E_,A_,k_,I_,P_;class Mn extends fm{constructor(){super(...arguments),xt.add(this),hh.set(this,[]),Bn.set(this,{}),Ol.set(this,{}),kn.set(this,void 0),hi.set(this,void 0),as.set(this,void 0),li.set(this,void 0),Fu.set(this,void 0),Qt.set(this,void 0),Bl.set(this,void 0),$l.set(this,void 0),$o.set(this,void 0)}[(hh=new WeakMap,Bn=new WeakMap,Ol=new WeakMap,kn=new WeakMap,hi=new WeakMap,as=new WeakMap,li=new WeakMap,Fu=new WeakMap,Qt=new WeakMap,Bl=new WeakMap,$l=new WeakMap,$o=new WeakMap,xt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Mn;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=zn.fromReadableStream(e,this.controller);for await(const s of i)he(this,xt,"m",xo).call(this,s);if(i.controller.signal?.aborted)throw new gn;return this._addRun(he(this,xt,"m",Co).call(this))}toReadableStream(){return new zn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,s){const o=new Mn;return o._run(()=>o._runToolAssistantStream(e,n,r,i,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,n,r,i,s){const o=s?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},c=await e.submitToolOutputs(n,r,a,{...s,signal:this.controller.signal});this._connected();for await(const d of c)he(this,xt,"m",xo).call(this,d);if(c.controller.signal?.aborted)throw new gn;return this._addRun(he(this,xt,"m",Co).call(this))}static createThreadAssistantStream(e,n,r){const i=new Mn;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new Mn;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return he(this,Bl,"f")}currentRun(){return he(this,$l,"f")}currentMessageSnapshot(){return he(this,kn,"f")}currentRunStepSnapshot(){return he(this,$o,"f")}async finalRunSteps(){return await this.done(),Object.values(he(this,Bn,"f"))}async finalMessages(){return await this.done(),Object.values(he(this,Ol,"f"))}async finalRun(){if(await this.done(),!he(this,hi,"f"))throw Error("Final run was not received.");return he(this,hi,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const a of o)he(this,xt,"m",xo).call(this,a);if(o.controller.signal?.aborted)throw new gn;return this._addRun(he(this,xt,"m",Co).call(this))}async _createAssistantStream(e,n,r,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const c of a)he(this,xt,"m",xo).call(this,c);if(a.controller.signal?.aborted)throw new gn;return this._addRun(he(this,xt,"m",Co).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(xd(s)&&xd(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!xd(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=s[a];c==null?s.push(o):s[a]=this.accumulateDelta(c,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,s){return await this._createToolAssistantStream(r,e,n,i,s)}}xo=function(e){if(!this.ended)switch(Yt(this,Bl,e,"f"),he(this,xt,"m",E_).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":he(this,xt,"m",P_).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":he(this,xt,"m",S_).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":he(this,xt,"m",T_).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Co=function(){if(this.ended)throw new me("stream has ended, this shouldn't happen");if(!he(this,hi,"f"))throw Error("Final run has not been received");return he(this,hi,"f")},T_=function(e){const[n,r]=he(this,xt,"m",k_).call(this,e,he(this,kn,"f"));Yt(this,kn,n,"f"),he(this,Ol,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=he(this,as,"f")){if(he(this,li,"f"))switch(he(this,li,"f").type){case"text":this._emit("textDone",he(this,li,"f").text,he(this,kn,"f"));break;case"image_file":this._emit("imageFileDone",he(this,li,"f").image_file,he(this,kn,"f"));break}Yt(this,as,i.index,"f")}Yt(this,li,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(he(this,as,"f")!==void 0){const i=e.data.content[he(this,as,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,he(this,kn,"f"));break;case"text":this._emit("textDone",i.text,he(this,kn,"f"));break}}he(this,kn,"f")&&this._emit("messageDone",e.data),Yt(this,kn,void 0,"f")}},S_=function(e){const n=he(this,xt,"m",A_).call(this,e);switch(Yt(this,$o,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==he(this,Fu,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(he(this,Qt,"f")&&this._emit("toolCallDone",he(this,Qt,"f")),Yt(this,Fu,s.index,"f"),Yt(this,Qt,n.step_details.tool_calls[s.index],"f"),he(this,Qt,"f")&&this._emit("toolCallCreated",he(this,Qt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Yt(this,$o,void 0,"f"),e.data.step_details.type=="tool_calls"&&he(this,Qt,"f")&&(this._emit("toolCallDone",he(this,Qt,"f")),Yt(this,Qt,void 0,"f")),this._emit("runStepDone",e.data,n);break}},E_=function(e){he(this,hh,"f").push(e),this._emit("event",e)},A_=function(e){switch(e.event){case"thread.run.step.created":return he(this,Bn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=he(this,Bn,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Mn.accumulateDelta(n,r.delta);he(this,Bn,"f")[e.data.id]=i}return he(this,Bn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":he(this,Bn,"f")[e.data.id]=e.data;break}if(he(this,Bn,"f")[e.data.id])return he(this,Bn,"f")[e.data.id];throw new Error("No snapshot available")},k_=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=he(this,xt,"m",I_).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},I_=function(e,n){return Mn.accumulateDelta(n,e)},P_=function(e){switch(Yt(this,$l,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Yt(this,hi,e.data,"f"),he(this,Qt,"f")&&(this._emit("toolCallDone",he(this,Qt,"f")),Yt(this,Qt,void 0,"f"));break}};class hm extends ge{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/assistants",pm,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class pm extends ht{}hm.AssistantsPage=pm;function R_(t){return typeof t.parse=="function"}const ys=t=>t?.role==="assistant",vE=t=>t?.role==="function",_E=t=>t?.role==="tool";function mm(t){return t?.$brand==="auto-parseable-response-format"}function Aa(t){return t?.$brand==="auto-parseable-tool"}function dB(t,e){return!e||!wE(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:gm(t,e)}function gm(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new eE;if(r.finish_reason==="content_filter")throw new tE;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>hB(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?fB(e,r.message.content):null}}});return{...t,choices:n}}function fB(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function hB(t,e){const n=t.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Aa(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function pB(t,e){if(!t)return!1;const n=t.tools?.find(r=>r.function?.name===e.function.name);return Aa(n)||n?.function.strict||!1}function wE(t){return mm(t.response_format)?!0:t.tools?.some(e=>Aa(e)||e.type==="function"&&e.function.strict===!0)??!1}function mB(t){for(const e of t??[]){if(e.type!=="function")throw new me(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new me(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var zt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},It,ph,Lu,mh,gh,yh,xE,vh;const b_=10;class CE extends fm{constructor(){super(...arguments),It.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(vE(e)||_E(e))&&e.content)this._emit("functionCallResult",e.content);else if(ys(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ys(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new me("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),zt(this,It,"m",ph).call(this)}async finalMessage(){return await this.done(),zt(this,It,"m",Lu).call(this)}async finalFunctionCall(){return await this.done(),zt(this,It,"m",mh).call(this)}async finalFunctionCallResult(){return await this.done(),zt(this,It,"m",gh).call(this)}async totalUsage(){return await this.done(),zt(this,It,"m",yh).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=zt(this,It,"m",Lu).call(this);n&&this._emit("finalMessage",n);const r=zt(this,It,"m",ph).call(this);r&&this._emit("finalContent",r);const i=zt(this,It,"m",mh).call(this);i&&this._emit("finalFunctionCall",i);const s=zt(this,It,"m",gh).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",zt(this,It,"m",yh).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),zt(this,It,"m",xE).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(gm(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const i="function",{function_call:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s?.name,{maxChatCompletions:d=b_}=r||{},f={};for(const p of n.functions)f[p.name||p.function.name]=p;const h=n.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<d;++p){const _=(await this._createChatCompletion(e,{...a,function_call:s,functions:h,messages:[...this.messages]},r)).choices[0]?.message;if(!_)throw new me("missing message in ChatCompletion response");if(!_.function_call)return;const{name:g,arguments:x}=_.function_call,y=f[g];if(y){if(c&&c!==g){const A=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,name:g,content:A});continue}}else{const A=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${h.map(P=>JSON.stringify(P.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:A});continue}let v;try{v=R_(y)?await y.parse(x):x}catch(A){this._addMessage({role:i,name:g,content:A instanceof Error?A.message:String(A)});continue}const w=await y.function(v,this),E=zt(this,It,"m",vh).call(this,w);if(this._addMessage({role:i,name:g,content:E}),c)return}}async _runTools(e,n,r){const i="tool",{tool_choice:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s?.function?.name,{maxChatCompletions:d=b_}=r||{},f=n.tools.map(m=>{if(Aa(m)){if(!m.$callback)throw new me("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),h={};for(const m of f)m.type==="function"&&(h[m.function.name||m.function.function.name]=m.function);const p="tools"in n?f.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<d;++m){const g=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:p,messages:[...this.messages]},r)).choices[0]?.message;if(!g)throw new me("missing message in ChatCompletion response");if(!g.tool_calls?.length)return;for(const x of g.tool_calls){if(x.type!=="function")continue;const y=x.id,{name:v,arguments:w}=x.function,E=h[v];if(E){if(c&&c!==v){const N=`Invalid tool_call: ${JSON.stringify(v)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:y,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(v)}. Available options are: ${Object.keys(h).map(D=>JSON.stringify(D)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:y,content:N});continue}let A;try{A=R_(E)?await E.parse(w):w}catch(N){const D=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:y,content:D});continue}const P=await E.function(A,this),R=zt(this,It,"m",vh).call(this,P);if(this._addMessage({role:i,tool_call_id:y,content:R}),c)return}}}}It=new WeakSet,ph=function(){return zt(this,It,"m",Lu).call(this).content??null},Lu=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ys(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new me("stream ended without producing a ChatCompletionMessage with role=assistant")},mh=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(ys(n)&&n?.function_call)return n.function_call;if(ys(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},gh=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(vE(n)&&n.content!=null||_E(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},yh=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},xE=function(e){if(e.n!=null&&e.n>1)throw new me("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},vh=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class fa extends CE{static runFunctions(e,n,r){const i=new fa,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new fa,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),ys(e)&&e.content&&this._emit("content",e.content)}}const TE=1,SE=2,EE=4,AE=8,kE=16,IE=32,PE=64,RE=128,bE=256,ME=RE|bE,NE=kE|IE|ME|PE,DE=TE|SE|NE,FE=EE|AE,gB=DE|FE,mt={STR:TE,NUM:SE,ARR:EE,OBJ:AE,NULL:kE,BOOL:IE,NAN:PE,INFINITY:RE,MINUS_INFINITY:bE,INF:ME,SPECIAL:NE,ATOM:DE,COLLECTION:FE,ALL:gB};class yB extends Error{}class vB extends Error{}function _B(t,e=mt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return wB(t.trim(),e)}const wB=(t,e)=>{const n=t.length;let r=0;const i=p=>{throw new yB(`${p} at position ${r}`)},s=p=>{throw new vB(`${p} at position ${r}`)},o=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?d():t.substring(r,r+4)==="null"||mt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||mt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||mt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||mt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||mt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||mt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),a=()=>{const p=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(m)))}catch(_){s(String(_))}else if(mt.STR&e)try{return JSON.parse(t.substring(p,r-Number(m))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,h();const p={};try{for(;t[r]!=="}";){if(h(),r>=n&&mt.OBJ&e)return p;const m=a();h(),r++;try{const _=o();Object.defineProperty(p,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(mt.OBJ&e)return p;throw _}h(),t[r]===","&&r++}}catch{if(mt.OBJ&e)return p;i("Expected '}' at end of object")}return r++,p},d=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(o()),h(),t[r]===","&&r++}catch{if(mt.ARR&e)return p;i("Expected ']' at end of array")}return r++,p},f=()=>{if(r===0){t==="-"&&mt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(mt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(m))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(mt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&mt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(_){s(String(_))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},M_=t=>_B(t,mt.ALL^mt.NUM);var Fi=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Oe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ut,Yn,Li,yr,Cd,ul,Td,Sd,Ed,cl,Ad,N_;class ha extends CE{constructor(e){super(),ut.add(this),Yn.set(this,void 0),Li.set(this,void 0),yr.set(this,void 0),Fi(this,Yn,e,"f"),Fi(this,Li,[],"f")}get currentChatCompletionSnapshot(){return Oe(this,yr,"f")}static fromReadableStream(e){const n=new ha(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new ha(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Oe(this,ut,"m",Cd).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)Oe(this,ut,"m",Td).call(this,o);if(s.controller.signal?.aborted)throw new gn;return this._addChatCompletion(Oe(this,ut,"m",cl).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Oe(this,ut,"m",Cd).call(this),this._connected();const i=zn.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(Oe(this,ut,"m",cl).call(this)),Oe(this,ut,"m",Td).call(this,o),s=o.id;if(i.controller.signal?.aborted)throw new gn;return this._addChatCompletion(Oe(this,ut,"m",cl).call(this))}[(Yn=new WeakMap,Li=new WeakMap,yr=new WeakMap,ut=new WeakSet,Cd=function(){this.ended||Fi(this,yr,void 0,"f")},ul=function(n){let r=Oe(this,Li,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Oe(this,Li,"f")[n.index]=r,r)},Td=function(n){if(this.ended)return;const r=Oe(this,ut,"m",N_).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const s=r.choices[i.index];i.delta.content!=null&&s.message?.role==="assistant"&&s.message?.content&&(this._emit("content",i.delta.content,s.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),i.delta.refusal!=null&&s.message?.role==="assistant"&&s.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:s.message.refusal}),i.logprobs?.content!=null&&s.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:s.logprobs?.content??[]}),i.logprobs?.refusal!=null&&s.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});const o=Oe(this,ut,"m",ul).call(this,s);s.finish_reason&&(Oe(this,ut,"m",Ed).call(this,s),o.current_tool_call_index!=null&&Oe(this,ut,"m",Sd).call(this,s,o.current_tool_call_index));for(const a of i.delta.tool_calls??[])o.current_tool_call_index!==a.index&&(Oe(this,ut,"m",Ed).call(this,s),o.current_tool_call_index!=null&&Oe(this,ut,"m",Sd).call(this,s,o.current_tool_call_index)),o.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const c=s.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},Sd=function(n,r){if(Oe(this,ut,"m",ul).call(this,n).done_tool_calls.has(r))return;const s=n.message.tool_calls?.[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const o=Oe(this,Yn,"f")?.tools?.find(a=>a.type==="function"&&a.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Aa(o)?o.$parseRaw(s.function.arguments):o?.function.strict?JSON.parse(s.function.arguments):null})}else s.type},Ed=function(n){const r=Oe(this,ut,"m",ul).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=Oe(this,ut,"m",Ad).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},cl=function(){if(this.ended)throw new me("stream has ended, this shouldn't happen");const n=Oe(this,yr,"f");if(!n)throw new me("request ended without sending any chunks");return Fi(this,yr,void 0,"f"),Fi(this,Li,[],"f"),xB(n,Oe(this,Yn,"f"))},Ad=function(){const n=Oe(this,Yn,"f")?.response_format;return mm(n)?n:null},N_=function(n){var r,i,s,o;let a=Oe(this,yr,"f");const{choices:c,...d}=n;a?Object.assign(a,d):a=Fi(this,yr,{...d,choices:[]},"f");for(const{delta:f,finish_reason:h,index:p,logprobs:m=null,..._}of n.choices){let g=a.choices[p];if(g||(g=a.choices[p]={finish_reason:h,index:p,message:{},logprobs:m,..._}),m)if(!g.logprobs)g.logprobs=Object.assign({},m);else{const{content:P,refusal:R,...N}=m;Object.assign(g.logprobs,N),P&&((r=g.logprobs).content??(r.content=[]),g.logprobs.content.push(...P)),R&&((i=g.logprobs).refusal??(i.refusal=[]),g.logprobs.refusal.push(...R))}if(h&&(g.finish_reason=h,Oe(this,Yn,"f")&&wE(Oe(this,Yn,"f")))){if(h==="length")throw new eE;if(h==="content_filter")throw new tE}if(Object.assign(g,_),!f)continue;const{content:x,refusal:y,function_call:v,role:w,tool_calls:E,...A}=f;if(Object.assign(g.message,A),y&&(g.message.refusal=(g.message.refusal||"")+y),w&&(g.message.role=w),v&&(g.message.function_call?(v.name&&(g.message.function_call.name=v.name),v.arguments&&((s=g.message.function_call).arguments??(s.arguments=""),g.message.function_call.arguments+=v.arguments)):g.message.function_call=v),x&&(g.message.content=(g.message.content||"")+x,!g.message.refusal&&Oe(this,ut,"m",Ad).call(this)&&(g.message.parsed=M_(g.message.content))),E){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:P,id:R,type:N,function:D,...F}of E){const q=(o=g.message.tool_calls)[P]??(o[P]={});Object.assign(q,F),R&&(q.id=R),N&&(q.type=N),D&&(q.function??(q.function={name:D.name??"",arguments:""})),D?.name&&(q.function.name=D.name),D?.arguments&&(q.function.arguments+=D.arguments,pB(Oe(this,Yn,"f"),q)&&(q.function.parsed_arguments=M_(q.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new zn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function xB(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,c={...a,id:n,choices:r.map(({message:d,finish_reason:f,index:h,logprobs:p,...m})=>{if(!f)throw new me(`missing finish_reason for choice ${h}`);const{content:_=null,function_call:g,tool_calls:x,...y}=d,v=d.role;if(!v)throw new me(`missing role for choice ${h}`);if(g){const{arguments:w,name:E}=g;if(w==null)throw new me(`missing function_call.arguments for choice ${h}`);if(!E)throw new me(`missing function_call.name for choice ${h}`);return{...m,message:{content:_,function_call:{arguments:w,name:E},role:v,refusal:d.refusal??null},finish_reason:f,index:h,logprobs:p}}return x?{...m,index:h,finish_reason:f,logprobs:p,message:{...y,role:v,content:_,refusal:d.refusal??null,tool_calls:x.map((w,E)=>{const{function:A,type:P,id:R,...N}=w,{arguments:D,name:F,...q}=A||{};if(R==null)throw new me(`missing choices[${h}].tool_calls[${E}].id
${dl(t)}`);if(P==null)throw new me(`missing choices[${h}].tool_calls[${E}].type
${dl(t)}`);if(F==null)throw new me(`missing choices[${h}].tool_calls[${E}].function.name
${dl(t)}`);if(D==null)throw new me(`missing choices[${h}].tool_calls[${E}].function.arguments
${dl(t)}`);return{...N,id:R,type:P,function:{...q,name:F,arguments:D}}})}}:{...m,message:{...y,content:_,role:v,refusal:d.refusal??null},finish_reason:f,index:h,logprobs:p}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return dB(c,e)}function dl(t){return JSON.stringify(t)}class vs extends ha{static fromReadableStream(e){const n=new vs(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new vs(null),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new vs(n),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let LE=class extends ge{parse(e,n){return mB(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>gm(r,e))}runFunctions(e,n){return e.stream?vs.runFunctions(this._client,e,n):fa.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?vs.runTools(this._client,e,n):fa.runTools(this._client,e,n)}stream(e,n){return ha.createChatCompletion(this._client,e,n)}};class _h extends ge{constructor(){super(...arguments),this.completions=new LE(this._client)}}(function(t){t.Completions=LE})(_h||(_h={}));class VE extends ge{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class UE extends ge{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class _c extends ge{constructor(){super(...arguments),this.sessions=new VE(this._client),this.transcriptionSessions=new UE(this._client)}}_c.Sessions=VE;_c.TranscriptionSessions=UE;class ym extends ge{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,vm,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class vm extends ht{}ym.MessagesPage=vm;class _m extends ge{retrieve(e,n,r,i={},s){return nt(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,n,r={},i){return nt(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,wm,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}}class wm extends ht{}_m.RunStepsPage=wm;let ka=class extends ge{constructor(){super(...arguments),this.steps=new _m(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,xm,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return Mn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await Sa(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return Mn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const s=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,s.id,i)}submitToolOutputsStream(e,n,r,i){return Mn.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class xm extends ht{}ka.RunsPage=xm;ka.Steps=_m;ka.RunStepsPage=wm;class Hs extends ge{constructor(){super(...arguments),this.runs=new ka(this._client),this.messages=new ym(this._client)}create(e={},n){return nt(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return Mn.createThreadAssistantStream(e,this._client.beta.threads,n)}}Hs.Runs=ka;Hs.RunsPage=xm;Hs.Messages=ym;Hs.MessagesPage=vm;class Ws extends ge{constructor(){super(...arguments),this.realtime=new _c(this._client),this.chat=new _h(this._client),this.assistants=new hm(this._client),this.threads=new Hs(this._client)}}Ws.Realtime=_c;Ws.Assistants=hm;Ws.AssistantsPage=pm;Ws.Threads=Hs;class OE extends ge{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class BE extends ge{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}}let wc=class extends ge{constructor(){super(...arguments),this.content=new BE(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,Ei({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,Cm,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};class Cm extends ht{}wc.FileListResponsesPage=Cm;wc.Content=BE;class Ia extends ge{constructor(){super(...arguments),this.files=new wc(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/containers",Tm,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Tm extends ht{}Ia.ContainerListResponsesPage=Tm;Ia.Files=wc;Ia.FileListResponsesPage=Cm;class $E extends ge{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Br("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Br("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const c=a.embedding;a.embedding=uB(c)}),o)))}}class Sm extends ge{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return nt(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,Em,{query:r,...i})}}class Em extends ht{}Sm.OutputItemListResponsesPage=Em;class Pa extends ge{constructor(){super(...arguments),this.outputItems=new Sm(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,Am,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class Am extends ht{}Pa.RunListResponsesPage=Am;Pa.OutputItems=Sm;Pa.OutputItemListResponsesPage=Em;class Ra extends ge{constructor(){super(...arguments),this.runs=new Pa(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/evals",km,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class km extends ht{}Ra.EvalListResponsesPage=km;Ra.Runs=Pa;Ra.RunListResponsesPage=Am;let Im=class extends ge{create(e,n){return this._client.post("/files",Ei({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/files",Pm,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Sa(n),o=await this.retrieve(e),Date.now()-s>r)throw new um({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class Pm extends ht{}Im.FileObjectsPage=Pm;class zE extends ge{}let GE=class extends ge{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Rm extends ge{constructor(){super(...arguments),this.graders=new GE(this._client)}}Rm.Graders=GE;class bm extends ge{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Mm,{body:n,method:"post",...r})}retrieve(e,n={},r){return nt(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class Mm extends mc{}bm.PermissionCreateResponsesPage=Mm;let xc=class extends ge{constructor(){super(...arguments),this.permissions=new bm(this._client)}};xc.Permissions=bm;xc.PermissionCreateResponsesPage=Mm;class Nm extends ge{list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Dm,{query:n,...r})}}class Dm extends ht{}Nm.FineTuningJobCheckpointsPage=Dm;class qs extends ge{constructor(){super(...arguments),this.checkpoints=new Nm(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Fm,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return nt(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Lm,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class Fm extends ht{}class Lm extends ht{}qs.FineTuningJobsPage=Fm;qs.FineTuningJobEventsPage=Lm;qs.Checkpoints=Nm;qs.FineTuningJobCheckpointsPage=Dm;class Yr extends ge{constructor(){super(...arguments),this.methods=new zE(this._client),this.jobs=new qs(this._client),this.checkpoints=new xc(this._client),this.alpha=new Rm(this._client)}}Yr.Methods=zE;Yr.Jobs=qs;Yr.FineTuningJobsPage=Fm;Yr.FineTuningJobEventsPage=Lm;Yr.Checkpoints=xc;Yr.Alpha=Rm;class HE extends ge{}class Vm extends ge{constructor(){super(...arguments),this.graderModels=new HE(this._client)}}Vm.GraderModels=HE;class WE extends ge{createVariation(e,n){return this._client.post("/images/variations",Ei({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Ei({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Um extends ge{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Om,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Om extends mc{}Um.ModelsPage=Om;class qE extends ge{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function CB(t,e){return!e||!SB(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:JE(t,e)}function JE(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:kB(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:TB(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||KE(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function TB(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function SB(t){return!!mm(t.text?.format)}function EB(t){return t?.$brand==="auto-parseable-tool"}function AB(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function kB(t,e){const n=AB(t.tools??[],e.name);return{...e,...e,parsed_arguments:EB(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function KE(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class ZE extends ge{list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,PB,{query:n,...r})}}var Vi=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},vr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ui,fl,_r,hl,D_,F_,L_,V_;class Bm extends fm{constructor(e){super(),Ui.add(this),fl.set(this,void 0),_r.set(this,void 0),hl.set(this,void 0),Vi(this,fl,e,"f")}static createResponse(e,n,r){const i=new Bm(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),vr(this,Ui,"m",D_).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of s)vr(this,Ui,"m",F_).call(this,a,o);if(s.controller.signal?.aborted)throw new gn;return vr(this,Ui,"m",L_).call(this)}[(fl=new WeakMap,_r=new WeakMap,hl=new WeakMap,Ui=new WeakSet,D_=function(){this.ended||Vi(this,_r,void 0,"f")},F_=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=vr(this,Ui,"m",V_).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new me(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new me(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new me(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new me(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},L_=function(){if(this.ended)throw new me("stream has ended, this shouldn't happen");const n=vr(this,_r,"f");if(!n)throw new me("request ended without sending any events");Vi(this,_r,void 0,"f");const r=IB(n,vr(this,fl,"f"));return Vi(this,hl,r,"f"),r},V_=function(n){let r=vr(this,_r,"f");if(!r){if(n.type!=="response.created")throw new me(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Vi(this,_r,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new me(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new me(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new me(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new me(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new me(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{Vi(this,_r,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=vr(this,hl,"f");if(!e)throw new me("stream ended without producing a ChatCompletion");return e}}function IB(t,e){return CB(t,e)}class $m extends ge{constructor(){super(...arguments),this.inputItems=new ZE(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&KE(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>JE(r,e))}stream(e,n){return Bm.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class PB extends ht{}$m.InputItems=ZE;class YE extends ge{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Ei({body:n,...r}))}}class zm extends ge{constructor(){super(...arguments),this.parts=new YE(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}zm.Parts=YE;const RB=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class Cc extends ge{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return nt(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Tc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(e,n,{...r,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await Sa(a);break;case"failed":case"completed":return o}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,Gm,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Tc extends ht{}class Gm extends mc{}Cc.VectorStoreFilesPage=Tc;Cc.FileContentResponsesPage=Gm;class XE extends ge{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return nt(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Tc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await Sa(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=i?.maxConcurrency??5,o=Math.min(s,n.length),a=this._client,c=n.values(),d=[...r];async function f(p){for(let m of p){const _=await a.files.create({file:m,purpose:"assistants"},i);d.push(_.id)}}const h=Array(o).fill(c).map(f);return await RB(h),await this.createAndPoll(e,{file_ids:d})}}class Xr extends ge{constructor(){super(...arguments),this.files=new Cc(this._client),this.fileBatches=new XE(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return nt(e)?this.list({},e):this._client.getAPIList("/vector_stores",Hm,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Wm,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Hm extends ht{}class Wm extends mc{}Xr.VectorStoresPage=Hm;Xr.VectorStoreSearchResponsesPage=Wm;Xr.Files=Cc;Xr.VectorStoreFilesPage=Tc;Xr.FileContentResponsesPage=Gm;Xr.FileBatches=XE;var QE;class we extends XO{constructor({baseURL:e=al("OPENAI_BASE_URL"),apiKey:n=al("OPENAI_API_KEY"),organization:r=al("OPENAI_ORG_ID")??null,project:i=al("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new me("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&aB())throw new me(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new OE(this),this.chat=new vc(this),this.embeddings=new $E(this),this.files=new Im(this),this.images=new WE(this),this.audio=new Ea(this),this.moderations=new qE(this),this.models=new Um(this),this.fineTuning=new Yr(this),this.graders=new Vm(this),this.vectorStores=new Xr(this),this.beta=new Ws(this),this.batches=new cm(this),this.uploads=new zm(this),this.responses=new $m(this),this.evals=new Ra(this),this.containers=new Ia(this),this._options=o,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return NO(e,{arrayFormat:"brackets"})}}QE=we;we.OpenAI=QE;we.DEFAULT_TIMEOUT=6e5;we.OpenAIError=me;we.APIError=St;we.APIConnectionError=dc;we.APIConnectionTimeoutError=um;we.APIUserAbortError=gn;we.NotFoundError=ZS;we.ConflictError=YS;we.RateLimitError=QS;we.BadRequestError=qS;we.AuthenticationError=JS;we.InternalServerError=jS;we.PermissionDeniedError=KS;we.UnprocessableEntityError=XS;we.toFile=sE;we.fileFromPath=GS;we.Completions=OE;we.Chat=vc;we.ChatCompletionsPage=yc;we.Embeddings=$E;we.Files=Im;we.FileObjectsPage=Pm;we.Images=WE;we.Audio=Ea;we.Moderations=qE;we.Models=Um;we.ModelsPage=Om;we.FineTuning=Yr;we.Graders=Vm;we.VectorStores=Xr;we.VectorStoresPage=Hm;we.VectorStoreSearchResponsesPage=Wm;we.Beta=Ws;we.Batches=cm;we.BatchesPage=dm;we.Uploads=zm;we.Responses=$m;we.Evals=Ra;we.EvalListResponsesPage=km;we.Containers=Ia;we.ContainerListResponsesPage=Tm;var bB={};const jE=t=>new Promise(e=>setTimeout(e,t)),e1=async(t,e,n=3,r=500)=>{if(n<0)throw new Error("retries must be non-negative");for(let i=0;i<=n;i++){try{const s=await fetch(t,e);if(!(s.status>=500&&s.status<600))return s;if(i===n){const a=new URL(t.toString()).hostname;throw new Error(`${a} service is temporarily unavailable. Please try again later.`)}}catch(s){if(i===n)throw s}await jE(r*Math.pow(2,i))}throw new Error("fetchWithRetry exhausted all retries without success.")},t1=async(t,e,n=3,r=500)=>{if(n<0)throw new Error("retries must be non-negative");for(let i=0;i<=n;i++){try{return await t()}catch(s){if(s.name==="AbortError")throw s;const o=s,a=o.status??o.response?.status,c=!a||a>=500&&a<600;if(!c||i===n)throw c?new Error(`${e} service is temporarily unavailable. Please try again later.`):s}await jE(r*Math.pow(2,i))}throw new Error("callWithRetry exhausted all retries without success.")};let To,wh;const U_=t=>{t&&t!==wh&&(wh=t,To=void 0)},qm=()=>{if(To)return To;const t=wh||bB.API_KEY;if(!t)throw new Error("Gemini API key is missing. Please add it via the settings menu or ensure the API_KEY environment variable is set.");return To=new TO({apiKey:t}),To};let So,Vu;const O_=t=>{t&&t!==Vu&&(Vu=t,So=void 0)},Jm=()=>{if(So)return So;if(!Vu)throw new Error("OpenAI API key is missing. Please add it via the settings menu to use OpenAI models.");return So=new we({apiKey:Vu,dangerouslyAllowBrowser:!0}),So};let xh;const B_=t=>{t&&t!==xh&&(xh=t)},n1=()=>xh,r1=()=>typeof window<"u"&&window.location?window.location.origin:"http://localhost",Km=t=>{if(!t)return"";const e=Reflect.get(t,"text");return typeof e=="function"?e.call(t)??"":e??""},Zm="Gemini quota exceeded, please try again in a few seconds.",MB=t=>new Promise(e=>setTimeout(e,t)),Ym=t=>{if(typeof t!="object"||t===null)return!1;const e=t,n=e.status??e.response?.status,r=e.message,i=typeof r=="string"?r.toLowerCase():"";return n===429||i.includes("rate limit")||i.includes("quota")},NB=t=>{if(typeof t!="object"||t===null)return!1;const e=t,n=e.status??e.response?.status;return typeof n=="number"&&n>=500},Xm=async(t,{retries:e=3,baseDelayMs:n=1e3,timeoutMs:r=1e4}={})=>{for(let i=0;;i++){const s=new AbortController,o=setTimeout(()=>s.abort(),r);try{return await t(s.signal)}catch(a){const c=Ym(a),d=NB(a);if((c||d)&&i<e){await MB(n*Math.pow(2,i));continue}if(a instanceof Error&&a.name==="AbortError")throw new Error("Gemini request timed out");if(c)throw new Error(Zm);if(d){const f=a;throw(f.status??f.response?.status)===503?new Error("Gemini service responded with 503 Service Unavailable after retries."):new Error("Gemini service is temporarily unavailable. Please try again later.")}throw a}finally{clearTimeout(o)}}},DB=t=>t.charAt(0).toUpperCase()+t.slice(1),i1=(t,e,n)=>{throw console.error(`Error calling the Gemini API for ${e}:`,t),Ym(t)?new Error(Zm):t instanceof Error?new Error(`An error occurred with the Gemini ${DB(e)}: ${t.message}`):new Error(`An unknown error occurred while communicating with the Gemini model for ${n??e}.`)},bn={kTop:5,groupWindow:2048,tailWindow:2048,etaPercent:90,tau:.95,warmupTraces:8,maxBudget:16,minTokensBeforeStop:32},$_='You are a strict verifier. Return ONLY JSON with fields: {"score": number, "reasons": string[]}. Score in [0,1].',z_=(t,e)=>`
Task:
- Question/prompt:
"""${t}"""
- Model answer:
"""${e}"""

Rubric (each ~0.2 points):
1) Directly answers the asked question.
2) Uses only information entailed by the prompt/context.
3) Final answer format matches spec (e.g., number/string/code).
4) No contradictions or hedging.
5) Concise and unambiguous.

Return JSON only.`,Ch=async(t,e,n)=>{if(n.startsWith("gpt-")||n.includes("/"))try{const r=Jm(),i=rm+$_,s=z_(t,e),a=(await r.chat.completions.create({model:XN,messages:[{role:"system",content:i},{role:"user",content:s}],temperature:0})).choices[0].message.content;if(!a)return{score:0,reasons:["Judge model returned an empty response."]};const c=a.trim().match(/\{[\s\S]*\}/)?.[0]??"{}",d=JSON.parse(c);return typeof d.score=="number"&&Array.isArray(d.reasons)?{score:Math.max(0,Math.min(1,d.score)),reasons:d.reasons}:(console.warn("OpenAI Judge model returned invalid JSON shape:",d),{score:0,reasons:["Invalid JSON response from OpenAI judge model."]})}catch(r){console.error("Error during OpenAI answer judging:",r);const i=r instanceof Error?r.message:"An unknown error occurred.";return r instanceof SyntaxError?{score:0,reasons:[`Failed to parse JSON response from OpenAI judge: ${i}`]}:{score:0,reasons:[`An error occurred while judging the answer with OpenAI: ${i}`]}}try{const r=n===rn?rn:vn,i=qm(),s=await Xm(d=>i.models.generateContent({model:r,contents:{parts:[{text:z_(t,e)}]},config:{systemInstruction:$_,responseMimeType:"application/json",responseSchema:{type:mn.OBJECT,properties:{score:{type:mn.NUMBER},reasons:{type:mn.ARRAY,items:{type:mn.STRING}}},propertyOrdering:["score","reasons"]},temperature:0,abortSignal:d}})),o=Km(s).trim();if(!o)return console.warn("Judge model returned empty response"),{score:0,reasons:["Empty response from judge model."]};let a;try{a=JSON.parse(o)}catch(d){return console.error("Failed to parse JSON from Gemini judge:",d),{score:0,reasons:[`Failed to parse JSON response from judge model: ${d instanceof Error?d.message:String(d)}`]}}return(d=>{if(typeof d!="object"||d===null)return!1;const f=d;return typeof f.score=="number"&&Array.isArray(f.reasons)&&f.reasons.every(h=>typeof h=="string")})(a)?{score:Math.max(0,Math.min(1,a.score)),reasons:a.reasons}:(console.warn("Judge model returned invalid JSON shape:",a),{score:0,reasons:["Invalid JSON response from judge model."]})}catch(r){return console.error("Error during answer judging:",r),Ym(r)?{score:0,reasons:[Zm]}:{score:0,reasons:["An error occurred while judging the answer."]}}};function Th(t,e){const n=new Map;t.forEach((o,a)=>n.set(o,(n.get(o)??0)+(e[a]??0)));let r="",i=-1/0,s=0;for(const[o,a]of n)s+=a,a>i&&(i=a,r=o);return{answer:r,weights:n,consensus:i<=0||s<=0?0:i/s}}function Sh(t,e,n){if(t.length===0)return{items:[],keptScores:[]};const r=[...t.keys()];r.sort((o,a)=>e[a]-e[o]);const i=Math.max(1,Math.floor(n/100*t.length)),s=r.slice(0,i);return{items:s.map(o=>t[o]),keptScores:s.map(o=>e[o])}}async function s1(t,e,n,r,i={}){const s={...bn,...i},o=[],a=s.maxBudget??bn.maxBudget;for(let x=0;x<a;x++)o.push(t.generate(e,new AbortController().signal));const c=await Promise.all(o),d=c.map(n),f=c.map(x=>Ch(e,x.text,r)),h=(await Promise.all(f)).map(x=>x.score),{items:p,keptScores:m}=Sh(d,h,s.etaPercent??bn.etaPercent),{answer:_}=Th(p,m),g=c.find(x=>n(x)===_);return{answer:_,content:g?.text??"Could not determine winning trace."}}async function o1(t,e,n,r,i={}){const s={...bn,...i},o=[],a=[],c=s.warmupTraces??bn.warmupTraces,d=[];for(let w=0;w<c;w++)d.push(t.generate(e,new AbortController().signal));const f=await Promise.all(d),h=f.map(w=>Ch(e,w.text,r)),p=(await Promise.all(h)).map(w=>w.score);o.push(...f),a.push(...p);let m=o.map(n);const _=Sh(m,a,s.etaPercent??bn.etaPercent);let{answer:g,consensus:x}=Th(_.items,_.keptScores);const y=s.maxBudget??bn.maxBudget;for(;x<(s.tau??bn.tau)&&o.length<y;){const w=await t.generate(e,new AbortController().signal),{score:E}=await Ch(e,w.text,r);o.push(w),a.push(E);const A=o.map(n),P=Sh(A,a,s.etaPercent??bn.etaPercent),R=Th(P.items,P.keptScores);g=R.answer,x=R.consensus}const v=o.find(w=>n(w)===g);return{answer:g,content:v?.text??"Could not determine winning trace."}}var Qm={};const FB={low:8192,medium:24576,high:32768,dynamic:-1},LB={none:0,low:4096,medium:12288,high:24576,dynamic:-1},jm=(t,e)=>{const n=parseInt(t??"",10);return Number.isNaN(n)?e:n},VB=jm(Qm.GEMINI_RETRY_COUNT,3),UB=jm(Qm.GEMINI_BACKOFF_MS,1e3),OB=jm(Qm.GEMINI_TIMEOUT_MS,1e4),a1=async(t,e,n,r,i)=>{const s=[{text:e}];n.forEach(c=>{s.push({inlineData:{mimeType:c.file.type,data:c.base64}})});const o={model:t.model,contents:{parts:s},config:{systemInstruction:t.persona,temperature:.5+Math.random()*.2}};if(r.model===vn){const c=LB[r.settings.effort];o.config&&(o.config.thinkingConfig={thinkingBudget:c})}else if(r.model===rn){const c=r.settings.effort==="none"?"dynamic":r.settings.effort,d=FB[c];o.config&&(o.config.thinkingConfig={thinkingBudget:d})}const a=qm();try{const c=await Xm(d=>{if(i?.aborted){const m=new Error("Aborted");return m.name="AbortError",Promise.reject(m)}let f=d,h;if(i){const m=new AbortController;h=()=>m.abort(),i.addEventListener("abort",h),d.addEventListener("abort",h),f=m.signal}o.config&&(o.config.abortSignal=f);const p=a.models.generateContent(o);return i&&h?p.finally(()=>{i.removeEventListener("abort",h),d.removeEventListener("abort",h)}):p},{retries:VB,baseDelayMs:UB,timeoutMs:OB});return Km(c)}catch(c){if(c instanceof Error&&c.message==="Gemini request timed out")throw c;return i1(c,"dispatcher","dispatch")}},BB=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:s,deepConfEta:o,tau:a,groupWindow:c}=r.settings,d=()=>({generate:async(p,m)=>{const _=await a1(t,p,n,r,m);return{text:_,steps:_.split("").map(x=>({token:x,topK:[]}))}}}),f=p=>p.text.trim(),h={etaPercent:o,maxBudget:s,warmupTraces:Math.min(s,bn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await o1(d(),e,f,r.model,h);return p}else{const{content:p}=await s1(d(),e,f,r.model,h);return p}},l1=async(t,e,n,r,i)=>{const s=Jm();let o=t.persona;o+=`
Your response verbosity should be ${r.settings.verbosity}.`,r.settings.effort==="high"&&(o=rm+o);const a=[{role:"system",content:o}];if(n.length>0){const d=[{type:"text",text:e}];n.forEach(f=>{d.push({type:"image_url",image_url:{url:`data:${f.file.type};base64,${f.base64}`}})}),a.push({role:"user",content:d})}else a.push({role:"user",content:e});return(await t1(()=>s.chat.completions.create({model:t.model,messages:a},{signal:i}),"OpenAI")).choices[0].message.content||"No content received."},$B=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:s,deepConfEta:o,tau:a,groupWindow:c}=r.settings,d=()=>({generate:async(p,m)=>{const _=await l1(t,p,n,r,m);return{text:_,steps:_.split("").map(x=>({token:x,topK:[]}))}}}),f=p=>p.text.trim(),h={etaPercent:o,maxBudget:s,warmupTraces:Math.min(s,bn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await o1(d(),e,f,r.model,h);return p}else{const{content:p}=await s1(d(),e,f,r.model,h);return p}},zB=async(t,e,n,r)=>{const i=n1();if(!i)throw new Error("OpenRouter API Key not set.");const s={Authorization:`Bearer ${i}`,"Content-Type":"application/json","HTTP-Referer":r1(),"X-Title":"HeavyOrc"},o=[{role:"system",content:t.persona}];if(n.length>0){const f=[{type:"text",text:e}];n.forEach(h=>{f.push({type:"image_url",image_url:{url:`data:${h.file.type};base64,${h.base64}`}})}),o.push({role:"user",content:f})}else o.push({role:"user",content:e});const a={model:t.model,messages:o,...r.settings},c=await e1("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:s,body:JSON.stringify(a)});if(!c.ok){const f=await c.json();throw new Error(`OpenRouter API Error: ${f.error?.message||c.statusText}`)}return(await c.json()).choices[0].message.content||"No content received."},G_=async(t,e,n,r)=>{try{let i="";if(r.provider==="gemini"){const s=r;s.settings.generationStrategy==="single"?i=await a1(t,e,n,s):i=await BB(t,e,n,s)}else if(r.provider==="openai"){const s=r;s.settings.generationStrategy==="single"?i=await l1(t,e,n,s):i=await $B(t,e,n,s)}else i=await zB(t,e,n,r);return{agentId:t.agentId,expert:t,content:i,status:"COMPLETED"}}catch(i){console.error(`Agent ${r.id} (${t.provider} - ${t.name}) failed:`,i);let s="An unknown error occurred";return i instanceof Error?s=i.message:typeof i=="string"&&(s=i),{agentId:t.agentId,expert:t,content:"This agent failed to generate a response.",status:"FAILED",error:s}}},GB=t=>new Promise(e=>setTimeout(e,t)),HB=async(t,e,n,r,i)=>{const o=t.map(m=>({expert:m,config:r.find(_=>_.id===m.agentId)})).filter(m=>m.config!==void 0),a=o.filter(m=>m.config.provider==="gemini"),c=o.filter(m=>m.config.provider==="openai"),d=o.filter(m=>m.config.provider==="openrouter"),f=[];[...a,...d].forEach(({expert:m,config:_})=>{const g=G_(m,e,n,_).then(x=>(i(x),x));f.push(g)});let p=Promise.resolve();return c.forEach(({expert:m,config:_})=>{p=p.then(async()=>{const g=G_(m,e,n,_).then(x=>(i(x),x));f.push(g),_.settings.generationStrategy==="single"&&await GB(250)})}),await p,Promise.all(f)},WB={none:0,low:8192,medium:24576,high:32768,dynamic:-1},qB={none:0,low:4096,medium:12288,high:24576,dynamic:-1};async function*JB(t){const e=t.getReader(),n=new TextDecoder("utf-8");try{for(;;){const{done:r,value:i}=await e.read();if(r)break;const o=n.decode(i,{stream:!0}).split(`

`);for(const a of o)if(a.startsWith("data: ")){const c=a.substring(6);if(c.trim()==="[DONE]")return;try{const f=JSON.parse(c).choices[0]?.delta?.content||"";f&&(yield{text:f})}catch(d){console.error("Error parsing OpenRouter stream chunk:",d,"Chunk:",c)}}}}finally{e.releaseLock()}}const KB=async(t,e,n,r,i,s)=>{const o=n.filter(m=>m.status==="COMPLETED");if(o.length===0)throw new Error("All agents failed to produce a draft. Cannot generate a final answer.");const a=`The original user question is:
"${e}"

Here are ${o.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${o.map((m,_)=>`### Draft from Agent ${_+1} (Provider: ${m.expert.provider}, Persona: ${m.expert.name})
${m.content}`).join(`

---

`)}`;if(t.includes("/")){const m=n1();if(!m)throw new Error("OpenRouter API Key not set.");const _={Authorization:`Bearer ${m}`,"Content-Type":"application/json","HTTP-Referer":r1(),"X-Title":"HeavyOrc"},y=await e1("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:_,body:JSON.stringify({model:t,messages:[{role:"system",content:md},{role:"user",content:a}],stream:!0})});if(!y.ok||!y.body){const v=await y.json().catch(()=>({}));throw new Error(`OpenRouter API Error: ${v.error?.message||y.statusText}`)}return JB(y.body)}if(t.startsWith("gpt-")){const m=Jm();let _=md;i==="high"&&(_=rm+_+jN),_+=`
Your final synthesized response should have a verbosity level of: ${r}.`;const g=[{role:"system",content:_},{role:"user",content:a}],x=t;try{const y={model:x,messages:g,stream:!0,reasoning:{effort:i}},v=await t1(()=>m.chat.completions.create(y),"OpenAI");async function*w(){for await(const E of v){const A=E.choices[0]?.delta?.content;A&&(yield{text:A})}}return w()}catch(y){throw console.error("Error calling the OpenAI API for arbiter:",y),y}}const c=t===vn?vn:rn,h=(c===vn?qB:WB)[c===rn&&s==="none"?"dynamic":s],p=qm();try{const m=await Xm(g=>p.models.generateContentStream({model:c,contents:{parts:[{text:a}]},config:{systemInstruction:md,thinkingConfig:{thinkingBudget:h},abortSignal:g}}));async function*_(){for await(const g of m)yield{text:Km(g)}}return _()}catch(m){return i1(m,"arbiter","arbitration")}},ZB=t=>Math.ceil(t.length/4),YB=28e3,XB=async(t,e)=>{const n=t.agentConfigs.map(f=>({agentId:f.id,id:f.expert.id,name:f.expert.name,persona:f.expert.persona,provider:f.provider,model:f.model}));e.onInitialAgents(n);const r=await HB(n,t.prompt,t.images,t.agentConfigs,e.onDraftComplete);let i=t.arbiterModel,s=!1;const o=r.filter(f=>f.status==="COMPLETED"),a=i.startsWith("gpt-"),c=i.includes("/");if(o.length>0&&(a||c)){const f=`The original user question is:
"${t.prompt}"

Here are ${o.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${o.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;ZB(f)>YB&&(i=rn,s=!0)}const d=await KB(i,t.prompt,r,t.openAIArbiterVerbosity,t.openAIArbiterEffort,t.geminiArbiterEffort);return{drafts:r,stream:d,switchedArbiter:s}},Sc=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M10 2.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75Zm-3.25 3.5a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3Zm7 0a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3ZM10 8a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5A.75.75 0 0 1 10 8Zm-4.12 3.12a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25Zm8.24 0a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25ZM10 13.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75ZM3.75 10a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Zm12.5 0a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Z",clipRule:"evenodd"})}),QB=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M9.661 2.237a.531.531 0 0 1 .678 0 11.947 11.947 0 0 0 7.078 2.749.5.5 0 0 1 .479.425c.069.52.104 1.05.104 1.59 0 5.162-3.26 9.563-7.834 11.256a.48.48 0 0 1-.332 0C5.26 16.564 2 12.163 2 7c0-.538.035-1.069.104-1.589a.5.5 0 0 1 .48-.425 11.947 11.947 0 0 0 7.077-2.75Zm4.196 5.954a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),eg=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",...t,children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tg=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),ba=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"})}),jB=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{d:"M3 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM8.5 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM15.5 10a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),e$=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 5A.75.75 0 0 1 2.75 9h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75Zm0 5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75Z"})}),u1=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[S.jsx("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),S.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),t$=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[S.jsx("path",{fillRule:"evenodd",d:"M9.25 13.25a.75.75 0 0 0 1.5 0V4.636l2.955 3.129a.75.75 0 0 0 1.09-1.03l-4.25-4.5a.75.75 0 0 0-1.09 0l-4.25 4.5a.75.75 0 1 0 1.09 1.03L9.25 4.636V13.25Z",clipRule:"evenodd"}),S.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),c1=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),d1=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),n$=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.127.332-.183.582-.495.645-.87l.213-1.281z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),r$=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"})}),Eh=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),i$=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),s$=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),o$=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),f1=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),ng=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),rg=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),a$=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m12 3.75a6 6 0 0 1-12 0v-1.5a6 6 0 0 1 12 0v1.5Zm-6 4.5v.75m-3-12.75a3 3 0 0 1 3-3h.008a3 3 0 0 1 3 3v1.5a3 3 0 0 1-3 3h-.008a3 3 0 0 1-3-3v-1.5Z"})}),kd=["var(--accent)","var(--accent-2)","var(--success)","var(--warn)","var(--danger)"];function h1(t){return t<=0?kd[0]:kd[(t-1)%kd.length]}const l$=t=>{switch(t){case"RUNNING":return S.jsxs(S.Fragment,{children:[S.jsx(eg,{className:"h-5 w-5 text-[var(--accent-2)] animate-spin"}),S.jsx("span",{className:"sr-only",children:"Running"})]});case"COMPLETED":return S.jsxs(S.Fragment,{children:[S.jsx(tg,{className:"h-5 w-5 text-[var(--success)]"}),S.jsx("span",{className:"sr-only",children:"Completed"})]});case"FAILED":return S.jsxs(S.Fragment,{children:[S.jsx(ba,{className:"h-5 w-5 text-[var(--danger)]"}),S.jsx("span",{className:"sr-only",children:"Failed"})]});case"PENDING":default:return S.jsxs(S.Fragment,{children:[S.jsx(jB,{className:"h-5 w-5 text-[var(--text-muted)]"}),S.jsx("span",{className:"sr-only",children:"Pending"})]})}},u$=t=>{switch(t){case"RUNNING":return"border-[var(--accent-2)] animate-pulse";case"COMPLETED":return"border-[var(--success)]";case"FAILED":return"border-[var(--danger)]";case"PENDING":default:return"border-[var(--line)]"}},c$=t=>{switch(t){case"gemini":return"bg-[var(--accent)] text-[#0D1411]";case"openai":return"bg-[var(--accent-2)] text-[#0D1411]";case"openrouter":return"bg-[var(--success)] text-[#0D1411]";default:return"bg-[var(--surface-1)] text-[var(--text)]"}},d$=({agent:t,displayId:e,isCollapsed:n,onToggleCollapse:r})=>{const{persona:i,status:s,content:o,provider:a}=t,c=z.useId(),d=s==="COMPLETED"||s==="FAILED",f=u$(s),h=h1(e);return S.jsxs("div",{className:`bg-[var(--surface-2)] border ${f} rounded-lg shadow-lg transition-all duration-300 flex flex-col`,children:[S.jsxs("div",{className:"p-4 border-b border-[var(--line)] flex justify-between items-center gap-2",children:[S.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[S.jsx(Sc,{className:"h-5 w-5 flex-shrink-0",style:{color:h},"aria-hidden":"true"}),S.jsxs("h3",{className:"font-bold text-sm text-[var(--text)] truncate",children:["Agent ",e]}),S.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full uppercase ${c$(a)}`,children:a})]}),S.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[l$(s),d&&S.jsxs("button",{onClick:r,className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-expanded":!n,"aria-controls":c,title:n?"Expand":"Collapse",children:[n?S.jsx(d1,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(c1,{className:"h-5 w-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:n?"Expand card":"Collapse card"})]})]})]}),S.jsx("div",{id:c,className:`overflow-y-auto transition-all duration-500 ease-in-out ${n?"max-h-0":"max-h-[500px]"}`,children:S.jsxs("div",{className:"p-4",children:[S.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mb-3",children:["Persona: ",i]}),S.jsx("p",{className:"text-sm text-[var(--text)] whitespace-pre-wrap font-mono",children:o||"Awaiting task..."})]})})]})},pl=[{id:"api-keys",label:"API Keys",icon:s$,description:"Manage your API keys. They're stored in your browser and never sent to our servers."},{id:"session",label:"Session Management",icon:f1,description:"Save your current settings, API key, and query history to a file, or load a previous session."},{id:"history",label:"Query History",icon:o$,description:"Review and reuse your most recent prompts."}],f$=({currentOpenAIApiKey:t,onSaveOpenAIApiKey:e,currentGeminiApiKey:n,onSaveGeminiApiKey:r,currentOpenRouterApiKey:i,onSaveOpenRouterApiKey:s})=>{const[o,a]=z.useState(t),[c,d]=z.useState(n),[f,h]=z.useState(i);z.useEffect(()=>{a(t)},[t]),z.useEffect(()=>{d(n)},[n]),z.useEffect(()=>{h(i)},[i]);const p=()=>e(o),m=()=>r(c),_=()=>s(f);return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"openai-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"OpenAI API Key"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{id:"openai-api-key",type:"password",value:o,onChange:g=>a(g.target.value),placeholder:"sk-...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),S.jsx("button",{onClick:p,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"gemini-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Google Gemini API Key"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{id:"gemini-api-key",type:"password",value:c,onChange:g=>d(g.target.value),placeholder:"AIza...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),S.jsx("button",{onClick:m,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]}),S.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"If left blank, the application will attempt to use the pre-configured environment variable."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"openrouter-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"OpenRouter API Key"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{id:"openrouter-api-key",type:"password",value:f,onChange:g=>h(g.target.value),placeholder:"sk-or-...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),S.jsx("button",{onClick:_,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]})]})]})},h$=({onSaveSession:t,onLoadSession:e})=>{const n=z.useRef(null),r=()=>n.current?.click(),i=s=>{const o=s.target.files?.[0];o&&e(o)};return S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[S.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] transition-colors",children:[S.jsx(u1,{className:"w-5 h-5","aria-hidden":"true"}),"Save Session"]}),S.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] transition-colors",children:[S.jsx(t$,{className:"w-5 h-5","aria-hidden":"true"}),"Load Session"]}),S.jsx("input",{ref:n,type:"file",accept:".json",className:"hidden",onChange:i,"aria-hidden":"true"})]})},p$=({queryHistory:t,onSelectQuery:e,onClose:n})=>{const r=i=>{e(i),n()};return t.length===0?S.jsx("p",{className:"text-[var(--text-muted)] italic",children:"Your query history is empty."}):S.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((i,s)=>S.jsx("li",{children:S.jsx("button",{onClick:()=>r(i),className:"w-full text-left p-2.5 text-sm text-[var(--accent-2)] bg-[var(--surface-2)] rounded-md hover:bg-[var(--surface-active)] transition-colors truncate",title:i,children:i})},s))})},m$=t=>{const{isOpen:e,onClose:n,queryHistory:r}=t,[i,s]=z.useState("api-keys"),[o,a]=z.useState(!1),c=z.useRef(null),d=pl.find(g=>g.id===i)??pl[0];if(z.useEffect(()=>{const g=x=>{x.key==="Escape"&&n()};return e&&(window.addEventListener("keydown",g),s("api-keys"),a(!1)),()=>window.removeEventListener("keydown",g)},[e,n]),z.useEffect(()=>{e&&(c.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')??c.current)?.focus()},[e]),z.useEffect(()=>{if(!e)return;const g=y=>{if(y.key!=="Tab"||!c.current)return;const v=Array.from(c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")&&A.offsetParent!==null);if(v.length===0)return;const w=v[0],E=v[v.length-1];y.shiftKey&&document.activeElement===w?(y.preventDefault(),E.focus()):!y.shiftKey&&document.activeElement===E&&(y.preventDefault(),w.focus())},x=c.current;return x?.addEventListener("keydown",g),()=>x?.removeEventListener("keydown",g)},[e]),!e)return null;const f=g=>{s(g),a(!0)},h=()=>a(!1),p=g=>{switch(g){case"api-keys":return S.jsx(f$,{...t});case"session":return S.jsx(h$,{...t});case"history":return S.jsx(p$,{...t});default:return null}},m=r.length>0?pl:pl.filter(g=>g.id!=="history"),_=S.jsx("nav",{className:"flex flex-col gap-1 p-2","aria-label":"Settings navigation",children:m.map(g=>{const x=g.icon,y=g.id===i;return S.jsxs("button",{onClick:()=>f(g.id),className:`w-full flex items-center gap-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${y?"bg-[var(--accent)] text-[#0D1411]":"text-[var(--text)] hover:bg-[var(--surface-active)]"}`,"aria-current":y?"page":void 0,children:[S.jsx(x,{className:"w-5 h-5 flex-shrink-0","aria-hidden":"true"}),S.jsx("span",{children:g.label})]},g.id)})});return S.jsxs("div",{className:"fixed inset-0 z-50 flex justify-center items-center animate-fade-in-up p-4",style:{animationDuration:"0.3s"},role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:[S.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:n}),S.jsxs("div",{ref:c,tabIndex:-1,className:"relative z-10 bg-[var(--surface-2)] rounded-xl shadow-2xl border border-[var(--line)] w-full max-w-4xl h-full max-h-[700px] flex flex-col",children:[S.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[var(--line)] flex-shrink-0",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:h,className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] md:hidden","aria-label":"Back to settings sections",style:{visibility:o?"visible":"hidden"},children:S.jsx(Eh,{className:"w-6 h-6","aria-hidden":"true"})}),S.jsxs("h2",{id:"settings-title",className:"text-lg font-bold text-[var(--text)]",children:[S.jsx("span",{className:"md:hidden",children:o?d.label:"Settings"}),S.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]}),S.jsx("button",{onClick:n,type:"button",className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)]","aria-label":"Close settings",children:S.jsx(ng,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsxs("div",{className:"flex-grow grid md:grid-cols-[240px_1fr] grid-cols-1 min-h-0",children:[S.jsx("aside",{className:"hidden md:block border-r border-[var(--line)]/50 overflow-y-auto",children:_}),S.jsxs("main",{className:"overflow-y-auto",children:[S.jsx("div",{className:"md:hidden",children:o?S.jsxs("div",{className:"p-6 space-y-4",children:[S.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:d.description}),S.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:p(i)})]}):_}),S.jsxs("div",{className:"hidden md:block p-6 space-y-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-[var(--text)]",children:d.label}),S.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:d.description}),S.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:p(i)})]})]})]})]})]})},H_=({title:t,children:e,isDisabled:n=!1,defaultOpen:r=!1})=>{const[i,s]=z.useState(r),o=z.useId(),a=()=>{n||s(!i)};return S.jsxs("div",{className:`border border-[var(--line)] rounded-lg transition-opacity ${n?"opacity-50":""}`,children:[S.jsxs("button",{type:"button",onClick:a,disabled:n,className:"w-full flex justify-between items-center p-4 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-1)] rounded-t-lg","aria-expanded":i,"aria-controls":o,children:[S.jsx("h4",{className:"text-base font-medium text-[var(--text)]",children:t}),i?S.jsx(c1,{className:"w-5 h-5 text-[var(--text-muted)]","aria-hidden":"true"}):S.jsx(d1,{className:"w-5 h-5 text-[var(--text-muted)]","aria-hidden":"true"})]}),S.jsx("div",{id:o,className:`transition-all duration-300 ease-in-out ${i?"max-h-[80vh] overflow-y-auto":"max-h-0 overflow-hidden"}`,children:S.jsx("div",{className:"p-4 border-t border-[var(--line)]",children:e})})]})},ni=({value:t,onCommit:e,parser:n=parseFloat,onCancel:r,...i})=>{const[s,o]=Id.useState(String(t));Id.useEffect(()=>{o(String(t))},[t]);const a=()=>{let c=n(s);if(Number.isNaN(c))o(String(t)),r?.();else{const d=i.min!==void 0?Number(i.min):void 0,f=i.max!==void 0?Number(i.max):void 0;d!==void 0&&(c=Math.max(c,d)),f!==void 0&&(c=Math.min(c,f)),e(c)}};return S.jsx("input",{...i,value:s,onChange:c=>o(c.target.value),onBlur:a,onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),a(),c.target.blur())}})},g$=t=>{switch(t){case"RUNNING":return S.jsx(eg,{className:"h-5 w-5 text-[var(--accent-2)] animate-spin","aria-hidden":"true"});case"COMPLETED":return S.jsx(tg,{className:"h-5 w-5 text-[var(--success)]","aria-hidden":"true"});case"FAILED":return S.jsx(ba,{className:"h-5 w-5 text-[var(--danger)]","aria-hidden":"true"});case"PENDING":case"QUEUED":default:return null}},y$=t=>{switch(t){case"RUNNING":return"border-[var(--accent-2)] ring-2 ring-[var(--accent-2)] ring-opacity-50";case"COMPLETED":return"border-[var(--success)]";case"FAILED":return"border-[var(--danger)]";case"PENDING":case"QUEUED":default:return"border-[var(--line)]"}},v$=({config:t,onUpdate:e,onRemove:n,onDuplicate:r,disabled:i,displayId:s})=>{const o=f=>{const h=f.target.value,p=h.startsWith("gemini"),m=h.includes("/");if(p){const _=h,g={id:t.id,expert:t.expert,status:t.status,provider:"gemini",model:_,settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,g)}else if(m){const _=h,g={id:t.id,expert:t.expert,status:t.status,provider:"openrouter",model:_,settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}};e(t.id,g)}else{const _=h,g={id:t.id,expert:t.expert,status:t.status,provider:"openai",model:_,settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,g)}},a=f=>{const h={...t,settings:{...t.settings,...f}};e(t.id,h)},c=y$(t.status),d=h1(s);return S.jsxs("div",{className:`relative group bg-[var(--surface-2)] p-4 rounded-lg border transition-all duration-300 ${c}`,children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold",style:{color:d},children:t.expert.name}),S.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-1 pr-8",children:["Persona: ",t.expert.persona]})]}),S.jsx("div",{className:"flex-shrink-0",children:g$(t.status)})]}),S.jsxs("div",{className:`absolute top-3 right-3 flex items-center gap-1.5 transition-opacity ${i?"opacity-0":"opacity-0 group-hover:opacity-100"}`,children:[S.jsxs("button",{onClick:()=>r(t.id),disabled:i,className:"p-1 text-[var(--text-muted)] hover:text-[var(--text)] disabled:opacity-50 disabled:cursor-not-allowed",title:"Duplicate Agent",children:[S.jsx(f1,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Duplicate Agent"})]}),S.jsxs("button",{onClick:()=>n(t.id),disabled:i,className:"p-1 text-[var(--text-muted)] hover:text-[var(--danger)] disabled:opacity-50 disabled:cursor-not-allowed",title:"Remove Agent",children:[S.jsx(ba,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Remove Agent"})]})]}),S.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`model-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Model"}),S.jsxs("select",{id:`model-${t.id}`,value:t.model,onChange:o,disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",children:[S.jsxs("optgroup",{label:"Google",children:[S.jsx("option",{value:rn,children:"Gemini 2.5 Pro"}),S.jsx("option",{value:vn,children:"Gemini 2.5 Flash"})]}),S.jsxs("optgroup",{label:"OpenAI",children:[S.jsx("option",{value:oc,children:"OpenAI GPT-5"}),S.jsx("option",{value:ac,children:"OpenAI GPT-5 Mini"})]}),S.jsxs("optgroup",{label:"OpenRouter",children:[S.jsx("option",{value:nm,children:"OpenAI GPT-4o"}),S.jsx("option",{value:QN,children:"Gemini Flash 1.5"}),S.jsx("option",{value:rS,children:"Claude 3 Haiku"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`strategy-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Generation Strategy"}),S.jsxs("select",{id:`strategy-${t.id}`,value:t.provider==="openrouter"?"single":t.settings.generationStrategy,onChange:f=>a({generationStrategy:f.target.value}),disabled:i||t.provider==="openrouter",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)] disabled:opacity-70",title:t.provider==="openrouter"?"DeepConf is not currently supported for OpenRouter agents.":"Select the generation strategy.",children:[S.jsx("option",{value:"single",children:"Single Draft"}),S.jsx("option",{value:"deepconf-offline",children:"DeepConf Offline"}),S.jsx("option",{value:"deepconf-online",children:"DeepConf Online"})]})]}),t.provider!=="openrouter"&&t.settings.generationStrategy!=="single"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`traces-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Trace Count"}),S.jsx(ni,{type:"number",id:`traces-${t.id}`,value:t.settings.traceCount,onCommit:f=>a({traceCount:f}),parser:f=>parseInt(f,10),disabled:i,min:"2",max:"32",step:"1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Number of parallel responses to generate for DeepConf."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`eta-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Confidence (Eta)"}),S.jsxs("select",{id:`eta-${t.id}`,value:t.settings.deepConfEta,onChange:f=>a({deepConfEta:parseInt(f.target.value,10)}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Confidence threshold. 90% is conservative (keeps more), 10% is aggressive (keeps few high-confidence traces).",children:[S.jsx("option",{value:"90",children:"90% (Conservative)"}),S.jsx("option",{value:"10",children:"10% (Aggressive)"})]})]}),S.jsxs("div",{className:"col-span-2",children:[S.jsx("label",{htmlFor:`confidence-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Confidence Source"}),S.jsx("select",{id:`confidence-${t.id}`,value:t.settings.confidenceSource,disabled:!0,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)] disabled:opacity-70 disabled:cursor-not-allowed",title:"Only 'Judge' is available. The underlying models (Gemini and GPT-5) do not support streaming logprobs required for token-based confidence.",children:S.jsx("option",{value:"judge",children:"Judge Verifier"})})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`tau-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Consensus (Tau)"}),S.jsx(ni,{type:"number",id:`tau-${t.id}`,value:t.settings.tau,onCommit:f=>a({tau:f}),parser:f=>parseFloat(f),disabled:i,min:"0.5",max:"1.0",step:"0.01",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Consensus threshold for online mode. Stops when the top answer's vote share exceeds this value (e.g., 0.95)."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`groupWindow-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Group Window"}),S.jsx(ni,{type:"number",id:`groupWindow-${t.id}`,value:t.settings.groupWindow,onCommit:f=>a({groupWindow:f}),parser:f=>parseInt(f,10),disabled:i,min:"8",max:"4096",step:"8",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Sliding window size (in tokens) for calculating group confidence."})]})]}),t.provider==="gemini"?S.jsxs("div",{className:"col-span-2",children:[S.jsx("label",{htmlFor:`gemini-effort-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Thinking Effort"}),S.jsxs("select",{id:`gemini-effort-${t.id}`,value:t.settings.effort,onChange:f=>a({effort:f.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Controls how much 'thinking' the Gemini model performs before answering. 'Dynamic' is recommended. 'High' can improve quality for complex tasks but increases latency. 'None' is fastest but least thorough.",children:[S.jsx("option",{value:"dynamic",children:"Dynamic"}),S.jsx("option",{value:"high",children:"High"}),S.jsx("option",{value:"medium",children:"Medium"}),S.jsx("option",{value:"low",children:"Low"}),S.jsx("option",{value:"none",disabled:t.model===rn,children:"None (No Thinking)"})]})]}):t.provider==="openai"?S.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`openai-effort-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Reasoning"}),S.jsxs("select",{id:`openai-effort-${t.id}`,value:t.settings.effort,onChange:f=>a({effort:f.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Controls the model's reasoning process. 'High' enables more complex, step-by-step thinking, which can improve accuracy for difficult prompts. 'Medium' is faster and suitable for general tasks.",children:[S.jsx("option",{value:"high",children:"High"}),S.jsx("option",{value:"medium",children:"Medium"})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`openai-verbosity-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Verbosity"}),S.jsxs("select",{id:`openai-verbosity-${t.id}`,value:t.settings.verbosity,onChange:f=>a({verbosity:f.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Adjusts the length and detail of the agent's response. 'High' provides more comprehensive answers, while 'Low' is more concise.",children:[S.jsx("option",{value:"high",children:"High"}),S.jsx("option",{value:"medium",children:"Medium"}),S.jsx("option",{value:"low",children:"Low"})]})]})]}):S.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-temp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Temperature"}),S.jsx(ni,{type:"number",id:`or-temp-${t.id}`,value:t.settings.temperature,onCommit:f=>a({temperature:f}),parser:f=>parseFloat(f),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-topk-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Top K"}),S.jsx(ni,{type:"number",id:`or-topk-${t.id}`,value:t.settings.topK,onCommit:f=>a({topK:f}),parser:f=>parseInt(f,10),disabled:i,min:"1",step:"1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-topp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Top P"}),S.jsx(ni,{type:"number",id:`or-topp-${t.id}`,value:t.settings.topP,onCommit:f=>a({topP:f}),parser:f=>parseFloat(f),disabled:i,min:"0",max:"1",step:"0.05",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-repp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Repetition Penalty"}),S.jsx(ni,{type:"number",id:`or-repp-${t.id}`,value:t.settings.repetitionPenalty,onCommit:f=>a({repetitionPenalty:f}),parser:f=>parseFloat(f),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]})]})]})]})},_$=({isOpen:t,onClose:e,onAddExpert:n,availableExperts:r})=>{if(z.useEffect(()=>{const s=o=>{o.key==="Escape"&&e()};return t&&window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t,e]),!t)return null;const i=s=>{n(s),e()};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"add-expert-title",children:S.jsxs("div",{className:"bg-[var(--surface-2)] rounded-xl shadow-2xl border border-[var(--line)] w-full max-w-2xl h-full max-h-[80vh] flex flex-col",onClick:s=>s.stopPropagation(),children:[S.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[var(--line)] flex-shrink-0",children:[S.jsx("h2",{id:"add-expert-title",className:"text-lg font-bold text-[var(--text)]",children:"Add an Expert to the Ensemble"}),S.jsx("button",{onClick:e,type:"button",className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)]","aria-label":"Close modal",children:S.jsx(ng,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsx("main",{className:"flex-grow p-4 sm:p-6 overflow-y-auto",children:S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>S.jsxs("button",{onClick:()=>i(s),className:"w-full h-full text-left p-4 bg-[var(--surface-2)] rounded-lg border border-[var(--line)] hover:bg-[var(--surface-active)] hover:border-[var(--accent)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--accent)] flex flex-col",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx(Sc,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0","aria-hidden":"true"}),S.jsx("h3",{className:"font-bold text-[var(--text)]",children:s.name})]}),S.jsx("p",{className:"text-sm text-[var(--text-muted)] flex-grow",children:s.persona})]},s.id))})})]})})},p1=z.forwardRef(({agentConfigs:t,setAgentConfigs:e,onDuplicateAgent:n,disabled:r},i)=>{const[s,o]=z.useState(!1);z.useImperativeHandle(i,()=>({openModal:()=>o(!0)}));const a=h=>{const p={id:crypto.randomUUID(),expert:h,model:"gemini-2.5-flash",provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(m=>[...m,p])},c=(h,p)=>{e(m=>m.map(_=>_.id===h?p:_))},d=h=>{e(p=>p.filter(m=>m.id!==h))},f=im.filter(h=>!t.some(p=>p.expert.id===h.id));return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h3",{className:"text-base font-medium text-[var(--text)]",children:"Agent Ensemble"}),f.length>0&&S.jsxs("button",{onClick:()=>o(!0),disabled:r,className:"flex items-center justify-center gap-2 px-3 py-1 bg-[var(--accent)] text-[#0D1411] text-sm font-semibold rounded-lg shadow-md hover:brightness-110 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx(rg,{className:"w-4 h-4","aria-hidden":"true"}),"Add Expert"]})]}),S.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:t.length>0?t.map((h,p)=>S.jsx(v$,{config:h,onUpdate:c,onRemove:d,onDuplicate:n,disabled:r,displayId:p+1},h.id)):S.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-[var(--text-muted)]",children:'No experts configured. Click "Add Expert" to get started.'})}),S.jsx(_$,{isOpen:s,onClose:()=>o(!1),onAddExpert:a,availableExperts:f})]})});p1.displayName="AgentEnsemble";const Oi=5,W_=200,w$=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result?.split(",")[1];i?e(i):n(new Error("Failed to read file as base64."))},r.onerror=i=>n(i),r.readAsDataURL(t)}),x$=({prompt:t,onPromptChange:e,images:n,onImagesChange:r,onSubmit:i,isLoading:s=!1,disabled:o=!1,inputRef:a})=>{const c=z.useRef(null),d=a||z.useRef(null),f=z.useCallback(async y=>{const v=y.target.files;if(!v)return;let w=[...n];for(const E of Array.from(v)){if(w.length>=Oi){alert(`You can only upload a maximum of ${Oi} images.`);break}if(E.type.startsWith("image/"))try{const A=await w$(E),P={id:`${E.name}-${Date.now()}`,file:E,base64:A};w.push(P)}catch(A){console.error("Error reading file:",A),alert("There was an error processing one of the images.")}}r(w),c.current&&(c.current.value="")},[n,r]),h=z.useCallback(y=>{r(n.filter(v=>v.id!==y))},[n,r]),p=()=>{c.current?.click()},m=z.useRef({}),_=z.useMemo(()=>{const y=m.current,v=n.map(E=>{let A=y[E.id];return A||(A=URL.createObjectURL(E.file),y[E.id]=A),{...E,url:A}}),w=new Set(n.map(E=>E.id));return Object.keys(y).forEach(E=>{w.has(E)||(URL.revokeObjectURL(y[E]),delete y[E])}),v},[n]);z.useEffect(()=>()=>{Object.values(m.current).forEach(y=>URL.revokeObjectURL(y)),m.current={}},[]);const g=y=>{y.key==="Enter"&&!y.shiftKey&&!y.nativeEvent.isComposing&&(y.preventDefault(),!o&&!s&&(t.trim()||n.length>0)&&i())};z.useEffect(()=>{if(d.current){d.current.style.height="auto";const y=d.current.scrollHeight;y>W_?(d.current.style.height=`${W_}px`,d.current.style.overflowY="auto"):(d.current.style.height=`${y}px`,d.current.style.overflowY="hidden")}},[t]);const x=!o&&(!!t.trim()||n.length>0);return S.jsxs("div",{className:"w-full bg-[var(--surface-2)] p-2 rounded-2xl shadow-2xl border border-[var(--line)] flex flex-col gap-2",children:[_.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 px-2 pt-1",children:_.map(y=>S.jsxs("div",{className:"relative group flex-shrink-0",children:[S.jsx("img",{src:y.url,alt:"Image preview",className:"w-20 h-20 rounded-lg object-cover border border-[var(--line)]"}),S.jsx("button",{onClick:()=>h(y.id),disabled:o||s,className:"absolute top-1 right-1 p-0.5 bg-black/60 text-[var(--text)] rounded-full hover:bg-[var(--danger)] focus:outline-none focus:ring-2 focus:ring-[var(--danger)] disabled:opacity-50","aria-label":"Remove image",children:S.jsx(ba,{className:"w-5 h-5","aria-hidden":"true"})})]},y.id))}),S.jsxs("div",{className:"flex items-end gap-2 w-full",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsxs("button",{type:"button",onClick:p,disabled:o||s||n.length>=Oi,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:n.length>=Oi?`Maximum ${Oi} images reached`:`Add image (${n.length}/${Oi})`,children:[S.jsx(rg,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Add Image"})]}),S.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:f,className:"hidden","aria-hidden":"true"}),S.jsxs("button",{type:"button",disabled:!0,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-full transition-colors disabled:opacity-50",title:"Use microphone (coming soon)",children:[S.jsx(a$,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Use microphone"})]})]}),S.jsx("textarea",{ref:d,value:t,onChange:y=>e(y.target.value),onKeyDown:g,placeholder:"Ask me anything, or add up to 5 images...",className:"flex-1 min-w-0 bg-transparent text-[var(--text)] placeholder-[var(--text-muted)] text-base resize-none focus:outline-none p-2 min-h-[44px]",rows:1,disabled:o||s}),S.jsx("button",{type:"button",onClick:i,disabled:!x||s,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold rounded-lg shadow-md transition-all duration-300 bg-[var(--accent)] text-[#0D1411] hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] disabled:cursor-not-allowed",title:"Run Orchestration",children:s?S.jsxs(S.Fragment,{children:[S.jsx(eg,{className:"w-5 h-5 animate-spin","aria-hidden":"true"}),"Processing..."]}):S.jsxs(S.Fragment,{children:[S.jsx(Sc,{className:"w-5 h-5","aria-hidden":"true"}),"Run"]})})]})]})},C$=({answer:t,title:e="Arbiter's Final Answer",isStreaming:n=!1,className:r,...i})=>{const[s,o]=z.useState(""),a=z.useRef(null);z.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),z.useEffect(()=>{if(!n){a.current&&clearInterval(a.current),a.current=null,o(t);return}if(t===""&&s!==""){a.current&&clearInterval(a.current),a.current=null,o("");return}a.current||(a.current=window.setInterval(()=>{o(f=>{if(f.length<t.length){const h=t.substring(f.length,f.length+1);return f+h}else return a.current&&clearInterval(a.current),a.current=null,f})},15))},[t,n]);const c=s||n,d=n&&(!a.current||s.length===t.length);return S.jsx("div",{className:`final-answer-glow rounded-xl shadow-2xl ${r}`,...i,children:S.jsxs("div",{className:"bg-[var(--surface-2)] p-0 rounded-xl flex flex-col w-full min-h-[200px]",children:[S.jsx("div",{className:"p-4 border-b border-[var(--line)] flex items-center justify-between gap-3 flex-shrink-0",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(Sc,{className:"w-6 h-6 text-[var(--accent)]","aria-hidden":"true"}),S.jsx("h2",{className:"text-xl font-bold text-[var(--text)]",children:e})]})}),S.jsx("div",{className:"p-4 flex-grow min-h-0 overflow-y-auto max-h-[70vh]",children:c?S.jsxs("p",{className:"text-[var(--text)] whitespace-pre-wrap font-serif leading-relaxed",children:[s,d&&S.jsx("span",{className:"inline-block w-2 h-5 bg-[var(--accent)] animate-pulse ml-1"})]}):S.jsx("div",{className:"flex items-center justify-center h-full",children:S.jsx("p",{className:"text-[var(--text-muted)] italic",children:"Waiting for arbiter's response..."})})})]})})},T$=t=>{const e=new Date,n=new Date(t),r=Math.floor((e.getTime()-n.getTime())/1e3);if(r<60)return"Just now";const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const s=Math.floor(i/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},q_=({status:t})=>{switch(t){case"IN_PROGRESS":return S.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[var(--accent-2)] animate-pulse",title:"In Progress",children:S.jsx("span",{className:"sr-only",children:"In Progress"})});case"COMPLETED":return S.jsx("div",{title:"Completed",children:S.jsx(tg,{className:"w-4 h-4 text-[var(--success)]","aria-hidden":"true"})});case"FAILED":return S.jsx("div",{title:"Failed",children:S.jsx(ba,{className:"w-4 h-4 text-[var(--danger)]","aria-hidden":"true"})});default:return null}},J_=z.forwardRef((t,e)=>{const{history:n,selectedRunId:r,onSelectRun:i,onNewRun:s,onViewCurrentRun:o,currentRunStatus:a,className:c,isMobile:d}=t,[f,h]=z.useState(!0);return S.jsxs("aside",{className:`bg-[var(--surface-2)] border-r border-[var(--line)] flex flex-col transition-all duration-300 ease-in-out ${f?"w-64":"w-16"}${c?` ${c}`:""}${d?" z-10":""}`,children:[S.jsxs("div",{className:"flex-shrink-0 p-2 flex items-center justify-between border-b border-[var(--line)]",children:[f&&S.jsx("h2",{className:"text-lg font-semibold ml-2",children:"History"}),d?S.jsx("button",{onClick:t.onClose,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-lg transition-colors",title:"Close History","aria-label":"Close History",children:S.jsx(Eh,{className:"w-6 h-6","aria-hidden":"true"})}):S.jsx("button",{onClick:()=>h(!f),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-lg transition-colors",title:f?"Collapse Sidebar":"Expand Sidebar","aria-label":f?"Collapse Sidebar":"Expand Sidebar",children:f?S.jsx(Eh,{className:"w-6 h-6","aria-hidden":"true"}):S.jsx(i$,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsx("div",{className:"flex-shrink-0 p-2",children:S.jsxs("button",{ref:e,id:d?"mobile-history-new-run":void 0,onClick:s,className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-semibold rounded-lg transition-colors ${r?"bg-[var(--surface-1)] hover:bg-[var(--surface-active)] text-[var(--text)]":"bg-[var(--accent)] text-[#0D1411] hover:brightness-110"}`,children:[S.jsx(rg,{className:"w-5 h-5","aria-hidden":"true"}),f&&S.jsx("span",{children:"New Run"})]})}),S.jsx("nav",{className:"flex-grow p-2 overflow-y-auto",children:S.jsxs("ul",{className:"space-y-1",children:[a!=="IDLE"&&S.jsx("li",{children:S.jsxs("button",{onClick:o,className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${r?"hover:bg-[var(--surface-active)]":"bg-[var(--surface-1)]"}`,title:"View current run","aria-current":r?void 0:"page",children:[S.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center",children:S.jsx(q_,{status:a})}),f&&S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"text-sm font-medium text-[var(--text)] truncate",children:"Current Run"}),S.jsx("p",{className:"text-xs text-[var(--text-muted)] capitalize",children:a.replace("_"," ").toLowerCase()})]})]})}),n.length===0&&a==="IDLE"?S.jsx("li",{className:"text-center py-4 text-sm text-[var(--text-muted)]",children:"No past runs yet. Submit a prompt to create one."}):n.map(p=>S.jsx("li",{children:S.jsxs("button",{onClick:()=>i(p.id),className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${r===p.id?"bg-[var(--surface-1)]":"hover:bg-[var(--surface-active)]"}`,children:[S.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center mt-0.5",children:S.jsx(q_,{status:p.status})}),f&&S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"text-sm font-medium text-[var(--text)] truncate",children:p.prompt||"Image-based prompt"}),S.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:T$(p.timestamp)})]})]})},p.id))]})})]})}),ml=({options:t,value:e,onChange:n,disabled:r=!1,"aria-label":i})=>{const s=["flex w-full p-1 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg","overflow-x-auto sm:overflow-x-visible","[scrollbar-width:thin] [scrollbar-color:var(--line)_transparent]","[&::-webkit-scrollbar]:h-1.5 [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar-thumb]:bg-[var(--line)]",r?"opacity-70 cursor-not-allowed":""].join(" "),o=["relative px-3 py-1.5 text-sm font-medium transition-colors focus:outline-none","focus-visible:ring-2 focus-visible:ring-[var(--accent)] focus-visible:ring-offset-2","focus-visible:ring-offset-[var(--surface-1)] z-10 whitespace-nowrap flex-none sm:flex-1 max-w-[8rem] sm:max-w-none truncate"].join(" ");return S.jsx("div",{role:"tablist","aria-label":i,"aria-orientation":"horizontal",className:s,children:t.map((a,c)=>{const d=e===a.value,f=[o,c===0?"rounded-l-md":"",c===t.length-1?"rounded-r-md":"",d?"text-[#0D1411]":"text-[var(--text)] hover:bg-[var(--surface-active)]",r?"cursor-not-allowed":""].join(" ");return S.jsxs("button",{onClick:()=>!r&&n(a.value),type:"button",role:"tab","aria-selected":d,disabled:r,"aria-disabled":r,title:a.tooltip??a.label,className:f,children:[d&&S.jsx("span",{className:"absolute inset-0 bg-[var(--accent)] rounded-md -z-10 motion-safe:transition-transform"}),S.jsx("span",{className:"relative",children:a.label})]},a.value)})})},S$=()=>{z.useEffect(()=>{const t=()=>{const r=window.visualViewport,s=(r?r.height:window.innerHeight)*.01;if(document.documentElement.style.setProperty("--vh",`${s}px`),r){const o=window.innerHeight-r.height-r.offsetTop;document.documentElement.style.setProperty("--keyboard-height",`${o}px`)}};let e;const n=()=>{clearTimeout(e),e=setTimeout(t,100)};return t(),window.addEventListener("resize",n),window.visualViewport?.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),window.visualViewport?.removeEventListener("resize",n),clearTimeout(e)}},[])},E$=(t,e,n=!0)=>{const r=z.useRef(e);z.useEffect(()=>{r.current=e},[e]),z.useEffect(()=>{if(!n)return;const i=s=>{s.key===t&&r.current(s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[t,n])},A$=[vn,rn],k$=[oc,ac],I$=["single","deepconf-offline","deepconf-online"],P$=["dynamic","high","medium","low","none"],R$=t=>typeof t=="string"&&P$.includes(t),b$=["medium","high"],M$=t=>typeof t=="string"&&b$.includes(t),N$=["low","medium","high"],D$=t=>typeof t=="string"&&N$.includes(t),F$=t=>({temperature:typeof t.temperature=="number"?t.temperature:.7,topP:typeof t.topP=="number"?t.topP:1,topK:typeof t.topK=="number"?t.topK:50,frequencyPenalty:typeof t.frequencyPenalty=="number"?t.frequencyPenalty:0,presencePenalty:typeof t.presencePenalty=="number"?t.presencePenalty:0,repetitionPenalty:typeof t.repetitionPenalty=="number"?t.repetitionPenalty:1,maxTokens:typeof t.maxTokens=="number"?t.maxTokens:void 0}),K_=t=>({generationStrategy:I$.includes(t.generationStrategy)?t.generationStrategy:"single",confidenceSource:"judge",traceCount:typeof t.traceCount=="number"?t.traceCount:8,deepConfEta:t.deepConfEta===10||t.deepConfEta===90?t.deepConfEta:90,tau:typeof t.tau=="number"?t.tau:.95,groupWindow:typeof t.groupWindow=="number"?t.groupWindow:2048}),L$=(t,e)=>{const n=e.find(o=>o.id===t.expertId);if(!n)return console.warn(`Expert with ID "${t.expertId}" not found. Skipping.`),null;const r={id:crypto.randomUUID(),expert:n,status:"PENDING"},i=t.provider,s=t.settings&&typeof t.settings=="object"?t.settings:{};switch(i){case"gemini":{const o=typeof t.model=="string"&&A$.includes(t.model)?t.model:vn,a=s,c=R$(a.effort)?a.effort:"dynamic",d={...K_(a),effort:c};return{...r,model:o,provider:"gemini",settings:d}}case"openai":{const o=typeof t.model=="string"&&k$.includes(t.model)?t.model:oc,a=s,c=M$(a.effort)?a.effort:"medium",d=D$(a.verbosity)?a.verbosity:"medium",f={...K_(a),effort:c,verbosity:d};return{...r,model:o,provider:"openai",settings:f}}case"openrouter":{const o=typeof t.model=="string"&&t.model.trim()!==""?t.model:nm,c=F$(s);return{...r,model:o,provider:"openrouter",settings:c}}default:return console.warn(`Unknown provider "${i}" for expert "${t.expertId}". Skipping.`),null}},V$="/HeavyOrc/assets/banner-C_3GBH8R.png",Z_="openai_api_key",Y_="gemini_api_key",X_="openrouter_api_key",U$=20,O$=sc({version:Pn().default(0),prompt:Sr().default(""),agentConfigs:Jv(ZN).optional().default([]),arbiterModel:Sr().optional(),openAIArbiterVerbosity:Or(["low","medium","high"]).optional(),openAIArbiterEffort:Or(["medium","high"]).optional(),geminiArbiterEffort:Or(["dynamic","high","medium","low","none"]).optional(),openAIApiKey:Sr().optional(),geminiApiKey:Sr().optional(),openRouterApiKey:Sr().optional(),queryHistory:Jv(Sr()).optional().default([])}),Q_={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},gl={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:12}}},B$=({message:t,type:e,onClose:n})=>{z.useEffect(()=>{const i=setTimeout(n,5e3);return()=>clearTimeout(i)},[n]);const r=e==="success"?"bg-[var(--success)] border-[var(--success)] text-[var(--text)]":"bg-[var(--danger)] border-[var(--danger)] text-[var(--text)]";return S.jsxs("div",{className:`fixed bottom-5 right-5 p-4 rounded-lg shadow-2xl border z-50 animate-fade-in-up flex items-center gap-4 ${r}`,style:{animationDuration:"0.3s"},children:[S.jsx("span",{children:t}),S.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-[var(--surface-active)]","aria-label":"Close notification",children:S.jsx(ng,{className:"w-5 h-5","aria-hidden":"true"})})]})},j_=()=>{const t=im.slice(0,4);if(t.length<4)return[];const e=[];return e.push({id:crypto.randomUUID(),expert:t[0],model:vn,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[1],model:vn,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[2],model:nm,provider:"openrouter",status:"PENDING",settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}}),e.push({id:crypto.randomUUID(),expert:t[3],model:oc,provider:"openai",status:"PENDING",settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e},$$=t=>({id:t.agentId,name:t.expert.name,persona:t.expert.persona,status:t.status,content:t.content,error:t.error||null,model:t.expert.model,provider:t.expert.provider}),z$=()=>{S$();const[t,e]=z.useState(""),[n,r]=z.useState([]),[i,s]=z.useState(j_()),[o,a]=z.useState(rn),[c,d]=z.useState("medium"),[f,h]=z.useState("medium"),[p,m]=z.useState("dynamic"),[_,g]=z.useState([]),[x,y]=z.useState(""),[v,w]=z.useState(null),[E,A]=z.useState(!1),[P,R]=z.useState(null),[N,D]=z.useState(!1),[F,q]=z.useState([]),[I,M]=z.useState(null),[C,O]=z.useState(""),[te,G]=z.useState(""),[H,B]=z.useState(""),[K,L]=z.useState(!1),[U,le]=z.useState([]),[ne,X]=z.useState(null),[Ae,Le]=z.useState(!1),xe=z.useRef(null),Ie=z.useRef(null),Ve=z.useCallback(()=>{Le(!1),xe.current?.focus()},[]);E$("Escape",Ve,Ae);const qe=z.useRef(null),Kt=z.useRef(null),[Zt,T]=z.useState({}),J=z.useRef(x),W=z.useRef(_),b=z.useRef(v),k=z.useRef(P),V=z.useRef(null),Z=z.useRef(!1),Y=z.useRef(void 0);z.useEffect(()=>{J.current=x},[x]),z.useEffect(()=>{W.current=_},[_]),z.useEffect(()=>{b.current=v},[v]),z.useEffect(()=>{k.current=P},[P]),z.useEffect(()=>{if(!E&&Z.current){Z.current=!1;const oe=k.current?"FAILED":"COMPLETED";if(Y.current){const ve={id:`${Date.now()}`,timestamp:Date.now(),...Y.current,finalAnswer:J.current,agents:W.current,status:oe,arbiterSwitchWarning:b.current};q(Re=>[ve,...Re]),Y.current=void 0}}},[E]),z.useEffect(()=>{const oe=localStorage.getItem(Z_);oe&&(O(oe),O_(oe));const ve=localStorage.getItem(Y_);ve&&(G(ve),U_(ve));const Re=localStorage.getItem(X_);Re&&(B(Re),B_(Re))},[]);const $=z.useCallback(oe=>{O(oe),O_(oe),localStorage.setItem(Z_,oe)},[]),j=z.useCallback(oe=>{G(oe),U_(oe),localStorage.setItem(Y_,oe)},[]),se=z.useCallback(oe=>{B(oe),B_(oe),localStorage.setItem(X_,oe)},[]),re=z.useMemo(()=>i.filter(oe=>oe.provider==="openai").length,[i]),fe=z.useMemo(()=>i.filter(oe=>oe.provider==="openrouter").length,[i]),Me=z.useCallback(async()=>{I&&M(null);const oe=t.trim()||(n.length>0?`Analyze these ${n.length} image(s) and provide a detailed description.`:"");if(!(!oe||E||i.length===0)){if(oe&&!U.includes(oe)&&le(ve=>[oe,...ve].slice(0,U$)),re>0&&!C){R("Please set your OpenAI API key in the settings to use OpenAI models."),L(!0);return}if(fe>0&&!H){R("Please set your OpenRouter API key in the settings to use OpenRouter models."),L(!0);return}A(!0),R(null),y(""),D(!1),g([]),w(null),Z.current=!1,Y.current={prompt:oe,images:n,agentConfigs:i,arbiterModel:o,openAIArbiterVerbosity:c,openAIArbiterEffort:f,geminiArbiterEffort:p};try{const ve=Et=>{const Dt=Et.map(vt=>({id:vt.agentId,name:vt.name,persona:vt.persona,status:"RUNNING",content:"",error:null,model:vt.model,provider:vt.provider}));g(Dt),s(vt=>vt.map(mr=>({...mr,status:"RUNNING"})))},Re=Et=>{g(Dt=>{const vt=Dt.findIndex(mr=>mr.id===Et.agentId);if(vt>-1){const mr=$$(Et);return Dt.map((v1,_1)=>_1===vt?mr:v1)}return Dt}),s(Dt=>Dt.map(vt=>vt.id===Et.agentId?{...vt,status:Et.status}:vt))},{stream:Be,switchedArbiter:Ye}=await XB({prompt:oe,images:n,agentConfigs:i,arbiterModel:o,openAIArbiterVerbosity:c,openAIArbiterEffort:f,geminiArbiterEffort:p},{onInitialAgents:ve,onDraftComplete:Re});Ye&&w("The selected GPT-5 arbiter was automatically switched to Gemini 2.5 Pro due to a large input size to prevent errors. Gemini models support larger context windows."),D(!0);let Se="",Je="";const De=()=>{Je&&(Se+=Je,y(Se),Je=""),V.current=requestAnimationFrame(De)};V.current=requestAnimationFrame(De);for await(const Et of Be)Je+=Et.text;V.current&&cancelAnimationFrame(V.current),Je&&(Se+=Je,y(Se))}catch(ve){console.error(ve);const Re=ve instanceof Error?ve.message:"An unexpected error occurred.";R(Re),g(Be=>Be.map(Ye=>({...Ye,status:"FAILED",error:Re}))),s(Be=>Be.map(Ye=>({...Ye,status:"FAILED"})))}finally{A(!1),D(!1),Z.current=!0}}},[t,n,E,i,o,c,f,p,re,C,fe,H,U,I]),Te=z.useCallback(()=>{e(""),r([]),s(j_()),a(rn),d("medium"),h("medium"),m("dynamic"),g([]),y(""),A(!1),R(null),D(!1),w(null)},[]),pt=z.useCallback(()=>{M(null),Te()},[Te]),Zn=z.useCallback(()=>{M(null)},[]),Bt=z.useCallback(oe=>{F.find(Re=>Re.id===oe)&&M(oe)},[F]),Qr=z.useCallback(oe=>{Bt(oe),Ve()},[Bt,Ve]),Ze=z.useCallback(()=>{pt(),Ve()},[pt,Ve]),bi=z.useCallback(()=>{Zn(),Ve()},[Zn,Ve]),Js=z.useCallback(oe=>{s(ve=>{const Re=ve.find(Je=>Je.id===oe);if(!Re)return ve;const Be={...Re,id:crypto.randomUUID(),status:"PENDING"},Ye=ve.findIndex(Je=>Je.id===oe),Se=[...ve];return Se.splice(Ye+1,0,Be),Se})},[]),un=z.useRef(Me),Ks=z.useRef(!1);z.useEffect(()=>{un.current=Me},[Me]),z.useEffect(()=>{const oe=ve=>{if(ve.isComposing||ve.repeat)return;const Re=ve.target,Be=Re.tagName,Ye=Be==="INPUT"||Be==="TEXTAREA"||Re.isContentEditable,Se=ve.key.toLowerCase(),Je=!(ve.metaKey||ve.ctrlKey||ve.altKey);if((ve.metaKey||ve.ctrlKey)&&Se==="enter"){ve.preventDefault(),un.current();return}if(Je&&!Ye&&!Ks.current)switch(Se){case"a":ve.preventDefault(),Kt.current?.openModal();break;case"/":ve.preventDefault(),qe.current?.focus();break;default:if(Se>="1"&&Se<="9"){const Et=parseInt(Se,10)-1,Dt=W.current[Et];if(!Dt||!(Dt.status==="COMPLETED"||Dt.status==="FAILED"))return;T(mr=>({...mr,[Dt.id]:!mr[Dt.id]}))}}};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[]);const Zs=z.useMemo(()=>{if(!E)return{total:0,agentPercent:0,phase:"idle"};const oe=.5,ve=.5,Re=i.filter(De=>De.status==="COMPLETED"||De.status==="FAILED").length,Be=i.length>0?Re/i.length:0;let Ye=N?.5:0;!E&&x&&(Ye=1);const Se=(Be*oe+Ye*ve)*100,Je=N?"arbitrating":"drafting";return{total:Math.min(Se,100),agentPercent:Be*100,phase:Je}},[i,E,N,x]),Ec=oe=>oe.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").slice(0,50)||"orchestration-results",$t=z.useMemo(()=>F.find(oe=>oe.id===I),[F,I]),Ue=z.useMemo(()=>$t?{prompt:$t.prompt,images:$t.images,agentConfigs:$t.agentConfigs,arbiterModel:$t.arbiterModel,openAIArbiterVerbosity:$t.openAIArbiterVerbosity,openAIArbiterEffort:$t.openAIArbiterEffort,geminiArbiterEffort:$t.geminiArbiterEffort,finalAnswer:$t.finalAnswer,agents:$t.agents,arbiterSwitchWarning:$t.arbiterSwitchWarning,isHistoryView:!0}:{prompt:t,images:n,agentConfigs:i,arbiterModel:o,openAIArbiterVerbosity:c,openAIArbiterEffort:f,geminiArbiterEffort:p,finalAnswer:x,agents:_,arbiterSwitchWarning:v,isHistoryView:!1},[$t,t,n,i,o,c,f,p,x,_,v]);z.useEffect(()=>{Ks.current=Ue.isHistoryView},[Ue.isHistoryView]);const jr=async()=>{const oe=Ue,ve=oe.agents.filter(De=>De.status==="COMPLETED");if(!oe.finalAnswer&&ve.length===0&&oe.images.length===0)return;const Re=new Jk,Be=Ec(oe.prompt);if(oe.finalAnswer){const De=`# Prompt

${oe.prompt}

---

# Arbiter's Final Answer

${oe.finalAnswer}`;Re.file(`${Be}-final-answer.md`,De)}ve.forEach((De,Et)=>{const Dt=`# Prompt

${oe.prompt}

---

# Agent ${Et+1} (${De.provider}, ${De.name})

${De.content}`,vt=`${Be}-agent-${Et+1}-${De.name.toLowerCase().replace(/\s+/g,"-")}.md`;Re.file(vt,Dt)}),oe.images.length>0&&oe.images.forEach(De=>{Re.file(De.file.name,De.file)});const Ye=await Re.generateAsync({type:"blob"}),Se=URL.createObjectURL(Ye),Je=document.createElement("a");Je.href=Se,Je.download=`${Be}.zip`,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),URL.revokeObjectURL(Se)},Mi=z.useCallback(()=>{try{const oe=i.map(De=>({expertId:De.expert.id,model:De.model,provider:De.provider,settings:{...De.settings}})),Re=JSON.stringify({version:Kv,prompt:t,agentConfigs:oe,arbiterModel:o,openAIArbiterVerbosity:c,openAIArbiterEffort:f,geminiArbiterEffort:p,openAIApiKey:C,geminiApiKey:te,openRouterApiKey:H,queryHistory:U},null,2),Be=new Blob([Re],{type:"application/json"}),Ye=URL.createObjectURL(Be),Se=document.createElement("a");Se.href=Ye;const Je=new Date().toISOString().split("T")[0];Se.download=`orchestrator-session-${Je}.json`,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),URL.revokeObjectURL(Ye)}catch(oe){console.error("Failed to save session:",oe),X({message:"An error occurred while trying to save the session.",type:"error"})}},[t,i,o,c,f,p,C,te,H,U]),g1=z.useCallback(oe=>{const ve=new FileReader;ve.onload=Re=>{try{const Be=Re.target?.result;if(!Be)throw new Error("File is empty or could not be read.");const Ye=O$.safeParse(JSON.parse(Be));if(!Ye.success){const De=Ye.error.errors.map(Et=>`${Et.path.join(".")||"(root)"} - ${Et.message}`).join("; ");X({message:`Error loading session file: Invalid session file: ${De}`,type:"error"});return}const Se=Ye.data;if(Se.version>Kv){X({message:`This session file is from a newer version (v${Se.version}) and cannot be loaded.`,type:"error"});return}const Je=Se.agentConfigs.map(De=>L$(De,im)).filter(De=>De!==null);pt(),e(Se.prompt),s(Je),a(Se.arbiterModel??rn),d(Se.openAIArbiterVerbosity??"medium"),h(Se.openAIArbiterEffort??"medium"),m(Se.geminiArbiterEffort??"dynamic"),$(Se.openAIApiKey??""),j(Se.geminiApiKey??""),se(Se.openRouterApiKey??""),le(Se.queryHistory??[]),L(!1),X({message:"Session loaded successfully!",type:"success"})}catch(Be){console.error("Failed to load session:",Be);const Ye=Be instanceof Error?Be.message:"An unknown error occurred.";X({message:`Error loading session file: ${Ye}`,type:"error"})}},ve.onerror=()=>{X({message:"Failed to read the session file.",type:"error"})},ve.readAsText(oe)},[$,j,se,pt]),y1=z.useCallback(oe=>{e(oe)},[]),Ma=Ue.agents.length>0||Ue.finalAnswer,Na=E||N,ig=z.useMemo(()=>Na?"IN_PROGRESS":I?"IDLE":P?"FAILED":Ma?"COMPLETED":"IDLE",[Na,P,Ma,I]);return S.jsxs("div",{className:"bg-[var(--bg)] text-[var(--text)] font-sans flex w-full",style:{minHeight:"calc(var(--vh, 1vh) * 100)"},children:[S.jsx(J_,{history:F,selectedRunId:I,onSelectRun:Bt,onNewRun:pt,onViewCurrentRun:Zn,currentRunStatus:ig,className:"hidden md:flex"}),S.jsxs("div",{className:"flex-1 flex flex-col h-full min-w-0",children:[ne&&S.jsx(B$,{message:ne.message,type:ne.type,onClose:()=>X(null)}),S.jsx(m$,{isOpen:K,onClose:()=>L(!1),onSaveOpenAIApiKey:$,currentOpenAIApiKey:C,onSaveGeminiApiKey:j,currentGeminiApiKey:te,onSaveOpenRouterApiKey:se,currentOpenRouterApiKey:H,onSaveSession:Mi,onLoadSession:g1,queryHistory:U,onSelectQuery:y1}),S.jsx("div",{className:"flex-1 overflow-y-auto scrollable-area",children:S.jsxs("div",{className:"relative w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("header",{className:"text-center py-8 relative fixed-header",children:[S.jsx("div",{className:"absolute top-8 left-0 md:hidden",children:S.jsx("button",{ref:xe,onClick:()=>Le(!0),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-lg","aria-label":"Open history",children:S.jsx(e$,{className:"w-6 h-6","aria-hidden":"true"})})}),S.jsx("img",{src:V$,alt:"HeavyOrc banner",width:1200,height:300,className:"mx-auto mb-4 w-full max-w-2xl h-auto"}),S.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-[var(--text)] flex items-center justify-center gap-3",children:[S.jsx(QB,{className:"w-10 h-10 text-emerald-400","aria-hidden":"true"}),"HeavyOrc"]}),S.jsxs("div",{className:"absolute top-8 right-0 flex items-center gap-2",children:[S.jsxs("button",{onClick:jr,disabled:!Ma||E,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] disabled:bg-[var(--surface-2)] disabled:text-[var(--text-muted)] disabled:cursor-not-allowed transition-colors",title:"Save final answer and all drafts to a ZIP file",children:[S.jsx(u1,{className:"w-4 h-4","aria-hidden":"true"}),"Save"]}),S.jsx("button",{onClick:()=>L(!0),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors rounded-full hover:bg-[var(--surface-active)]",title:"Settings","aria-label":"Open Settings",children:S.jsx(n$,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsx("p",{className:"mt-4 text-lg text-[var(--text-muted)] max-w-3xl mx-auto",children:"Directly configure a 'Mixture-of-Experts' ensemble. Parallel agents generate diverse drafts, and a final arbiter synthesizes the optimal response."})]}),S.jsxs("main",{className:"max-w-4xl mx-auto space-y-8 pb-40",children:[P&&!Ue.isHistoryView&&S.jsx("div",{className:"p-3 bg-[var(--danger)] bg-opacity-20 text-[var(--danger)] border border-[var(--danger)] rounded-lg text-sm text-center",children:P}),re>0&&!C||fe>0&&!H&&S.jsxs("p",{className:"text-xs text-[var(--warn)] text-center p-2 bg-[var(--warn)] bg-opacity-20 rounded-md border border-[var(--warn)]",children:["An API key is required for one or more of your agents.",S.jsx("button",{onClick:()=>L(!0),className:"ml-1 underline font-semibold hover:text-[var(--warn)] focus:outline-none focus:ring-2 focus:ring-[var(--warn)] rounded",children:"Set API Key"})]}),(Ma||Na&&!Ue.isHistoryView)&&S.jsxs(Di.div,{className:"space-y-8",initial:"hidden",animate:"visible",variants:Q_,children:[Ue.arbiterSwitchWarning&&S.jsx(Di.div,{className:"bg-[var(--warn)] bg-opacity-20 border border-[var(--warn)] text-[var(--warn)] px-4 py-3 rounded-lg relative",role:"alert",variants:gl,children:S.jsxs("div",{className:"flex items-start",children:[S.jsx(r$,{className:"w-5 h-5 mr-3 mt-0.5 text-[var(--warn)] flex-shrink-0","aria-hidden":"true"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-bold",children:"Automatic Model Switch:"}),S.jsx("span",{className:"block sm:inline sm:ml-2",children:Ue.arbiterSwitchWarning})]})]})}),(Ue.finalAnswer||Na&&!Ue.isHistoryView)&&S.jsx(Di.section,{variants:gl,children:S.jsx(C$,{answer:Ue.finalAnswer,isStreaming:N&&!Ue.isHistoryView})}),Ue.agents.length>0&&S.jsx(Di.section,{variants:gl,children:S.jsx(H_,{title:"Contributing Agent Drafts",defaultOpen:!1,children:S.jsx(Di.div,{className:"grid-adaptive-cols gap-4 pt-4",variants:Q_,children:Ue.agents.map((oe,ve)=>S.jsx(Di.div,{variants:gl,children:S.jsx(d$,{agent:oe,displayId:ve+1,isCollapsed:Zt[oe.id]||!1,onToggleCollapse:()=>T(Re=>({...Re,[oe.id]:!Re[oe.id]}))})},oe.id))})})})]}),S.jsxs("div",{className:"space-y-6 bg-[var(--surface-2)] p-6 rounded-xl shadow-2xl border border-[var(--line)]",children:[S.jsx(p1,{ref:Kt,agentConfigs:Ue.agentConfigs,setAgentConfigs:s,onDuplicateAgent:Js,disabled:E||Ue.isHistoryView}),S.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:S.jsx(H_,{title:"Arbiter Settings",defaultOpen:!0,children:S.jsx("div",{className:"space-y-4",children:S.jsx(G$,{arbiterModel:Ue.arbiterModel,setArbiterModel:a,openAIArbiterVerbosity:Ue.openAIArbiterVerbosity,setOpenAIArbiterVerbosity:d,openAIArbiterEffort:Ue.openAIArbiterEffort,setOpenAIArbiterEffort:h,geminiArbiterEffort:Ue.geminiArbiterEffort,setGeminiArbiterEffort:m,isLoading:E||Ue.isHistoryView})})})})]})]})]})}),S.jsx("footer",{className:"sticky bottom-0 z-10 bg-[var(--surface-1)] bg-opacity-80 backdrop-blur-lg border-t border-[var(--line)] flex-shrink-0 fixed-footer",children:S.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-3 space-y-3",children:[E&&S.jsxs("div",{children:[S.jsx("div",{className:"w-full bg-[var(--surface-2)] rounded-full h-2.5",children:S.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${Zs.total}%`}})}),S.jsx("p",{className:"text-center text-xs text-[var(--text-muted)] mt-1",children:Zs.phase==="arbitrating"?"Arbiter is synthesizing...":`Agents drafting... (${Math.round(Zs.agentPercent)}%)`})]}),S.jsx(x$,{prompt:Ue.prompt,onPromptChange:e,images:Ue.images,onImagesChange:r,onSubmit:Me,isLoading:E,disabled:E||Ue.isHistoryView||i.length===0,inputRef:qe})]})})]}),Ae&&S.jsx(hN,{focusTrapOptions:{initialFocus:()=>Ie.current??void 0,onDeactivate:()=>xe.current?.focus()},children:S.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Ve}),S.jsx(J_,{ref:Ie,history:F,selectedRunId:I,onSelectRun:Qr,onNewRun:Ze,onViewCurrentRun:bi,currentRunStatus:ig,className:"relative h-full",isMobile:!0,onClose:Ve})]})})]})},G$=({arbiterModel:t,setArbiterModel:e,openAIArbiterVerbosity:n,setOpenAIArbiterVerbosity:r,openAIArbiterEffort:i,setOpenAIArbiterEffort:s,geminiArbiterEffort:o,setGeminiArbiterEffort:a,isLoading:c})=>{const d=[{label:"Gemini 2.5 Flash",value:vn,provider:"gemini",tooltip:"Google's fast and cost-effective model for general arbitration."},{label:"Gemini 2.5 Pro",value:rn,provider:"gemini",tooltip:"Google's most capable model, with a large context window and strong reasoning. Recommended for complex synthesis."},{label:"GPT-5",value:YN,provider:"openai",tooltip:"OpenAI's flagship model with configurable reasoning effort for balanced arbitration."},{label:"GPT-5 Mini",value:ac,provider:"openai",tooltip:"OpenAI's lightweight GPT-5 model for quick arbitration with lower latency."},{label:"OR Claude Haiku",value:rS,provider:"openrouter",tooltip:"Anthropic's fastest model via OpenRouter. Ideal for quick, responsive arbitration."}],f=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],h=[{label:"Medium",value:"medium"},{label:"High",value:"high"}],p=[{label:"Dynamic",value:"dynamic"},{label:"High",value:"high"},{label:"Medium",value:"medium"},{label:"Low",value:"low"},{label:"None",value:"none"}],m=d.find(g=>g.value===t),_=m?.value===vn?p:p.filter(g=>g.value!=="none");return S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Arbiter Model"}),S.jsx(ml,{"aria-label":"Arbiter Model",options:d,value:t,onChange:e,disabled:c})]}),m?.provider==="openai"?S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Arbiter Verbosity"}),S.jsx(ml,{"aria-label":"Arbiter Verbosity",options:f,value:n,onChange:r,disabled:c})]}),S.jsxs("div",{className:"mt-4",children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Reasoning Effort"}),S.jsx(ml,{"aria-label":"Arbiter Reasoning Effort",options:h,value:i,onChange:s,disabled:c})]})]}):m?.provider==="gemini"?S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Thinking Effort"}),S.jsx(ml,{"aria-label":"Arbiter Thinking Effort",options:_,value:o,onChange:a,disabled:c})]}):null]})},m1=document.getElementById("root");if(!m1)throw new Error("Could not find root element to mount to");const H$=Pd.createRoot(m1);H$.render(S.jsx(Id.StrictMode,{children:S.jsx(z$,{})}));
