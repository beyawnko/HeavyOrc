(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hv={exports:{}},Al={},Wv={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=Symbol.for("react.element"),HT=Symbol.for("react.portal"),WT=Symbol.for("react.fragment"),qT=Symbol.for("react.strict_mode"),JT=Symbol.for("react.profiler"),KT=Symbol.for("react.provider"),YT=Symbol.for("react.context"),XT=Symbol.for("react.forward_ref"),ZT=Symbol.for("react.suspense"),QT=Symbol.for("react.memo"),jT=Symbol.for("react.lazy"),gp=Symbol.iterator;function eS(t){return t===null||typeof t!="object"?null:(t=gp&&t[gp]||t["@@iterator"],typeof t=="function"?t:null)}var qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jv=Object.assign,Kv={};function qi(t,e,n){this.props=t,this.context=e,this.refs=Kv,this.updater=n||qv}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yv(){}Yv.prototype=qi.prototype;function Kf(t,e,n){this.props=t,this.context=e,this.refs=Kv,this.updater=n||qv}var Yf=Kf.prototype=new Yv;Yf.constructor=Kf;Jv(Yf,qi.prototype);Yf.isPureReactComponent=!0;var yp=Array.isArray,Xv=Object.prototype.hasOwnProperty,Xf={current:null},Zv={key:!0,ref:!0,__self:!0,__source:!0};function Qv(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Xv.call(e,r)&&!Zv.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ys,type:t,key:o,ref:s,props:i,_owner:Xf.current}}function tS(t,e){return{$$typeof:ys,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ys}function nS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vp=/\/+/g;function cu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nS(""+t.key):e.toString(36)}function ya(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ys:case HT:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+cu(s,0):r,yp(i)?(n="",t!=null&&(n=t.replace(vp,"$&/")+"/"),ya(i,e,n,"",function(f){return f})):i!=null&&(Zf(i)&&(i=tS(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(vp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",yp(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+cu(o,a);s+=ya(o,e,n,c,i)}else if(c=eS(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+cu(o,a++),s+=ya(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Fs(t,e,n){if(t==null)return t;var r=[],i=0;return ya(t,r,"","",function(o){return e.call(n,o,i++)}),r}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},va={transition:null},iS={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:va,ReactCurrentOwner:Xf};function jv(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Fs,forEach:function(t,e,n){Fs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fs(t,function(){e++}),e},toArray:function(t){return Fs(t,function(e){return e})||[]},only:function(t){if(!Zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=qi;ye.Fragment=WT;ye.Profiler=JT;ye.PureComponent=Kf;ye.StrictMode=qT;ye.Suspense=ZT;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;ye.act=jv;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Xf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Xv.call(e,c)&&!Zv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:ys,type:t.type,key:i,ref:o,props:r,_owner:s}};ye.createContext=function(t){return t={$$typeof:YT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KT,_context:t},t.Consumer=t};ye.createElement=Qv;ye.createFactory=function(t){var e=Qv.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:XT,render:t}};ye.isValidElement=Zf;ye.lazy=function(t){return{$$typeof:jT,_payload:{_status:-1,_result:t},_init:rS}};ye.memo=function(t,e){return{$$typeof:QT,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};ye.unstable_act=jv;ye.useCallback=function(t,e){return Et.current.useCallback(t,e)};ye.useContext=function(t){return Et.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Et.current.useEffect(t,e)};ye.useId=function(){return Et.current.useId()};ye.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Et.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};ye.useRef=function(t){return Et.current.useRef(t)};ye.useState=function(t){return Et.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Et.current.useTransition()};ye.version="18.3.1";Wv.exports=ye;var H=Wv.exports;const oS=Gv(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=H,aS=Symbol.for("react.element"),lS=Symbol.for("react.fragment"),uS=Object.prototype.hasOwnProperty,cS=sS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fS={key:!0,ref:!0,__self:!0,__source:!0};function e0(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)uS.call(e,r)&&!fS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aS,type:t,key:o,ref:s,props:i,_owner:cS.current}}Al.Fragment=lS;Al.jsx=e0;Al.jsxs=e0;Hv.exports=Al;var T=Hv.exports,ac={},t0={exports:{}},Ht={},n0={exports:{}},r0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,B){var Z=J.length;J.push(B);e:for(;0<Z;){var V=Z-1>>>1,F=J[V];if(0<i(F,B))J[V]=B,J[Z]=F,Z=V;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var B=J[0],Z=J.pop();if(Z!==B){J[0]=Z;e:for(var V=0,F=J.length,oe=F>>>1;V<oe;){var ne=2*(V+1)-1,te=J[ne],xe=ne+1,Fe=J[xe];if(0>i(te,Z))xe<F&&0>i(Fe,te)?(J[V]=Fe,J[xe]=Z,V=xe):(J[V]=te,J[ne]=Z,V=ne);else if(xe<F&&0>i(Fe,Z))J[V]=Fe,J[xe]=Z,V=xe;else break e}}return B}function i(J,B){var Z=J.sortIndex-B.sortIndex;return Z!==0?Z:J.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],f=[],d=1,h=null,p=3,m=!1,_=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(J){for(var B=n(f);B!==null;){if(B.callback===null)r(f);else if(B.startTime<=J)r(f),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(f)}}function E(J){if(g=!1,w(J),!_)if(n(c)!==null)_=!0,ae(A);else{var B=n(f);B!==null&&q(E,B.startTime-J)}}function A(J,B){_=!1,g&&(g=!1,v(N),N=-1),m=!0;var Z=p;try{for(w(B),h=n(c);h!==null&&(!(h.expirationTime>B)||J&&!G());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var F=V(h.expirationTime<=B);B=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(c)&&r(c),w(B)}else r(c);h=n(c)}if(h!==null)var oe=!0;else{var ne=n(f);ne!==null&&q(E,ne.startTime-B),oe=!1}return oe}finally{h=null,p=Z,m=!1}}var k=!1,I=null,N=-1,D=5,b=-1;function G(){return!(t.unstable_now()-b<D)}function M(){if(I!==null){var J=t.unstable_now();b=J;var B=!0;try{B=I(!0,J)}finally{B?O():(k=!1,I=null)}}else k=!1}var O;if(typeof y=="function")O=function(){y(M)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,z=S.port2;S.port1.onmessage=M,O=function(){z.postMessage(null)}}else O=function(){C(M,0)};function ae(J){I=J,k||(k=!0,O())}function q(J,B){N=C(function(){J(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,ae(A))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var Z=p;p=B;try{return J()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,B){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Z=p;p=J;try{return B()}finally{p=Z}},t.unstable_scheduleCallback=function(J,B,Z){var V=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?V+Z:V):Z=V,J){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Z+F,J={id:d++,callback:B,priorityLevel:J,startTime:Z,expirationTime:F,sortIndex:-1},Z>V?(J.sortIndex=Z,e(f,J),n(c)===null&&J===n(f)&&(g?(v(N),N=-1):g=!0,q(E,Z-V))):(J.sortIndex=F,e(c,J),_||m||(_=!0,ae(A))),J},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(J){var B=p;return function(){var Z=p;p=B;try{return J.apply(this,arguments)}finally{p=Z}}}})(r0);n0.exports=r0;var dS=n0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS=H,zt=dS;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i0=new Set,qo={};function qr(t,e){Fi(t,e),Fi(t+"Capture",e)}function Fi(t,e){for(qo[t]=e,t=0;t<e.length;t++)i0.add(e[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=Object.prototype.hasOwnProperty,pS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_p={},wp={};function mS(t){return lc.call(wp,t)?!0:lc.call(_p,t)?!1:pS.test(t)?wp[t]=!0:(_p[t]=!0,!1)}function gS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yS(t,e,n,r){if(e===null||typeof e>"u"||gS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qf=/[\-:]([a-z])/g;function jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qf,jf);dt[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qf,jf);dt[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qf,jf);dt[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yS(e,n,i,r)&&(n=null),r||i===null?mS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wn=hS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),si=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),cc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),a0=Symbol.for("react.offscreen"),Cp=Symbol.iterator;function io(t){return t===null||typeof t!="object"?null:(t=Cp&&t[Cp]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,fu;function mo(t){if(fu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fu=e&&e[1]||""}return`
`+fu+t}var du=!1;function hu(t,e){if(!t||du)return"";du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mo(t):""}function vS(t){switch(t.tag){case 5:return mo(t.type);case 16:return mo("Lazy");case 13:return mo("Suspense");case 19:return mo("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function dc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case si:return"Portal";case uc:return"Profiler";case td:return"StrictMode";case cc:return"Suspense";case fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s0:return(t.displayName||"Context")+".Consumer";case o0:return(t._context.displayName||"Context")+".Provider";case nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rd:return e=t.displayName||null,e!==null?e:dc(t.type)||"Memo";case jn:e=t._payload,t=t._init;try{return dc(t(e))}catch{}}return null}function _S(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dc(e);case 8:return e===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wS(t){var e=l0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Us(t){t._valueTracker||(t._valueTracker=wS(t))}function u0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=l0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $a(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hc(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function c0(t,e){e=e.checked,e!=null&&ed(t,"checked",e,!1)}function pc(t,e){c0(t,e);var n=pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mc(t,e.type,n):e.hasOwnProperty("defaultValue")&&mc(t,e.type,pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mc(t,e,n){(e!=="number"||$a(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var go=Array.isArray;function Ei(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(go(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pr(n)}}function f0(t,e){var n=pr(e.value),r=pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ep(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function d0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?d0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bs,h0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CS=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(t){CS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ro[e]=Ro[t]})});function p0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ro.hasOwnProperty(t)&&Ro[t]?(""+e).trim():e+"px"}function m0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=p0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xS=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vc(t,e){if(e){if(xS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function _c(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=null;function id(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cc=null,Ai=null,Pi=null;function Ap(t){if(t=ws(t)){if(typeof Cc!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Ml(e),Cc(t.stateNode,t.type,e))}}function g0(t){Ai?Pi?Pi.push(t):Pi=[t]:Ai=t}function y0(){if(Ai){var t=Ai,e=Pi;if(Pi=Ai=null,Ap(t),e)for(t=0;t<e.length;t++)Ap(e[t])}}function v0(t,e){return t(e)}function _0(){}var pu=!1;function w0(t,e,n){if(pu)return t(e,n);pu=!0;try{return v0(t,e,n)}finally{pu=!1,(Ai!==null||Pi!==null)&&(_0(),y0())}}function Ko(t,e){var n=t.stateNode;if(n===null)return null;var r=Ml(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var xc=!1;if(On)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){xc=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{xc=!1}function TS(t,e,n,r,i,o,s,a,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var Mo=!1,za=null,Ga=!1,Tc=null,SS={onError:function(t){Mo=!0,za=t}};function ES(t,e,n,r,i,o,s,a,c){Mo=!1,za=null,TS.apply(SS,arguments)}function AS(t,e,n,r,i,o,s,a,c){if(ES.apply(this,arguments),Mo){if(Mo){var f=za;Mo=!1,za=null}else throw Error(Q(198));Ga||(Ga=!0,Tc=f)}}function Jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function C0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pp(t){if(Jr(t)!==t)throw Error(Q(188))}function PS(t){var e=t.alternate;if(!e){if(e=Jr(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Pp(i),t;if(o===r)return Pp(i),e;o=o.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function x0(t){return t=PS(t),t!==null?T0(t):null}function T0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=T0(t);if(e!==null)return e;t=t.sibling}return null}var S0=zt.unstable_scheduleCallback,Ip=zt.unstable_cancelCallback,IS=zt.unstable_shouldYield,kS=zt.unstable_requestPaint,Xe=zt.unstable_now,RS=zt.unstable_getCurrentPriorityLevel,od=zt.unstable_ImmediatePriority,E0=zt.unstable_UserBlockingPriority,Ha=zt.unstable_NormalPriority,MS=zt.unstable_LowPriority,A0=zt.unstable_IdlePriority,Pl=null,Pn=null;function NS(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Pl,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:LS,DS=Math.log,bS=Math.LN2;function LS(t){return t>>>=0,t===0?32:31-(DS(t)/bS|0)|0}var Os=64,$s=4194304;function yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=yo(a):(o&=s,o!==0&&(r=yo(o)))}else s=n&~i,s!==0?r=yo(s):o!==0&&(r=yo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pn(e),i=1<<n,r|=t[n],e&=~i;return r}function FS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-pn(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=FS(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function Sc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P0(){var t=Os;return Os<<=1,!(Os&4194240)&&(Os=64),t}function mu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function US(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-pn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function sd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function I0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k0,ad,R0,M0,N0,Ec=!1,zs=[],or=null,sr=null,ar=null,Yo=new Map,Xo=new Map,tr=[],BS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kp(t,e){switch(t){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(e.pointerId)}}function so(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ws(e),e!==null&&ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function OS(t,e,n,r,i){switch(e){case"focusin":return or=so(or,t,e,n,r,i),!0;case"dragenter":return sr=so(sr,t,e,n,r,i),!0;case"mouseover":return ar=so(ar,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Yo.set(o,so(Yo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Xo.set(o,so(Xo.get(o)||null,t,e,n,r,i)),!0}return!1}function D0(t){var e=Mr(t.target);if(e!==null){var n=Jr(e);if(n!==null){if(e=n.tag,e===13){if(e=C0(n),e!==null){t.blockedOn=e,N0(t.priority,function(){R0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wc=r,n.target.dispatchEvent(r),wc=null}else return e=ws(n),e!==null&&ad(e),t.blockedOn=n,!1;e.shift()}return!0}function Rp(t,e,n){_a(t)&&n.delete(e)}function $S(){Ec=!1,or!==null&&_a(or)&&(or=null),sr!==null&&_a(sr)&&(sr=null),ar!==null&&_a(ar)&&(ar=null),Yo.forEach(Rp),Xo.forEach(Rp)}function ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Ec||(Ec=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,$S)))}function Zo(t){function e(i){return ao(i,t)}if(0<zs.length){ao(zs[0],t);for(var n=1;n<zs.length;n++){var r=zs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(or!==null&&ao(or,t),sr!==null&&ao(sr,t),ar!==null&&ao(ar,t),Yo.forEach(e),Xo.forEach(e),n=0;n<tr.length;n++)r=tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)D0(n),n.blockedOn===null&&tr.shift()}var Ii=Wn.ReactCurrentBatchConfig,qa=!0;function zS(t,e,n,r){var i=Ee,o=Ii.transition;Ii.transition=null;try{Ee=1,ld(t,e,n,r)}finally{Ee=i,Ii.transition=o}}function GS(t,e,n,r){var i=Ee,o=Ii.transition;Ii.transition=null;try{Ee=4,ld(t,e,n,r)}finally{Ee=i,Ii.transition=o}}function ld(t,e,n,r){if(qa){var i=Ac(t,e,n,r);if(i===null)Eu(t,e,r,Ja,n),kp(t,r);else if(OS(i,t,e,n,r))r.stopPropagation();else if(kp(t,r),e&4&&-1<BS.indexOf(t)){for(;i!==null;){var o=ws(i);if(o!==null&&k0(o),o=Ac(t,e,n,r),o===null&&Eu(t,e,r,Ja,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Eu(t,e,r,null,n)}}var Ja=null;function Ac(t,e,n,r){if(Ja=null,t=id(r),t=Mr(t),t!==null)if(e=Jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=C0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ja=t,null}function b0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RS()){case od:return 1;case E0:return 4;case Ha:case MS:return 16;case A0:return 536870912;default:return 16}default:return 16}}var rr=null,ud=null,wa=null;function L0(){if(wa)return wa;var t,e=ud,n=e.length,r,i="value"in rr?rr.value:rr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return wa=i.slice(t,1<r?1-r:void 0)}function Ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gs(){return!0}function Mp(){return!1}function Wt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Gs:Mp,this.isPropagationStopped=Mp,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),e}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=Wt(Ji),_s=He({},Ji,{view:0,detail:0}),HS=Wt(_s),gu,yu,lo,Il=He({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==lo&&(lo&&t.type==="mousemove"?(gu=t.screenX-lo.screenX,yu=t.screenY-lo.screenY):yu=gu=0,lo=t),gu)},movementY:function(t){return"movementY"in t?t.movementY:yu}}),Np=Wt(Il),WS=He({},Il,{dataTransfer:0}),qS=Wt(WS),JS=He({},_s,{relatedTarget:0}),vu=Wt(JS),KS=He({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),YS=Wt(KS),XS=He({},Ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZS=Wt(XS),QS=He({},Ji,{data:0}),Dp=Wt(QS),jS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tE[t])?!!e[t]:!1}function fd(){return nE}var rE=He({},_s,{key:function(t){if(t.key){var e=jS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fd,charCode:function(t){return t.type==="keypress"?Ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iE=Wt(rE),oE=He({},Il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=Wt(oE),sE=He({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fd}),aE=Wt(sE),lE=He({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),uE=Wt(lE),cE=He({},Il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fE=Wt(cE),dE=[9,13,27,32],dd=On&&"CompositionEvent"in window,No=null;On&&"documentMode"in document&&(No=document.documentMode);var hE=On&&"TextEvent"in window&&!No,F0=On&&(!dd||No&&8<No&&11>=No),Lp=" ",Fp=!1;function V0(t,e){switch(t){case"keyup":return dE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function pE(t,e){switch(t){case"compositionend":return U0(e);case"keypress":return e.which!==32?null:(Fp=!0,Lp);case"textInput":return t=e.data,t===Lp&&Fp?null:t;default:return null}}function mE(t,e){if(li)return t==="compositionend"||!dd&&V0(t,e)?(t=L0(),wa=ud=rr=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return F0&&e.locale!=="ko"?null:e.data;default:return null}}var gE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gE[t.type]:e==="textarea"}function B0(t,e,n,r){g0(r),e=Ka(e,"onChange"),0<e.length&&(n=new cd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Do=null,Qo=null;function yE(t){X0(t,0)}function kl(t){var e=fi(t);if(u0(e))return t}function vE(t,e){if(t==="change")return e}var O0=!1;if(On){var _u;if(On){var wu="oninput"in document;if(!wu){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),wu=typeof Up.oninput=="function"}_u=wu}else _u=!1;O0=_u&&(!document.documentMode||9<document.documentMode)}function Bp(){Do&&(Do.detachEvent("onpropertychange",$0),Qo=Do=null)}function $0(t){if(t.propertyName==="value"&&kl(Qo)){var e=[];B0(e,Qo,t,id(t)),w0(yE,e)}}function _E(t,e,n){t==="focusin"?(Bp(),Do=e,Qo=n,Do.attachEvent("onpropertychange",$0)):t==="focusout"&&Bp()}function wE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kl(Qo)}function CE(t,e){if(t==="click")return kl(e)}function xE(t,e){if(t==="input"||t==="change")return kl(e)}function TE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:TE;function jo(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!lc.call(e,i)||!yn(t[i],e[i]))return!1}return!0}function Op(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $p(t,e){var n=Op(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Op(n)}}function z0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function G0(){for(var t=window,e=$a();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$a(t.document)}return e}function hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SE(t){var e=G0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z0(n.ownerDocument.documentElement,n)){if(r!==null&&hd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=$p(n,o);var s=$p(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EE=On&&"documentMode"in document&&11>=document.documentMode,ui=null,Pc=null,bo=null,Ic=!1;function zp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ic||ui==null||ui!==$a(r)||(r=ui,"selectionStart"in r&&hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bo&&jo(bo,r)||(bo=r,r=Ka(Pc,"onSelect"),0<r.length&&(e=new cd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ui)))}function Hs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ci={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},Cu={},H0={};On&&(H0=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);function Rl(t){if(Cu[t])return Cu[t];if(!ci[t])return t;var e=ci[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in H0)return Cu[t]=e[n];return t}var W0=Rl("animationend"),q0=Rl("animationiteration"),J0=Rl("animationstart"),K0=Rl("transitionend"),Y0=new Map,Gp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(t,e){Y0.set(t,e),qr(e,[t])}for(var xu=0;xu<Gp.length;xu++){var Tu=Gp[xu],AE=Tu.toLowerCase(),PE=Tu[0].toUpperCase()+Tu.slice(1);vr(AE,"on"+PE)}vr(W0,"onAnimationEnd");vr(q0,"onAnimationIteration");vr(J0,"onAnimationStart");vr("dblclick","onDoubleClick");vr("focusin","onFocus");vr("focusout","onBlur");vr(K0,"onTransitionEnd");Fi("onMouseEnter",["mouseout","mouseover"]);Fi("onMouseLeave",["mouseout","mouseover"]);Fi("onPointerEnter",["pointerout","pointerover"]);Fi("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function Hp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AS(r,e,void 0,t),t.currentTarget=null}function X0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Hp(i,a,f),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,f=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Hp(i,a,f),o=c}}}if(Ga)throw t=Tc,Ga=!1,Tc=null,t}function Ne(t,e){var n=e[Dc];n===void 0&&(n=e[Dc]=new Set);var r=t+"__bubble";n.has(r)||(Z0(e,t,2,!1),n.add(r))}function Su(t,e,n){var r=0;e&&(r|=4),Z0(n,t,r,e)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function es(t){if(!t[Ws]){t[Ws]=!0,i0.forEach(function(n){n!=="selectionchange"&&(IE.has(n)||Su(n,!1,t),Su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ws]||(e[Ws]=!0,Su("selectionchange",!1,e))}}function Z0(t,e,n,r){switch(b0(e)){case 1:var i=zS;break;case 4:i=GS;break;default:i=ld}n=i.bind(null,e,n,t),i=void 0,!xc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Eu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Mr(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}w0(function(){var f=o,d=id(n),h=[];e:{var p=Y0.get(t);if(p!==void 0){var m=cd,_=t;switch(t){case"keypress":if(Ca(n)===0)break e;case"keydown":case"keyup":m=iE;break;case"focusin":_="focus",m=vu;break;case"focusout":_="blur",m=vu;break;case"beforeblur":case"afterblur":m=vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=aE;break;case W0:case q0:case J0:m=YS;break;case K0:m=uE;break;case"scroll":m=HS;break;case"wheel":m=fE;break;case"copy":case"cut":case"paste":m=ZS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=bp}var g=(e&4)!==0,C=!g&&t==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var y=f,w;y!==null;){w=y;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=Ko(y,v),E!=null&&g.push(ts(y,E,w)))),C)break;y=y.return}0<g.length&&(p=new m(p,_,null,n,d),h.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==wc&&(_=n.relatedTarget||n.fromElement)&&(Mr(_)||_[$n]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=f,_=_?Mr(_):null,_!==null&&(C=Jr(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=f),m!==_)){if(g=Np,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=bp,E="onPointerLeave",v="onPointerEnter",y="pointer"),C=m==null?p:fi(m),w=_==null?p:fi(_),p=new g(E,y+"leave",m,n,d),p.target=C,p.relatedTarget=w,E=null,Mr(d)===f&&(g=new g(v,y+"enter",_,n,d),g.target=w,g.relatedTarget=C,E=g),C=E,m&&_)t:{for(g=m,v=_,y=0,w=g;w;w=Zr(w))y++;for(w=0,E=v;E;E=Zr(E))w++;for(;0<y-w;)g=Zr(g),y--;for(;0<w-y;)v=Zr(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Zr(g),v=Zr(v)}g=null}else g=null;m!==null&&Wp(h,p,m,g,!1),_!==null&&C!==null&&Wp(h,C,_,g,!0)}}e:{if(p=f?fi(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=vE;else if(Vp(p))if(O0)A=xE;else{A=wE;var k=_E}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=CE);if(A&&(A=A(t,f))){B0(h,A,n,d);break e}k&&k(t,p,f),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&mc(p,"number",p.value)}switch(k=f?fi(f):window,t){case"focusin":(Vp(k)||k.contentEditable==="true")&&(ui=k,Pc=f,bo=null);break;case"focusout":bo=Pc=ui=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,zp(h,n,d);break;case"selectionchange":if(EE)break;case"keydown":case"keyup":zp(h,n,d)}var I;if(dd)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else li?V0(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(F0&&n.locale!=="ko"&&(li||N!=="onCompositionStart"?N==="onCompositionEnd"&&li&&(I=L0()):(rr=d,ud="value"in rr?rr.value:rr.textContent,li=!0)),k=Ka(f,N),0<k.length&&(N=new Dp(N,t,null,n,d),h.push({event:N,listeners:k}),I?N.data=I:(I=U0(n),I!==null&&(N.data=I)))),(I=hE?pE(t,n):mE(t,n))&&(f=Ka(f,"onBeforeInput"),0<f.length&&(d=new Dp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:f}),d.data=I))}X0(h,e)})}function ts(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ka(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ko(t,n),o!=null&&r.unshift(ts(t,o,i)),o=Ko(t,e),o!=null&&r.push(ts(t,o,i))),t=t.return}return r}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,f=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&f!==null&&(a=f,i?(c=Ko(n,o),c!=null&&s.unshift(ts(n,c,a))):i||(c=Ko(n,o),c!=null&&s.push(ts(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var kE=/\r\n?/g,RE=/\u0000|\uFFFD/g;function qp(t){return(typeof t=="string"?t:""+t).replace(kE,`
`).replace(RE,"")}function qs(t,e,n){if(e=qp(e),qp(t)!==e&&n)throw Error(Q(425))}function Ya(){}var kc=null,Rc=null;function Mc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nc=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(t){return Jp.resolve(null).then(t).catch(DE)}:Nc;function DE(t){setTimeout(function(){throw t})}function Au(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zo(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),En="__reactFiber$"+Ki,ns="__reactProps$"+Ki,$n="__reactContainer$"+Ki,Dc="__reactEvents$"+Ki,bE="__reactListeners$"+Ki,LE="__reactHandles$"+Ki;function Mr(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kp(t);t!==null;){if(n=t[En])return n;t=Kp(t)}return e}t=n,n=t.parentNode}return null}function ws(t){return t=t[En]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Ml(t){return t[ns]||null}var bc=[],di=-1;function _r(t){return{current:t}}function be(t){0>di||(t.current=bc[di],bc[di]=null,di--)}function Re(t,e){di++,bc[di]=t.current,t.current=e}var mr={},Ct=_r(mr),Nt=_r(!1),Br=mr;function Vi(t,e){var n=t.type.contextTypes;if(!n)return mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(t){return t=t.childContextTypes,t!=null}function Xa(){be(Nt),be(Ct)}function Yp(t,e,n){if(Ct.current!==mr)throw Error(Q(168));Re(Ct,e),Re(Nt,n)}function Q0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,_S(t)||"Unknown",i));return He({},n,r)}function Za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mr,Br=Ct.current,Re(Ct,t),Re(Nt,Nt.current),!0}function Xp(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=Q0(t,e,Br),r.__reactInternalMemoizedMergedChildContext=t,be(Nt),be(Ct),Re(Ct,t)):be(Nt),Re(Nt,n)}var bn=null,Nl=!1,Pu=!1;function j0(t){bn===null?bn=[t]:bn.push(t)}function FE(t){Nl=!0,j0(t)}function wr(){if(!Pu&&bn!==null){Pu=!0;var t=0,e=Ee;try{var n=bn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,Nl=!1}catch(i){throw bn!==null&&(bn=bn.slice(t+1)),S0(od,wr),i}finally{Ee=e,Pu=!1}}return null}var hi=[],pi=0,Qa=null,ja=0,Yt=[],Xt=0,Or=null,Ln=1,Fn="";function Ar(t,e){hi[pi++]=ja,hi[pi++]=Qa,Qa=t,ja=e}function e_(t,e,n){Yt[Xt++]=Ln,Yt[Xt++]=Fn,Yt[Xt++]=Or,Or=t;var r=Ln;t=Fn;var i=32-pn(r)-1;r&=~(1<<i),n+=1;var o=32-pn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ln=1<<32-pn(e)+i|n<<i|r,Fn=o+t}else Ln=1<<o|n<<i|r,Fn=t}function pd(t){t.return!==null&&(Ar(t,1),e_(t,1,0))}function md(t){for(;t===Qa;)Qa=hi[--pi],hi[pi]=null,ja=hi[--pi],hi[pi]=null;for(;t===Or;)Or=Yt[--Xt],Yt[Xt]=null,Fn=Yt[--Xt],Yt[Xt]=null,Ln=Yt[--Xt],Yt[Xt]=null}var Ot=null,Bt=null,Ve=!1,fn=null;function t_(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Bt=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Or!==null?{id:Ln,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Bt=null,!0):!1;default:return!1}}function Lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fc(t){if(Ve){var e=Bt;if(e){var n=e;if(!Zp(t,e)){if(Lc(t))throw Error(Q(418));e=lr(n.nextSibling);var r=Ot;e&&Zp(t,e)?t_(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Ot=t)}}else{if(Lc(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ve=!1,Ot=t}}}function Qp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Js(t){if(t!==Ot)return!1;if(!Ve)return Qp(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mc(t.type,t.memoizedProps)),e&&(e=Bt)){if(Lc(t))throw n_(),Error(Q(418));for(;e;)t_(t,e),e=lr(e.nextSibling)}if(Qp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Ot?lr(t.stateNode.nextSibling):null;return!0}function n_(){for(var t=Bt;t;)t=lr(t.nextSibling)}function Ui(){Bt=Ot=null,Ve=!1}function gd(t){fn===null?fn=[t]:fn.push(t)}var VE=Wn.ReactCurrentBatchConfig;function uo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Ks(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jp(t){var e=t._init;return e(t._payload)}function r_(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=dr(v,y),v.index=0,v.sibling=null,v}function o(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,E){return y===null||y.tag!==6?(y=bu(w,v.mode,E),y.return=v,y):(y=i(y,w),y.return=v,y)}function c(v,y,w,E){var A=w.type;return A===ai?d(v,y,w.props.children,E,w.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===jn&&jp(A)===y.type)?(E=i(y,w.props),E.ref=uo(v,y,w),E.return=v,E):(E=Ia(w.type,w.key,w.props,null,v.mode,E),E.ref=uo(v,y,w),E.return=v,E)}function f(v,y,w,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Lu(w,v.mode,E),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function d(v,y,w,E,A){return y===null||y.tag!==7?(y=Vr(w,v.mode,E,A),y.return=v,y):(y=i(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=bu(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:return w=Ia(y.type,y.key,y.props,null,v.mode,w),w.ref=uo(v,null,y),w.return=v,w;case si:return y=Lu(y,v.mode,w),y.return=v,y;case jn:var E=y._init;return h(v,E(y._payload),w)}if(go(y)||io(y))return y=Vr(y,v.mode,w,null),y.return=v,y;Ks(v,y)}return null}function p(v,y,w,E){var A=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vs:return w.key===A?c(v,y,w,E):null;case si:return w.key===A?f(v,y,w,E):null;case jn:return A=w._init,p(v,y,A(w._payload),E)}if(go(w)||io(w))return A!==null?null:d(v,y,w,E,null);Ks(v,w)}return null}function m(v,y,w,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(y,v,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Vs:return v=v.get(E.key===null?w:E.key)||null,c(y,v,E,A);case si:return v=v.get(E.key===null?w:E.key)||null,f(y,v,E,A);case jn:var k=E._init;return m(v,y,w,k(E._payload),A)}if(go(E)||io(E))return v=v.get(w)||null,d(y,v,E,A,null);Ks(y,E)}return null}function _(v,y,w,E){for(var A=null,k=null,I=y,N=y=0,D=null;I!==null&&N<w.length;N++){I.index>N?(D=I,I=null):D=I.sibling;var b=p(v,I,w[N],E);if(b===null){I===null&&(I=D);break}t&&I&&b.alternate===null&&e(v,I),y=o(b,y,N),k===null?A=b:k.sibling=b,k=b,I=D}if(N===w.length)return n(v,I),Ve&&Ar(v,N),A;if(I===null){for(;N<w.length;N++)I=h(v,w[N],E),I!==null&&(y=o(I,y,N),k===null?A=I:k.sibling=I,k=I);return Ve&&Ar(v,N),A}for(I=r(v,I);N<w.length;N++)D=m(I,v,N,w[N],E),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?N:D.key),y=o(D,y,N),k===null?A=D:k.sibling=D,k=D);return t&&I.forEach(function(G){return e(v,G)}),Ve&&Ar(v,N),A}function g(v,y,w,E){var A=io(w);if(typeof A!="function")throw Error(Q(150));if(w=A.call(w),w==null)throw Error(Q(151));for(var k=A=null,I=y,N=y=0,D=null,b=w.next();I!==null&&!b.done;N++,b=w.next()){I.index>N?(D=I,I=null):D=I.sibling;var G=p(v,I,b.value,E);if(G===null){I===null&&(I=D);break}t&&I&&G.alternate===null&&e(v,I),y=o(G,y,N),k===null?A=G:k.sibling=G,k=G,I=D}if(b.done)return n(v,I),Ve&&Ar(v,N),A;if(I===null){for(;!b.done;N++,b=w.next())b=h(v,b.value,E),b!==null&&(y=o(b,y,N),k===null?A=b:k.sibling=b,k=b);return Ve&&Ar(v,N),A}for(I=r(v,I);!b.done;N++,b=w.next())b=m(I,v,N,b.value,E),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?N:b.key),y=o(b,y,N),k===null?A=b:k.sibling=b,k=b);return t&&I.forEach(function(M){return e(v,M)}),Ve&&Ar(v,N),A}function C(v,y,w,E){if(typeof w=="object"&&w!==null&&w.type===ai&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vs:e:{for(var A=w.key,k=y;k!==null;){if(k.key===A){if(A=w.type,A===ai){if(k.tag===7){n(v,k.sibling),y=i(k,w.props.children),y.return=v,v=y;break e}}else if(k.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===jn&&jp(A)===k.type){n(v,k.sibling),y=i(k,w.props),y.ref=uo(v,k,w),y.return=v,v=y;break e}n(v,k);break}else e(v,k);k=k.sibling}w.type===ai?(y=Vr(w.props.children,v.mode,E,w.key),y.return=v,v=y):(E=Ia(w.type,w.key,w.props,null,v.mode,E),E.ref=uo(v,y,w),E.return=v,v=E)}return s(v);case si:e:{for(k=w.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Lu(w,v.mode,E),y.return=v,v=y}return s(v);case jn:return k=w._init,C(v,y,k(w._payload),E)}if(go(w))return _(v,y,w,E);if(io(w))return g(v,y,w,E);Ks(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,w),y.return=v,v=y):(n(v,y),y=bu(w,v.mode,E),y.return=v,v=y),s(v)):n(v,y)}return C}var Bi=r_(!0),i_=r_(!1),el=_r(null),tl=null,mi=null,yd=null;function vd(){yd=mi=tl=null}function _d(t){var e=el.current;be(el),t._currentValue=e}function Vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ki(t,e){tl=t,yd=mi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(yd!==t)if(t={context:t,memoizedValue:e,next:null},mi===null){if(tl===null)throw Error(Q(308));mi=t,tl.dependencies={lanes:0,firstContext:t}}else mi=mi.next=t;return e}var Nr=null;function wd(t){Nr===null?Nr=[t]:Nr.push(t)}function o_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wd(e)):(n.next=i.next,i.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var er=!1;function Cd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zn(t,n)}return i=r.interleaved,i===null?(e.next=e,wd(r)):(e.next=i.next,i.next=e),r.interleaved=e,zn(t,n)}function xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sd(t,n)}}function em(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nl(t,e,n,r){var i=t.updateQueue;er=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,f=c.next;c.next=null,s===null?o=f:s.next=f,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(o!==null){var h=i.baseState;s=0,d=f=c=null,a=o;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,g=a;switch(p=e,m=n,g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=He({},h,p);break e;case 2:er=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=m,c=h):d=d.next=m,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);zr|=s,t.lanes=s,t.memoizedState=h}}function tm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var Cs={},In=_r(Cs),rs=_r(Cs),is=_r(Cs);function Dr(t){if(t===Cs)throw Error(Q(174));return t}function xd(t,e){switch(Re(is,e),Re(rs,t),Re(In,Cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yc(e,t)}be(In),Re(In,e)}function Oi(){be(In),be(rs),be(is)}function a_(t){Dr(is.current);var e=Dr(In.current),n=yc(e,t.type);e!==n&&(Re(rs,t),Re(In,n))}function Td(t){rs.current===t&&(be(In),be(rs))}var $e=_r(0);function rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function Sd(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var Ta=Wn.ReactCurrentDispatcher,ku=Wn.ReactCurrentBatchConfig,$r=0,Ge=null,et=null,it=null,il=!1,Lo=!1,os=0,UE=0;function pt(){throw Error(Q(321))}function Ed(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function Ad(t,e,n,r,i,o){if($r=o,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ta.current=t===null||t.memoizedState===null?zE:GE,t=n(r,i),Lo){o=0;do{if(Lo=!1,os=0,25<=o)throw Error(Q(301));o+=1,it=et=null,e.updateQueue=null,Ta.current=HE,t=n(r,i)}while(Lo)}if(Ta.current=ol,e=et!==null&&et.next!==null,$r=0,it=et=Ge=null,il=!1,e)throw Error(Q(300));return t}function Pd(){var t=os!==0;return os=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ge.memoizedState=it=t:it=it.next=t,it}function rn(){if(et===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=it===null?Ge.memoizedState:it.next;if(e!==null)it=e,et=t;else{if(t===null)throw Error(Q(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},it===null?Ge.memoizedState=it=t:it=it.next=t}return it}function ss(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=rn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=et,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,f=o;do{var d=f.lane;if(($r&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var h={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,Ge.lanes|=d,zr|=d}f=f.next}while(f!==null&&f!==o);c===null?s=r:c.next=a,yn(r,e.memoizedState)||(Mt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ge.lanes|=o,zr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mu(t){var e=rn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);yn(o,e.memoizedState)||(Mt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function l_(){}function u_(t,e){var n=Ge,r=rn(),i=e(),o=!yn(r.memoizedState,i);if(o&&(r.memoizedState=i,Mt=!0),r=r.queue,Id(d_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,as(9,f_.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(Q(349));$r&30||c_(n,e,i)}return i}function c_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f_(t,e,n,r){e.value=n,e.getSnapshot=r,h_(e)&&p_(t)}function d_(t,e,n){return n(function(){h_(e)&&p_(t)})}function h_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function p_(t){var e=zn(t,1);e!==null&&mn(e,t,1,-1)}function nm(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:t},e.queue=t,t=t.dispatch=$E.bind(null,Ge,t),[e.memoizedState,t]}function as(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function m_(){return rn().memoizedState}function Sa(t,e,n,r){var i=xn();Ge.flags|=t,i.memoizedState=as(1|e,n,void 0,r===void 0?null:r)}function Dl(t,e,n,r){var i=rn();r=r===void 0?null:r;var o=void 0;if(et!==null){var s=et.memoizedState;if(o=s.destroy,r!==null&&Ed(r,s.deps)){i.memoizedState=as(e,n,o,r);return}}Ge.flags|=t,i.memoizedState=as(1|e,n,o,r)}function rm(t,e){return Sa(8390656,8,t,e)}function Id(t,e){return Dl(2048,8,t,e)}function g_(t,e){return Dl(4,2,t,e)}function y_(t,e){return Dl(4,4,t,e)}function v_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function __(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4,4,v_.bind(null,e,t),n)}function kd(){}function w_(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ed(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function C_(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ed(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function x_(t,e,n){return $r&21?(yn(n,e)||(n=P0(),Ge.lanes|=n,zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mt=!0),t.memoizedState=n)}function BE(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=ku.transition;ku.transition={};try{t(!1),e()}finally{Ee=n,ku.transition=r}}function T_(){return rn().memoizedState}function OE(t,e,n){var r=fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},S_(t))E_(e,n);else if(n=o_(t,e,n,r),n!==null){var i=St();mn(n,t,r,i),A_(n,e,r)}}function $E(t,e,n){var r=fr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(S_(t))E_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,yn(a,s)){var c=e.interleaved;c===null?(i.next=i,wd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=o_(t,e,i,r),n!==null&&(i=St(),mn(n,t,r,i),A_(n,e,r))}}function S_(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function E_(t,e){Lo=il=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function A_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sd(t,n)}}var ol={readContext:nn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},zE={readContext:nn,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:rm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4194308,4,v_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OE.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:nm,useDebugValue:kd,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=nm(!1),e=t[0];return t=BE.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=xn();if(Ve){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),ot===null)throw Error(Q(349));$r&30||c_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,rm(d_.bind(null,r,o,t),[t]),r.flags|=2048,as(9,f_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=xn(),e=ot.identifierPrefix;if(Ve){var n=Fn,r=Ln;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=os++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GE={readContext:nn,useCallback:w_,useContext:nn,useEffect:Id,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:C_,useReducer:Ru,useRef:m_,useState:function(){return Ru(ss)},useDebugValue:kd,useDeferredValue:function(t){var e=rn();return x_(e,et.memoizedState,t)},useTransition:function(){var t=Ru(ss)[0],e=rn().memoizedState;return[t,e]},useMutableSource:l_,useSyncExternalStore:u_,useId:T_,unstable_isNewReconciler:!1},HE={readContext:nn,useCallback:w_,useContext:nn,useEffect:Id,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:C_,useReducer:Mu,useRef:m_,useState:function(){return Mu(ss)},useDebugValue:kd,useDeferredValue:function(t){var e=rn();return et===null?e.memoizedState=t:x_(e,et.memoizedState,t)},useTransition:function(){var t=Mu(ss)[0],e=rn().memoizedState;return[t,e]},useMutableSource:l_,useSyncExternalStore:u_,useId:T_,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bl={isMounted:function(t){return(t=t._reactInternals)?Jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),i=fr(t),o=Vn(r,i);o.payload=e,n!=null&&(o.callback=n),e=ur(t,o,i),e!==null&&(mn(e,t,i,r),xa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),i=fr(t),o=Vn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ur(t,o,i),e!==null&&(mn(e,t,i,r),xa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=fr(t),i=Vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=ur(t,i,r),e!==null&&(mn(e,t,r,n),xa(e,t,r))}};function im(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!jo(n,r)||!jo(i,o):!0}function P_(t,e,n){var r=!1,i=mr,o=e.contextType;return typeof o=="object"&&o!==null?o=nn(o):(i=Dt(e)?Br:Ct.current,r=e.contextTypes,o=(r=r!=null)?Vi(t,i):mr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function om(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bl.enqueueReplaceState(e,e.state,null)}function Bc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Cd(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=nn(o):(o=Dt(e)?Br:Ct.current,i.context=Vi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Uc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bl.enqueueReplaceState(i,i.state,null),nl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $i(t,e){try{var n="",r=e;do n+=vS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Nu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WE=typeof WeakMap=="function"?WeakMap:Map;function I_(t,e,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){al||(al=!0,Xc=r),Oc(t,e)},n}function k_(t,e,n){n=Vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Oc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Oc(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function sm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=o1.bind(null,t,e,n),e.then(t,t))}function am(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vn(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var qE=Wn.ReactCurrentOwner,Mt=!1;function Tt(t,e,n,r){e.child=t===null?i_(e,null,n,r):Bi(e,t.child,n,r)}function um(t,e,n,r,i){n=n.render;var o=e.ref;return ki(e,i),r=Ad(t,e,n,r,o,i),n=Pd(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gn(t,e,i)):(Ve&&n&&pd(e),e.flags|=1,Tt(t,e,r,i),e.child)}function cm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Vd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,R_(t,e,o,r,i)):(t=Ia(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:jo,n(s,r)&&t.ref===e.ref)return Gn(t,e,i)}return e.flags|=1,t=dr(o,r),t.ref=e.ref,t.return=e,e.child=t}function R_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(jo(o,r)&&t.ref===e.ref)if(Mt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Mt=!0);else return e.lanes=t.lanes,Gn(t,e,i)}return $c(t,e,n,r,i)}function M_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(yi,Ut),Ut|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(yi,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Re(yi,Ut),Ut|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Re(yi,Ut),Ut|=r;return Tt(t,e,i,n),e.child}function N_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $c(t,e,n,r,i){var o=Dt(n)?Br:Ct.current;return o=Vi(e,o),ki(e,i),n=Ad(t,e,n,r,o,i),r=Pd(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gn(t,e,i)):(Ve&&r&&pd(e),e.flags|=1,Tt(t,e,n,i),e.child)}function fm(t,e,n,r,i){if(Dt(n)){var o=!0;Za(e)}else o=!1;if(ki(e,i),e.stateNode===null)Ea(t,e),P_(e,n,r),Bc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=nn(f):(f=Dt(n)?Br:Ct.current,f=Vi(e,f));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==f)&&om(e,s,r,f),er=!1;var p=e.memoizedState;s.state=p,nl(e,r,s,i),c=e.memoizedState,a!==r||p!==c||Nt.current||er?(typeof d=="function"&&(Uc(e,n,d,r),c=e.memoizedState),(a=er||im(e,n,a,r,p,c,f))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=f,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,s_(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:ln(e.type,a),s.props=f,h=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=nn(c):(c=Dt(n)?Br:Ct.current,c=Vi(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==c)&&om(e,s,r,c),er=!1,p=e.memoizedState,s.state=p,nl(e,r,s,i);var _=e.memoizedState;a!==h||p!==_||Nt.current||er?(typeof m=="function"&&(Uc(e,n,m,r),_=e.memoizedState),(f=er||im(e,n,f,r,p,_,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return zc(t,e,n,r,o,i)}function zc(t,e,n,r,i,o){N_(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Xp(e,n,!1),Gn(t,e,o);r=e.stateNode,qE.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Bi(e,t.child,null,o),e.child=Bi(e,null,a,o)):Tt(t,e,a,o),e.memoizedState=r.state,i&&Xp(e,n,!0),e.child}function D_(t){var e=t.stateNode;e.pendingContext?Yp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yp(t,e.context,!1),xd(t,e.containerInfo)}function dm(t,e,n,r,i){return Ui(),gd(i),e.flags|=256,Tt(t,e,n,r),e.child}var Gc={dehydrated:null,treeContext:null,retryLane:0};function Hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function b_(t,e,n){var r=e.pendingProps,i=$e.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Re($e,i&1),t===null)return Fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Vl(s,r,0,null),t=Vr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Hc(n),e.memoizedState=Gc,t):Rd(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return JE(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=dr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=dr(a,o):(o=Vr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Hc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Gc,r}return o=t.child,t=o.sibling,r=dr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rd(t,e){return e=Vl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ys(t,e,n,r){return r!==null&&gd(r),Bi(e,t.child,null,n),t=Rd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JE(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Nu(Error(Q(422))),Ys(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Vl({mode:"visible",children:r.children},i,0,null),o=Vr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Bi(e,t.child,null,s),e.child.memoizedState=Hc(s),e.memoizedState=Gc,o);if(!(e.mode&1))return Ys(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Q(419)),r=Nu(o,r,void 0),Ys(t,e,s,r)}if(a=(s&t.childLanes)!==0,Mt||a){if(r=ot,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,zn(t,i),mn(r,t,i,-1))}return Fd(),r=Nu(Error(Q(421))),Ys(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s1.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Bt=lr(i.nextSibling),Ot=e,Ve=!0,fn=null,t!==null&&(Yt[Xt++]=Ln,Yt[Xt++]=Fn,Yt[Xt++]=Or,Ln=t.id,Fn=t.overflow,Or=e),e=Rd(e,r.children),e.flags|=4096,e)}function hm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vc(t.return,e,n)}function Du(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function L_(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Tt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hm(t,n,e);else if(t.tag===19)hm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Du(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Du(e,!0,n,null,o);break;case"together":Du(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KE(t,e,n){switch(e.tag){case 3:D_(e),Ui();break;case 5:a_(e);break;case 1:Dt(e.type)&&Za(e);break;case 4:xd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Re(el,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?b_(t,e,n):(Re($e,$e.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);Re($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return L_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,M_(t,e,n)}return Gn(t,e,n)}var F_,Wc,V_,U_;F_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wc=function(){};V_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Dr(In.current);var o=null;switch(n){case"input":i=hc(t,i),r=hc(t,r),o=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),o=[];break;case"textarea":i=gc(t,i),r=gc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ya)}vc(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(qo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var c=r[f];if(a=i?.[f],r.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(qo.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ne("scroll",t),o||a===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};U_=function(t,e,n,r){n!==r&&(e.flags|=4)};function co(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function YE(t,e,n){var r=e.pendingProps;switch(md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Dt(e.type)&&Xa(),mt(e),null;case 3:return r=e.stateNode,Oi(),be(Nt),be(Ct),Sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Js(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(jc(fn),fn=null))),Wc(t,e),mt(e),null;case 5:Td(e);var i=Dr(is.current);if(n=e.type,t!==null&&e.stateNode!=null)V_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return mt(e),null}if(t=Dr(In.current),Js(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[En]=e,r[ns]=o,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<vo.length;i++)Ne(vo[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":xp(r,o),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ne("invalid",r);break;case"textarea":Sp(r,o),Ne("invalid",r)}vc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&qs(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&qs(r.textContent,a,t),i=["children",""+a]):qo.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Us(r),Tp(r,o,!0);break;case"textarea":Us(r),Ep(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ya)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[En]=e,t[ns]=r,F_(t,e,!1,!1),e.stateNode=t;e:{switch(s=_c(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<vo.length;i++)Ne(vo[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":xp(t,r),i=hc(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":Sp(t,r),i=gc(t,r),Ne("invalid",t);break;default:i=r}vc(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?m0(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&h0(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Jo(t,c):typeof c=="number"&&Jo(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ne("scroll",t):c!=null&&ed(t,o,c,s))}switch(n){case"input":Us(t),Tp(t,r,!1);break;case"textarea":Us(t),Ep(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ei(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)U_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Dr(is.current),Dr(In.current),Js(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(o=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:qs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qs(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return mt(e),null;case 13:if(be($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Bt!==null&&e.mode&1&&!(e.flags&128))n_(),Ui(),e.flags|=98560,o=!1;else if(o=Js(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[En]=e}else Ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),o=!1}else fn!==null&&(jc(fn),fn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?tt===0&&(tt=3):Fd())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Oi(),Wc(t,e),t===null&&es(e.stateNode.containerInfo),mt(e),null;case 10:return _d(e.type._context),mt(e),null;case 17:return Dt(e.type)&&Xa(),mt(e),null;case 19:if(be($e),o=e.memoizedState,o===null)return mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)co(o,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=rl(t),s!==null){for(e.flags|=128,co(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re($e,$e.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xe()>zi&&(e.flags|=128,r=!0,co(o,!1),e.lanes=4194304)}else{if(!r)if(t=rl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),co(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ve)return mt(e),null}else 2*Xe()-o.renderingStartTime>zi&&n!==1073741824&&(e.flags|=128,r=!0,co(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xe(),e.sibling=null,n=$e.current,Re($e,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Ld(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function XE(t,e){switch(md(e),e.tag){case 1:return Dt(e.type)&&Xa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),be(Nt),be(Ct),Sd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Td(e),null;case 13:if(be($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be($e),null;case 4:return Oi(),null;case 10:return _d(e.type._context),null;case 22:case 23:return Ld(),null;case 24:return null;default:return null}}var Xs=!1,vt=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,ie=null;function gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function qc(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var pm=!1;function QE(t,e){if(kc=qa,t=G0(),hd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,f=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++f===i&&(a=s),p===o&&++d===r&&(c=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rc={focusedElem:t,selectionRange:n},qa=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,C=_.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ln(e.type,g),C);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(E){Ke(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return _=pm,pm=!1,_}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&qc(e,n,o)}i=i.next}while(i!==r)}}function Ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B_(t){var e=t.alternate;e!==null&&(t.alternate=null,B_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[ns],delete e[Dc],delete e[bE],delete e[LE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function O_(t){return t.tag===5||t.tag===3||t.tag===4}function mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ya));else if(r!==4&&(t=t.child,t!==null))for(Kc(t,e,n),t=t.sibling;t!==null;)Kc(t,e,n),t=t.sibling}function Yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yc(t,e,n),t=t.sibling;t!==null;)Yc(t,e,n),t=t.sibling}var lt=null,cn=!1;function Kn(t,e,n){for(n=n.child;n!==null;)$_(t,e,n),n=n.sibling}function $_(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 5:vt||gi(n,e);case 6:var r=lt,i=cn;lt=null,Kn(t,e,n),lt=r,cn=i,lt!==null&&(cn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(cn?(t=lt,n=n.stateNode,t.nodeType===8?Au(t.parentNode,n):t.nodeType===1&&Au(t,n),Zo(t)):Au(lt,n.stateNode));break;case 4:r=lt,i=cn,lt=n.stateNode.containerInfo,cn=!0,Kn(t,e,n),lt=r,cn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&qc(n,e,s),i=i.next}while(i!==r)}Kn(t,e,n);break;case 1:if(!vt&&(gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Kn(t,e,n),vt=r):Kn(t,e,n);break;default:Kn(t,e,n)}}function gm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZE),e.forEach(function(r){var i=a1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,cn=!1;break e;case 3:lt=a.stateNode.containerInfo,cn=!0;break e;case 4:lt=a.stateNode.containerInfo,cn=!0;break e}a=a.return}if(lt===null)throw Error(Q(160));$_(o,s,i),lt=null,cn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){Ke(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z_(e,t),e=e.sibling}function z_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),wn(t),r&4){try{Fo(3,t,t.return),Ll(3,t)}catch(g){Ke(t,t.return,g)}try{Fo(5,t,t.return)}catch(g){Ke(t,t.return,g)}}break;case 1:on(e,t),wn(t),r&512&&n!==null&&gi(n,n.return);break;case 5:if(on(e,t),wn(t),r&512&&n!==null&&gi(n,n.return),t.flags&32){var i=t.stateNode;try{Jo(i,"")}catch(g){Ke(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&c0(i,o),_c(a,s);var f=_c(a,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];d==="style"?m0(i,h):d==="dangerouslySetInnerHTML"?h0(i,h):d==="children"?Jo(i,h):ed(i,d,h,f)}switch(a){case"input":pc(i,o);break;case"textarea":f0(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Ei(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Ei(i,!!o.multiple,o.defaultValue,!0):Ei(i,!!o.multiple,o.multiple?[]:"",!1))}i[ns]=o}catch(g){Ke(t,t.return,g)}}break;case 6:if(on(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Ke(t,t.return,g)}}break;case 3:if(on(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zo(e.containerInfo)}catch(g){Ke(t,t.return,g)}break;case 4:on(e,t),wn(t);break;case 13:on(e,t),wn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Dd=Xe())),r&4&&gm(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(f=vt)||d,on(e,t),vt=f):on(e,t),wn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Fo(4,p,p.return);break;case 1:gi(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(g){Ke(r,n,g)}}break;case 5:gi(p,p.return);break;case 22:if(p.memoizedState!==null){vm(h);continue}}m!==null?(m.return=p,ie=m):vm(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=p0("display",s))}catch(g){Ke(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(g){Ke(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:on(e,t),wn(t),r&4&&gm(t);break;case 21:break;default:on(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(O_(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jo(i,""),r.flags&=-33);var o=mm(t);Yc(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=mm(t);Kc(t,a,s);break;default:throw Error(Q(161))}}catch(c){Ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jE(t,e,n){ie=t,G_(t)}function G_(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Xs;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||vt;a=Xs;var f=vt;if(Xs=s,(vt=c)&&!f)for(ie=i;ie!==null;)s=ie,c=s.child,s.tag===22&&s.memoizedState!==null?_m(i):c!==null?(c.return=s,ie=c):_m(i);for(;o!==null;)ie=o,G_(o),o=o.sibling;ie=i,Xs=a,vt=f}ym(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ie=o):ym(t)}}function ym(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&tm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tm(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}vt||e.flags&512&&Jc(e)}catch(p){Ke(e,e.return,p)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function vm(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function _m(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ll(4,e)}catch(c){Ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ke(e,i,c)}}var o=e.return;try{Jc(e)}catch(c){Ke(e,o,c)}break;case 5:var s=e.return;try{Jc(e)}catch(c){Ke(e,s,c)}}}catch(c){Ke(e,e.return,c)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var e1=Math.ceil,sl=Wn.ReactCurrentDispatcher,Md=Wn.ReactCurrentOwner,en=Wn.ReactCurrentBatchConfig,Ce=0,ot=null,Ze=null,ft=0,Ut=0,yi=_r(0),tt=0,ls=null,zr=0,Fl=0,Nd=0,Vo=null,Rt=null,Dd=0,zi=1/0,Dn=null,al=!1,Xc=null,cr=null,Zs=!1,ir=null,ll=0,Uo=0,Zc=null,Aa=-1,Pa=0;function St(){return Ce&6?Xe():Aa!==-1?Aa:Aa=Xe()}function fr(t){return t.mode&1?Ce&2&&ft!==0?ft&-ft:VE.transition!==null?(Pa===0&&(Pa=P0()),Pa):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:b0(t.type)),t):1}function mn(t,e,n,r){if(50<Uo)throw Uo=0,Zc=null,Error(Q(185));vs(t,n,r),(!(Ce&2)||t!==ot)&&(t===ot&&(!(Ce&2)&&(Fl|=n),tt===4&&nr(t,ft)),bt(t,r),n===1&&Ce===0&&!(e.mode&1)&&(zi=Xe()+500,Nl&&wr()))}function bt(t,e){var n=t.callbackNode;VS(t,e);var r=Wa(t,t===ot?ft:0);if(r===0)n!==null&&Ip(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ip(n),e===1)t.tag===0?FE(wm.bind(null,t)):j0(wm.bind(null,t)),NE(function(){!(Ce&6)&&wr()}),n=null;else{switch(I0(r)){case 1:n=od;break;case 4:n=E0;break;case 16:n=Ha;break;case 536870912:n=A0;break;default:n=Ha}n=Z_(n,H_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H_(t,e){if(Aa=-1,Pa=0,Ce&6)throw Error(Q(327));var n=t.callbackNode;if(Ri()&&t.callbackNode!==n)return null;var r=Wa(t,t===ot?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ul(t,r);else{e=r;var i=Ce;Ce|=2;var o=q_();(ot!==t||ft!==e)&&(Dn=null,zi=Xe()+500,Fr(t,e));do try{r1();break}catch(a){W_(t,a)}while(!0);vd(),sl.current=o,Ce=i,Ze!==null?e=0:(ot=null,ft=0,e=tt)}if(e!==0){if(e===2&&(i=Sc(t),i!==0&&(r=i,e=Qc(t,i))),e===1)throw n=ls,Fr(t,0),nr(t,r),bt(t,Xe()),n;if(e===6)nr(t,r);else{if(i=t.current.alternate,!(r&30)&&!t1(i)&&(e=ul(t,r),e===2&&(o=Sc(t),o!==0&&(r=o,e=Qc(t,o))),e===1))throw n=ls,Fr(t,0),nr(t,r),bt(t,Xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Pr(t,Rt,Dn);break;case 3:if(nr(t,r),(r&130023424)===r&&(e=Dd+500-Xe(),10<e)){if(Wa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nc(Pr.bind(null,t,Rt,Dn),e);break}Pr(t,Rt,Dn);break;case 4:if(nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-pn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*e1(r/1960))-r,10<r){t.timeoutHandle=Nc(Pr.bind(null,t,Rt,Dn),r);break}Pr(t,Rt,Dn);break;case 5:Pr(t,Rt,Dn);break;default:throw Error(Q(329))}}}return bt(t,Xe()),t.callbackNode===n?H_.bind(null,t):null}function Qc(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(Fr(t,e).flags|=256),t=ul(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&jc(e)),t}function jc(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function t1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!yn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nr(t,e){for(e&=~Nd,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),r=1<<n;t[n]=-1,e&=~r}}function wm(t){if(Ce&6)throw Error(Q(327));Ri();var e=Wa(t,0);if(!(e&1))return bt(t,Xe()),null;var n=ul(t,e);if(t.tag!==0&&n===2){var r=Sc(t);r!==0&&(e=r,n=Qc(t,r))}if(n===1)throw n=ls,Fr(t,0),nr(t,e),bt(t,Xe()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pr(t,Rt,Dn),bt(t,Xe()),null}function bd(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(zi=Xe()+500,Nl&&wr())}}function Gr(t){ir!==null&&ir.tag===0&&!(Ce&6)&&Ri();var e=Ce;Ce|=1;var n=en.transition,r=Ee;try{if(en.transition=null,Ee=1,t)return t()}finally{Ee=r,en.transition=n,Ce=e,!(Ce&6)&&wr()}}function Ld(){Ut=yi.current,be(yi)}function Fr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ME(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xa();break;case 3:Oi(),be(Nt),be(Ct),Sd();break;case 5:Td(r);break;case 4:Oi();break;case 13:be($e);break;case 19:be($e);break;case 10:_d(r.type._context);break;case 22:case 23:Ld()}n=n.return}if(ot=t,Ze=t=dr(t.current,null),ft=Ut=e,tt=0,ls=null,Nd=Fl=zr=0,Rt=Vo=null,Nr!==null){for(e=0;e<Nr.length;e++)if(n=Nr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Nr=null}return t}function W_(t,e){do{var n=Ze;try{if(vd(),Ta.current=ol,il){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}il=!1}if($r=0,it=et=Ge=null,Lo=!1,os=0,Md.current=null,n===null||n.return===null){tt=1,ls=e,Ze=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=ft,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=am(s);if(m!==null){m.flags&=-257,lm(m,s,a,o,e),m.mode&1&&sm(o,f,e),e=m,c=f;var _=e.updateQueue;if(_===null){var g=new Set;g.add(c),e.updateQueue=g}else _.add(c);break e}else{if(!(e&1)){sm(o,f,e),Fd();break e}c=Error(Q(426))}}else if(Ve&&a.mode&1){var C=am(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),lm(C,s,a,o,e),gd($i(c,a));break e}}o=c=$i(c,a),tt!==4&&(tt=2),Vo===null?Vo=[o]:Vo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=I_(o,c,e);em(o,v);break e;case 1:a=c;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cr===null||!cr.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=k_(o,a,e);em(o,E);break e}}o=o.return}while(o!==null)}K_(n)}catch(A){e=A,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function q_(){var t=sl.current;return sl.current=ol,t===null?ol:t}function Fd(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(zr&268435455)&&!(Fl&268435455)||nr(ot,ft)}function ul(t,e){var n=Ce;Ce|=2;var r=q_();(ot!==t||ft!==e)&&(Dn=null,Fr(t,e));do try{n1();break}catch(i){W_(t,i)}while(!0);if(vd(),Ce=n,sl.current=r,Ze!==null)throw Error(Q(261));return ot=null,ft=0,tt}function n1(){for(;Ze!==null;)J_(Ze)}function r1(){for(;Ze!==null&&!IS();)J_(Ze)}function J_(t){var e=X_(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?K_(t):Ze=e,Md.current=null}function K_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XE(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ze=null;return}}else if(n=YE(n,e,Ut),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);tt===0&&(tt=5)}function Pr(t,e,n){var r=Ee,i=en.transition;try{en.transition=null,Ee=1,i1(t,e,n,r)}finally{en.transition=i,Ee=r}return null}function i1(t,e,n,r){do Ri();while(ir!==null);if(Ce&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(US(t,o),t===ot&&(Ze=ot=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zs||(Zs=!0,Z_(Ha,function(){return Ri(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=en.transition,en.transition=null;var s=Ee;Ee=1;var a=Ce;Ce|=4,Md.current=null,QE(t,n),z_(n,t),SE(Rc),qa=!!kc,Rc=kc=null,t.current=n,jE(n),kS(),Ce=a,Ee=s,en.transition=o}else t.current=n;if(Zs&&(Zs=!1,ir=t,ll=i),o=t.pendingLanes,o===0&&(cr=null),NS(n.stateNode),bt(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(al)throw al=!1,t=Xc,Xc=null,t;return ll&1&&t.tag!==0&&Ri(),o=t.pendingLanes,o&1?t===Zc?Uo++:(Uo=0,Zc=t):Uo=0,wr(),null}function Ri(){if(ir!==null){var t=I0(ll),e=en.transition,n=Ee;try{if(en.transition=null,Ee=16>t?16:t,ir===null)var r=!1;else{if(t=ir,ir=null,ll=0,Ce&6)throw Error(Q(331));var i=Ce;for(Ce|=4,ie=t.current;ie!==null;){var o=ie,s=o.child;if(ie.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(ie=f;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:Fo(8,d,o)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var p=d.sibling,m=d.return;if(B_(d),d===f){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var _=o.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}ie=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ie=s;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Fo(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ie=v;break e}ie=o.return}}var y=t.current;for(ie=y;ie!==null;){s=ie;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,ie=w;else e:for(s=y;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ll(9,a)}}catch(A){Ke(a,a.return,A)}if(a===s){ie=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ie=E;break e}ie=a.return}}if(Ce=i,wr(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Pl,t)}catch{}r=!0}return r}finally{Ee=n,en.transition=e}}return!1}function Cm(t,e,n){e=$i(n,e),e=I_(t,e,1),t=ur(t,e,1),e=St(),t!==null&&(vs(t,1,e),bt(t,e))}function Ke(t,e,n){if(t.tag===3)Cm(t,t,n);else for(;e!==null;){if(e.tag===3){Cm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=$i(n,t),t=k_(e,t,1),e=ur(e,t,1),t=St(),e!==null&&(vs(e,1,t),bt(e,t));break}}e=e.return}}function o1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ft&n)===n&&(tt===4||tt===3&&(ft&130023424)===ft&&500>Xe()-Dd?Fr(t,0):Nd|=n),bt(t,e)}function Y_(t,e){e===0&&(t.mode&1?(e=$s,$s<<=1,!($s&130023424)&&($s=4194304)):e=1);var n=St();t=zn(t,e),t!==null&&(vs(t,e,n),bt(t,n))}function s1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Y_(t,n)}function a1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),Y_(t,n)}var X_;X_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)Mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mt=!1,KE(t,e,n);Mt=!!(t.flags&131072)}else Mt=!1,Ve&&e.flags&1048576&&e_(e,ja,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ea(t,e),t=e.pendingProps;var i=Vi(e,Ct.current);ki(e,n),i=Ad(null,e,r,t,i,n);var o=Pd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(o=!0,Za(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cd(e),i.updater=bl,e.stateNode=i,i._reactInternals=e,Bc(e,r,t,n),e=zc(null,e,r,!0,o,n)):(e.tag=0,Ve&&o&&pd(e),Tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=u1(r),t=ln(r,t),i){case 0:e=$c(null,e,r,t,n);break e;case 1:e=fm(null,e,r,t,n);break e;case 11:e=um(null,e,r,t,n);break e;case 14:e=cm(null,e,r,ln(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),$c(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),fm(t,e,r,i,n);case 3:e:{if(D_(e),t===null)throw Error(Q(387));r=e.pendingProps,o=e.memoizedState,i=o.element,s_(t,e),nl(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=$i(Error(Q(423)),e),e=dm(t,e,r,n,i);break e}else if(r!==i){i=$i(Error(Q(424)),e),e=dm(t,e,r,n,i);break e}else for(Bt=lr(e.stateNode.containerInfo.firstChild),Ot=e,Ve=!0,fn=null,n=i_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ui(),r===i){e=Gn(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return a_(e),t===null&&Fc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Mc(r,i)?s=null:o!==null&&Mc(r,o)&&(e.flags|=32),N_(t,e),Tt(t,e,s,n),e.child;case 6:return t===null&&Fc(e),null;case 13:return b_(t,e,n);case 4:return xd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),um(t,e,r,i,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Re(el,r._currentValue),r._currentValue=s,o!==null)if(yn(o.value,s)){if(o.children===i.children&&!Nt.current){e=Gn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Vn(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Vc(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Q(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Vc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ki(e,n),i=nn(i),r=r(i),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),cm(t,e,r,i,n);case 15:return R_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Ea(t,e),e.tag=1,Dt(r)?(t=!0,Za(e)):t=!1,ki(e,n),P_(e,r,i),Bc(e,r,i,n),zc(null,e,r,!0,t,n);case 19:return L_(t,e,n);case 22:return M_(t,e,n)}throw Error(Q(156,e.tag))};function Z_(t,e){return S0(t,e)}function l1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,r){return new l1(t,e,n,r)}function Vd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u1(t){if(typeof t=="function")return Vd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nd)return 11;if(t===rd)return 14}return 2}function dr(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ia(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Vd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ai:return Vr(n.children,i,o,e);case td:s=8,i|=8;break;case uc:return t=Zt(12,n,e,i|2),t.elementType=uc,t.lanes=o,t;case cc:return t=Zt(13,n,e,i),t.elementType=cc,t.lanes=o,t;case fc:return t=Zt(19,n,e,i),t.elementType=fc,t.lanes=o,t;case a0:return Vl(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o0:s=10;break e;case s0:s=9;break e;case nd:s=11;break e;case rd:s=14;break e;case jn:s=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Zt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Vr(t,e,n,r){return t=Zt(7,t,r,e),t.lanes=n,t}function Vl(t,e,n,r){return t=Zt(22,t,r,e),t.elementType=a0,t.lanes=n,t.stateNode={isHidden:!1},t}function bu(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function Lu(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ud(t,e,n,r,i,o,s,a,c){return t=new c1(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Zt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cd(o),t}function f1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Q_(t){if(!t)return mr;t=t._reactInternals;e:{if(Jr(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Q0(t,n,e)}return e}function j_(t,e,n,r,i,o,s,a,c){return t=Ud(n,r,!0,t,i,o,s,a,c),t.context=Q_(null),n=t.current,r=St(),i=fr(n),o=Vn(r,i),o.callback=e??null,ur(n,o,i),t.current.lanes=i,vs(t,i,r),bt(t,r),t}function Ul(t,e,n,r){var i=e.current,o=St(),s=fr(i);return n=Q_(n),e.context===null?e.context=n:e.pendingContext=n,e=Vn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ur(i,e,s),t!==null&&(mn(t,i,s,o),xa(t,i,s)),s}function cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bd(t,e){xm(t,e),(t=t.alternate)&&xm(t,e)}function d1(){return null}var ew=typeof reportError=="function"?reportError:function(t){console.error(t)};function Od(t){this._internalRoot=t}Bl.prototype.render=Od.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Ul(t,e,null,null)};Bl.prototype.unmount=Od.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gr(function(){Ul(null,t,null,null)}),e[$n]=null}};function Bl(t){this._internalRoot=t}Bl.prototype.unstable_scheduleHydration=function(t){if(t){var e=M0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tr.length&&e!==0&&e<tr[n].priority;n++);tr.splice(n,0,t),n===0&&D0(t)}};function $d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tm(){}function h1(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=cl(s);o.call(f)}}var s=j_(e,r,t,0,null,!1,!1,"",Tm);return t._reactRootContainer=s,t[$n]=s.current,es(t.nodeType===8?t.parentNode:t),Gr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=cl(c);a.call(f)}}var c=Ud(t,0,!1,null,null,!1,!1,"",Tm);return t._reactRootContainer=c,t[$n]=c.current,es(t.nodeType===8?t.parentNode:t),Gr(function(){Ul(e,c,n,r)}),c}function $l(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=cl(s);a.call(c)}}Ul(e,s,t,i)}else s=h1(n,e,t,i,r);return cl(s)}k0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yo(e.pendingLanes);n!==0&&(sd(e,n|1),bt(e,Xe()),!(Ce&6)&&(zi=Xe()+500,wr()))}break;case 13:Gr(function(){var r=zn(t,1);if(r!==null){var i=St();mn(r,t,1,i)}}),Bd(t,1)}};ad=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=St();mn(e,t,134217728,n)}Bd(t,134217728)}};R0=function(t){if(t.tag===13){var e=fr(t),n=zn(t,e);if(n!==null){var r=St();mn(n,t,e,r)}Bd(t,e)}};M0=function(){return Ee};N0=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Cc=function(t,e,n){switch(e){case"input":if(pc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ml(r);if(!i)throw Error(Q(90));u0(r),pc(r,i)}}}break;case"textarea":f0(t,n);break;case"select":e=n.value,e!=null&&Ei(t,!!n.multiple,e,!1)}};v0=bd;_0=Gr;var p1={usingClientEntryPoint:!1,Events:[ws,fi,Ml,g0,y0,bd]},fo={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m1={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x0(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||d1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qs.isDisabled&&Qs.supportsFiber)try{Pl=Qs.inject(m1),Pn=Qs}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p1;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(e))throw Error(Q(200));return f1(t,e,null,n)};Ht.createRoot=function(t,e){if(!$d(t))throw Error(Q(299));var n=!1,r="",i=ew;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ud(t,1,!1,null,null,n,!1,r,i),t[$n]=e.current,es(t.nodeType===8?t.parentNode:t),new Od(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=x0(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return Gr(t)};Ht.hydrate=function(t,e,n){if(!Ol(e))throw Error(Q(200));return $l(null,t,e,!0,n)};Ht.hydrateRoot=function(t,e,n){if(!$d(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=ew;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=j_(e,null,t,1,n??null,i,!1,o,s),t[$n]=e.current,es(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bl(e)};Ht.render=function(t,e,n){if(!Ol(e))throw Error(Q(200));return $l(null,t,e,!1,n)};Ht.unmountComponentAtNode=function(t){if(!Ol(t))throw Error(Q(40));return t._reactRootContainer?(Gr(function(){$l(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ht.unstable_batchedUpdates=bd;Ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ol(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return $l(t,e,n,!1,r)};Ht.version="18.3.1-next-f1338f8080-20240426";function tw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tw)}catch(t){console.error(t)}}tw(),t0.exports=Ht;var g1=t0.exports,Sm=g1;ac.createRoot=Sm.createRoot,ac.hydrateRoot=Sm.hydrateRoot;function js(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nw={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,o){function s(f,d){if(!i[f]){if(!r[f]){var h=typeof js=="function"&&js;if(!d&&h)return h(f,!0);if(a)return a(f,!0);var p=new Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[f]={exports:{}};r[f][0].call(m.exports,function(_){var g=r[f][1][_];return s(g||_)},m,m.exports,n,r,i,o)}return i[f].exports}for(var a=typeof js=="function"&&js,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(n,r,i){var o=n("./utils"),s=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var f,d,h,p,m,_,g,C=[],v=0,y=c.length,w=y,E=o.getTypeOf(c)!=="string";v<c.length;)w=y-v,h=E?(f=c[v++],d=v<y?c[v++]:0,v<y?c[v++]:0):(f=c.charCodeAt(v++),d=v<y?c.charCodeAt(v++):0,v<y?c.charCodeAt(v++):0),p=f>>2,m=(3&f)<<4|d>>4,_=1<w?(15&d)<<2|h>>6:64,g=2<w?63&h:64,C.push(a.charAt(p)+a.charAt(m)+a.charAt(_)+a.charAt(g));return C.join("")},i.decode=function(c){var f,d,h,p,m,_,g=0,C=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&w--,c.charAt(c.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=s.uint8array?new Uint8Array(0|w):new Array(0|w);g<c.length;)f=a.indexOf(c.charAt(g++))<<2|(p=a.indexOf(c.charAt(g++)))>>4,d=(15&p)<<4|(m=a.indexOf(c.charAt(g++)))>>2,h=(3&m)<<6|(_=a.indexOf(c.charAt(g++))),y[C++]=f,m!==64&&(y[C++]=d),_!==64&&(y[C++]=h);return y}},{"./support":30,"./utils":32}],2:[function(n,r,i){var o=n("./external"),s=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function f(d,h,p,m,_){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=m,this.compressedContent=_}f.prototype={getContentWorker:function(){var d=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(d,h,p){return d.pipe(new a).pipe(new c("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var o=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var o=n("./utils"),s=function(){for(var a,c=[],f=0;f<256;f++){a=f;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;c[f]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(f,d,h,p){var m=s,_=p+h;f^=-1;for(var g=p;g<_;g++)f=f>>>8^m[255&(f^d[g])];return-1^f}(0|c,a,a.length,0):function(f,d,h,p){var m=s,_=p+h;f^=-1;for(var g=p;g<_;g++)f=f>>>8^m[255&(f^d.charCodeAt(g))];return-1^f}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),f=o?"uint8array":"array";function d(h,p){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function o(m,_){var g,C="";for(g=0;g<_;g++)C+=String.fromCharCode(255&m),m>>>=8;return C}function s(m,_,g,C,v,y){var w,E,A=m.file,k=m.compression,I=y!==f.utf8encode,N=a.transformTo("string",y(A.name)),D=a.transformTo("string",f.utf8encode(A.name)),b=A.comment,G=a.transformTo("string",y(b)),M=a.transformTo("string",f.utf8encode(b)),O=D.length!==A.name.length,S=M.length!==b.length,z="",ae="",q="",J=A.dir,B=A.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};_&&!g||(Z.crc32=m.crc32,Z.compressedSize=m.compressedSize,Z.uncompressedSize=m.uncompressedSize);var V=0;_&&(V|=8),I||!O&&!S||(V|=2048);var F=0,oe=0;J&&(F|=16),v==="UNIX"?(oe=798,F|=function(te,xe){var Fe=te;return te||(Fe=xe?16893:33204),(65535&Fe)<<16}(A.unixPermissions,J)):(oe=20,F|=function(te){return 63&(te||0)}(A.dosPermissions)),w=B.getUTCHours(),w<<=6,w|=B.getUTCMinutes(),w<<=5,w|=B.getUTCSeconds()/2,E=B.getUTCFullYear()-1980,E<<=4,E|=B.getUTCMonth()+1,E<<=5,E|=B.getUTCDate(),O&&(ae=o(1,1)+o(d(N),4)+D,z+="up"+o(ae.length,2)+ae),S&&(q=o(1,1)+o(d(G),4)+M,z+="uc"+o(q.length,2)+q);var ne="";return ne+=`
\0`,ne+=o(V,2),ne+=k.magic,ne+=o(w,2),ne+=o(E,2),ne+=o(Z.crc32,4),ne+=o(Z.compressedSize,4),ne+=o(Z.uncompressedSize,4),ne+=o(N.length,2),ne+=o(z.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ne+N+z,dirRecord:h.CENTRAL_FILE_HEADER+o(oe,2)+ne+o(G.length,2)+"\0\0\0\0"+o(F,4)+o(C,4)+N+z+G}}var a=n("../utils"),c=n("../stream/GenericWorker"),f=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(m,_,g,C){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=g,this.encodeFileName=C,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,c),p.prototype.push=function(m){var _=m.meta.percent||0,g=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(_+100*(g-C-1))/g:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var g=s(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,g=s(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),_)this.push({data:function(C){return h.DATA_DESCRIPTOR+o(C.crc32,4)+o(C.compressedSize,4)+o(C.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var g=this.bytesWritten-m,C=function(v,y,w,E,A){var k=a.transformTo("string",A(E));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(v,2)+o(v,2)+o(y,4)+o(w,4)+o(k.length,2)+k}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(g){_.processChunk(g)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(g){_.error(g)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var _=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var g=0;g<_.length;g++)try{_[g].error(m)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var o=n("../compressions"),s=n("./ZipFileWorker");i.generateWorker=function(a,c,f){var d=new s(c.streamFiles,f,c.platform,c.encodeFileName),h=0;try{a.forEach(function(p,m){h++;var _=function(y,w){var E=y||w,A=o[E];if(!A)throw new Error(E+" is not a valid compression method !");return A}(m.options.compression,c.compression),g=m.options.compressionOptions||c.compressionOptions||{},C=m.dir,v=m.date;m._compressWorker(_,g).withStreamInfo("file",{name:p,dir:C,date:v,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var o=n("./utils"),s=n("./external"),a=n("./utf8"),c=n("./zipEntries"),f=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new s.Promise(function(m,_){var g=p.decompressed.getContentWorker().pipe(new f);g.on("error",function(C){_(C)}).on("end",function(){g.streamInfo.crc32!==p.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var _=this;return m=o.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(p)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(g){var C=new c(m);return C.load(g),C}).then(function(g){var C=[s.Promise.resolve(g)],v=g.files;if(m.checkCRC32)for(var y=0;y<v.length;y++)C.push(h(v[y]));return s.Promise.all(C)}).then(function(g){for(var C=g.shift(),v=C.files,y=0;y<v.length;y++){var w=v[y],E=w.fileNameStr,A=o.resolve(w.fileNameStr);_.file(A,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:m.createFolders}),w.dir||(_.file(A).unsafeOriginalName=E)}return C.zipComment.length&&(_.comment=C.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var o=n("../utils"),s=n("../stream/GenericWorker");function a(c,f){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(a,s),a.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(d){f.push({data:d,meta:{percent:0}})}).on("error",function(d){f.isPaused?this.generatedError=d:f.error(d)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var o=n("readable-stream").Readable;function s(a,c,f){o.call(this,c),this._helper=a;var d=this;a.on("data",function(h,p){d.push(h)||d._helper.pause(),f&&f(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,i){function o(A,k,I){var N,D=a.getTypeOf(k),b=a.extend(I||{},d);b.date=b.date||new Date,b.compression!==null&&(b.compression=b.compression.toUpperCase()),typeof b.unixPermissions=="string"&&(b.unixPermissions=parseInt(b.unixPermissions,8)),b.unixPermissions&&16384&b.unixPermissions&&(b.dir=!0),b.dosPermissions&&16&b.dosPermissions&&(b.dir=!0),b.dir&&(A=v(A)),b.createFolders&&(N=C(A))&&y.call(this,N,!0);var G=D==="string"&&b.binary===!1&&b.base64===!1;I&&I.binary!==void 0||(b.binary=!G),(k instanceof h&&k.uncompressedSize===0||b.dir||!k||k.length===0)&&(b.base64=!1,b.binary=!0,k="",b.compression="STORE",D="string");var M=null;M=k instanceof h||k instanceof c?k:_.isNode&&_.isStream(k)?new g(A,k):a.prepareContent(A,k,b.binary,b.optimizedBinaryString,b.base64);var O=new p(A,M,b);this.files[A]=O}var s=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),C=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var k=A.lastIndexOf("/");return 0<k?A.substring(0,k):""},v=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},y=function(A,k){return k=k!==void 0?k:d.createFolders,A=v(A),this.files[A]||o.call(this,A,null,{dir:!0,createFolders:k}),this.files[A]};function w(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var k,I,N;for(k in this.files)N=this.files[k],(I=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&A(I,N)},filter:function(A){var k=[];return this.forEach(function(I,N){A(I,N)&&k.push(N)}),k},file:function(A,k,I){if(arguments.length!==1)return A=this.root+A,o.call(this,A,k,I),this;if(w(A)){var N=A;return this.filter(function(b,G){return!G.dir&&N.test(b)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(w(A))return this.filter(function(D,b){return b.dir&&A.test(D)});var k=this.root+A,I=y.call(this,k),N=this.clone();return N.root=I.name,N},remove:function(A){A=this.root+A;var k=this.files[A];if(k||(A.slice(-1)!=="/"&&(A+="/"),k=this.files[A]),k&&!k.dir)delete this.files[A];else for(var I=this.filter(function(D,b){return b.name.slice(0,A.length)===A}),N=0;N<I.length;N++)delete this.files[I[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var k,I={};try{if((I=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var N=I.comment||this.comment||"";k=m.generateWorker(this,I,N)}catch(D){(k=new c("error")).error(D)}return new f(k,I.type||"string",I.mimeType)},generateAsync:function(A,k){return this.generateInternalStream(A).accumulate(k)},generateNodeStream:function(A,k){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(k)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var o=n("./DataReader");function s(a){o.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),f=a.charCodeAt(1),d=a.charCodeAt(2),h=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===f&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),f=a.charCodeAt(1),d=a.charCodeAt(2),h=a.charCodeAt(3),p=this.readData(4);return c===p[0]&&f===p[1]&&d===p[2]&&h===p[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var o=n("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,f=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=a,f},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,i){var o=n("./Uint8ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var o=n("./DataReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var o=n("./ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var o=n("../utils"),s=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),f=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=o.getTypeOf(h);return o.checkSupport(p),p!=="string"||s.uint8array?p==="nodebuffer"?new f(h):s.uint8array?new d(o.transformTo("uint8array",h)):new a(o.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var o=n("./GenericWorker"),s=n("../utils");function a(c){o.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(a,o),a.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var o=n("./GenericWorker"),s=n("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,o),a.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var o=n("../utils"),s=n("./GenericWorker");function a(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(a,s),a.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}s.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var o=n("../utils"),s=n("./GenericWorker");function a(c){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){f.dataIsReady=!0,f.data=d,f.max=d&&d.length||0,f.type=o.getTypeOf(d),f.isPaused||f._tickAndRepeat()},function(d){f.error(d)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(c){a.processChunk(c)}),s.on("end",function(){a.end()}),s.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=o},{}],29:[function(n,r,i){var o=n("../utils"),s=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),f=n("../support"),d=n("../external"),h=null;if(f.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(_,g){return new d.Promise(function(C,v){var y=[],w=_._internalType,E=_._outputType,A=_._mimeType;_.on("data",function(k,I){y.push(k),g&&g(I)}).on("error",function(k){y=[],v(k)}).on("end",function(){try{var k=function(I,N,D){switch(I){case"blob":return o.newBlob(o.transformTo("arraybuffer",N),D);case"base64":return c.encode(N);default:return o.transformTo(I,N)}}(E,function(I,N){var D,b=0,G=null,M=0;for(D=0;D<N.length;D++)M+=N[D].length;switch(I){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(G=new Uint8Array(M),D=0;D<N.length;D++)G.set(N[D],b),b+=N[D].length;return G;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+I+"'")}}(w,y),A);C(k)}catch(I){v(I)}y=[]}).resume()})}function m(_,g,C){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=C,o.checkSupport(v),this._worker=_.pipe(new s(v)),_.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(_){return p(this,_)},on:function(_,g){var C=this;return _==="data"?this._worker.on(_,function(v){g.call(C,v.data,v.meta)}):this._worker.on(_,function(){o.delay(g,arguments,C)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var o=n("./utils"),s=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),f=new Array(256),d=0;d<256;d++)f[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;f[254]=f[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}i.utf8encode=function(m){return s.nodebuffer?a.newBufferFrom(m,"utf-8"):function(_){var g,C,v,y,w,E=_.length,A=0;for(y=0;y<E;y++)(64512&(C=_.charCodeAt(y)))==55296&&y+1<E&&(64512&(v=_.charCodeAt(y+1)))==56320&&(C=65536+(C-55296<<10)+(v-56320),y++),A+=C<128?1:C<2048?2:C<65536?3:4;for(g=s.uint8array?new Uint8Array(A):new Array(A),y=w=0;w<A;y++)(64512&(C=_.charCodeAt(y)))==55296&&y+1<E&&(64512&(v=_.charCodeAt(y+1)))==56320&&(C=65536+(C-55296<<10)+(v-56320),y++),C<128?g[w++]=C:(C<2048?g[w++]=192|C>>>6:(C<65536?g[w++]=224|C>>>12:(g[w++]=240|C>>>18,g[w++]=128|C>>>12&63),g[w++]=128|C>>>6&63),g[w++]=128|63&C);return g}(m)},i.utf8decode=function(m){return s.nodebuffer?o.transformTo("nodebuffer",m).toString("utf-8"):function(_){var g,C,v,y,w=_.length,E=new Array(2*w);for(g=C=0;g<w;)if((v=_[g++])<128)E[C++]=v;else if(4<(y=f[v]))E[C++]=65533,g+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&g<w;)v=v<<6|63&_[g++],y--;1<y?E[C++]=65533:v<65536?E[C++]=v:(v-=65536,E[C++]=55296|v>>10&1023,E[C++]=56320|1023&v)}return E.length!==C&&(E.subarray?E=E.subarray(0,C):E.length=C),o.applyFromCharCode(E)}(m=o.transformTo(s.uint8array?"uint8array":"array",m))},o.inherits(h,c),h.prototype.processChunk=function(m){var _=o.transformTo(s.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=_;(_=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),_.set(g,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var C=function(y,w){var E;for((w=w||y.length)>y.length&&(w=y.length),E=w-1;0<=E&&(192&y[E])==128;)E--;return E<0||E===0?w:E+f[y[E]]>w?E:w}(_),v=_;C!==_.length&&(s.uint8array?(v=_.subarray(0,C),this.leftOver=_.subarray(C,_.length)):(v=_.slice(0,C),this.leftOver=_.slice(C,_.length))),this.push({data:i.utf8decode(v),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,o.inherits(p,c),p.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var o=n("./support"),s=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function f(g){return g}function d(g,C){for(var v=0;v<g.length;++v)C[v]=255&g.charCodeAt(v);return C}n("setimmediate"),i.newBlob=function(g,C){i.checkSupport("blob");try{return new Blob([g],{type:C})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,C,v){var y=[],w=0,E=g.length;if(E<=v)return String.fromCharCode.apply(null,g);for(;w<E;)C==="array"||C==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+v,E)))):y.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+v,E)))),w+=v;return y.join("")},stringifyByChar:function(g){for(var C="",v=0;v<g.length;v++)C+=String.fromCharCode(g[v]);return C},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(g){var C=65536,v=i.getTypeOf(g),y=!0;if(v==="uint8array"?y=h.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=h.applyCanBeUsed.nodebuffer),y)for(;1<C;)try{return h.stringifyByChunk(g,v,C)}catch{C=Math.floor(C/2)}return h.stringifyByChar(g)}function m(g,C){for(var v=0;v<g.length;v++)C[v]=g[v];return C}i.applyFromCharCode=p;var _={};_.string={string:f,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return _.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,a.allocBuffer(g.length))}},_.array={string:p,array:f,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},_.arraybuffer={string:function(g){return p(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:f,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},_.uint8array={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:f,nodebuffer:function(g){return a.newBufferFrom(g)}},_.nodebuffer={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return _.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:f},i.transformTo=function(g,C){if(C=C||"",!g)return C;i.checkSupport(g);var v=i.getTypeOf(C);return _[v][g](C)},i.resolve=function(g){for(var C=g.split("/"),v=[],y=0;y<C.length;y++){var w=C[y];w==="."||w===""&&y!==0&&y!==C.length-1||(w===".."?v.pop():v.push(w))}return v.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var C,v,y="";for(v=0;v<(g||"").length;v++)y+="\\x"+((C=g.charCodeAt(v))<16?"0":"")+C.toString(16).toUpperCase();return y},i.delay=function(g,C,v){setImmediate(function(){g.apply(v||null,C||[])})},i.inherits=function(g,C){function v(){}v.prototype=C.prototype,g.prototype=new v},i.extend=function(){var g,C,v={};for(g=0;g<arguments.length;g++)for(C in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],C)&&v[C]===void 0&&(v[C]=arguments[g][C]);return v},i.prepareContent=function(g,C,v,y,w){return c.Promise.resolve(C).then(function(E){return o.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,k){var I=new FileReader;I.onload=function(N){A(N.target.result)},I.onerror=function(N){k(N.target.error)},I.readAsArrayBuffer(E)}):E}).then(function(E){var A=i.getTypeOf(E);return A?(A==="arraybuffer"?E=i.transformTo("uint8array",E):A==="string"&&(w?E=s.decode(E):v&&y!==!0&&(E=function(k){return d(k,o.uint8array?new Uint8Array(k.length):new Array(k.length))}(E))),E):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./signature"),c=n("./zipEntry"),f=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(p)+", expected "+s.pretty(h)+")")}},isSignature:function(h,p){var m=this.reader.index;this.reader.setIndex(h);var _=this.reader.readString(4)===p;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=f.uint8array?"uint8array":"array",m=s.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,m,_=this.zip64EndOfCentralSize-44;0<_;)h=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=p-m;if(0<_)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),f=n("./utf8"),d=n("./compressions"),h=n("./support");function p(m,_){this.options=m,this.loadOptions=_}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(C){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===C)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,g,C,v=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<v;)_=m.readInt(2),g=m.readInt(2),C=m.readData(g),this.extraFields[_]={id:_,length:g,value:C};m.setIndex(v)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var g=s.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var v=s.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=o(m.value);return _.readInt(1)!==1||c(this.fileName)!==_.readInt(4)?null:f.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=o(m.value);return _.readInt(1)!==1||c(this.fileComment)!==_.readInt(4)?null:f.utf8decode(_.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function o(_,g,C){this.name=_,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=g,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var s=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),f=n("./compressedObject"),d=n("./stream/GenericWorker");o.prototype={internalStream:function(_){var g=null,C="string";try{if(!_)throw new Error("No output type specified.");var v=(C=_.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!v&&(g=g.pipe(new c.Utf8EncodeWorker)),!y&&v&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(w){(g=new d("error")).error(w)}return new s(g,C,"")},async:function(_,g){return this.internalStream(_).accumulate(g)},nodeStream:function(_,g){return this.internalStream(_||"nodebuffer").toNodejsStream(g)},_compressWorker:function(_,g){if(this._data instanceof f&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(C,_,g)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)o.prototype[h[m]]=p;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(o){var s,a,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var f=0,d=new c(_),h=o.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){_(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(_,0)};else{var p=new o.MessageChannel;p.port1.onmessage=_,s=function(){p.port2.postMessage(0)}}var m=[];function _(){var g,C;a=!0;for(var v=m.length;v;){for(C=m,m=[],g=-1;++g<v;)C[g]();v=m.length}a=!1}r.exports=function(g){m.push(g)!==1||a||s()}}).call(this,typeof Ls<"u"?Ls:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var o=n("immediate");function s(){}var a={},c=["REJECTED"],f=["FULFILLED"],d=["PENDING"];function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==s&&g(this,v)}function p(v,y,w){this.promise=v,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function m(v,y,w){o(function(){var E;try{E=y(w)}catch(A){return a.reject(v,A)}E===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,E)})}function _(v){var y=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof y=="function")return function(){y.apply(v,arguments)}}function g(v,y){var w=!1;function E(I){w||(w=!0,a.reject(v,I))}function A(I){w||(w=!0,a.resolve(v,I))}var k=C(function(){y(A,E)});k.status==="error"&&E(k.value)}function C(v,y){var w={};try{w.value=v(y),w.status="success"}catch(E){w.status="error",w.value=E}return w}(r.exports=h).prototype.finally=function(v){if(typeof v!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(v()).then(function(){return w})},function(w){return y.resolve(v()).then(function(){throw w})})},h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,y){if(typeof v!="function"&&this.state===f||typeof y!="function"&&this.state===c)return this;var w=new this.constructor(s);return this.state!==d?m(w,this.state===f?v:y,this.outcome):this.queue.push(new p(w,v,y)),w},p.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},p.prototype.otherCallFulfilled=function(v){m(this.promise,this.onFulfilled,v)},p.prototype.callRejected=function(v){a.reject(this.promise,v)},p.prototype.otherCallRejected=function(v){m(this.promise,this.onRejected,v)},a.resolve=function(v,y){var w=C(_,y);if(w.status==="error")return a.reject(v,w.value);var E=w.value;if(E)g(v,E);else{v.state=f,v.outcome=y;for(var A=-1,k=v.queue.length;++A<k;)v.queue[A].callFulfilled(y)}return v},a.reject=function(v,y){v.state=c,v.outcome=y;for(var w=-1,E=v.queue.length;++w<E;)v.queue[w].callRejected(y);return v},h.resolve=function(v){return v instanceof this?v:a.resolve(new this(s),v)},h.reject=function(v){var y=new this(s);return a.reject(y,v)},h.all=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=v.length,E=!1;if(!w)return this.resolve([]);for(var A=new Array(w),k=0,I=-1,N=new this(s);++I<w;)D(v[I],I);return N;function D(b,G){y.resolve(b).then(function(M){A[G]=M,++k!==w||E||(E=!0,a.resolve(N,A))},function(M){E||(E=!0,a.reject(N,M))})}},h.race=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=v.length,E=!1;if(!w)return this.resolve([]);for(var A=-1,k=new this(s);++A<w;)I=v[A],y.resolve(I).then(function(N){E||(E=!0,a.resolve(k,N))},function(N){E||(E=!0,a.reject(k,N))});var I;return k}},{immediate:36}],38:[function(n,r,i){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var o=n("./zlib/deflate"),s=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),f=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,m=0,_=8;function g(v){if(!(this instanceof g))return new g(v);this.options=s.assign({level:p,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},v||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var w=o.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==h)throw new Error(c[w]);if(y.header&&o.deflateSetHeader(this.strm,y.header),y.dictionary){var E;if(E=typeof y.dictionary=="string"?a.string2buf(y.dictionary):d.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=o.deflateSetDictionary(this.strm,E))!==h)throw new Error(c[w]);this._dict_set=!0}}function C(v,y){var w=new g(y);if(w.push(v,!0),w.err)throw w.msg||c[w.err];return w.result}g.prototype.push=function(v,y){var w,E,A=this.strm,k=this.options.chunkSize;if(this.ended)return!1;E=y===~~y?y:y===!0?4:0,typeof v=="string"?A.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?A.input=new Uint8Array(v):A.input=v,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new s.Buf8(k),A.next_out=0,A.avail_out=k),(w=o.deflate(A,E))!==1&&w!==h)return this.onEnd(w),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(A.output,A.next_out))):this.onData(s.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&w!==1);return E===4?(w=o.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===h):E!==2||(this.onEnd(h),!(A.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=g,i.deflate=C,i.deflateRaw=function(v,y){return(y=y||{}).raw=!0,C(v,y)},i.gzip=function(v,y){return(y=y||{}).gzip=!0,C(v,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var o=n("./zlib/inflate"),s=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),f=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||g&&g.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=o.inflateInit2(this.strm,C.windowBits);if(v!==c.Z_OK)throw new Error(f[v]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function _(g,C){var v=new m(C);if(v.push(g,!0),v.err)throw v.msg||f[v.err];return v.result}m.prototype.push=function(g,C){var v,y,w,E,A,k,I=this.strm,N=this.options.chunkSize,D=this.options.dictionary,b=!1;if(this.ended)return!1;y=C===~~C?C:C===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?I.input=a.binstring2buf(g):p.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(N),I.next_out=0,I.avail_out=N),(v=o.inflate(I,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(k=typeof D=="string"?a.string2buf(D):p.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,v=o.inflateSetDictionary(this.strm,k)),v===c.Z_BUF_ERROR&&b===!0&&(v=c.Z_OK,b=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&v!==c.Z_STREAM_END&&(I.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(I.output,I.next_out),E=I.next_out-w,A=a.buf2string(I.output,w),I.next_out=E,I.avail_out=N-E,E&&s.arraySet(I.output,I.output,w,E,0),this.onData(A)):this.onData(s.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(b=!0)}while((0<I.avail_in||I.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(v=o.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(I.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=m,i.inflate=_,i.inflateRaw=function(g,C){return(C=C||{}).raw=!0,_(g,C)},i.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var d=f.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},i.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var s={arraySet:function(c,f,d,h,p){if(f.subarray&&c.subarray)c.set(f.subarray(d,d+h),p);else for(var m=0;m<h;m++)c[p+m]=f[d+m]},flattenChunks:function(c){var f,d,h,p,m,_;for(f=h=0,d=c.length;f<d;f++)h+=c[f].length;for(_=new Uint8Array(h),f=p=0,d=c.length;f<d;f++)m=c[f],_.set(m,p),p+=m.length;return _}},a={arraySet:function(c,f,d,h,p){for(var m=0;m<h;m++)c[p+m]=f[d+m]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(o)},{}],42:[function(n,r,i){var o=n("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new o.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function d(h,p){if(p<65537&&(h.subarray&&a||!h.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(h,p));for(var m="",_=0;_<p;_++)m+=String.fromCharCode(h[_]);return m}c[254]=c[254]=1,i.string2buf=function(h){var p,m,_,g,C,v=h.length,y=0;for(g=0;g<v;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<v&&(64512&(_=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),g++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new o.Buf8(y),g=C=0;C<y;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<v&&(64512&(_=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),g++),m<128?p[C++]=m:(m<2048?p[C++]=192|m>>>6:(m<65536?p[C++]=224|m>>>12:(p[C++]=240|m>>>18,p[C++]=128|m>>>12&63),p[C++]=128|m>>>6&63),p[C++]=128|63&m);return p},i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var p=new o.Buf8(h.length),m=0,_=p.length;m<_;m++)p[m]=h.charCodeAt(m);return p},i.buf2string=function(h,p){var m,_,g,C,v=p||h.length,y=new Array(2*v);for(m=_=0;m<v;)if((g=h[m++])<128)y[_++]=g;else if(4<(C=c[g]))y[_++]=65533,m+=C-1;else{for(g&=C===2?31:C===3?15:7;1<C&&m<v;)g=g<<6|63&h[m++],C--;1<C?y[_++]=65533:g<65536?y[_++]=g:(g-=65536,y[_++]=55296|g>>10&1023,y[_++]=56320|1023&g)}return d(y,_)},i.utf8border=function(h,p){var m;for((p=p||h.length)>h.length&&(p=h.length),m=p-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?p:m+c[h[m]]>p?m:p}},{"./common":41}],43:[function(n,r,i){r.exports=function(o,s,a,c){for(var f=65535&o|0,d=o>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;d=d+(f=f+s[c++]|0)|0,--h;);f%=65521,d%=65521}return f|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var o=function(){for(var s,a=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;a[c]=s}return a}();r.exports=function(s,a,c,f){var d=o,h=f+c;s^=-1;for(var p=f;p<h;p++)s=s>>>8^d[255&(s^a[p])];return-1^s}},{}],46:[function(n,r,i){var o,s=n("../utils/common"),a=n("./trees"),c=n("./adler32"),f=n("./crc32"),d=n("./messages"),h=0,p=4,m=0,_=-2,g=-1,C=4,v=2,y=8,w=9,E=286,A=30,k=19,I=2*E+1,N=15,D=3,b=258,G=b+D+1,M=42,O=113,S=1,z=2,ae=3,q=4;function J(x,W){return x.msg=d[W],W}function B(x){return(x<<1)-(4<x?9:0)}function Z(x){for(var W=x.length;0<=--W;)x[W]=0}function V(x){var W=x.state,$=W.pending;$>x.avail_out&&($=x.avail_out),$!==0&&(s.arraySet(x.output,W.pending_buf,W.pending_out,$,x.next_out),x.next_out+=$,W.pending_out+=$,x.total_out+=$,x.avail_out-=$,W.pending-=$,W.pending===0&&(W.pending_out=0))}function F(x,W){a._tr_flush_block(x,0<=x.block_start?x.block_start:-1,x.strstart-x.block_start,W),x.block_start=x.strstart,V(x.strm)}function oe(x,W){x.pending_buf[x.pending++]=W}function ne(x,W){x.pending_buf[x.pending++]=W>>>8&255,x.pending_buf[x.pending++]=255&W}function te(x,W){var $,R,P=x.max_chain_length,L=x.strstart,K=x.prev_length,Y=x.nice_match,U=x.strstart>x.w_size-G?x.strstart-(x.w_size-G):0,X=x.window,j=x.w_mask,ee=x.prev,ue=x.strstart+b,Ae=X[L+K-1],ve=X[L+K];x.prev_length>=x.good_match&&(P>>=2),Y>x.lookahead&&(Y=x.lookahead);do if(X[($=W)+K]===ve&&X[$+K-1]===Ae&&X[$]===X[L]&&X[++$]===X[L+1]){L+=2,$++;do;while(X[++L]===X[++$]&&X[++L]===X[++$]&&X[++L]===X[++$]&&X[++L]===X[++$]&&X[++L]===X[++$]&&X[++L]===X[++$]&&X[++L]===X[++$]&&X[++L]===X[++$]&&L<ue);if(R=b-(ue-L),L=ue-b,K<R){if(x.match_start=W,Y<=(K=R))break;Ae=X[L+K-1],ve=X[L+K]}}while((W=ee[W&j])>U&&--P!=0);return K<=x.lookahead?K:x.lookahead}function xe(x){var W,$,R,P,L,K,Y,U,X,j,ee=x.w_size;do{if(P=x.window_size-x.lookahead-x.strstart,x.strstart>=ee+(ee-G)){for(s.arraySet(x.window,x.window,ee,ee,0),x.match_start-=ee,x.strstart-=ee,x.block_start-=ee,W=$=x.hash_size;R=x.head[--W],x.head[W]=ee<=R?R-ee:0,--$;);for(W=$=ee;R=x.prev[--W],x.prev[W]=ee<=R?R-ee:0,--$;);P+=ee}if(x.strm.avail_in===0)break;if(K=x.strm,Y=x.window,U=x.strstart+x.lookahead,X=P,j=void 0,j=K.avail_in,X<j&&(j=X),$=j===0?0:(K.avail_in-=j,s.arraySet(Y,K.input,K.next_in,j,U),K.state.wrap===1?K.adler=c(K.adler,Y,j,U):K.state.wrap===2&&(K.adler=f(K.adler,Y,j,U)),K.next_in+=j,K.total_in+=j,j),x.lookahead+=$,x.lookahead+x.insert>=D)for(L=x.strstart-x.insert,x.ins_h=x.window[L],x.ins_h=(x.ins_h<<x.hash_shift^x.window[L+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[L+D-1])&x.hash_mask,x.prev[L&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=L,L++,x.insert--,!(x.lookahead+x.insert<D)););}while(x.lookahead<G&&x.strm.avail_in!==0)}function Fe(x,W){for(var $,R;;){if(x.lookahead<G){if(xe(x),x.lookahead<G&&W===h)return S;if(x.lookahead===0)break}if($=0,x.lookahead>=D&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+D-1])&x.hash_mask,$=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),$!==0&&x.strstart-$<=x.w_size-G&&(x.match_length=te(x,$)),x.match_length>=D)if(R=a._tr_tally(x,x.strstart-x.match_start,x.match_length-D),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=D){for(x.match_length--;x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+D-1])&x.hash_mask,$=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart,--x.match_length!=0;);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else R=a._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(R&&(F(x,!1),x.strm.avail_out===0))return S}return x.insert=x.strstart<D-1?x.strstart:D-1,W===p?(F(x,!0),x.strm.avail_out===0?ae:q):x.last_lit&&(F(x,!1),x.strm.avail_out===0)?S:z}function ge(x,W){for(var $,R,P;;){if(x.lookahead<G){if(xe(x),x.lookahead<G&&W===h)return S;if(x.lookahead===0)break}if($=0,x.lookahead>=D&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+D-1])&x.hash_mask,$=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=D-1,$!==0&&x.prev_length<x.max_lazy_match&&x.strstart-$<=x.w_size-G&&(x.match_length=te(x,$),x.match_length<=5&&(x.strategy===1||x.match_length===D&&4096<x.strstart-x.match_start)&&(x.match_length=D-1)),x.prev_length>=D&&x.match_length<=x.prev_length){for(P=x.strstart+x.lookahead-D,R=a._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-D),x.lookahead-=x.prev_length-1,x.prev_length-=2;++x.strstart<=P&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+D-1])&x.hash_mask,$=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),--x.prev_length!=0;);if(x.match_available=0,x.match_length=D-1,x.strstart++,R&&(F(x,!1),x.strm.avail_out===0))return S}else if(x.match_available){if((R=a._tr_tally(x,0,x.window[x.strstart-1]))&&F(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return S}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(R=a._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<D-1?x.strstart:D-1,W===p?(F(x,!0),x.strm.avail_out===0?ae:q):x.last_lit&&(F(x,!1),x.strm.avail_out===0)?S:z}function _e(x,W,$,R,P){this.good_length=x,this.max_lazy=W,this.nice_length=$,this.max_chain=R,this.func=P}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*I),this.dyn_dtree=new s.Buf16(2*(2*A+1)),this.bl_tree=new s.Buf16(2*(2*k+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*E+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Me(x){var W;return x&&x.state?(x.total_in=x.total_out=0,x.data_type=v,(W=x.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?M:O,x.adler=W.wrap===2?0:1,W.last_flush=h,a._tr_init(W),m):J(x,_)}function Pt(x){var W=Me(x);return W===m&&function($){$.window_size=2*$.w_size,Z($.head),$.max_lazy_match=o[$.level].max_lazy,$.good_match=o[$.level].good_length,$.nice_match=o[$.level].nice_length,$.max_chain_length=o[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=D-1,$.match_available=0,$.ins_h=0}(x.state),W}function xt(x,W,$,R,P,L){if(!x)return _;var K=1;if(W===g&&(W=6),R<0?(K=0,R=-R):15<R&&(K=2,R-=16),P<1||w<P||$!==y||R<8||15<R||W<0||9<W||L<0||C<L)return J(x,_);R===8&&(R=9);var Y=new Ue;return(x.state=Y).strm=x,Y.wrap=K,Y.gzhead=null,Y.w_bits=R,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=P+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+D-1)/D),Y.window=new s.Buf8(2*Y.w_size),Y.head=new s.Buf16(Y.hash_size),Y.prev=new s.Buf16(Y.w_size),Y.lit_bufsize=1<<P+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new s.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=W,Y.strategy=L,Y.method=$,Pt(x)}o=[new _e(0,0,0,0,function(x,W){var $=65535;for($>x.pending_buf_size-5&&($=x.pending_buf_size-5);;){if(x.lookahead<=1){if(xe(x),x.lookahead===0&&W===h)return S;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;var R=x.block_start+$;if((x.strstart===0||x.strstart>=R)&&(x.lookahead=x.strstart-R,x.strstart=R,F(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-G&&(F(x,!1),x.strm.avail_out===0))return S}return x.insert=0,W===p?(F(x,!0),x.strm.avail_out===0?ae:q):(x.strstart>x.block_start&&(F(x,!1),x.strm.avail_out),S)}),new _e(4,4,8,4,Fe),new _e(4,5,16,8,Fe),new _e(4,6,32,32,Fe),new _e(4,4,16,16,ge),new _e(8,16,32,32,ge),new _e(8,16,128,128,ge),new _e(8,32,128,256,ge),new _e(32,128,258,1024,ge),new _e(32,258,258,4096,ge)],i.deflateInit=function(x,W){return xt(x,W,y,15,8,0)},i.deflateInit2=xt,i.deflateReset=Pt,i.deflateResetKeep=Me,i.deflateSetHeader=function(x,W){return x&&x.state?x.state.wrap!==2?_:(x.state.gzhead=W,m):_},i.deflate=function(x,W){var $,R,P,L;if(!x||!x.state||5<W||W<0)return x?J(x,_):_;if(R=x.state,!x.output||!x.input&&x.avail_in!==0||R.status===666&&W!==p)return J(x,x.avail_out===0?-5:_);if(R.strm=x,$=R.last_flush,R.last_flush=W,R.status===M)if(R.wrap===2)x.adler=0,oe(R,31),oe(R,139),oe(R,8),R.gzhead?(oe(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),oe(R,255&R.gzhead.time),oe(R,R.gzhead.time>>8&255),oe(R,R.gzhead.time>>16&255),oe(R,R.gzhead.time>>24&255),oe(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),oe(R,255&R.gzhead.os),R.gzhead.extra&&R.gzhead.extra.length&&(oe(R,255&R.gzhead.extra.length),oe(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(x.adler=f(x.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(oe(R,0),oe(R,0),oe(R,0),oe(R,0),oe(R,0),oe(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),oe(R,3),R.status=O);else{var K=y+(R.w_bits-8<<4)<<8;K|=(2<=R.strategy||R.level<2?0:R.level<6?1:R.level===6?2:3)<<6,R.strstart!==0&&(K|=32),K+=31-K%31,R.status=O,ne(R,K),R.strstart!==0&&(ne(R,x.adler>>>16),ne(R,65535&x.adler)),x.adler=1}if(R.status===69)if(R.gzhead.extra){for(P=R.pending;R.gzindex<(65535&R.gzhead.extra.length)&&(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&&R.pending>P&&(x.adler=f(x.adler,R.pending_buf,R.pending-P,P)),V(x),P=R.pending,R.pending!==R.pending_buf_size));)oe(R,255&R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&&R.pending>P&&(x.adler=f(x.adler,R.pending_buf,R.pending-P,P)),R.gzindex===R.gzhead.extra.length&&(R.gzindex=0,R.status=73)}else R.status=73;if(R.status===73)if(R.gzhead.name){P=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>P&&(x.adler=f(x.adler,R.pending_buf,R.pending-P,P)),V(x),P=R.pending,R.pending===R.pending_buf_size)){L=1;break}L=R.gzindex<R.gzhead.name.length?255&R.gzhead.name.charCodeAt(R.gzindex++):0,oe(R,L)}while(L!==0);R.gzhead.hcrc&&R.pending>P&&(x.adler=f(x.adler,R.pending_buf,R.pending-P,P)),L===0&&(R.gzindex=0,R.status=91)}else R.status=91;if(R.status===91)if(R.gzhead.comment){P=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>P&&(x.adler=f(x.adler,R.pending_buf,R.pending-P,P)),V(x),P=R.pending,R.pending===R.pending_buf_size)){L=1;break}L=R.gzindex<R.gzhead.comment.length?255&R.gzhead.comment.charCodeAt(R.gzindex++):0,oe(R,L)}while(L!==0);R.gzhead.hcrc&&R.pending>P&&(x.adler=f(x.adler,R.pending_buf,R.pending-P,P)),L===0&&(R.status=103)}else R.status=103;if(R.status===103&&(R.gzhead.hcrc?(R.pending+2>R.pending_buf_size&&V(x),R.pending+2<=R.pending_buf_size&&(oe(R,255&x.adler),oe(R,x.adler>>8&255),x.adler=0,R.status=O)):R.status=O),R.pending!==0){if(V(x),x.avail_out===0)return R.last_flush=-1,m}else if(x.avail_in===0&&B(W)<=B($)&&W!==p)return J(x,-5);if(R.status===666&&x.avail_in!==0)return J(x,-5);if(x.avail_in!==0||R.lookahead!==0||W!==h&&R.status!==666){var Y=R.strategy===2?function(U,X){for(var j;;){if(U.lookahead===0&&(xe(U),U.lookahead===0)){if(X===h)return S;break}if(U.match_length=0,j=a._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,j&&(F(U,!1),U.strm.avail_out===0))return S}return U.insert=0,X===p?(F(U,!0),U.strm.avail_out===0?ae:q):U.last_lit&&(F(U,!1),U.strm.avail_out===0)?S:z}(R,W):R.strategy===3?function(U,X){for(var j,ee,ue,Ae,ve=U.window;;){if(U.lookahead<=b){if(xe(U),U.lookahead<=b&&X===h)return S;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=D&&0<U.strstart&&(ee=ve[ue=U.strstart-1])===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]){Ae=U.strstart+b;do;while(ee===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]&&ee===ve[++ue]&&ue<Ae);U.match_length=b-(Ae-ue),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=D?(j=a._tr_tally(U,1,U.match_length-D),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(j=a._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),j&&(F(U,!1),U.strm.avail_out===0))return S}return U.insert=0,X===p?(F(U,!0),U.strm.avail_out===0?ae:q):U.last_lit&&(F(U,!1),U.strm.avail_out===0)?S:z}(R,W):o[R.level].func(R,W);if(Y!==ae&&Y!==q||(R.status=666),Y===S||Y===ae)return x.avail_out===0&&(R.last_flush=-1),m;if(Y===z&&(W===1?a._tr_align(R):W!==5&&(a._tr_stored_block(R,0,0,!1),W===3&&(Z(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),V(x),x.avail_out===0))return R.last_flush=-1,m}return W!==p?m:R.wrap<=0?1:(R.wrap===2?(oe(R,255&x.adler),oe(R,x.adler>>8&255),oe(R,x.adler>>16&255),oe(R,x.adler>>24&255),oe(R,255&x.total_in),oe(R,x.total_in>>8&255),oe(R,x.total_in>>16&255),oe(R,x.total_in>>24&255)):(ne(R,x.adler>>>16),ne(R,65535&x.adler)),V(x),0<R.wrap&&(R.wrap=-R.wrap),R.pending!==0?m:1)},i.deflateEnd=function(x){var W;return x&&x.state?(W=x.state.status)!==M&&W!==69&&W!==73&&W!==91&&W!==103&&W!==O&&W!==666?J(x,_):(x.state=null,W===O?J(x,-3):m):_},i.deflateSetDictionary=function(x,W){var $,R,P,L,K,Y,U,X,j=W.length;if(!x||!x.state||(L=($=x.state).wrap)===2||L===1&&$.status!==M||$.lookahead)return _;for(L===1&&(x.adler=c(x.adler,W,j,0)),$.wrap=0,j>=$.w_size&&(L===0&&(Z($.head),$.strstart=0,$.block_start=0,$.insert=0),X=new s.Buf8($.w_size),s.arraySet(X,W,j-$.w_size,$.w_size,0),W=X,j=$.w_size),K=x.avail_in,Y=x.next_in,U=x.input,x.avail_in=j,x.next_in=0,x.input=W,xe($);$.lookahead>=D;){for(R=$.strstart,P=$.lookahead-(D-1);$.ins_h=($.ins_h<<$.hash_shift^$.window[R+D-1])&$.hash_mask,$.prev[R&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=R,R++,--P;);$.strstart=R,$.lookahead=D-1,xe($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=D-1,$.match_available=0,x.next_in=Y,x.input=U,x.avail_in=K,$.wrap=L,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(o,s){var a,c,f,d,h,p,m,_,g,C,v,y,w,E,A,k,I,N,D,b,G,M,O,S,z;a=o.state,c=o.next_in,S=o.input,f=c+(o.avail_in-5),d=o.next_out,z=o.output,h=d-(s-o.avail_out),p=d+(o.avail_out-257),m=a.dmax,_=a.wsize,g=a.whave,C=a.wnext,v=a.window,y=a.hold,w=a.bits,E=a.lencode,A=a.distcode,k=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{w<15&&(y+=S[c++]<<w,w+=8,y+=S[c++]<<w,w+=8),N=E[y&k];t:for(;;){if(y>>>=D=N>>>24,w-=D,(D=N>>>16&255)===0)z[d++]=65535&N;else{if(!(16&D)){if(!(64&D)){N=E[(65535&N)+(y&(1<<D)-1)];continue t}if(32&D){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}b=65535&N,(D&=15)&&(w<D&&(y+=S[c++]<<w,w+=8),b+=y&(1<<D)-1,y>>>=D,w-=D),w<15&&(y+=S[c++]<<w,w+=8,y+=S[c++]<<w,w+=8),N=A[y&I];n:for(;;){if(y>>>=D=N>>>24,w-=D,!(16&(D=N>>>16&255))){if(!(64&D)){N=A[(65535&N)+(y&(1<<D)-1)];continue n}o.msg="invalid distance code",a.mode=30;break e}if(G=65535&N,w<(D&=15)&&(y+=S[c++]<<w,(w+=8)<D&&(y+=S[c++]<<w,w+=8)),m<(G+=y&(1<<D)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=D,w-=D,(D=d-h)<G){if(g<(D=G-D)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(O=v,(M=0)===C){if(M+=_-D,D<b){for(b-=D;z[d++]=v[M++],--D;);M=d-G,O=z}}else if(C<D){if(M+=_+C-D,(D-=C)<b){for(b-=D;z[d++]=v[M++],--D;);if(M=0,C<b){for(b-=D=C;z[d++]=v[M++],--D;);M=d-G,O=z}}}else if(M+=C-D,D<b){for(b-=D;z[d++]=v[M++],--D;);M=d-G,O=z}for(;2<b;)z[d++]=O[M++],z[d++]=O[M++],z[d++]=O[M++],b-=3;b&&(z[d++]=O[M++],1<b&&(z[d++]=O[M++]))}else{for(M=d-G;z[d++]=z[M++],z[d++]=z[M++],z[d++]=z[M++],2<(b-=3););b&&(z[d++]=z[M++],1<b&&(z[d++]=z[M++]))}break}}break}}while(c<f&&d<p);c-=b=w>>3,y&=(1<<(w-=b<<3))-1,o.next_in=c,o.next_out=d,o.avail_in=c<f?f-c+5:5-(c-f),o.avail_out=d<p?p-d+257:257-(d-p),a.hold=y,a.bits=w}},{}],49:[function(n,r,i){var o=n("../utils/common"),s=n("./adler32"),a=n("./crc32"),c=n("./inffast"),f=n("./inftrees"),d=1,h=2,p=0,m=-2,_=1,g=852,C=592;function v(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(M){var O;return M&&M.state?(O=M.state,M.total_in=M.total_out=O.total=0,M.msg="",O.wrap&&(M.adler=1&O.wrap),O.mode=_,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new o.Buf32(g),O.distcode=O.distdyn=new o.Buf32(C),O.sane=1,O.back=-1,p):m}function E(M){var O;return M&&M.state?((O=M.state).wsize=0,O.whave=0,O.wnext=0,w(M)):m}function A(M,O){var S,z;return M&&M.state?(z=M.state,O<0?(S=0,O=-O):(S=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?m:(z.window!==null&&z.wbits!==O&&(z.window=null),z.wrap=S,z.wbits=O,E(M))):m}function k(M,O){var S,z;return M?(z=new y,(M.state=z).window=null,(S=A(M,O))!==p&&(M.state=null),S):m}var I,N,D=!0;function b(M){if(D){var O;for(I=new o.Buf32(512),N=new o.Buf32(32),O=0;O<144;)M.lens[O++]=8;for(;O<256;)M.lens[O++]=9;for(;O<280;)M.lens[O++]=7;for(;O<288;)M.lens[O++]=8;for(f(d,M.lens,0,288,I,0,M.work,{bits:9}),O=0;O<32;)M.lens[O++]=5;f(h,M.lens,0,32,N,0,M.work,{bits:5}),D=!1}M.lencode=I,M.lenbits=9,M.distcode=N,M.distbits=5}function G(M,O,S,z){var ae,q=M.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new o.Buf8(q.wsize)),z>=q.wsize?(o.arraySet(q.window,O,S-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(z<(ae=q.wsize-q.wnext)&&(ae=z),o.arraySet(q.window,O,S-z,ae,q.wnext),(z-=ae)?(o.arraySet(q.window,O,S-z,z,0),q.wnext=z,q.whave=q.wsize):(q.wnext+=ae,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=ae))),0}i.inflateReset=E,i.inflateReset2=A,i.inflateResetKeep=w,i.inflateInit=function(M){return k(M,15)},i.inflateInit2=k,i.inflate=function(M,O){var S,z,ae,q,J,B,Z,V,F,oe,ne,te,xe,Fe,ge,_e,Ue,Me,Pt,xt,x,W,$,R,P=0,L=new o.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return m;(S=M.state).mode===12&&(S.mode=13),J=M.next_out,ae=M.output,Z=M.avail_out,q=M.next_in,z=M.input,B=M.avail_in,V=S.hold,F=S.bits,oe=B,ne=Z,W=p;e:for(;;)switch(S.mode){case _:if(S.wrap===0){S.mode=13;break}for(;F<16;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(2&S.wrap&&V===35615){L[S.check=0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0),F=V=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&V)<<8)+(V>>8))%31){M.msg="incorrect header check",S.mode=30;break}if((15&V)!=8){M.msg="unknown compression method",S.mode=30;break}if(F-=4,x=8+(15&(V>>>=4)),S.wbits===0)S.wbits=x;else if(x>S.wbits){M.msg="invalid window size",S.mode=30;break}S.dmax=1<<x,M.adler=S.check=1,S.mode=512&V?10:12,F=V=0;break;case 2:for(;F<16;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(S.flags=V,(255&S.flags)!=8){M.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){M.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=V>>8&1),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0)),F=V=0,S.mode=3;case 3:for(;F<32;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}S.head&&(S.head.time=V),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,L[2]=V>>>16&255,L[3]=V>>>24&255,S.check=a(S.check,L,4,0)),F=V=0,S.mode=4;case 4:for(;F<16;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}S.head&&(S.head.xflags=255&V,S.head.os=V>>8),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0)),F=V=0,S.mode=5;case 5:if(1024&S.flags){for(;F<16;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}S.length=V,S.head&&(S.head.extra_len=V),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0)),F=V=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(B<(te=S.length)&&(te=B),te&&(S.head&&(x=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),o.arraySet(S.head.extra,z,q,te,x)),512&S.flags&&(S.check=a(S.check,z,te,q)),B-=te,q+=te,S.length-=te),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(B===0)break e;for(te=0;x=z[q+te++],S.head&&x&&S.length<65536&&(S.head.name+=String.fromCharCode(x)),x&&te<B;);if(512&S.flags&&(S.check=a(S.check,z,te,q)),B-=te,q+=te,x)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(B===0)break e;for(te=0;x=z[q+te++],S.head&&x&&S.length<65536&&(S.head.comment+=String.fromCharCode(x)),x&&te<B;);if(512&S.flags&&(S.check=a(S.check,z,te,q)),B-=te,q+=te,x)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;F<16;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(V!==(65535&S.check)){M.msg="header crc mismatch",S.mode=30;break}F=V=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),M.adler=S.check=0,S.mode=12;break;case 10:for(;F<32;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}M.adler=S.check=v(V),F=V=0,S.mode=11;case 11:if(S.havedict===0)return M.next_out=J,M.avail_out=Z,M.next_in=q,M.avail_in=B,S.hold=V,S.bits=F,2;M.adler=S.check=1,S.mode=12;case 12:if(O===5||O===6)break e;case 13:if(S.last){V>>>=7&F,F-=7&F,S.mode=27;break}for(;F<3;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}switch(S.last=1&V,F-=1,3&(V>>>=1)){case 0:S.mode=14;break;case 1:if(b(S),S.mode=20,O!==6)break;V>>>=2,F-=2;break e;case 2:S.mode=17;break;case 3:M.msg="invalid block type",S.mode=30}V>>>=2,F-=2;break;case 14:for(V>>>=7&F,F-=7&F;F<32;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if((65535&V)!=(V>>>16^65535)){M.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&V,F=V=0,S.mode=15,O===6)break e;case 15:S.mode=16;case 16:if(te=S.length){if(B<te&&(te=B),Z<te&&(te=Z),te===0)break e;o.arraySet(ae,z,q,te,J),B-=te,q+=te,Z-=te,J+=te,S.length-=te;break}S.mode=12;break;case 17:for(;F<14;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(S.nlen=257+(31&V),V>>>=5,F-=5,S.ndist=1+(31&V),V>>>=5,F-=5,S.ncode=4+(15&V),V>>>=4,F-=4,286<S.nlen||30<S.ndist){M.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;F<3;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}S.lens[K[S.have++]]=7&V,V>>>=3,F-=3}for(;S.have<19;)S.lens[K[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,$={bits:S.lenbits},W=f(0,S.lens,0,19,S.lencode,0,S.work,$),S.lenbits=$.bits,W){M.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;_e=(P=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,Ue=65535&P,!((ge=P>>>24)<=F);){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(Ue<16)V>>>=ge,F-=ge,S.lens[S.have++]=Ue;else{if(Ue===16){for(R=ge+2;F<R;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(V>>>=ge,F-=ge,S.have===0){M.msg="invalid bit length repeat",S.mode=30;break}x=S.lens[S.have-1],te=3+(3&V),V>>>=2,F-=2}else if(Ue===17){for(R=ge+3;F<R;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}F-=ge,x=0,te=3+(7&(V>>>=ge)),V>>>=3,F-=3}else{for(R=ge+7;F<R;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}F-=ge,x=0,te=11+(127&(V>>>=ge)),V>>>=7,F-=7}if(S.have+te>S.nlen+S.ndist){M.msg="invalid bit length repeat",S.mode=30;break}for(;te--;)S.lens[S.have++]=x}}if(S.mode===30)break;if(S.lens[256]===0){M.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,$={bits:S.lenbits},W=f(d,S.lens,0,S.nlen,S.lencode,0,S.work,$),S.lenbits=$.bits,W){M.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,$={bits:S.distbits},W=f(h,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,$),S.distbits=$.bits,W){M.msg="invalid distances set",S.mode=30;break}if(S.mode=20,O===6)break e;case 20:S.mode=21;case 21:if(6<=B&&258<=Z){M.next_out=J,M.avail_out=Z,M.next_in=q,M.avail_in=B,S.hold=V,S.bits=F,c(M,ne),J=M.next_out,ae=M.output,Z=M.avail_out,q=M.next_in,z=M.input,B=M.avail_in,V=S.hold,F=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;_e=(P=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,Ue=65535&P,!((ge=P>>>24)<=F);){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(_e&&!(240&_e)){for(Me=ge,Pt=_e,xt=Ue;_e=(P=S.lencode[xt+((V&(1<<Me+Pt)-1)>>Me)])>>>16&255,Ue=65535&P,!(Me+(ge=P>>>24)<=F);){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}V>>>=Me,F-=Me,S.back+=Me}if(V>>>=ge,F-=ge,S.back+=ge,S.length=Ue,_e===0){S.mode=26;break}if(32&_e){S.back=-1,S.mode=12;break}if(64&_e){M.msg="invalid literal/length code",S.mode=30;break}S.extra=15&_e,S.mode=22;case 22:if(S.extra){for(R=S.extra;F<R;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}S.length+=V&(1<<S.extra)-1,V>>>=S.extra,F-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;_e=(P=S.distcode[V&(1<<S.distbits)-1])>>>16&255,Ue=65535&P,!((ge=P>>>24)<=F);){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(!(240&_e)){for(Me=ge,Pt=_e,xt=Ue;_e=(P=S.distcode[xt+((V&(1<<Me+Pt)-1)>>Me)])>>>16&255,Ue=65535&P,!(Me+(ge=P>>>24)<=F);){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}V>>>=Me,F-=Me,S.back+=Me}if(V>>>=ge,F-=ge,S.back+=ge,64&_e){M.msg="invalid distance code",S.mode=30;break}S.offset=Ue,S.extra=15&_e,S.mode=24;case 24:if(S.extra){for(R=S.extra;F<R;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}S.offset+=V&(1<<S.extra)-1,V>>>=S.extra,F-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){M.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Z===0)break e;if(te=ne-Z,S.offset>te){if((te=S.offset-te)>S.whave&&S.sane){M.msg="invalid distance too far back",S.mode=30;break}xe=te>S.wnext?(te-=S.wnext,S.wsize-te):S.wnext-te,te>S.length&&(te=S.length),Fe=S.window}else Fe=ae,xe=J-S.offset,te=S.length;for(Z<te&&(te=Z),Z-=te,S.length-=te;ae[J++]=Fe[xe++],--te;);S.length===0&&(S.mode=21);break;case 26:if(Z===0)break e;ae[J++]=S.length,Z--,S.mode=21;break;case 27:if(S.wrap){for(;F<32;){if(B===0)break e;B--,V|=z[q++]<<F,F+=8}if(ne-=Z,M.total_out+=ne,S.total+=ne,ne&&(M.adler=S.check=S.flags?a(S.check,ae,ne,J-ne):s(S.check,ae,ne,J-ne)),ne=Z,(S.flags?V:v(V))!==S.check){M.msg="incorrect data check",S.mode=30;break}F=V=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;F<32;){if(B===0)break e;B--,V+=z[q++]<<F,F+=8}if(V!==(4294967295&S.total)){M.msg="incorrect length check",S.mode=30;break}F=V=0}S.mode=29;case 29:W=1;break e;case 30:W=-3;break e;case 31:return-4;case 32:default:return m}return M.next_out=J,M.avail_out=Z,M.next_in=q,M.avail_in=B,S.hold=V,S.bits=F,(S.wsize||ne!==M.avail_out&&S.mode<30&&(S.mode<27||O!==4))&&G(M,M.output,M.next_out,ne-M.avail_out)?(S.mode=31,-4):(oe-=M.avail_in,ne-=M.avail_out,M.total_in+=oe,M.total_out+=ne,S.total+=ne,S.wrap&&ne&&(M.adler=S.check=S.flags?a(S.check,ae,ne,M.next_out-ne):s(S.check,ae,ne,M.next_out-ne)),M.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(oe==0&&ne===0||O===4)&&W===p&&(W=-5),W)},i.inflateEnd=function(M){if(!M||!M.state)return m;var O=M.state;return O.window&&(O.window=null),M.state=null,p},i.inflateGetHeader=function(M,O){var S;return M&&M.state&&2&(S=M.state).wrap?((S.head=O).done=!1,p):m},i.inflateSetDictionary=function(M,O){var S,z=O.length;return M&&M.state?(S=M.state).wrap!==0&&S.mode!==11?m:S.mode===11&&s(1,O,z,0)!==S.check?-3:G(M,O,z,z)?(S.mode=31,-4):(S.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var o=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,m,_,g,C,v){var y,w,E,A,k,I,N,D,b,G=v.bits,M=0,O=0,S=0,z=0,ae=0,q=0,J=0,B=0,Z=0,V=0,F=null,oe=0,ne=new o.Buf16(16),te=new o.Buf16(16),xe=null,Fe=0;for(M=0;M<=15;M++)ne[M]=0;for(O=0;O<m;O++)ne[h[p+O]]++;for(ae=G,z=15;1<=z&&ne[z]===0;z--);if(z<ae&&(ae=z),z===0)return _[g++]=20971520,_[g++]=20971520,v.bits=1,0;for(S=1;S<z&&ne[S]===0;S++);for(ae<S&&(ae=S),M=B=1;M<=15;M++)if(B<<=1,(B-=ne[M])<0)return-1;if(0<B&&(d===0||z!==1))return-1;for(te[1]=0,M=1;M<15;M++)te[M+1]=te[M]+ne[M];for(O=0;O<m;O++)h[p+O]!==0&&(C[te[h[p+O]]++]=O);if(I=d===0?(F=xe=C,19):d===1?(F=s,oe-=257,xe=a,Fe-=257,256):(F=c,xe=f,-1),M=S,k=g,J=O=V=0,E=-1,A=(Z=1<<(q=ae))-1,d===1&&852<Z||d===2&&592<Z)return 1;for(;;){for(N=M-J,b=C[O]<I?(D=0,C[O]):C[O]>I?(D=xe[Fe+C[O]],F[oe+C[O]]):(D=96,0),y=1<<M-J,S=w=1<<q;_[k+(V>>J)+(w-=y)]=N<<24|D<<16|b|0,w!==0;);for(y=1<<M-1;V&y;)y>>=1;if(y!==0?(V&=y-1,V+=y):V=0,O++,--ne[M]==0){if(M===z)break;M=h[p+C[O]]}if(ae<M&&(V&A)!==E){for(J===0&&(J=ae),k+=S,B=1<<(q=M-J);q+J<z&&!((B-=ne[q+J])<=0);)q++,B<<=1;if(Z+=1<<q,d===1&&852<Z||d===2&&592<Z)return 1;_[E=V&A]=ae<<24|q<<16|k-g|0}}return V!==0&&(_[k+V]=M-J<<24|64<<16|0),v.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var o=n("../utils/common"),s=0,a=1;function c(P){for(var L=P.length;0<=--L;)P[L]=0}var f=0,d=29,h=256,p=h+1+d,m=30,_=19,g=2*p+1,C=15,v=16,y=7,w=256,E=16,A=17,k=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(p+2));c(G);var M=new Array(2*m);c(M);var O=new Array(512);c(O);var S=new Array(256);c(S);var z=new Array(d);c(z);var ae,q,J,B=new Array(m);function Z(P,L,K,Y,U){this.static_tree=P,this.extra_bits=L,this.extra_base=K,this.elems=Y,this.max_length=U,this.has_stree=P&&P.length}function V(P,L){this.dyn_tree=P,this.max_code=0,this.stat_desc=L}function F(P){return P<256?O[P]:O[256+(P>>>7)]}function oe(P,L){P.pending_buf[P.pending++]=255&L,P.pending_buf[P.pending++]=L>>>8&255}function ne(P,L,K){P.bi_valid>v-K?(P.bi_buf|=L<<P.bi_valid&65535,oe(P,P.bi_buf),P.bi_buf=L>>v-P.bi_valid,P.bi_valid+=K-v):(P.bi_buf|=L<<P.bi_valid&65535,P.bi_valid+=K)}function te(P,L,K){ne(P,K[2*L],K[2*L+1])}function xe(P,L){for(var K=0;K|=1&P,P>>>=1,K<<=1,0<--L;);return K>>>1}function Fe(P,L,K){var Y,U,X=new Array(C+1),j=0;for(Y=1;Y<=C;Y++)X[Y]=j=j+K[Y-1]<<1;for(U=0;U<=L;U++){var ee=P[2*U+1];ee!==0&&(P[2*U]=xe(X[ee]++,ee))}}function ge(P){var L;for(L=0;L<p;L++)P.dyn_ltree[2*L]=0;for(L=0;L<m;L++)P.dyn_dtree[2*L]=0;for(L=0;L<_;L++)P.bl_tree[2*L]=0;P.dyn_ltree[2*w]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function _e(P){8<P.bi_valid?oe(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function Ue(P,L,K,Y){var U=2*L,X=2*K;return P[U]<P[X]||P[U]===P[X]&&Y[L]<=Y[K]}function Me(P,L,K){for(var Y=P.heap[K],U=K<<1;U<=P.heap_len&&(U<P.heap_len&&Ue(L,P.heap[U+1],P.heap[U],P.depth)&&U++,!Ue(L,Y,P.heap[U],P.depth));)P.heap[K]=P.heap[U],K=U,U<<=1;P.heap[K]=Y}function Pt(P,L,K){var Y,U,X,j,ee=0;if(P.last_lit!==0)for(;Y=P.pending_buf[P.d_buf+2*ee]<<8|P.pending_buf[P.d_buf+2*ee+1],U=P.pending_buf[P.l_buf+ee],ee++,Y===0?te(P,U,L):(te(P,(X=S[U])+h+1,L),(j=I[X])!==0&&ne(P,U-=z[X],j),te(P,X=F(--Y),K),(j=N[X])!==0&&ne(P,Y-=B[X],j)),ee<P.last_lit;);te(P,w,L)}function xt(P,L){var K,Y,U,X=L.dyn_tree,j=L.stat_desc.static_tree,ee=L.stat_desc.has_stree,ue=L.stat_desc.elems,Ae=-1;for(P.heap_len=0,P.heap_max=g,K=0;K<ue;K++)X[2*K]!==0?(P.heap[++P.heap_len]=Ae=K,P.depth[K]=0):X[2*K+1]=0;for(;P.heap_len<2;)X[2*(U=P.heap[++P.heap_len]=Ae<2?++Ae:0)]=1,P.depth[U]=0,P.opt_len--,ee&&(P.static_len-=j[2*U+1]);for(L.max_code=Ae,K=P.heap_len>>1;1<=K;K--)Me(P,X,K);for(U=ue;K=P.heap[1],P.heap[1]=P.heap[P.heap_len--],Me(P,X,1),Y=P.heap[1],P.heap[--P.heap_max]=K,P.heap[--P.heap_max]=Y,X[2*U]=X[2*K]+X[2*Y],P.depth[U]=(P.depth[K]>=P.depth[Y]?P.depth[K]:P.depth[Y])+1,X[2*K+1]=X[2*Y+1]=U,P.heap[1]=U++,Me(P,X,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],function(ve,st){var vn,qt,re,ce,Te,Ie,me=st.dyn_tree,Be=st.max_code,we=st.stat_desc.static_tree,ke=st.stat_desc.has_stree,at=st.stat_desc.extra_bits,It=st.stat_desc.extra_base,qe=st.stat_desc.max_length,_n=0;for(ce=0;ce<=C;ce++)ve.bl_count[ce]=0;for(me[2*ve.heap[ve.heap_max]+1]=0,vn=ve.heap_max+1;vn<g;vn++)qe<(ce=me[2*me[2*(qt=ve.heap[vn])+1]+1]+1)&&(ce=qe,_n++),me[2*qt+1]=ce,Be<qt||(ve.bl_count[ce]++,Te=0,It<=qt&&(Te=at[qt-It]),Ie=me[2*qt],ve.opt_len+=Ie*(ce+Te),ke&&(ve.static_len+=Ie*(we[2*qt+1]+Te)));if(_n!==0){do{for(ce=qe-1;ve.bl_count[ce]===0;)ce--;ve.bl_count[ce]--,ve.bl_count[ce+1]+=2,ve.bl_count[qe]--,_n-=2}while(0<_n);for(ce=qe;ce!==0;ce--)for(qt=ve.bl_count[ce];qt!==0;)Be<(re=ve.heap[--vn])||(me[2*re+1]!==ce&&(ve.opt_len+=(ce-me[2*re+1])*me[2*re],me[2*re+1]=ce),qt--)}}(P,L),Fe(X,Ae,P.bl_count)}function x(P,L,K){var Y,U,X=-1,j=L[1],ee=0,ue=7,Ae=4;for(j===0&&(ue=138,Ae=3),L[2*(K+1)+1]=65535,Y=0;Y<=K;Y++)U=j,j=L[2*(Y+1)+1],++ee<ue&&U===j||(ee<Ae?P.bl_tree[2*U]+=ee:U!==0?(U!==X&&P.bl_tree[2*U]++,P.bl_tree[2*E]++):ee<=10?P.bl_tree[2*A]++:P.bl_tree[2*k]++,X=U,Ae=(ee=0)===j?(ue=138,3):U===j?(ue=6,3):(ue=7,4))}function W(P,L,K){var Y,U,X=-1,j=L[1],ee=0,ue=7,Ae=4;for(j===0&&(ue=138,Ae=3),Y=0;Y<=K;Y++)if(U=j,j=L[2*(Y+1)+1],!(++ee<ue&&U===j)){if(ee<Ae)for(;te(P,U,P.bl_tree),--ee!=0;);else U!==0?(U!==X&&(te(P,U,P.bl_tree),ee--),te(P,E,P.bl_tree),ne(P,ee-3,2)):ee<=10?(te(P,A,P.bl_tree),ne(P,ee-3,3)):(te(P,k,P.bl_tree),ne(P,ee-11,7));X=U,Ae=(ee=0)===j?(ue=138,3):U===j?(ue=6,3):(ue=7,4)}}c(B);var $=!1;function R(P,L,K,Y){ne(P,(f<<1)+(Y?1:0),3),function(U,X,j,ee){_e(U),oe(U,j),oe(U,~j),o.arraySet(U.pending_buf,U.window,X,j,U.pending),U.pending+=j}(P,L,K)}i._tr_init=function(P){$||(function(){var L,K,Y,U,X,j=new Array(C+1);for(U=Y=0;U<d-1;U++)for(z[U]=Y,L=0;L<1<<I[U];L++)S[Y++]=U;for(S[Y-1]=U,U=X=0;U<16;U++)for(B[U]=X,L=0;L<1<<N[U];L++)O[X++]=U;for(X>>=7;U<m;U++)for(B[U]=X<<7,L=0;L<1<<N[U]-7;L++)O[256+X++]=U;for(K=0;K<=C;K++)j[K]=0;for(L=0;L<=143;)G[2*L+1]=8,L++,j[8]++;for(;L<=255;)G[2*L+1]=9,L++,j[9]++;for(;L<=279;)G[2*L+1]=7,L++,j[7]++;for(;L<=287;)G[2*L+1]=8,L++,j[8]++;for(Fe(G,p+1,j),L=0;L<m;L++)M[2*L+1]=5,M[2*L]=xe(L,5);ae=new Z(G,I,h+1,p,C),q=new Z(M,N,0,m,C),J=new Z(new Array(0),D,0,_,y)}(),$=!0),P.l_desc=new V(P.dyn_ltree,ae),P.d_desc=new V(P.dyn_dtree,q),P.bl_desc=new V(P.bl_tree,J),P.bi_buf=0,P.bi_valid=0,ge(P)},i._tr_stored_block=R,i._tr_flush_block=function(P,L,K,Y){var U,X,j=0;0<P.level?(P.strm.data_type===2&&(P.strm.data_type=function(ee){var ue,Ae=4093624447;for(ue=0;ue<=31;ue++,Ae>>>=1)if(1&Ae&&ee.dyn_ltree[2*ue]!==0)return s;if(ee.dyn_ltree[18]!==0||ee.dyn_ltree[20]!==0||ee.dyn_ltree[26]!==0)return a;for(ue=32;ue<h;ue++)if(ee.dyn_ltree[2*ue]!==0)return a;return s}(P)),xt(P,P.l_desc),xt(P,P.d_desc),j=function(ee){var ue;for(x(ee,ee.dyn_ltree,ee.l_desc.max_code),x(ee,ee.dyn_dtree,ee.d_desc.max_code),xt(ee,ee.bl_desc),ue=_-1;3<=ue&&ee.bl_tree[2*b[ue]+1]===0;ue--);return ee.opt_len+=3*(ue+1)+5+5+4,ue}(P),U=P.opt_len+3+7>>>3,(X=P.static_len+3+7>>>3)<=U&&(U=X)):U=X=K+5,K+4<=U&&L!==-1?R(P,L,K,Y):P.strategy===4||X===U?(ne(P,2+(Y?1:0),3),Pt(P,G,M)):(ne(P,4+(Y?1:0),3),function(ee,ue,Ae,ve){var st;for(ne(ee,ue-257,5),ne(ee,Ae-1,5),ne(ee,ve-4,4),st=0;st<ve;st++)ne(ee,ee.bl_tree[2*b[st]+1],3);W(ee,ee.dyn_ltree,ue-1),W(ee,ee.dyn_dtree,Ae-1)}(P,P.l_desc.max_code+1,P.d_desc.max_code+1,j+1),Pt(P,P.dyn_ltree,P.dyn_dtree)),ge(P),Y&&_e(P)},i._tr_tally=function(P,L,K){return P.pending_buf[P.d_buf+2*P.last_lit]=L>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&L,P.pending_buf[P.l_buf+P.last_lit]=255&K,P.last_lit++,L===0?P.dyn_ltree[2*K]++:(P.matches++,L--,P.dyn_ltree[2*(S[K]+h+1)]++,P.dyn_dtree[2*F(L)]++),P.last_lit===P.lit_bufsize-1},i._tr_align=function(P){ne(P,2,3),te(P,w,G),function(L){L.bi_valid===16?(oe(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(P)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(o){(function(s,a){if(!s.setImmediate){var c,f,d,h,p=1,m={},_=!1,g=s.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(s);C=C&&C.setTimeout?C:s,c={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){y(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,A=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=A,E}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",w,!1):s.attachEvent("onmessage",w),function(E){s.postMessage(h+E,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(E){y(E.data)},function(E){d.port2.postMessage(E)}):g&&"onreadystatechange"in g.createElement("script")?(f=g.documentElement,function(E){var A=g.createElement("script");A.onreadystatechange=function(){y(E),A.onreadystatechange=null,f.removeChild(A),A=null},f.appendChild(A)}):function(E){setTimeout(y,0,E)},C.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var A=new Array(arguments.length-1),k=0;k<A.length;k++)A[k]=arguments[k+1];var I={callback:E,args:A};return m[p]=I,c(p),p++},C.clearImmediate=v}function v(E){delete m[E]}function y(E){if(_)setTimeout(y,0,E);else{var A=m[E];if(A){_=!0;try{(function(k){var I=k.callback,N=k.args;switch(N.length){case 0:I();break;case 1:I(N[0]);break;case 2:I(N[0],N[1]);break;case 3:I(N[0],N[1],N[2]);break;default:I.apply(a,N)}})(A)}finally{v(E),_=!1}}}}function w(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(h)===0&&y(+E.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Ls<"u"?Ls:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(nw);var y1=nw.exports;const v1=Gv(y1),rw=H.createContext({});function _1(t){const e=H.useRef(null);return e.current===null&&(e.current=t()),e.current}const zd=H.createContext(null),iw=H.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function w1(t=!0){const e=H.useContext(zd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=H.useId();H.useEffect(()=>{t&&i(o)},[t]);const s=H.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,s]:[!0]}const Gd=typeof window<"u",C1=Gd?H.useLayoutEffect:H.useEffect,$t=t=>t;let ow=$t;function Hd(t){let e;return()=>(e===void 0&&(e=t()),e)}const Gi=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Un=t=>t*1e3,Bn=t=>t/1e3,x1={useManualTiming:!1};function T1(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(f){o.has(f)&&(c.schedule(f),t()),f(s)}const c={schedule:(f,d=!1,h=!1)=>{const m=h&&r?e:n;return d&&o.add(f),m.has(f)||m.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(s=f,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,c.process(f))}};return c}const ea=["read","resolveKeyframes","update","preRender","render","postRender"],S1=40;function sw(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=ea.reduce((v,y)=>(v[y]=T1(o),v),{}),{read:a,resolveKeyframes:c,update:f,preRender:d,render:h,postRender:p}=s,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,S1),1),i.timestamp=v,i.isProcessing=!0,a.process(i),c.process(i),f.process(i),d.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:ea.reduce((v,y)=>{const w=s[y];return v[y]=(E,A=!1,k=!1)=>(n||_(),w.schedule(E,A,k)),v},{}),cancel:v=>{for(let y=0;y<ea.length;y++)s[ea[y]].cancel(v)},state:i,steps:s}}const{schedule:Le,cancel:gr,state:ut,steps:Fu}=sw(typeof requestAnimationFrame<"u"?requestAnimationFrame:$t,!0),aw=H.createContext({strict:!1}),Em={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hi={};for(const t in Em)Hi[t]={isEnabled:e=>Em[t].some(n=>!!e[n])};function E1(t){for(const e in t)Hi[e]={...Hi[e],...t[e]}}const A1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||A1.has(t)}let lw=t=>!fl(t);function P1(t){t&&(lw=e=>e.startsWith("on")?!fl(e):t(e))}try{P1(require("@emotion/is-prop-valid").default)}catch{}function I1(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(lw(i)||n===!0&&fl(i)||!e&&!fl(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function k1(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const zl=H.createContext({});function us(t){return typeof t=="string"||Array.isArray(t)}function Gl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Wd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qd=["initial",...Wd];function Hl(t){return Gl(t.animate)||qd.some(e=>us(t[e]))}function uw(t){return!!(Hl(t)||t.variants)}function R1(t,e){if(Hl(t)){const{initial:n,animate:r}=t;return{initial:n===!1||us(n)?n:void 0,animate:us(r)?r:void 0}}return t.inherit!==!1?e:{}}function M1(t){const{initial:e,animate:n}=R1(t,H.useContext(zl));return H.useMemo(()=>({initial:e,animate:n}),[Am(e),Am(n)])}function Am(t){return Array.isArray(t)?t.join(" "):t}const N1=Symbol.for("motionComponentSymbol");function vi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function D1(t,e,n){return H.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):vi(n)&&(n.current=r))},[e])}const Jd=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b1="framerAppearId",cw="data-"+Jd(b1),{schedule:Kd}=sw(queueMicrotask,!1),fw=H.createContext({});function L1(t,e,n,r,i){var o,s;const{visualElement:a}=H.useContext(zl),c=H.useContext(aw),f=H.useContext(zd),d=H.useContext(iw).reducedMotion,h=H.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=H.useContext(fw);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&F1(h.current,n,i,m);const _=H.useRef(!1);H.useInsertionEffect(()=>{p&&_.current&&p.update(n,f)});const g=n[cw],C=H.useRef(!!g&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,g))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,g)));return C1(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Kd.render(p.render),C.current&&p.animationState&&p.animationState.animateChanges())}),H.useEffect(()=>{p&&(!C.current&&p.animationState&&p.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),C.current=!1))}),p}function F1(t,e,n,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:c,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dw(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||a&&vi(a),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:f})}function dw(t){if(t)return t.options.allowProjection!==!1?t.projection:dw(t.parent)}function V1({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var o,s;t&&E1(t);function a(f,d){let h;const p={...H.useContext(iw),...f,layoutId:U1(f)},{isStatic:m}=p,_=M1(f),g=r(f,m);if(!m&&Gd){B1();const C=O1(p);h=C.MeasureLayout,_.visualElement=L1(i,g,p,e,C.ProjectionNode)}return T.jsxs(zl.Provider,{value:_,children:[h&&_.visualElement?T.jsx(h,{visualElement:_.visualElement,...p}):null,n(i,f,D1(g,_.visualElement,d),g,m,_.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(s=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&s!==void 0?s:""})`}`;const c=H.forwardRef(a);return c[N1]=i,c}function U1({layoutId:t}){const e=H.useContext(rw).id;return e&&t!==void 0?e+"-"+t:t}function B1(t,e){H.useContext(aw).strict}function O1(t){const{drag:e,layout:n}=Hi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $1=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yd(t){return typeof t!="string"||t.includes("-")?!1:!!($1.indexOf(t)>-1||/[A-Z]/u.test(t))}function Pm(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Xd(t,e,n,r){if(typeof e=="function"){const[i,o]=Pm(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Pm(r);e=e(n!==void 0?n:t.custom,i,o)}return e}const ef=t=>Array.isArray(t),z1=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),G1=t=>ef(t)?t[t.length-1]||0:t,_t=t=>!!(t&&t.getVelocity);function ka(t){const e=_t(t)?t.get():t;return z1(e)?e.toValue():e}function H1({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,o){const s={latestValues:W1(r,i,o,t),renderState:e()};return n&&(s.onMount=a=>n({props:r,current:a,...s}),s.onUpdate=a=>n(a)),s}const hw=t=>(e,n)=>{const r=H.useContext(zl),i=H.useContext(zd),o=()=>H1(t,e,r,i);return n?o():_1(o)};function W1(t,e,n,r){const i={},o=r(t,{});for(const p in o)i[p]=ka(o[p]);let{initial:s,animate:a}=t;const c=Hl(t),f=uw(t);e&&f&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?a:s;if(h&&typeof h!="boolean"&&!Gl(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const _=Xd(t,p[m]);if(_){const{transitionEnd:g,transition:C,...v}=_;for(const y in v){let w=v[y];if(Array.isArray(w)){const E=d?w.length-1:0;w=w[E]}w!==null&&(i[y]=w)}for(const y in g)i[y]=g[y]}}}return i}const Yi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kr=new Set(Yi),pw=t=>e=>typeof e=="string"&&e.startsWith(t),mw=pw("--"),q1=pw("var(--"),Zd=t=>q1(t)?J1.test(t.split("/*")[0].trim()):!1,J1=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gw=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hn=(t,e,n)=>n>e?e:n<t?t:n,Xi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},cs={...Xi,transform:t=>Hn(0,1,t)},ta={...Xi,default:1},xs=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qn=xs("deg"),kn=xs("%"),fe=xs("px"),K1=xs("vh"),Y1=xs("vw"),Im={...kn,parse:t=>kn.parse(t)/100,transform:t=>kn.transform(t*100)},X1={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,top:fe,right:fe,bottom:fe,left:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,backgroundPositionX:fe,backgroundPositionY:fe},Z1={rotate:Qn,rotateX:Qn,rotateY:Qn,rotateZ:Qn,scale:ta,scaleX:ta,scaleY:ta,scaleZ:ta,skew:Qn,skewX:Qn,skewY:Qn,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:cs,originX:Im,originY:Im,originZ:fe},km={...Xi,transform:Math.round},Qd={...X1,...Z1,zIndex:km,size:fe,fillOpacity:cs,strokeOpacity:cs,numOctaves:km},Q1={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},j1=Yi.length;function eA(t,e,n){let r="",i=!0;for(let o=0;o<j1;o++){const s=Yi[o],a=t[s];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(s.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const f=gw(a,Qd[s]);if(!c){i=!1;const d=Q1[s]||s;r+=`${d}(${f}) `}n&&(e[s]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function jd(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let s=!1,a=!1;for(const c in e){const f=e[c];if(Kr.has(c)){s=!0;continue}else if(mw(c)){i[c]=f;continue}else{const d=gw(f,Qd[c]);c.startsWith("origin")?(a=!0,o[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=eA(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:f="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${f} ${d}`}}const tA={offset:"stroke-dashoffset",array:"stroke-dasharray"},nA={offset:"strokeDashoffset",array:"strokeDasharray"};function rA(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?tA:nA;t[o.offset]=fe.transform(-r);const s=fe.transform(e),a=fe.transform(n);t[o.array]=`${s} ${a}`}function Rm(t,e,n){return typeof t=="string"?t:fe.transform(e+n*t)}function iA(t,e,n){const r=Rm(e,t.x,t.width),i=Rm(n,t.y,t.height);return`${r} ${i}`}function eh(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...f},d,h){if(jd(t,f,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:_}=t;p.transform&&(_&&(m.transform=p.transform),delete p.transform),_&&(i!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=iA(_,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&rA(p,s,a,c,!1)}const th=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),yw=()=>({...th(),attrs:{}}),nh=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vw(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const _w=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ww(t,e,n,r){vw(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(_w.has(i)?i:Jd(i),e.attrs[i])}const dl={};function oA(t){Object.assign(dl,t)}function Cw(t,{layout:e,layoutId:n}){return Kr.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dl[t]||t==="opacity")}function rh(t,e,n){var r;const{style:i}=t,o={};for(const s in i)(_t(i[s])||e.style&&_t(e.style[s])||Cw(s,t)||((r=n?.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[s]=i[s]);return o}function xw(t,e,n){const r=rh(t,e,n);for(const i in t)if(_t(t[i])||_t(e[i])){const o=Yi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function sA(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Mm=["x","y","width","height","cx","cy","r"],aA={useVisualState:hw({scrapeMotionValuesFromProps:xw,createRenderState:yw,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let o=!!t.drag;if(!o){for(const a in i)if(Kr.has(a)){o=!0;break}}if(!o)return;let s=!e;if(e)for(let a=0;a<Mm.length;a++){const c=Mm[a];t[c]!==e[c]&&(s=!0)}s&&Le.read(()=>{sA(n,r),Le.render(()=>{eh(r,i,nh(n.tagName),t.transformTemplate),ww(n,r)})})}})},lA={useVisualState:hw({scrapeMotionValuesFromProps:rh,createRenderState:th})};function Tw(t,e,n){for(const r in e)!_t(e[r])&&!Cw(r,n)&&(t[r]=e[r])}function uA({transformTemplate:t},e){return H.useMemo(()=>{const n=th();return jd(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cA(t,e){const n=t.style||{},r={};return Tw(r,n,t),Object.assign(r,uA(t,e)),r}function fA(t,e){const n={},r=cA(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function dA(t,e,n,r){const i=H.useMemo(()=>{const o=yw();return eh(o,e,nh(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Tw(o,t.style,t),i.style={...o,...i.style}}return i}function hA(t=!1){return(n,r,i,{latestValues:o},s)=>{const c=(Yd(n)?dA:fA)(r,o,s,n),f=I1(r,typeof n=="string",t),d=n!==H.Fragment?{...f,...c,ref:i}:{},{children:h}=r,p=H.useMemo(()=>_t(h)?h.get():h,[h]);return H.createElement(n,{...d,children:p})}}function pA(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...Yd(r)?aA:lA,preloadedFeatures:t,useRender:hA(i),createVisualElement:e,Component:r};return V1(s)}}function Sw(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Wl(t,e,n){const r=t.getProps();return Xd(r,e,n!==void 0?n:r.custom,t)}const mA=Hd(()=>window.ScrollTimeline!==void 0);class gA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(mA()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class yA extends gA{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ih(t,e){return t?t[e]||t.default||t:void 0}const tf=2e4;function Ew(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tf;)e+=n,r=t.next(e);return e>=tf?1/0:e}function oh(t){return typeof t=="function"}function Nm(t,e){t.timeline=e,t.onfinish=null}const sh=t=>Array.isArray(t)&&typeof t[0]=="number",vA={linearEasing:void 0};function _A(t,e){const n=Hd(t);return()=>{var r;return(r=vA[e])!==null&&r!==void 0?r:n()}}const hl=_A(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Aw=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(Gi(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function Pw(t){return!!(typeof t=="function"&&hl()||!t||typeof t=="string"&&(t in nf||hl())||sh(t)||Array.isArray(t)&&t.every(Pw))}const _o=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,nf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_o([0,.65,.55,1]),circOut:_o([.55,0,1,.45]),backIn:_o([.31,.01,.66,-.59]),backOut:_o([.33,1.53,.69,.99])};function Iw(t,e){if(t)return typeof t=="function"&&hl()?Aw(t,e):sh(t)?_o(t):Array.isArray(t)?t.map(n=>Iw(n,e)||nf.easeOut):nf[t]}const sn={x:!1,y:!1};function kw(){return sn.x||sn.y}function wA(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function Rw(t,e){const n=wA(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Dm(t){return e=>{e.pointerType==="touch"||kw()||t(e)}}function CA(t,e,n={}){const[r,i,o]=Rw(t,n),s=Dm(a=>{const{target:c}=a,f=e(a);if(typeof f!="function"||!c)return;const d=Dm(h=>{f(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return r.forEach(a=>{a.addEventListener("pointerenter",s,i)}),o}const Mw=(t,e)=>e?t===e?!0:Mw(t,e.parentElement):!1,ah=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function TA(t){return xA.has(t.tagName)||t.tabIndex!==-1}const wo=new WeakSet;function bm(t){return e=>{e.key==="Enter"&&t(e)}}function Vu(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const SA=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=bm(()=>{if(wo.has(n))return;Vu(n,"down");const i=bm(()=>{Vu(n,"up")}),o=()=>Vu(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Lm(t){return ah(t)&&!kw()}function EA(t,e,n={}){const[r,i,o]=Rw(t,n),s=a=>{const c=a.currentTarget;if(!Lm(a)||wo.has(c))return;wo.add(c);const f=e(a),d=(m,_)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!Lm(m)||!wo.has(c))&&(wo.delete(c),typeof f=="function"&&f(m,{success:_}))},h=m=>{d(m,n.useGlobalTarget||Mw(c,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!TA(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),a.addEventListener("focus",f=>SA(f,i),i)}),o}function AA(t){return t==="x"||t==="y"?sn[t]?null:(sn[t]=!0,()=>{sn[t]=!1}):sn.x||sn.y?null:(sn.x=sn.y=!0,()=>{sn.x=sn.y=!1})}const Nw=new Set(["width","height","top","left","right","bottom",...Yi]);let Ra;function PA(){Ra=void 0}const Rn={now:()=>(Ra===void 0&&Rn.set(ut.isProcessing||x1.useManualTiming?ut.timestamp:performance.now()),Ra),set:t=>{Ra=t,queueMicrotask(PA)}};function lh(t,e){t.indexOf(e)===-1&&t.push(e)}function uh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ch{constructor(){this.subscriptions=[]}add(e){return lh(this.subscriptions,e),()=>uh(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Dw(t,e){return e?t*(1e3/e):0}const Fm=30,IA=t=>!isNaN(parseFloat(t));class kA{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Rn.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IA(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ch);const r=this.events[e].add(n);return e==="change"?()=>{r(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Fm)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Fm);return Dw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fs(t,e){return new kA(t,e)}function RA(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,fs(n))}function MA(t,e){const n=Wl(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const s in o){const a=G1(o[s]);RA(t,s,a)}}function NA(t){return!!(_t(t)&&t.add)}function rf(t,e){const n=t.getValue("willChange");if(NA(n))return n.add(e)}function bw(t){return t.props[cw]}const Lw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,DA=1e-7,bA=12;function LA(t,e,n,r,i){let o,s,a=0;do s=e+(n-e)/2,o=Lw(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>DA&&++a<bA);return s}function Ts(t,e,n,r){if(t===e&&n===r)return $t;const i=o=>LA(o,0,1,t,n);return o=>o===0||o===1?o:Lw(i(o),e,r)}const Fw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Vw=t=>e=>1-t(1-e),Uw=Ts(.33,1.53,.69,.99),fh=Vw(Uw),Bw=Fw(fh),Ow=t=>(t*=2)<1?.5*fh(t):.5*(2-Math.pow(2,-10*(t-1))),dh=t=>1-Math.sin(Math.acos(t)),$w=Vw(dh),zw=Fw(dh),Gw=t=>/^0[^.\s]+$/u.test(t);function FA(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Gw(t):!0}const Bo=t=>Math.round(t*1e5)/1e5,hh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VA(t){return t==null}const UA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ph=(t,e)=>n=>!!(typeof n=="string"&&UA.test(n)&&n.startsWith(t)||e&&!VA(n)&&Object.prototype.hasOwnProperty.call(n,e)),Hw=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,s,a]=r.match(hh);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},BA=t=>Hn(0,255,t),Uu={...Xi,transform:t=>Math.round(BA(t))},br={test:ph("rgb","red"),parse:Hw("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Uu.transform(t)+", "+Uu.transform(e)+", "+Uu.transform(n)+", "+Bo(cs.transform(r))+")"};function OA(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const of={test:ph("#"),parse:OA,transform:br.transform},_i={test:ph("hsl","hue"),parse:Hw("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+kn.transform(Bo(e))+", "+kn.transform(Bo(n))+", "+Bo(cs.transform(r))+")"},yt={test:t=>br.test(t)||of.test(t)||_i.test(t),parse:t=>br.test(t)?br.parse(t):_i.test(t)?_i.parse(t):of.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?br.transform(t):_i.transform(t)},$A=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zA(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($A))===null||n===void 0?void 0:n.length)||0)>0}const Ww="number",qw="color",GA="var",HA="var(",Vm="${}",WA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ds(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=e.replace(WA,c=>(yt.test(c)?(r.color.push(o),i.push(qw),n.push(yt.parse(c))):c.startsWith(HA)?(r.var.push(o),i.push(GA),n.push(c)):(r.number.push(o),i.push(Ww),n.push(parseFloat(c))),++o,Vm)).split(Vm);return{values:n,split:a,indexes:r,types:i}}function Jw(t){return ds(t).values}function Kw(t){const{split:e,types:n}=ds(t),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const a=n[s];a===Ww?o+=Bo(i[s]):a===qw?o+=yt.transform(i[s]):o+=i[s]}return o}}const qA=t=>typeof t=="number"?0:t;function JA(t){const e=Jw(t);return Kw(t)(e.map(qA))}const yr={test:zA,parse:Jw,createTransformer:Kw,getAnimatableNone:JA},KA=new Set(["brightness","contrast","saturate","opacity"]);function YA(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(hh)||[];if(!r)return t;const i=n.replace(r,"");let o=KA.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const XA=/\b([a-z-]*)\(.*?\)/gu,sf={...yr,getAnimatableNone:t=>{const e=t.match(XA);return e?e.map(YA).join(" "):t}},ZA={...Qd,color:yt,backgroundColor:yt,outlineColor:yt,fill:yt,stroke:yt,borderColor:yt,borderTopColor:yt,borderRightColor:yt,borderBottomColor:yt,borderLeftColor:yt,filter:sf,WebkitFilter:sf},mh=t=>ZA[t];function Yw(t,e){let n=mh(t);return n!==sf&&(n=yr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QA=new Set(["auto","none","0"]);function jA(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!QA.has(o)&&ds(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=Yw(n,i)}const Um=t=>t===Xi||t===fe,Bm=(t,e)=>parseFloat(t.split(", ")[e]),Om=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Bm(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?Bm(o[1],t):0}},eP=new Set(["x","y","z"]),tP=Yi.filter(t=>!eP.has(t));function nP(t){const e=[];return tP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Wi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Om(4,13),y:Om(5,14)};Wi.translateX=Wi.x;Wi.translateY=Wi.y;const Ur=new Set;let af=!1,lf=!1;function Xw(){if(lf){const t=Array.from(Ur).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=nP(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,s])=>{var a;(a=r.getValue(o))===null||a===void 0||a.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lf=!1,af=!1,Ur.forEach(t=>t.complete()),Ur.clear()}function Zw(){Ur.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(lf=!0)})}function rP(){Zw(),Xw()}class gh{constructor(e,n,r,i,o,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ur.add(this),af||(af=!0,Le.read(Zw),Le.resolveKeyframes(Xw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ur.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ur.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Qw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),iP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oP(t){const e=iP.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function jw(t,e,n=1){const[r,i]=oP(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return Qw(s)?parseFloat(s):s}return Zd(i)?jw(i,e,n+1):i}const eC=t=>e=>e.test(t),sP={test:t=>t==="auto",parse:t=>t},tC=[Xi,fe,kn,Qn,Y1,K1,sP],$m=t=>tC.find(eC(t));class nC extends gh{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),Zd(f))){const d=jw(f,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Nw.has(r)||e.length!==2)return;const[i,o]=e,s=$m(i),a=$m(o);if(s!==a)if(Um(s)&&Um(a))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)FA(e[i])&&r.push(i);r.length&&jA(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=Wi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,f])=>{n.getValue(c).set(f)}),this.resolveNoneKeyframes()}}const zm=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yr.test(t)||t==="0")&&!t.startsWith("url("));function aP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function lP(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],s=zm(i,e),a=zm(o,e);return!s||!a?!1:aP(t)||(n==="spring"||oh(n))&&r}const uP=t=>t!==null;function ql(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(uP),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const cP=40;class rC{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Rn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>cP?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rP(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Rn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:s,onComplete:a,onUpdate:c,isGenerator:f}=this.options;if(!f&&!lP(e,r,i,o))if(s)this.options.duration=0;else{c&&c(ql(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ze=(t,e,n)=>t+(e-t)*n;function Bu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fP({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=Bu(c,a,t+1/3),o=Bu(c,a,t),s=Bu(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function pl(t,e){return n=>n>0?e:t}const Ou=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},dP=[of,br,_i],hP=t=>dP.find(e=>e.test(t));function Gm(t){const e=hP(t);if(!e)return!1;let n=e.parse(t);return e===_i&&(n=fP(n)),n}const Hm=(t,e)=>{const n=Gm(t),r=Gm(e);if(!n||!r)return pl(t,e);const i={...n};return o=>(i.red=Ou(n.red,r.red,o),i.green=Ou(n.green,r.green,o),i.blue=Ou(n.blue,r.blue,o),i.alpha=ze(n.alpha,r.alpha,o),br.transform(i))},pP=(t,e)=>n=>e(t(n)),Ss=(...t)=>t.reduce(pP),uf=new Set(["none","hidden"]);function mP(t,e){return uf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function gP(t,e){return n=>ze(t,e,n)}function yh(t){return typeof t=="number"?gP:typeof t=="string"?Zd(t)?pl:yt.test(t)?Hm:_P:Array.isArray(t)?iC:typeof t=="object"?yt.test(t)?Hm:yP:pl}function iC(t,e){const n=[...t],r=n.length,i=t.map((o,s)=>yh(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}}function yP(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=yh(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function vP(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],a=t.indexes[s][i[s]],c=(n=t.values[a])!==null&&n!==void 0?n:0;r[o]=c,i[s]++}return r}const _P=(t,e)=>{const n=yr.createTransformer(e),r=ds(t),i=ds(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?uf.has(t)&&!i.values.length||uf.has(e)&&!r.values.length?mP(t,e):Ss(iC(vP(r,i),i.values),n):pl(t,e)};function oC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ze(t,e,n):yh(t)(t,e)}const wP=5;function sC(t,e,n){const r=Math.max(e-wP,0);return Dw(n-t(r),e-r)}const Je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$u=.001;function CP({duration:t=Je.duration,bounce:e=Je.bounce,velocity:n=Je.velocity,mass:r=Je.mass}){let i,o,s=1-e;s=Hn(Je.minDamping,Je.maxDamping,s),t=Hn(Je.minDuration,Je.maxDuration,Bn(t)),s<1?(i=f=>{const d=f*s,h=d*t,p=d-n,m=cf(f,s),_=Math.exp(-h);return $u-p/m*_},o=f=>{const h=f*s*t,p=h*n+n,m=Math.pow(s,2)*Math.pow(f,2)*t,_=Math.exp(-h),g=cf(Math.pow(f,2),s);return(-i(f)+$u>0?-1:1)*((p-m)*_)/g}):(i=f=>{const d=Math.exp(-f*t),h=(f-n)*t+1;return-$u+d*h},o=f=>{const d=Math.exp(-f*t),h=(n-f)*(t*t);return d*h});const a=5/t,c=TP(i,o,a);if(t=Un(t),isNaN(c))return{stiffness:Je.stiffness,damping:Je.damping,duration:t};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:t}}}const xP=12;function TP(t,e,n){let r=n;for(let i=1;i<xP;i++)r=r-t(r)/e(r);return r}function cf(t,e){return t*Math.sqrt(1-e*e)}const SP=["duration","bounce"],EP=["stiffness","damping","mass"];function Wm(t,e){return e.some(n=>t[n]!==void 0)}function AP(t){let e={velocity:Je.velocity,stiffness:Je.stiffness,damping:Je.damping,mass:Je.mass,isResolvedFromDuration:!1,...t};if(!Wm(t,EP)&&Wm(t,SP))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*Hn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Je.mass,stiffness:i,damping:o}}else{const n=CP(t);e={...e,...n,mass:Je.mass},e.isResolvedFromDuration=!0}return e}function aC(t=Je.visualDuration,e=Je.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:c,damping:f,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=AP({...n,velocity:-Bn(n.velocity||0)}),_=p||0,g=f/(2*Math.sqrt(c*d)),C=s-o,v=Bn(Math.sqrt(c/d)),y=Math.abs(C)<5;r||(r=y?Je.restSpeed.granular:Je.restSpeed.default),i||(i=y?Je.restDelta.granular:Je.restDelta.default);let w;if(g<1){const A=cf(v,g);w=k=>{const I=Math.exp(-g*v*k);return s-I*((_+g*v*C)/A*Math.sin(A*k)+C*Math.cos(A*k))}}else if(g===1)w=A=>s-Math.exp(-v*A)*(C+(_+v*C)*A);else{const A=v*Math.sqrt(g*g-1);w=k=>{const I=Math.exp(-g*v*k),N=Math.min(A*k,300);return s-I*((_+g*v*C)*Math.sinh(N)+A*C*Math.cosh(N))/A}}const E={calculatedDuration:m&&h||null,next:A=>{const k=w(A);if(m)a.done=A>=h;else{let I=0;g<1&&(I=A===0?Un(_):sC(w,A,k));const N=Math.abs(I)<=r,D=Math.abs(s-k)<=i;a.done=N&&D}return a.value=a.done?s:k,a},toString:()=>{const A=Math.min(Ew(E),tf),k=Aw(I=>E.next(A*I).value,A,30);return A+"ms "+k}};return E}function qm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:c,restDelta:f=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=N=>a!==void 0&&N<a||c!==void 0&&N>c,_=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let g=n*e;const C=h+g,v=s===void 0?C:s(C);v!==C&&(g=v-h);const y=N=>-g*Math.exp(-N/r),w=N=>v+y(N),E=N=>{const D=y(N),b=w(N);p.done=Math.abs(D)<=f,p.value=p.done?v:b};let A,k;const I=N=>{m(p.value)&&(A=N,k=aC({keyframes:[p.value,_(p.value)],velocity:sC(w,N,p.value),damping:i,stiffness:o,restDelta:f,restSpeed:d}))};return I(0),{calculatedDuration:null,next:N=>{let D=!1;return!k&&A===void 0&&(D=!0,E(N),I(N)),A!==void 0&&N>=A?k.next(N-A):(!D&&E(N),p)}}}const PP=Ts(.42,0,1,1),IP=Ts(0,0,.58,1),lC=Ts(.42,0,.58,1),kP=t=>Array.isArray(t)&&typeof t[0]!="number",RP={linear:$t,easeIn:PP,easeInOut:lC,easeOut:IP,circIn:dh,circInOut:zw,circOut:$w,backIn:fh,backInOut:Bw,backOut:Uw,anticipate:Ow},Jm=t=>{if(sh(t)){ow(t.length===4);const[e,n,r,i]=t;return Ts(e,n,r,i)}else if(typeof t=="string")return RP[t];return t};function MP(t,e,n){const r=[],i=n||oC,o=t.length-1;for(let s=0;s<o;s++){let a=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||$t:e;a=Ss(c,a)}r.push(a)}return r}function NP(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(ow(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=MP(e,r,i),c=a.length,f=d=>{if(s&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Gi(t[h],t[h+1],d);return a[h](p)};return n?d=>f(Hn(t[0],t[o-1],d)):f}function DP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gi(0,e,r);t.push(ze(n,1,i))}}function bP(t){const e=[0];return DP(e,t.length-1),e}function LP(t,e){return t.map(n=>n*e)}function FP(t,e){return t.map(()=>e||lC).splice(0,t.length-1)}function ml({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=kP(r)?r.map(Jm):Jm(r),o={done:!1,value:e[0]},s=LP(n&&n.length===e.length?n:bP(e),t),a=NP(s,e,{ease:Array.isArray(i)?i:FP(e,i)});return{calculatedDuration:t,next:c=>(o.value=a(c),o.done=c>=t,o)}}const VP=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Le.update(e,!0),stop:()=>gr(e),now:()=>ut.isProcessing?ut.timestamp:Rn.now()}},UP={decay:qm,inertia:qm,tween:ml,keyframes:ml,spring:aC},BP=t=>t/100;class vh extends rC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,s=i?.KeyframeResolver||gh,a=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new s(o,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=this.options,a=oh(n)?n:UP[n]||ml;let c,f;a!==ml&&typeof e[0]!="number"&&(c=Ss(BP,oC(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});o==="mirror"&&(f=a({...this.options,keyframes:[...e].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=Ew(d));const{calculatedDuration:h}=d,p=h+i,m=p*(r+1)-i;return{generator:d,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:f,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return o.next(0);const{delay:p,repeat:m,repeatType:_,repeatDelay:g,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),y=this.speed>=0?v<0:v>d;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,E=o;if(m){const N=Math.min(this.currentTime,d)/h;let D=Math.floor(N),b=N%1;!b&&N>=1&&(b=1),b===1&&D--,D=Math.min(D,m+1),!!(D%2)&&(_==="reverse"?(b=1-b,g&&(b-=g/h)):_==="mirror"&&(E=s)),w=Hn(0,1,b)*h}const A=y?{done:!1,value:c[0]}:E.next(w);a&&(A.value=a(A.value));let{done:k}=A;!y&&f!==null&&(k=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return I&&i!==void 0&&(A.value=ql(c,this.options,i)),C&&C(A.value),I&&this.finish(),A}get duration(){const{resolved:e}=this;return e?Bn(e.calculatedDuration):0}get time(){return Bn(this.currentTime)}set time(e){e=Un(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Bn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=VP,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const OP=new Set(["opacity","clipPath","filter","transform"]);function $P(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:c}={}){const f={[e]:n};c&&(f.offset=c);const d=Iw(a,i);return Array.isArray(d)&&(f.easing=d),t.animate(f,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}const zP=Hd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gl=10,GP=2e4;function HP(t){return oh(t.type)||t.type==="spring"||!Pw(t.ease)}function WP(t,e){const n=new vh({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<GP;)r=n.sample(o),i.push(r.value),o+=gl;return{times:void 0,keyframes:i,duration:o-gl,ease:"linear"}}const uC={anticipate:Ow,backInOut:Bw,circInOut:zw};function qP(t){return t in uC}class Km extends rC{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new nC(o,(s,a)=>this.onKeyframesResolved(s,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:o,type:s,motionValue:a,name:c,startTime:f}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof o=="string"&&hl()&&qP(o)&&(o=uC[o]),HP(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:_,...g}=this.options,C=WP(e,g);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,i=C.times,o=C.ease,s="keyframes"}const d=$P(a.owner.current,c,e,{...this.options,duration:r,times:i,ease:o});return d.startTime=f??this.calcStartTime(),this.pendingTimeline?(Nm(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(ql(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:s,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Bn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Bn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Un(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return $t;const{animation:r}=n;Nm(r,e)}return $t}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:s,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:d,onComplete:h,element:p,...m}=this.options,_=new vh({...m,keyframes:r,duration:i,type:o,ease:s,times:a,isGenerator:!0}),g=Un(this.time);f.setWithVelocity(_.sample(g-gl).value,_.sample(g).value,gl)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:s,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return zP()&&r&&OP.has(r)&&!c&&!f&&!i&&o!=="mirror"&&s!==0&&a!=="inertia"}}const JP={type:"spring",stiffness:500,damping:25,restSpeed:10},KP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),YP={type:"keyframes",duration:.8},XP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZP=(t,{keyframes:e})=>e.length>2?YP:Kr.has(t)?t.startsWith("scale")?KP(e[1]):JP:XP;function QP({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:c,elapsed:f,...d}){return!!Object.keys(d).length}const _h=(t,e,n,r={},i,o)=>s=>{const a=ih(r,t)||{},c=a.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Un(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-f,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:i};QP(a)||(d={...d,...ZP(t,d)}),d.duration&&(d.duration=Un(d.duration)),d.repeatDelay&&(d.repeatDelay=Un(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const p=ql(d.keyframes,a);if(p!==void 0)return Le.update(()=>{d.onUpdate(p),d.onComplete()}),new yA([])}return!o&&Km.supports(d)?new Km(d):new vh(d)};function jP({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function cC(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:s=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(s=r);const f=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const p=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),m=c[h];if(m===void 0||d&&jP(d,h))continue;const _={delay:n,...ih(s||{},h)};let g=!1;if(window.MotionHandoffAnimation){const v=bw(t);if(v){const y=window.MotionHandoffAnimation(v,h,Le);y!==null&&(_.startTime=y,g=!0)}}rf(t,h),p.start(_h(h,p,m,t.shouldReduceMotion&&Nw.has(h)?{type:!1}:_,t,g));const C=p.animation;C&&f.push(C)}return a&&Promise.all(f).then(()=>{Le.update(()=>{a&&MA(t,a)})}),f}function ff(t,e,n={}){var r;const i=Wl(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const s=i?()=>Promise.all(cC(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=o;return eI(t,e,d+f,h,p,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,d]=c==="beforeChildren"?[s,a]:[a,s];return f().then(()=>d())}else return Promise.all([s(),a(n.delay)])}function eI(t,e,n=0,r=0,i=1,o){const s=[],a=(t.variantChildren.size-1)*r,c=i===1?(f=0)=>f*r:(f=0)=>a-f*r;return Array.from(t.variantChildren).sort(tI).forEach((f,d)=>{f.notify("AnimationStart",e),s.push(ff(f,e,{...o,delay:n+c(d)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(s)}function tI(t,e){return t.sortNodePosition(e)}function nI(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>ff(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=ff(t,e,n);else{const i=typeof e=="function"?Wl(t,e,n.custom):e;r=Promise.all(cC(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const rI=qd.length;function fC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<rI;n++){const r=qd[n],i=t.props[r];(us(i)||i===!1)&&(e[r]=i)}return e}const iI=[...Wd].reverse(),oI=Wd.length;function sI(t){return e=>Promise.all(e.map(({animation:n,options:r})=>nI(t,n,r)))}function aI(t){let e=sI(t),n=Ym(),r=!0;const i=c=>(f,d)=>{var h;const p=Wl(t,d,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:_,...g}=p;f={...f,...g,..._}}return f};function o(c){e=c(t)}function s(c){const{props:f}=t,d=fC(t.parent)||{},h=[],p=new Set;let m={},_=1/0;for(let C=0;C<oI;C++){const v=iI[C],y=n[v],w=f[v]!==void 0?f[v]:d[v],E=us(w),A=v===c?y.isActive:null;A===!1&&(_=C);let k=w===d[v]&&w!==f[v]&&E;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...m},!y.isActive&&A===null||!w&&!y.prevProp||Gl(w)||typeof w=="boolean")continue;const I=lI(y.prevProp,w);let N=I||v===c&&y.isActive&&!k&&E||C>_&&E,D=!1;const b=Array.isArray(w)?w:[w];let G=b.reduce(i(v),{});A===!1&&(G={});const{prevResolvedValues:M={}}=y,O={...M,...G},S=q=>{N=!0,p.has(q)&&(D=!0,p.delete(q)),y.needsAnimating[q]=!0;const J=t.getValue(q);J&&(J.liveStyle=!1)};for(const q in O){const J=G[q],B=M[q];if(m.hasOwnProperty(q))continue;let Z=!1;ef(J)&&ef(B)?Z=!Sw(J,B):Z=J!==B,Z?J!=null?S(q):p.add(q):J!==void 0&&p.has(q)?S(q):y.protectedKeys[q]=!0}y.prevProp=w,y.prevResolvedValues=G,y.isActive&&(m={...m,...G}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(k&&I)||D)&&h.push(...b.map(q=>({animation:q,options:{type:v}})))}if(p.size){const C={};p.forEach(v=>{const y=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),C[v]=y??null}),h.push({animation:C})}let g=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(c,f){var d;if(n[c].isActive===f)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(c,f)}),n[c].isActive=f;const h=s(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Ym(),r=!0}}}function lI(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Sw(e,t):!1}function Sr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ym(){return{animate:Sr(!0),whileInView:Sr(),whileHover:Sr(),whileTap:Sr(),whileDrag:Sr(),whileFocus:Sr(),exit:Sr()}}class Cr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class uI extends Cr{constructor(e){super(e),e.animationState||(e.animationState=aI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let cI=0;class fI extends Cr{constructor(){super(...arguments),this.id=cI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const dI={animation:{Feature:uI},exit:{Feature:fI}};function hs(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Es(t){return{point:{x:t.pageX,y:t.pageY}}}const hI=t=>e=>ah(e)&&t(e,Es(e));function Oo(t,e,n,r){return hs(t,e,hI(n),r)}const Xm=(t,e)=>Math.abs(t-e);function pI(t,e){const n=Xm(t.x,e.x),r=Xm(t.y,e.y);return Math.sqrt(n**2+r**2)}class dC{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Gu(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=pI(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:_}=h,{timestamp:g}=ut;this.history.push({..._,timestamp:g});const{onStart:C,onMove:v}=this.handlers;p||(C&&C(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=zu(p,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:_,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Gu(h.type==="pointercancel"?this.lastMoveEventInfo:zu(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,C),_&&_(h,C)},!ah(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Es(e),a=zu(s,this.transformPagePoint),{point:c}=a,{timestamp:f}=ut;this.history=[{...c,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,Gu(a,this.history)),this.removeListeners=Ss(Oo(this.contextWindow,"pointermove",this.handlePointerMove),Oo(this.contextWindow,"pointerup",this.handlePointerUp),Oo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gr(this.updatePoint)}}function zu(t,e){return e?{point:e(t.point)}:t}function Zm(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Gu({point:t},e){return{point:t,delta:Zm(t,hC(e)),offset:Zm(t,mI(e)),velocity:gI(e,.1)}}function mI(t){return t[0]}function hC(t){return t[t.length-1]}function gI(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=hC(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Un(e)));)n--;if(!r)return{x:0,y:0};const o=Bn(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const pC=1e-4,yI=1-pC,vI=1+pC,mC=.01,_I=0-mC,wI=0+mC;function Gt(t){return t.max-t.min}function CI(t,e,n){return Math.abs(t-e)<=n}function Qm(t,e,n,r=.5){t.origin=r,t.originPoint=ze(e.min,e.max,t.origin),t.scale=Gt(n)/Gt(e),t.translate=ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=yI&&t.scale<=vI||isNaN(t.scale))&&(t.scale=1),(t.translate>=_I&&t.translate<=wI||isNaN(t.translate))&&(t.translate=0)}function $o(t,e,n,r){Qm(t.x,e.x,n.x,r?r.originX:void 0),Qm(t.y,e.y,n.y,r?r.originY:void 0)}function jm(t,e,n){t.min=n.min+e.min,t.max=t.min+Gt(e)}function xI(t,e,n){jm(t.x,e.x,n.x),jm(t.y,e.y,n.y)}function eg(t,e,n){t.min=e.min-n.min,t.max=t.min+Gt(e)}function zo(t,e,n){eg(t.x,e.x,n.x),eg(t.y,e.y,n.y)}function TI(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ze(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ze(n,t,r.max):Math.min(t,n)),t}function tg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function SI(t,{top:e,left:n,bottom:r,right:i}){return{x:tg(t.x,n,i),y:tg(t.y,e,r)}}function ng(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function EI(t,e){return{x:ng(t.x,e.x),y:ng(t.y,e.y)}}function AI(t,e){let n=.5;const r=Gt(t),i=Gt(e);return i>r?n=Gi(e.min,e.max-r,t.min):r>i&&(n=Gi(t.min,t.max-i,e.min)),Hn(0,1,n)}function PI(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const df=.35;function II(t=df){return t===!1?t=0:t===!0&&(t=df),{x:rg(t,"left","right"),y:rg(t,"top","bottom")}}function rg(t,e,n){return{min:ig(t,e),max:ig(t,n)}}function ig(t,e){return typeof t=="number"?t:t[e]||0}const og=()=>({translate:0,scale:1,origin:0,originPoint:0}),wi=()=>({x:og(),y:og()}),sg=()=>({min:0,max:0}),Ye=()=>({x:sg(),y:sg()});function Kt(t){return[t("x"),t("y")]}function gC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function kI({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function RI(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Hu(t){return t===void 0||t===1}function hf({scale:t,scaleX:e,scaleY:n}){return!Hu(t)||!Hu(e)||!Hu(n)}function Ir(t){return hf(t)||yC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yC(t){return ag(t.x)||ag(t.y)}function ag(t){return t&&t!=="0%"}function yl(t,e,n){const r=t-n,i=e*r;return n+i}function lg(t,e,n,r,i){return i!==void 0&&(t=yl(t,i,r)),yl(t,n,r)+e}function pf(t,e=0,n=1,r,i){t.min=lg(t.min,e,n,r,i),t.max=lg(t.max,e,n,r,i)}function vC(t,{x:e,y:n}){pf(t.x,e.translate,e.scale,e.originPoint),pf(t.y,n.translate,n.scale,n.originPoint)}const ug=.999999999999,cg=1.0000000000001;function MI(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xi(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,vC(t,s)),r&&Ir(o.latestValues)&&xi(t,o.latestValues))}e.x<cg&&e.x>ug&&(e.x=1),e.y<cg&&e.y>ug&&(e.y=1)}function Ci(t,e){t.min=t.min+e,t.max=t.max+e}function fg(t,e,n,r,i=.5){const o=ze(t.min,t.max,i);pf(t,e,n,o,r)}function xi(t,e){fg(t.x,e.x,e.scaleX,e.scale,e.originX),fg(t.y,e.y,e.scaleY,e.scale,e.originY)}function _C(t,e){return gC(RI(t.getBoundingClientRect(),e))}function NI(t,e,n){const r=_C(t,n),{scroll:i}=e;return i&&(Ci(r.x,i.offset.x),Ci(r.y,i.offset.y)),r}const wC=({current:t})=>t?t.ownerDocument.defaultView:null,DI=new WeakMap;class bI{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ye(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Es(d).point)},o=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:_}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AA(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kt(C=>{let v=this.getAxisMotionValue(C).get()||0;if(kn.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[C];w&&(v=Gt(w)*(parseFloat(v)/100))}}this.originPoint[C]=v}),_&&Le.postRender(()=>_(d,h)),rf(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:_,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:C}=h;if(m&&this.currentDirection===null){this.currentDirection=LI(C),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,C),this.updateAxis("y",h.point,C),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),c=()=>Kt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new dC(e,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:wC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Le.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!na(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=TI(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&vi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=SI(i.layoutBox,n):this.constraints=!1,this.elastic=II(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Kt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=PI(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!vi(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=NI(r,i.root,this.visualElement.getTransformPagePoint());let s=EI(i.layout.layoutBox,o);if(n){const a=n(kI(s));this.hasMutatedConstraints=!!a,a&&(s=gC(a))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},f=Kt(d=>{if(!na(d,n,this.currentDirection))return;let h=c&&c[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,_={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(f).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return rf(this.visualElement,e),r.start(_h(e,r,0,n,this.visualElement,!1))}stopAnimation(){Kt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Kt(n=>{const{drag:r}=this.getProps();if(!na(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(e[n]-ze(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Kt(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const c=a.get();i[s]=AI({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kt(s=>{if(!na(s,e,null))return;const a=this.getAxisMotionValue(s),{min:c,max:f}=this.constraints[s];a.set(ze(c,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;DI.set(this.visualElement,this);const e=this.visualElement.current,n=Oo(e,"pointerdown",c=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();vi(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Le.read(r);const s=hs(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Kt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=df,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function na(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function LI(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class FI extends Cr{constructor(e){super(e),this.removeGroupControls=$t,this.removeListeners=$t,this.controls=new bI(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$t}unmount(){this.removeGroupControls(),this.removeListeners()}}const dg=t=>(e,n)=>{t&&Le.postRender(()=>t(e,n))};class VI extends Cr{constructor(){super(...arguments),this.removePointerDownListener=$t}onPointerDown(e){this.session=new dC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dg(e),onStart:dg(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&Le.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=Oo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ma={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ho={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(fe.test(t))t=parseFloat(t);else return t;const n=hg(t,e.target.x),r=hg(t,e.target.y);return`${n}% ${r}%`}},UI={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=yr.parse(t);if(i.length>5)return r;const o=yr.createTransformer(t),s=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=a,i[1+s]/=c;const f=ze(a,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};class BI extends H.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;oA(OI),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ma.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Le.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Kd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function CC(t){const[e,n]=w1(),r=H.useContext(rw);return T.jsx(BI,{...t,layoutGroup:r,switchLayoutGroup:H.useContext(fw),isPresent:e,safeToRemove:n})}const OI={borderRadius:{...ho,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ho,borderTopRightRadius:ho,borderBottomLeftRadius:ho,borderBottomRightRadius:ho,boxShadow:UI};function $I(t,e,n){const r=_t(t)?t:fs(t);return r.start(_h("",r,e,n)),r.animation}function zI(t){return t instanceof SVGElement&&t.tagName!=="svg"}const GI=(t,e)=>t.depth-e.depth;class HI{constructor(){this.children=[],this.isDirty=!1}add(e){lh(this.children,e),this.isDirty=!0}remove(e){uh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GI),this.isDirty=!1,this.children.forEach(e)}}function WI(t,e){const n=Rn.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(gr(r),t(o-e))};return Le.read(r,!0),()=>gr(r)}const xC=["TopLeft","TopRight","BottomLeft","BottomRight"],qI=xC.length,pg=t=>typeof t=="string"?parseFloat(t):t,mg=t=>typeof t=="number"||fe.test(t);function JI(t,e,n,r,i,o){i?(t.opacity=ze(0,n.opacity!==void 0?n.opacity:1,KI(r)),t.opacityExit=ze(e.opacity!==void 0?e.opacity:1,0,YI(r))):o&&(t.opacity=ze(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<qI;s++){const a=`border${xC[s]}Radius`;let c=gg(e,a),f=gg(n,a);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||mg(c)===mg(f)?(t[a]=Math.max(ze(pg(c),pg(f),r),0),(kn.test(f)||kn.test(c))&&(t[a]+="%")):t[a]=f}(e.rotate||n.rotate)&&(t.rotate=ze(e.rotate||0,n.rotate||0,r))}function gg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const KI=TC(0,.5,$w),YI=TC(.5,.95,$t);function TC(t,e,n){return r=>r<t?0:r>e?1:n(Gi(t,e,r))}function yg(t,e){t.min=e.min,t.max=e.max}function Jt(t,e){yg(t.x,e.x),yg(t.y,e.y)}function vg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _g(t,e,n,r,i){return t-=e,t=yl(t,1/n,r),i!==void 0&&(t=yl(t,1/i,r)),t}function XI(t,e=0,n=1,r=.5,i,o=t,s=t){if(kn.test(e)&&(e=parseFloat(e),e=ze(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=ze(o.min,o.max,r);t===o&&(a-=e),t.min=_g(t.min,e,n,a,i),t.max=_g(t.max,e,n,a,i)}function wg(t,e,[n,r,i],o,s){XI(t,e[n],e[r],e[i],e.scale,o,s)}const ZI=["x","scaleX","originX"],QI=["y","scaleY","originY"];function Cg(t,e,n,r){wg(t.x,e,ZI,n?n.x:void 0,r?r.x:void 0),wg(t.y,e,QI,n?n.y:void 0,r?r.y:void 0)}function xg(t){return t.translate===0&&t.scale===1}function SC(t){return xg(t.x)&&xg(t.y)}function Tg(t,e){return t.min===e.min&&t.max===e.max}function jI(t,e){return Tg(t.x,e.x)&&Tg(t.y,e.y)}function Sg(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function EC(t,e){return Sg(t.x,e.x)&&Sg(t.y,e.y)}function Eg(t){return Gt(t.x)/Gt(t.y)}function Ag(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ek{constructor(){this.members=[]}add(e){lh(this.members,e),e.scheduleRender()}remove(e){if(uh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tk(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,s=n?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:_}=n;f&&(r=`perspective(${f}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const kr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Co=typeof window<"u"&&window.MotionDebug!==void 0,Wu=["","X","Y","Z"],nk={visibility:"hidden"},Pg=1e3;let rk=0;function qu(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function AC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=bw(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Le,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&AC(r)}function PC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e?.()){this.id=rk++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Co&&(kr.totalNodes=kr.resolvedTargetDeltas=kr.recalculatedProjection=0),this.nodes.forEach(sk),this.nodes.forEach(fk),this.nodes.forEach(dk),this.nodes.forEach(ak),Co&&window.MotionDebug.record(kr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new HI)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new ch),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const c=this.eventHandlers.get(s);c&&c.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zI(s),this.instance=s;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(f||c)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=WI(p,250),Ma.hasAnimatedSinceResize&&(Ma.hasAnimatedSinceResize=!1,this.nodes.forEach(kg))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||yk,{onLayoutAnimationStart:C,onLayoutAnimationComplete:v}=d.getProps(),y=!this.targetLayout||!EC(this.targetLayout,_)||m,w=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const E={...ih(g,"layout"),onPlay:C,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||kg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hk),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ig);return}this.isUpdating||this.nodes.forEach(uk),this.isUpdating=!1,this.nodes.forEach(ck),this.nodes.forEach(ik),this.nodes.forEach(ok),this.clearAllSnapshots();const a=Rn.now();ut.delta=Hn(0,1e3/60,a-ut.timestamp),ut.timestamp=a,ut.isProcessing=!0,Fu.update.process(ut),Fu.preRender.process(ut),Fu.render.process(ut),ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lk),this.sharedNodes.forEach(pk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!SC(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;s&&(a||Ir(this.latestValues)||d)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return s&&(c=this.removeTransform(c)),vk(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:a}=this.options;if(!a)return Ye();const c=a.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(_k))){const{scroll:d}=this.root;d&&(Ci(c.x,d.offset.x),Ci(c.y,d.offset.y))}return c}removeElementScroll(s){var a;const c=Ye();if(Jt(c,s),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Jt(c,s),Ci(c.x,h.offset.x),Ci(c.y,h.offset.y))}return c}applyTransform(s,a=!1){const c=Ye();Jt(c,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&xi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ir(d.latestValues)&&xi(c,d.latestValues)}return Ir(this.latestValues)&&xi(c,this.latestValues),c}removeTransform(s){const a=Ye();Jt(a,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!Ir(f.latestValues))continue;hf(f.latestValues)&&f.updateSnapshot();const d=Ye(),h=f.measurePageBox();Jt(d,h),Cg(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return Ir(this.latestValues)&&Cg(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(s||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=ut.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),zo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ye(),this.targetWithTransforms=Ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jt(this.target,this.layout.layoutBox),vC(this.target,this.targetDelta)):Jt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ye(),this.relativeTargetOrigin=Ye(),zo(this.relativeTargetOrigin,this.target,m.target),Jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Co&&kr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hf(this.parent.latestValues)||yC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let f=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ut.timestamp&&(f=!1),f)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Jt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;MI(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ye());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vg(this.prevProjectionDelta.x,this.projectionDelta.x),vg(this.prevProjectionDelta.y,this.projectionDelta.y)),$o(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!Ag(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ag(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Co&&kr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wi(),this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi()}setAnimationOrigin(s,a=!1){const c=this.snapshot,f=c?c.latestValues:{},d={...this.latestValues},h=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ye(),m=c?c.source:void 0,_=this.layout?this.layout.source:void 0,g=m!==_,C=this.getStack(),v=!C||C.members.length<=1,y=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(gk));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const A=E/1e3;Rg(h.x,s.x,A),Rg(h.y,s.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mk(this.relativeTarget,this.relativeTargetOrigin,p,A),w&&jI(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ye()),Jt(w,this.relativeTarget)),g&&(this.animationValues=d,JI(d,f,this.latestValues,A,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{Ma.hasAnimatedSinceResize=!0,this.currentAnimation=$I(0,Pg,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pg),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:c,layout:f,latestValues:d}=s;if(!(!a||!c||!f)){if(this!==s&&this.layout&&f&&IC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||Ye();const h=Gt(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=Gt(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}Jt(a,c),xi(a,d),$o(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new ek),this.sharedNodes.get(s).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const f={};c.z&&qu("z",s,f,this.animationValues);for(let d=0;d<Wu.length;d++)qu(`rotate${Wu[d]}`,s,f,this.animationValues),qu(`skew${Wu[d]}`,s,f,this.animationValues);s.render();for(const d in f)s.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);s.scheduleRender()}getProjectionStyles(s){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nk;const f={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=ka(s?.pointerEvents)||"",f.transform=d?d(this.latestValues,""):"none",f;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=ka(s?.pointerEvents)||""),this.hasProjected&&!Ir(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),f.transform=tk(this.projectionDeltaWithTransform,this.treeScale,p),d&&(f.transform=d(p,f.transform));const{x:m,y:_}=this.projectionDelta;f.transformOrigin=`${m.origin*100}% ${_.origin*100}% 0`,h.animationValues?f.opacity=h===this?(c=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:f.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in dl){if(p[g]===void 0)continue;const{correct:C,applyTo:v}=dl[g],y=f.transform==="none"?p[g]:C(p[g],h);if(v){const w=v.length;for(let E=0;E<w;E++)f[v[E]]=y}else f[g]=y}return this.options.layoutId&&(f.pointerEvents=h===this?ka(s?.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Ig),this.root.sharedNodes.clear()}}}function ik(t){t.updateLayout()}function ok(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?Kt(h=>{const p=s?n.measuredBox[h]:n.layoutBox[h],m=Gt(p);p.min=r[h].min,p.max=p.min+m}):IC(o,n.layoutBox,r)&&Kt(h=>{const p=s?n.measuredBox[h]:n.layoutBox[h],m=Gt(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=wi();$o(a,r,n.layoutBox);const c=wi();s?$o(c,t.applyTransform(i,!0),n.measuredBox):$o(c,r,n.layoutBox);const f=!SC(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const _=Ye();zo(_,n.layoutBox,p.layoutBox);const g=Ye();zo(g,r,m.layoutBox),EC(_,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:f,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function sk(t){Co&&kr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ak(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lk(t){t.clearSnapshot()}function Ig(t){t.clearMeasurements()}function uk(t){t.isLayoutDirty=!1}function ck(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function kg(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fk(t){t.resolveTargetDelta()}function dk(t){t.calcProjection()}function hk(t){t.resetSkewAndRotation()}function pk(t){t.removeLeadSnapshot()}function Rg(t,e,n){t.translate=ze(e.translate,0,n),t.scale=ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Mg(t,e,n,r){t.min=ze(e.min,n.min,r),t.max=ze(e.max,n.max,r)}function mk(t,e,n,r){Mg(t.x,e.x,n.x,r),Mg(t.y,e.y,n.y,r)}function gk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yk={duration:.45,ease:[.4,0,.1,1]},Ng=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Dg=Ng("applewebkit/")&&!Ng("chrome/")?Math.round:$t;function bg(t){t.min=Dg(t.min),t.max=Dg(t.max)}function vk(t){bg(t.x),bg(t.y)}function IC(t,e,n){return t==="position"||t==="preserve-aspect"&&!CI(Eg(e),Eg(n),.2)}function _k(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const wk=PC({attachResizeListener:(t,e)=>hs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ju={current:void 0},kC=PC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ju.current){const t=new wk({});t.mount(window),t.setOptions({layoutScroll:!0}),Ju.current=t}return Ju.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ck={pan:{Feature:VI},drag:{Feature:FI,ProjectionNode:kC,MeasureLayout:CC}};function Lg(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Le.postRender(()=>o(e,Es(e)))}class xk extends Cr{mount(){const{current:e}=this.node;e&&(this.unmount=CA(e,n=>(Lg(this.node,n,"Start"),r=>Lg(this.node,r,"End"))))}unmount(){}}class Tk extends Cr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ss(hs(this.node.current,"focus",()=>this.onFocus()),hs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Fg(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Le.postRender(()=>o(e,Es(e)))}class Sk extends Cr{mount(){const{current:e}=this.node;e&&(this.unmount=EA(e,n=>(Fg(this.node,n,"Start"),(r,{success:i})=>Fg(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mf=new WeakMap,Ku=new WeakMap,Ek=t=>{const e=mf.get(t.target);e&&e(t)},Ak=t=>{t.forEach(Ek)};function Pk({root:t,...e}){const n=t||document;Ku.has(n)||Ku.set(n,{});const r=Ku.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Ak,{root:t,...e})),r[i]}function Ik(t,e,n){const r=Pk(e);return mf.set(t,n),r.observe(t),()=>{mf.delete(t),r.unobserve(t)}}const kk={some:0,all:1};class Rk extends Cr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:kk[i]},a=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=f?d:h;p&&p(c)};return Ik(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Mk(e,n))&&this.startObserver()}unmount(){}}function Mk({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Nk={inView:{Feature:Rk},tap:{Feature:Sk},focus:{Feature:Tk},hover:{Feature:xk}},Dk={layout:{ProjectionNode:kC,MeasureLayout:CC}},gf={current:null},RC={current:!1};function bk(){if(RC.current=!0,!!Gd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gf.current=t.matches;t.addListener(e),e()}else gf.current=!1}const Lk=[...tC,yt,yr],Fk=t=>Lk.find(eC(t)),Vg=new WeakMap;function Vk(t,e,n){for(const r in e){const i=e[r],o=n[r];if(_t(i))t.addValue(r,i);else if(_t(o))t.addValue(r,fs(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,fs(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Ug=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Uk{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Rn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Le.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:d}=s;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=Hl(n),this.isVariantNode=uw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const _=p[m];c[m]!==void 0&&_t(_)&&_.set(c[m],!1)}}mount(e){this.current=e,Vg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),RC.current||bk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Vg.delete(this.current),this.projection&&this.projection.unmount(),gr(this.notifyUpdate),gr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Kr.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Le.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hi){const n=Hi[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ye()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ug.length;r++){const i=Ug[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Vk(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=fs(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Qw(i)||Gw(i))?i=parseFloat(i):!Fk(i)&&yr.test(n)&&(i=Yw(e,n)),this.setBaseTarget(e,_t(i)?i.get():i)),_t(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=Xd(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!_t(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ch),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class MC extends Uk{constructor(){super(...arguments),this.KeyframeResolver=nC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_t(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Bk(t){return window.getComputedStyle(t)}class Ok extends MC{constructor(){super(...arguments),this.type="html",this.renderInstance=vw}readValueFromInstance(e,n){if(Kr.has(n)){const r=mh(n);return r&&r.default||0}else{const r=Bk(e),i=(mw(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _C(e,n)}build(e,n,r){jd(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return rh(e,n,r)}}class $k extends MC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ye}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Kr.has(n)){const r=mh(n);return r&&r.default||0}return n=_w.has(n)?n:Jd(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return xw(e,n,r)}build(e,n,r){eh(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){ww(e,n,r,i)}mount(e){this.isSVGTag=nh(e.tagName),super.mount(e)}}const zk=(t,e)=>Yd(t)?new $k(e):new Ok(e,{allowProjection:t!==H.Fragment}),Gk=pA({...dI,...Nk,...Ck,...Dk},zk),Qr=k1(Gk),Bg=1,ra=`You are a world-class arbiter and editor. Your task is to synthesize multiple expert drafts into a single, coherent, and comprehensive answer that is superior to any individual draft.

Instructions:
1.  Read the original user question carefully.
2.  Review all the provided candidate answers, labeled A, B, C, etc.
3.  Identify the strengths, weaknesses, and unique insights from each draft.
4.  Synthesize the best elements from all drafts into a single, well-structured, and easy-to-read response.
5.  Do NOT simply list the drafts. Create a new, unified answer.
6.  If drafts contradict, use your judgment to determine the most likely correct information or acknowledge the controversy.
7.  Ensure your final answer directly and thoroughly addresses the original user's question.
8.  Do not include headings like "Final Answer" or "Synthesized Response". Begin the response directly.`,ps="gemini-2.5-flash",gn="gemini-2.5-pro",NC="gpt-5",Hk="gpt-5",Wk="gpt-5-mini",wh="openai/gpt-4o",qk="google/gemini-flash-1.5",DC="anthropic/claude-3-haiku-20240307",Jk="gpt-5-medium-reasoning",yf="gpt-5-high-reasoning",bC="You are a world-class expert. Reason step-by-step before providing your answer. ",Kk=`
Your reasoning and synthesis abilities are paramount. Before writing the final answer, explicitly outline the key points from each draft, identify convergences and divergences, and then construct a synthesis that resolves contradictions and builds upon the strongest arguments. Your final output should only be the synthesized answer itself.`;function Yk(t){if(typeof t!="object"||t===null)return null;const e=t,n=e.id??e.key??e.slug??e.uuid??(typeof e.name=="string"?e.name.toLowerCase().replace(/\s+/g,"-"):null)??null,r=e.name??e.title??e.label??(typeof e.id=="string"?e.id:null)??null,i=e.persona;return typeof n!="string"||typeof r!="string"||typeof i!="string"||!i?null:{id:n,name:r,persona:i}}async function Xk(){const e=await fetch("./config/experts.json");if(!e.ok)throw new Error(`Failed to fetch experts.json: ${e.status} ${e.statusText}`);const n=await e.json(),r=Array.isArray(n)?n:n&&Array.isArray(n.experts)?n.experts:[],i=[];for(const o of r){const s=Yk(o);s?i.push(s):console.warn("Skipping expert missing id, name, or persona:",o)}return i}let vf;try{vf=await Xk()}catch(t){console.error("Fatal: Could not load experts configuration. The application will run with no agents.",t),vf=[]}const Ch=vf;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Zk,Qk;function jk(){return{geminiUrl:Zk,vertexUrl:Qk}}function eR(t,e,n,r){var i,o;if(!t?.baseUrl){const s=jk();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yr{}function se(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function u(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let f=0;f<c.length;f++){const d=c[f];u(d,e.slice(o+1),n[f])}else for(const f of c)u(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>l(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _f(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Og;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Og||(Og={}));var $g;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($g||($g={}));var Qt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Qt||(Qt={}));var zg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(zg||(zg={}));var Gg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Gg||(Gg={}));var Hg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Hg||(Hg={}));var Wg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wg||(Wg={}));var qg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(qg||(qg={}));var Jg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jg||(Jg={}));var Kg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Kg||(Kg={}));var Yg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Yg||(Yg={}));var Xg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Xg||(Xg={}));var Zg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zg||(Zg={}));var Qg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Qg||(Qg={}));var jg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jg||(jg={}));var vl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(vl||(vl={}));var ey;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ey||(ey={}));var wf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wf||(wf={}));var ty;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ty||(ty={}));var ny;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ny||(ny={}));var ry;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ry||(ry={}));var iy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(iy||(iy={}));var oy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(oy||(oy={}));var sy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sy||(sy={}));var ay;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(ay||(ay={}));var ly;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ly||(ly={}));var uy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(uy||(uy={}));var cy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(cy||(cy={}));var fy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fy||(fy={}));var dy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dy||(dy={}));var hy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(hy||(hy={}));var py;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(py||(py={}));var my;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(my||(my={}));var gy;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(gy||(gy={}));var yy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yy||(yy={}));var vy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(vy||(vy={}));var _y;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(_y||(_y={}));var wy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wy||(wy={}));var Cy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Cy||(Cy={}));var xy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xy||(xy={}));var Ty;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ty||(Ty={}));var Sy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Sy||(Sy={}));var Ey;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ey||(Ey={}));var Ay;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ay||(Ay={}));var Ti;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ti||(Ti={}));class Cf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class po{get text(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1;const h=[];for(const p of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,_]of Object.entries(p))m!=="text"&&m!=="thought"&&(_!==null||_!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,f+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const d=[];for(const h of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(f+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,r,i,o,s,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.output}}class Py{}class Iy{}class tR{}class nR{}class rR{}class iR{}class ky{}class Ry{}class My{}class oR{}class Ny{}class Dy{}class by{}class Ly{}class sR{}class aR{}class lR{}class Fy{}class uR{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(a))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class _l{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new _l;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new Ny,s=i.videos;o.generatedVideos=s?.map(a=>({video:{uri:a.gcsUri,videoBytes:a.bytesBase64Encoded?_f(a.bytesBase64Encoded):void 0,mimeType:a.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new Ny,s=i.generateVideoResponse,a=s?.generatedSamples;o.generatedVideos=a?.map(c=>{const f=c.video;return{video:{uri:f?.uri,videoBytes:f?.encodedVideo?_f(f?.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s?.raiMediaFilteredCount,o.raiMediaFilteredReasons=s?.raiMediaFilteredReasons,r.response=o}}return r}}class cR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function LC(t,e){const n=Se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function FC(t){return Array.isArray(t)?t.map(e=>wl(e)):[wl(t)]}function wl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function VC(t){const e=wl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function UC(t){const e=wl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Vy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function BC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Vy(e)):[Vy(t)]}function xf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Uy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function By(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function wt(t){if(t==null)throw new Error("ContentUnion is required");return xf(t)?t:{role:"user",parts:BC(t)}}function OC(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=wt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=wt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>wt(n)):[wt(e)]}function tn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Uy(t)||By(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wt(t)]}const e=[],n=[],r=xf(t[0]);for(const i of t){const o=xf(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Uy(i)||By(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:BC(n)}),e}function fR(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Qt).includes(n[0].toUpperCase())?n[0].toUpperCase():Qt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Qt).includes(r.toUpperCase())?r.toUpperCase():Qt.TYPE_UNSPECIFIED})}}function Mi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&fR(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Qt).includes(a.toUpperCase())?a.toUpperCase():Qt.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Mi(a);else if(r.includes(s)){const c=[];for(const f of a){if(f.type=="null"){e.nullable=!0;continue}c.push(Mi(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,d]of Object.entries(a))c[f]=Mi(d);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function xh(t){return Mi(t)}function Th(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Sh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Zi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Mi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Mi(e.response));return t}function Qi(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function dR(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function qn(t,e){if(typeof e!="string")throw new Error("name must be a string");return dR(t,e,"cachedContents")}function $C(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Xr(t){return _f(t)}function hR(t){return t!=null&&typeof t=="object"&&"name"in t}function pR(t){return t!=null&&typeof t=="object"&&"video"in t}function mR(t){return t!=null&&typeof t=="object"&&"uri"in t}function zC(t){var e;let n;if(hR(t)&&(n=t.name),!(mR(t)&&(n=t.uri,n===void 0))&&!(pR(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function GC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function HC(t){for(const e of["models","tunedModels","publisherModels"])if(gR(t,e))return t[e];return[]}function gR(t,e){return t!==null&&typeof t=="object"&&e in t}function yR(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function vR(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=yR(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function WC(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function _R(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ji(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function qC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wR(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function CR(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function xR(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function TR(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],wR(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],CR(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],xR(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function JC(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>TR(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function SR(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const C=l(t,["minimum"]);C!=null&&u(e,["minimum"],C);const v=l(t,["nullable"]);v!=null&&u(e,["nullable"],v);const y=l(t,["pattern"]);y!=null&&u(e,["pattern"],y);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const k=l(t,["title"]);k!=null&&u(e,["title"],k);const I=l(t,["type"]);return I!=null&&u(e,["type"],I),e}function ER(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function AR(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function PR(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function IR(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],PR(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function kR(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function RR(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],kR(n)),e}function MR(){return{}}function NR(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function DR(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>AR(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],IR(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],RR(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],MR());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],NR(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function bR(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function LR(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function FR(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],LR(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function VR(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],bR(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],FR(r)),e}function UR(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function KC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],UR(n)),e}function BR(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],KC(r)),e}function OR(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>BR(i))),u(e,["speakerVoiceConfigs"],r)}return e}function $R(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],KC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],OR(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function zR(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function GR(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],JC(wt(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],SR(xh(v)));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let G=w;Array.isArray(G)&&(G=G.map(M=>ER(M))),u(n,["safetySettings"],G)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let G=Qi(E);Array.isArray(G)&&(G=G.map(M=>DR(Zi(M)))),u(n,["tools"],G)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],VR(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&u(n,["cachedContent"],qn(t,k));const I=l(e,["responseModalities"]);I!=null&&u(r,["responseModalities"],I);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],$R(Th(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=l(e,["thinkingConfig"]);return b!=null&&u(r,["thinkingConfig"],zR(b)),r}function HR(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],Se(t,r));const i=l(e,["contents"]);if(i!=null){let s=tn(i);Array.isArray(s)&&(s=s.map(a=>JC(a))),u(n,["request","contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["request","generationConfig"],GR(t,o,n)),n}function WR(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>HR(t,s))),u(n,["requests","requests"],o)}return n}function qR(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Oy(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["src"]);i!=null&&u(n,["batch","inputConfig"],WR(t,WC(t,i)));const o=l(e,["config"]);return o!=null&&u(n,["config"],qR(o,n)),n}function JR(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ji(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function KR(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ji(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function YR(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function XR(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],YR(n,e)),e}function ZR(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ji(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function QR(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jR(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function eM(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&u(e,["outputConfig"],jR(_R(i))),n}function tM(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Se(t,r));const i=l(e,["src"]);i!=null&&u(n,["inputConfig"],QR(WC(t,i)));const o=l(e,["config"]);return o!=null&&u(n,["config"],eM(o,n)),n}function nM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ji(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function rM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ji(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function iM(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function oM(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],iM(n,e)),e}function sM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ji(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function aM(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function lM(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function uM(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function cM(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],aM(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],lM(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],uM(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function fM(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cM(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function dM(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function hM(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function pM(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hM(i))),u(e,["urlMetadata"],r)}return e}function mM(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],fM(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],dM(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],pM(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function gM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>mM(f))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function YC(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function yM(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],gM(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],YC(r)),e}function vM(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>yM(o))),u(e,["inlinedResponses"],i)}return e}function Na(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&u(e,["state"],qC(i));const o=l(t,["metadata","createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const f=l(t,["metadata","output"]);return f!=null&&u(e,["dest"],vM(f)),e}function _M(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Na(s))),u(e,["batchJobs"],o)}return e}function wM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],YC(o)),e}function XC(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function CM(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function xM(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function Tf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],qC(i));const o=l(t,["error"]);o!=null&&u(e,["error"],XC(o));const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const f=l(t,["updateTime"]);f!=null&&u(e,["updateTime"],f);const d=l(t,["model"]);d!=null&&u(e,["model"],d);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],CM(h));const p=l(t,["outputConfig"]);return p!=null&&u(e,["dest"],xM(p)),e}function TM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Tf(s))),u(e,["batchJobs"],o)}return e}function SM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],XC(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Hr||(Hr={}));class As{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let EM=class extends Yr{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const a=Oy(this.apiClient,n);o=se("{model}:batchGenerateContent",a._url),s=a._query;const d=a.batch.inputConfig.requests,h=d.requests,p=[];for(const _ of h){const g=_;if(g.systemInstruction){const C=g.systemInstruction;delete g.systemInstruction;const v=g.request;v.systemInstruction=C,g.request=v}p.push(g)}return d.requests=p,delete a.config,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()).then(_=>Na(_))}return await this.createInternal(n)},this.list=async(n={})=>new As(Hr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=tM(this.apiClient,e);return a=se("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Tf(d))}else{const f=Oy(this.apiClient,e);return a=se("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Na(d))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=nM(this.apiClient,e);return a=se("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Tf(d))}else{const f=JR(this.apiClient,e);return a=se("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Na(d))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const c=rM(this.apiClient,e);s=se("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=KR(this.apiClient,e);s=se("batches/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=oM(e);return a=se("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=TM(d),p=new Fy;return Object.assign(p,h),p})}else{const f=XR(e);return a=se("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=_M(d),p=new Fy;return Object.assign(p,h),p})}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=sM(this.apiClient,e);return a=se("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>SM(d))}else{const f=ZR(this.apiClient,e);return a=se("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>wM(d))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AM(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function PM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function IM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function kM(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],AM(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],PM(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],IM(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function $y(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kM(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function RM(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function MM(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function NM(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],MM(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function DM(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function bM(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],DM(n)),e}function LM(){return{}}function FM(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function VM(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>RM(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],NM(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],bM(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],LM());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],FM(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function UM(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function BM(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function OM(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],BM(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function $M(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],UM(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],OM(r)),e}function zM(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let d=tn(s);Array.isArray(d)&&(d=d.map(h=>$y(h))),u(e,["contents"],d)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],$y(wt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>VM(h))),u(e,["tools"],d)}const f=l(t,["toolConfig"]);if(e!==void 0&&f!=null&&u(e,["toolConfig"],$M(f)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function GM(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],LC(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],zM(i,n)),n}function HM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],qn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function WM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],qn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function qM(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function JM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],qn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],qM(i,n)),n}function KM(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function YM(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],KM(n,e)),e}function XM(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function ZM(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function QM(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function jM(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],XM(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],ZM(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],QM(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function zy(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jM(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function e2(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function t2(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function n2(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],t2(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function r2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function i2(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],r2(n)),e}function o2(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function s2(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function a2(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],s2(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function l2(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],a2(n)),e}function u2(){return{}}function c2(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function f2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>e2(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],n2(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],i2(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],o2(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],l2(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],u2());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],c2(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function d2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function h2(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function p2(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],h2(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function m2(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],d2(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],p2(r)),e}function g2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=tn(s);Array.isArray(h)&&(h=h.map(p=>zy(p))),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],zy(wt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>f2(p))),u(e,["tools"],h)}const f=l(t,["toolConfig"]);e!==void 0&&f!=null&&u(e,["toolConfig"],m2(f));const d=l(t,["kmsKeyName"]);return e!==void 0&&d!=null&&u(e,["encryption_spec","kmsKeyName"],d),n}function y2(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],LC(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],g2(i,n)),n}function v2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],qn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function _2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],qn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function w2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function C2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],qn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],w2(i,n)),n}function x2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function T2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],x2(n,e)),e}function Da(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&u(e,["updateTime"],s);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function S2(){return{}}function E2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Da(s))),u(e,["cachedContents"],o)}return e}function ba(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&u(e,["updateTime"],s);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function A2(){return{}}function P2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ba(s))),u(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I2 extends Yr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new As(Hr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=y2(this.apiClient,e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>ba(d))}else{const f=GM(this.apiClient,e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Da(d))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=v2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>ba(d))}else{const f=HM(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Da(d))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=_2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(()=>{const d=A2(),h=new by;return Object.assign(h,d),h})}else{const f=WM(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=S2(),h=new by;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=C2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>ba(d))}else{const f=JM(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Da(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=T2(e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=P2(d),p=new Ly;return Object.assign(p,h),p})}else{const f=YM(e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=E2(d),p=new Ly;return Object.assign(p,h),p})}}}function Gy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function De(t){return this instanceof De?(this.v=t,this):new De(t)}function Ni(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(i[m]=function(g){return new Promise(function(C,v){o.push([m,g,C,v])>1||c(m,g)})},_&&(i[m]=_(i[m])))}function c(m,_){try{f(r[m](_))}catch(g){p(o[0][3],g)}}function f(m){m.value instanceof De?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,_){m(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Go(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gy=="function"?Gy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(f){o({value:f,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k2(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ZC(n)}function ZC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function R2(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hy(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!ZC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class M2{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new N2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let N2=class{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),R2(o)}async sendMessage(e){var n;await this.sendPromise;const r=wt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,d=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(h))!==null&&a!==void 0?a:[]);const m=f?[f]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=wt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Hy(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Ni(this,arguments,function*(){var s,a,c,f;const d=[];try{for(var h=!0,p=Go(e),m;m=yield De(p.next()),s=m.done,!s;h=!0){f=m.value,h=!1;const _=f;if(k2(_)){const g=(i=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;g!==void 0&&d.push(g)}yield yield De(_)}}catch(_){a={error:_}}finally{try{!h&&!s&&(c=p.return)&&(yield De(c.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Hy(r)):this.history.push(e),this.history.push(...i)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function b2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],D2(n,e)),e}function L2(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function F2(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&u(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const _=l(t,["videoMetadata"]);_!=null&&u(e,["videoMetadata"],_);const g=l(t,["error"]);return g!=null&&u(e,["error"],L2(g)),e}function V2(t){const e={},n=l(t,["file"]);n!=null&&u(e,["file"],F2(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function U2(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],zC(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function B2(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],zC(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function O2(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function Sf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&u(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const _=l(t,["videoMetadata"]);_!=null&&u(e,["videoMetadata"],_);const g=l(t,["error"]);return g!=null&&u(e,["error"],O2(g)),e}function $2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Sf(s))),u(e,["files"],o)}return e}function z2(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function G2(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let H2=class extends Yr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new As(Hr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Sf(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=b2(e);return o=se("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=$2(c),d=new sR;return Object.assign(d,f),d})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=V2(e);return o=se("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=z2(c),d=new aR;return Object.assign(d,f),d})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=U2(e);return o=se("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Sf(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B2(e);return o=se("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{const c=G2(),f=new lR;return Object.assign(f,c),f})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function QC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],W2(n)),e}function q2(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],QC(r)),e}function J2(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>q2(i))),u(e,["speakerVoiceConfigs"],r)}return e}function K2(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],QC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],J2(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function Y2(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function X2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Z2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Q2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],Y2(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],X2(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],Z2(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function j2(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Q2(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function eN(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function tN(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function nN(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],tN(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function rN(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function iN(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],rN(n)),e}function oN(){return{}}function sN(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function aN(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>eN(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],nN(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],iN(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],oN());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],sN(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function lN(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Wy(){return{}}function uN(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function cN(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],uN(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function fN(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function dN(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],fN(r)),e}function hN(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function pN(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],K2(Sh(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],j2(wt(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=Qi(_);Array.isArray(A)&&(A=A.map(k=>aN(Zi(k)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],lN(g));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&u(e,["setup","inputAudioTranscription"],Wy());const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","outputAudioTranscription"],Wy());const y=l(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&u(e,["setup","realtimeInputConfig"],cN(y));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],dN(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],hN(E)),n}function mN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],pN(i,n)),n}function gN(){return{}}function yN(){return{}}function vN(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],FC(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],UC(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],VC(o));const s=l(t,["text"]);return s!=null&&u(e,["text"],s),l(t,["activityStart"])!=null&&u(e,["activityStart"],gN()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],yN()),e}function jC(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function _N(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jC(i))),u(e,["weightedPrompts"],r)}return e}function ex(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&u(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&u(e,["bpm"],s);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function wN(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],ex(n)),e}function tx(t){const e={},n=l(t,["model"]);return n!=null&&u(e,["model"],n),e}function nx(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jC(i))),u(e,["weightedPrompts"],r)}return e}function Ef(t){const e={},n=l(t,["setup"]);n!=null&&u(e,["setup"],tx(n));const r=l(t,["clientContent"]);r!=null&&u(e,["clientContent"],nx(r));const i=l(t,["musicGenerationConfig"]);i!=null&&u(e,["musicGenerationConfig"],ex(i));const o=l(t,["playbackControl"]);return o!=null&&u(e,["playbackControl"],o),e}function CN(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function xN(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],CN(n)),e}function TN(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],xN(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function SN(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function EN(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function AN(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function PN(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],SN(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],EN(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],AN(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function IN(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>PN(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function kN(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function RN(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function MN(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],RN(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function NN(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function DN(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],NN(n)),e}function bN(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function LN(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function FN(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],LN(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function VN(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],FN(n)),e}function UN(){return{}}function BN(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function ON(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>kN(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],MN(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],DN(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],bN(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],VN(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],UN());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],BN(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function $N(t){const e={},n=l(t,["handle"]);n!=null&&u(e,["handle"],n);const r=l(t,["transparent"]);return r!=null&&u(e,["transparent"],r),e}function qy(){return{}}function zN(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function GN(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],zN(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function HN(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function WN(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],HN(r)),e}function qN(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function JN(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],TN(Sh(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],IN(wt(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=Qi(_);Array.isArray(A)&&(A=A.map(k=>ON(Zi(k)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],$N(g));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&u(e,["setup","inputAudioTranscription"],qy());const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","outputAudioTranscription"],qy());const y=l(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&u(e,["setup","realtimeInputConfig"],GN(y));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],WN(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],qN(E)),n}function KN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],JN(i,n)),n}function YN(){return{}}function XN(){return{}}function ZN(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],FC(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],UC(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],VC(o));const s=l(t,["text"]);return s!=null&&u(e,["text"],s),l(t,["activityStart"])!=null&&u(e,["activityStart"],YN()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],XN()),e}function QN(){return{}}function jN(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function eD(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function tD(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function nD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],jN(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],eD(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],tD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function rD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Jy(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function iD(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function oD(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iD(i))),u(e,["urlMetadata"],r)}return e}function sD(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],rD(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&u(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&u(e,["generationComplete"],s);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],Jy(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],Jy(c));const f=l(t,["urlContextMetadata"]);return f!=null&&u(e,["urlContextMetadata"],oD(f)),e}function aD(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);return i!=null&&u(e,["name"],i),e}function lD(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aD(i))),u(e,["functionCalls"],r)}return e}function uD(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function ia(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function cD(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["responseTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ia(m))),u(e,["promptTokensDetails"],p)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>ia(m))),u(e,["cacheTokensDetails"],p)}const d=l(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>ia(m))),u(e,["responseTokensDetails"],p)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>ia(m))),u(e,["toolUsePromptTokensDetails"],p)}return e}function fD(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function dD(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function hD(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],QN());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],sD(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],lD(i));const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],uD(o));const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],cD(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],fD(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],dD(c)),e}function pD(){return{}}function mD(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function gD(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mD(i))),u(e,["weightedPrompts"],r)}return e}function yD(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&u(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&u(e,["bpm"],s);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function vD(t){const e={},n=l(t,["clientContent"]);n!=null&&u(e,["clientContent"],gD(n));const r=l(t,["musicGenerationConfig"]);return r!=null&&u(e,["musicGenerationConfig"],yD(r)),e}function _D(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);r!=null&&u(e,["mimeType"],r);const i=l(t,["sourceMetadata"]);return i!=null&&u(e,["sourceMetadata"],vD(i)),e}function wD(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_D(i))),u(e,["audioChunks"],r)}return e}function CD(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["filteredReason"]);return r!=null&&u(e,["filteredReason"],r),e}function xD(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],pD());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],wD(r));const i=l(t,["filteredPrompt"]);return i!=null&&u(e,["filteredPrompt"],CD(i)),e}function TD(t){const e={},n=l(t,["sessionId"]);return n!=null&&u(e,["sessionId"],n),e}function SD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function ED(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function AD(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function PD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],SD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],ED(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],AD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function ID(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>PD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Ky(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function kD(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],ID(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&u(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&u(e,["generationComplete"],s);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],Ky(a));const c=l(t,["outputTranscription"]);return c!=null&&u(e,["outputTranscription"],Ky(c)),e}function RD(t){const e={},n=l(t,["args"]);n!=null&&u(e,["args"],n);const r=l(t,["name"]);return r!=null&&u(e,["name"],r),e}function MD(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>RD(i))),u(e,["functionCalls"],r)}return e}function ND(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function oa(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function DD(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(_=>oa(_))),u(e,["promptTokensDetails"],m)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>oa(_))),u(e,["cacheTokensDetails"],m)}const d=l(t,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>oa(_))),u(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>oa(_))),u(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}function bD(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function LD(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function FD(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],TD(n));const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],kD(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],MD(i));const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],ND(o));const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],DD(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],bD(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],LD(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function UD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function BD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function OD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],VD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],UD(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],BD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Kl(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>OD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function $D(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const C=l(t,["minimum"]);C!=null&&u(e,["minimum"],C);const v=l(t,["nullable"]);v!=null&&u(e,["nullable"],v);const y=l(t,["pattern"]);y!=null&&u(e,["pattern"],y);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const k=l(t,["title"]);k!=null&&u(e,["title"],k);const I=l(t,["type"]);return I!=null&&u(e,["type"],I),e}function zD(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function GD(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function HD(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function WD(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],HD(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function qD(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function JD(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],qD(n)),e}function KD(){return{}}function YD(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function XD(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>GD(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],WD(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],JD(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],KD());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],YD(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function ZD(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function QD(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function jD(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],QD(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function eb(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],ZD(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],jD(r)),e}function tb(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function rx(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],tb(n)),e}function nb(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],rx(r)),e}function rb(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>nb(i))),u(e,["speakerVoiceConfigs"],r)}return e}function ib(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],rx(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],rb(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function ob(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function sb(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],Kl(wt(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],$D(xh(v)));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let G=w;Array.isArray(G)&&(G=G.map(M=>zD(M))),u(n,["safetySettings"],G)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let G=Qi(E);Array.isArray(G)&&(G=G.map(M=>XD(Zi(M)))),u(n,["tools"],G)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],eb(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&u(n,["cachedContent"],qn(t,k));const I=l(e,["responseModalities"]);I!=null&&u(r,["responseModalities"],I);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],ib(Th(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=l(e,["thinkingConfig"]);return b!=null&&u(r,["thinkingConfig"],ob(b)),r}function Yy(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);if(i!=null){let s=tn(i);Array.isArray(s)&&(s=s.map(a=>Kl(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],sb(t,o,n)),n}function ab(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&u(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function lb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);i!=null&&u(n,["requests[]","content"],OC(t,i));const o=l(e,["config"]);o!=null&&u(n,["config"],ab(o,n));const s=l(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],Se(t,s)),n}function ub(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&u(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const f=l(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const d=l(t,["language"]);e!==void 0&&d!=null&&u(e,["parameters","language"],d);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const m=l(t,["imageSize"]);if(e!==void 0&&m!=null&&u(e,["parameters","sampleImageSize"],m),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function cb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&u(n,["config"],ub(o,n)),n}function fb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function db(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],GC(t,a)),r}function hb(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],db(t,r,n)),n}function pb(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function mb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],pb(i,n)),n}function gb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function yb(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function vb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);if(i!=null){let s=tn(i);Array.isArray(s)&&(s=s.map(a=>Kl(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],yb(o)),n}function _b(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Xr(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function wb(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);if(e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=l(t,["personGeneration"]);if(e!==void 0&&s!=null&&u(e,["parameters","personGeneration"],s),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=l(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&u(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Cb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);if(o!=null&&u(n,["instances[0]","image"],_b(o)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=l(e,["config"]);return s!=null&&u(n,["config"],wb(s,n)),n}function xb(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function Tb(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Sb(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Eb(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],xb(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],Tb(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],Sb(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function eo(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Eb(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Ab(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const C=l(t,["minimum"]);C!=null&&u(e,["minimum"],C);const v=l(t,["nullable"]);v!=null&&u(e,["nullable"],v);const y=l(t,["pattern"]);y!=null&&u(e,["pattern"],y);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const k=l(t,["title"]);k!=null&&u(e,["title"],k);const I=l(t,["type"]);return I!=null&&u(e,["type"],I),e}function Pb(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&u(e,["featureSelectionPreference"],n),e}function Ib(t){const e={},n=l(t,["method"]);n!=null&&u(e,["method"],n);const r=l(t,["category"]);r!=null&&u(e,["category"],r);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function kb(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function Rb(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function Mb(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],Rb(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function Nb(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function Db(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],Nb(n)),e}function bb(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function Lb(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function Fb(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],Lb(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function Vb(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],Fb(n)),e}function Ub(){return{}}function Bb(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function ix(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>kb(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],Mb(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],Db(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],bb(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],Vb(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],Ub());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],Bb(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function Ob(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function $b(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function zb(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],$b(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function Gb(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],Ob(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],zb(r)),e}function Hb(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function Wb(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],Hb(n)),e}function qb(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],Wb(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function Jb(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function Kb(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],eo(wt(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Ab(xh(v)));const y=l(e,["responseJsonSchema"]);y!=null&&u(r,["responseJsonSchema"],y);const w=l(e,["routingConfig"]);w!=null&&u(r,["routingConfig"],w);const E=l(e,["modelSelectionConfig"]);E!=null&&u(r,["modelConfig"],Pb(E));const A=l(e,["safetySettings"]);if(n!==void 0&&A!=null){let z=A;Array.isArray(z)&&(z=z.map(ae=>Ib(ae))),u(n,["safetySettings"],z)}const k=l(e,["tools"]);if(n!==void 0&&k!=null){let z=Qi(k);Array.isArray(z)&&(z=z.map(ae=>ix(Zi(ae)))),u(n,["tools"],z)}const I=l(e,["toolConfig"]);n!==void 0&&I!=null&&u(n,["toolConfig"],Gb(I));const N=l(e,["labels"]);n!==void 0&&N!=null&&u(n,["labels"],N);const D=l(e,["cachedContent"]);n!==void 0&&D!=null&&u(n,["cachedContent"],qn(t,D));const b=l(e,["responseModalities"]);b!=null&&u(r,["responseModalities"],b);const G=l(e,["mediaResolution"]);G!=null&&u(r,["mediaResolution"],G);const M=l(e,["speechConfig"]);M!=null&&u(r,["speechConfig"],qb(Th(M)));const O=l(e,["audioTimestamp"]);O!=null&&u(r,["audioTimestamp"],O);const S=l(e,["thinkingConfig"]);return S!=null&&u(r,["thinkingConfig"],Jb(S)),r}function Xy(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);if(i!=null){let s=tn(i);Array.isArray(s)&&(s=s.map(a=>eo(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],Kb(t,o,n)),n}function Yb(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&u(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function Xb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);i!=null&&u(n,["instances[]","content"],OC(t,i));const o=l(e,["config"]);return o!=null&&u(n,["config"],Yb(o,n)),n}function Zb(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const v=l(t,["imageSize"]);e!==void 0&&v!=null&&u(e,["parameters","sampleImageSize"],v);const y=l(t,["enhancePrompt"]);return e!==void 0&&y!=null&&u(e,["parameters","enhancePrompt"],y),n}function Qb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&u(n,["config"],Zb(o,n)),n}function Jn(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Xr(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function jb(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&u(e,["dilation"],i),e}function e5(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function t5(t){const e={},n=l(t,["styleDescription"]);return n!=null&&u(e,["styleDescription"],n),e}function n5(t){const e={},n=l(t,["subjectType"]);n!=null&&u(e,["subjectType"],n);const r=l(t,["subjectDescription"]);return r!=null&&u(e,["subjectDescription"],r),e}function r5(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Jn(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&u(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&u(e,["maskImageConfig"],jb(o));const s=l(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],e5(s));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],t5(a));const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],n5(c)),e}function i5(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const v=l(t,["editMode"]);e!==void 0&&v!=null&&u(e,["parameters","editMode"],v);const y=l(t,["baseSteps"]);return e!==void 0&&y!=null&&u(e,["parameters","editConfig","baseSteps"],y),n}function o5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>r5(c))),u(n,["instances[0]","referenceImages"],a)}const s=l(e,["config"]);return s!=null&&u(n,["config"],i5(s,n)),n}function s5(t,e){const n={},r=l(t,["includeRaiReason"]);e!==void 0&&r!=null&&u(e,["parameters","includeRaiReason"],r);const i=l(t,["outputMimeType"]);e!==void 0&&i!=null&&u(e,["parameters","outputOptions","mimeType"],i);const o=l(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&u(e,["parameters","outputOptions","compressionQuality"],o);const s=l(t,["enhanceInputImage"]);e!==void 0&&s!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],s);const a=l(t,["imagePreservationFactor"]);e!==void 0&&a!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const c=l(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=l(t,["mode"]);return e!==void 0&&f!=null&&u(e,["parameters","mode"],f),n}function a5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],Jn(i));const o=l(e,["upscaleFactor"]);o!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&u(n,["config"],s5(s,n)),n}function l5(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],Jn(n)),e}function u5(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&u(e,["instances[0]","personImage","image"],Jn(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>l5(a))),u(e,["instances[0]","productImages"],s)}return n}function c5(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&u(e,["parameters","editConfig","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const d=l(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&u(e,["parameters","outputOptions","compressionQuality"],d);const h=l(t,["enhancePrompt"]);return e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h),n}function f5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],u5(i,n));const o=l(e,["config"]);return o!=null&&u(n,["config"],c5(o,n)),n}function d5(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],Jn(n)),e}function h5(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],Jn(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&u(e,["instances[0]","scribble"],d5(o)),n}function p5(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&u(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&u(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const a=l(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a),n}function m5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],h5(i,n));const o=l(e,["config"]);return o!=null&&u(n,["config"],p5(o,n)),n}function g5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function y5(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],GC(t,a)),r}function v5(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],y5(t,r,n)),n}function _5(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function w5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],_5(i,n)),n}function C5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function x5(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],eo(wt(r)));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>ix(a))),u(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&u(e,["generationConfig"],o),n}function T5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);if(i!=null){let s=tn(i);Array.isArray(s)&&(s=s.map(a=>eo(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],x5(o,n)),n}function S5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["contents"]);if(i!=null){let s=tn(i);Array.isArray(s)&&(s=s.map(a=>eo(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],o),n}function E5(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Xr(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function A5(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Jn(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function P5(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&u(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=l(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const _=l(t,["generateAudio"]);e!==void 0&&_!=null&&u(e,["parameters","generateAudio"],_);const g=l(t,["lastFrame"]);e!==void 0&&g!=null&&u(e,["instances[0]","lastFrame"],Jn(g));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let y=C;Array.isArray(y)&&(y=y.map(w=>A5(w))),u(e,["instances[0]","referenceImages"],y)}const v=l(t,["compressionQuality"]);return e!==void 0&&v!=null&&u(e,["parameters","compressionQuality"],v),n}function I5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Se(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],Jn(o));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],E5(s));const a=l(e,["config"]);return a!=null&&u(n,["config"],P5(a,n)),n}function k5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function R5(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function M5(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function N5(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],k5(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],R5(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],M5(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function D5(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>N5(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function b5(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function L5(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function F5(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>L5(i))),u(e,["urlMetadata"],r)}return e}function V5(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],D5(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],b5(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],F5(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function Zy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>V5(f))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function U5(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function B5(){return{}}function O5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>U5(s))),u(e,["embeddings"],o)}return l(t,["metadata"])!=null&&u(e,["metadata"],B5()),e}function $5(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Xr(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ox(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function z5(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],$5(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&u(e,["safetyAttributes"],ox(i)),e}function G5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>z5(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],ox(i)),e}function H5(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function Af(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["version"]);o!=null&&u(e,["version"],o);const s=l(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],H5(s));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const f=l(t,["supportedGenerationMethods"]);return f!=null&&u(e,["supportedActions"],f),e}function W5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=HC(i);Array.isArray(o)&&(o=o.map(s=>Af(s))),u(e,["models"],o)}return e}function q5(){return{}}function J5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(e,["cachedContentTokenCount"],i),e}function K5(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["video","encodedVideo"]);r!=null&&u(e,["videoBytes"],Xr(r));const i=l(t,["encoding"]);return i!=null&&u(e,["mimeType"],i),e}function Y5(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],K5(n)),e}function X5(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Y5(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function Z5(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],X5(s)),e}function Q5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function j5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function eL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function tL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],Q5(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],j5(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],eL(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function nL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>tL(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function rL(t){const e={},n=l(t,["citations"]);return n!=null&&u(e,["citations"],n),e}function iL(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function oL(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iL(i))),u(e,["urlMetadata"],r)}return e}function sL(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],nL(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],rL(r));const i=l(t,["finishMessage"]);i!=null&&u(e,["finishMessage"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],oL(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function Qy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>sL(d))),u(e,["candidates"],f)}const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function aL(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function lL(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],aL(r)),e}function uL(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&u(e,["billableCharacterCount"],n),e}function cL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>lL(s))),u(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],uL(i)),e}function sx(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],Xr(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function ax(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function Yl(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],sx(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&u(e,["safetyAttributes"],ax(i));const o=l(t,["prompt"]);return o!=null&&u(e,["enhancedPrompt"],o),e}function fL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Yl(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],ax(i)),e}function dL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Yl(o))),u(e,["generatedImages"],i)}return e}function hL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Yl(o))),u(e,["generatedImages"],i)}return e}function pL(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Yl(i))),u(e,["generatedImages"],r)}return e}function mL(t){const e={},n=l(t,["label"]);n!=null&&u(e,["label"],n);const r=l(t,["score"]);return r!=null&&u(e,["score"],r),e}function gL(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],sx(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>mL(o))),u(e,["labels"],i)}return e}function yL(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gL(i))),u(e,["generatedMasks"],r)}return e}function vL(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function _L(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function wL(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);return i!=null&&u(e,["step"],i),e}function Pf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["versionId"]);o!=null&&u(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>vL(p))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],_L(c));const f=l(t,["defaultCheckpointId"]);f!=null&&u(e,["defaultCheckpointId"],f);const d=l(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>wL(p))),u(e,["checkpoints"],h)}return e}function CL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=HC(i);Array.isArray(o)&&(o=o.map(s=>Pf(s))),u(e,["models"],o)}return e}function xL(){return{}}function TL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function SL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);return r!=null&&u(e,["tokensInfo"],r),e}function EL(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Xr(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function AL(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],EL(n)),e}function PL(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>AL(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function IL(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],PL(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kL="Content-Type",RL="X-Server-Timeout",ML="User-Agent",If="x-goog-api-client",NL="1.15.0",DL=`google-genai-sdk/${NL}`,bL="v1beta1",LL="v1beta",jy=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class FL{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:bL,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:LL,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&n?.timeout>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&VL(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ev(i),new Cf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await ev(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Ni(this,arguments,function*(){const i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:c}=yield De(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const h=JSON.parse(f);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,_=p.code,g=`got status: ${m}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new Jl({message:g,status:_})}}catch(h){if(h.name==="ApiError")throw h}s+=f;let d=s.match(jy);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield De(new Cf(p)),s=s.slice(d[0].length),d=s.match(jy)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=DL+" "+this.clientOptions.userAgentExtra;return e[ML]=n,e[If]=n,e[kL]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(RL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n?.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:se("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!s?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=s?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function ev(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Jl({message:i,status:n}):new Error(i)}}function VL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],d=a[c];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?a[c]=r(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),a[c]=f)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UL="mcp_used/unknown";let BL=!1;function lx(t){for(const e of t)if(OL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return BL}function ux(t){var e;const n=(e=t[If])!==null&&e!==void 0?e:"";t[If]=(n+` ${UL}`).trimStart()}function OL(t){return t!==null&&typeof t=="object"&&t instanceof Eh}function $L(t,e=100){return Ni(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield De(t.listTools({cursor:r}));for(const s of o.tools)yield yield De(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Eh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Eh(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const d of this.mcpClients)try{for(var a=!0,c=(n=void 0,Go($L(d))),f;f=await c.next(),e=f.done,!e;a=!0){i=f.value,a=!1;const h=i;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),vR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zL(t,e,n){const r=new cR;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=xD(i);Object.assign(r,o),e(r)}class GL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=qL(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let f=()=>{};const d=new Promise(w=>{f=w}),h=e.callbacks,p=function(){f({})},m=this.apiClient,_={onopen:p,onmessage:w=>{zL(m,h.onmessage,w)},onerror:(n=h?.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=h?.onclose)!==null&&r!==void 0?r:function(w){}},g=this.webSocketFactory.create(c,WL(s),_);g.connect(),await d;const C=Se(this.apiClient,e.model),v=tx({model:C}),y=Ef({setup:v});return g.send(JSON.stringify(y)),new HL(g,this.apiClient)}}class HL{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=_N(e),r=nx(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=wN(e),r=Ef(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=Ef({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ti.PLAY)}pause(){this.sendPlaybackControl(Ti.PAUSE)}stop(){this.sendPlaybackControl(Ti.STOP)}resetContext(){this.sendPlaybackControl(Ti.RESET_CONTEXT)}close(){this.conn.close()}}function WL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function qL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function KL(t,e,n){const r=new uR;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=FD(o);Object.assign(r,s)}else{const s=hD(o);Object.assign(r,s)}e(r)}class YL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new GL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&lx(e.config.tools)&&ux(h);const p=jL(h);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const D=this.apiClient.getApiKey();let b="BidiGenerateContent",G="key";D?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",G="access_token"),d=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${b}?${G}=${D}`}let m=()=>{};const _=new Promise(D=>{m=D}),g=e.callbacks,C=function(){var D;(D=g?.onopen)===null||D===void 0||D.call(g),m({})},v=this.apiClient,y={onopen:C,onmessage:D=>{KL(v,g.onmessage,D)},onerror:(n=g?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=g?.onclose)!==null&&r!==void 0?r:function(D){}},w=this.webSocketFactory.create(d,QL(p),y);w.connect(),await _;let E=Se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const D=this.apiClient.getProject(),b=this.apiClient.getLocation();E=`projects/${D}/locations/${b}/`+E}let A={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[vl.AUDIO]}:e.config.responseModalities=[vl.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],I=[];for(const D of k)if(this.isCallableTool(D)){const b=D;I.push(await b.tool())}else I.push(D);I.length>0&&(e.config.tools=I);const N={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=KN(this.apiClient,N):A=mN(this.apiClient,N),delete A.config,w.send(JSON.stringify(A)),new ZL(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XL={turnComplete:!0};class ZL{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=tn(n.turns),e.isVertexAI()?r=r.map(i=>eo(i)):r=r.map(i=>Kl(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(JL)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},XL),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ZN(e)}:n={realtimeInput:vN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function QL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function jL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tv=10;function nv(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Di(s)){i=!0;break}if(!i)return!0;const o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Di(t){return"callTool"in t&&typeof t.callTool=="function"}function eF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Di(i)))!==null&&r!==void 0?r:!1}function tF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Di(i)))!==null&&r!==void 0?r:!1}function rv(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nF=class extends Yr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!eF(n)||nv(n.config))return await this.generateContentInternal(c);if(tF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,d;const h=tn(c.contents),p=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:tv;let m=0;for(;m<p&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const _=f.candidates[0].content,g=[];for(const C of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Di(C)){const y=await C.callTool(f.functionCalls);g.push(...y)}m++,d={role:"user",parts:g},c.contents=tn(c.contents),c.contents.push(_),c.contents.push(d),rv(c.config)&&(h.push(_),h.push(d))}return rv(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),nv(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c?.safetyAttributes:s.push(c);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new As(Hr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Di(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&lx(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),ux(f),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Di(s)){const a=s,c=await a.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:tv;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(f,d,h){var p,m;return Ni(this,arguments,function*(){for(var _,g,C,v;a<o;){s&&(a++,s=!1);const A=yield De(f.processParamsMaybeAddMcpUsage(h)),k=yield De(f.generateContentStreamInternal(A)),I=[],N=[];try{for(var y=!0,w=(g=void 0,Go(k)),E;E=yield De(w.next()),_=E.done,!_;y=!0){v=E.value,y=!1;const D=v;if(yield yield De(D),D.candidates&&(!((p=D.candidates[0])===null||p===void 0)&&p.content)){N.push(D.candidates[0].content);for(const b of(m=D.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(a<o&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(b.functionCall.name)){const G=yield De(d.get(b.functionCall.name).callTool([b.functionCall]));I.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(D){g={error:D}}finally{try{!y&&!_&&(C=w.return)&&(yield De(C.call(w)))}finally{if(g)throw g.error}}if(I.length>0){s=!0;const D=new po;D.candidates=[{content:{role:"user",parts:I}}],yield yield De(D);const b=[];b.push(...N),b.push({role:"user",parts:I});const G=tn(h.contents).concat(b);h.contents=G}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=Xy(this.apiClient,e);return a=se("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=Qy(d),p=new po;return Object.assign(p,h),p})}else{const f=Yy(this.apiClient,e);return a=se("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=Zy(d),p=new po;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=Xy(this.apiClient,e);return a=se("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return Ni(this,arguments,function*(){var p,m,_,g;try{for(var C=!0,v=Go(h),y;y=yield De(v.next()),p=y.done,!p;C=!0){g=y.value,C=!1;const w=g,E=Qy(yield De(w.json()));E.sdkHttpResponse={headers:w.headers};const A=new po;Object.assign(A,E),yield yield De(A)}}catch(w){m={error:w}}finally{try{!C&&!p&&(_=v.return)&&(yield De(_.call(v)))}finally{if(m)throw m.error}}})})}else{const f=Yy(this.apiClient,e);return a=se("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return Ni(this,arguments,function*(){var p,m,_,g;try{for(var C=!0,v=Go(h),y;y=yield De(v.next()),p=y.done,!p;C=!0){g=y.value,C=!1;const w=g,E=Zy(yield De(w.json()));E.sdkHttpResponse={headers:w.headers};const A=new po;Object.assign(A,E),yield yield De(A)}}catch(w){m={error:w}}finally{try{!C&&!p&&(_=v.return)&&(yield De(_.call(v)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=Xb(this.apiClient,e);return a=se("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=cL(d),p=new Py;return Object.assign(p,h),p})}else{const f=lb(this.apiClient,e);return a=se("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=O5(d),p=new Py;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=Qb(this.apiClient,e);return a=se("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=fL(d),p=new Iy;return Object.assign(p,h),p})}else{const f=cb(this.apiClient,e);return a=se("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=G5(d),p=new Iy;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=o5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=dL(c),d=new tR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=a5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=hL(c),d=new nR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=f5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=pL(c),d=new rR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=m5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=yL(c),d=new iR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=g5(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Pf(d))}else{const f=fb(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Af(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=v5(this.apiClient,e);return a=se("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=CL(d),p=new ky;return Object.assign(p,h),p})}else{const f=hb(this.apiClient,e);return a=se("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=W5(d),p=new ky;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=w5(this.apiClient,e);return a=se("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Pf(d))}else{const f=mb(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Af(d))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=C5(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(()=>{const d=xL(),h=new Ry;return Object.assign(h,d),h})}else{const f=gb(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=q5(),h=new Ry;return Object.assign(h,d),h})}}async countTokens(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=T5(this.apiClient,e);return a=se("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=TL(d),p=new My;return Object.assign(p,h),p})}else{const f=vb(this.apiClient,e);return a=se("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=J5(d),p=new My;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=S5(this.apiClient,e);return o=se("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=SL(c),d=new oR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=I5(this.apiClient,e);return a=se("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{const h=IL(d),p=new _l;return Object.assign(p,h),p})}else{const f=Cb(this.apiClient,e);return a=se("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const h=Z5(d),p=new _l;return Object.assign(p,h),p})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rF(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function iF(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function oF(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);r!=null&&u(e,["_url","resourceName"],r);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sF extends Yr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=iF(e);return a=se("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}else{const f=rF(e);return a=se("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=oF(e);return o=se("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aF(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function cx(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],aF(n)),e}function lF(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],cx(r)),e}function uF(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>lF(i))),u(e,["speakerVoiceConfigs"],r)}return e}function cF(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],cx(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],uF(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function fF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function dF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function hF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function pF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],fF(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],dF(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],hF(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function mF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pF(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function gF(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function yF(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function vF(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],yF(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function _F(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function wF(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],_F(n)),e}function CF(){return{}}function xF(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function TF(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>gF(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],vF(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],wF(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],CF());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],xF(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function SF(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iv(){return{}}function EF(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function AF(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],EF(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function PF(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function IF(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],PF(r)),e}function kF(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function RF(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],cF(Sh(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],mF(wt(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=Qi(_);Array.isArray(A)&&(A=A.map(k=>TF(Zi(k)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],SF(g));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&u(e,["setup","inputAudioTranscription"],iv());const v=l(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","outputAudioTranscription"],iv());const y=l(t,["realtimeInputConfig"]);e!==void 0&&y!=null&&u(e,["setup","realtimeInputConfig"],AF(y));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],IF(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],kF(E)),n}function MF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Se(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],RF(i,n)),n}function NF(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&u(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&u(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],MF(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function DF(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],NF(t,r,n)),n}function bF(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function FF(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=LF(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class VF extends Yr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=DF(this.apiClient,e);o=se("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=FF(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>bF(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UF(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function BF(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function OF(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],BF(n,e)),e}function $F(t){const e={},n=l(t,["textInput"]);n!=null&&u(e,["textInput"],n);const r=l(t,["output"]);return r!=null&&u(e,["output"],r),e}function zF(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$F(i))),u(e,["examples","examples"],r)}return e}function GF(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const o=l(t,["learningRateMultiplier"]);if(o!=null&&u(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(t,["batchSize"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","batchSize"],s);const a=l(t,["learningRate"]);return e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","learningRate"],a),n}function HF(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["tuningTask","trainingData"],zF(i));const o=l(t,["config"]);return o!=null&&u(e,["config"],GF(o,e)),e}function WF(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function qF(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function JF(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],qF(n,e)),e}function KF(t,e){const n={},r=l(t,["gcsUri"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function YF(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function XF(t,e){const n={},r=l(t,["validationDataset"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec"],YF(r,n));const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const s=l(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=l(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=l(t,["preTunedModelCheckpointId"]);f!=null&&u(n,["preTunedModel","checkpointId"],f);const d=l(t,["adapterSize"]);if(e!==void 0&&d!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function ZF(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],KF(i,e));const o=l(t,["config"]);return o!=null&&u(e,["config"],XF(o,e)),e}function QF(t){const e={},n=l(t,["name"]);n!=null&&u(e,["model"],n);const r=l(t,["name"]);return r!=null&&u(e,["endpoint"],r),e}function fx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],$C(i));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["tuningTask","startTime"]);s!=null&&u(e,["startTime"],s);const a=l(t,["tuningTask","completeTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["description"]);f!=null&&u(e,["description"],f);const d=l(t,["baseModel"]);d!=null&&u(e,["baseModel"],d);const h=l(t,["_self"]);h!=null&&u(e,["tunedModel"],QF(h));const p=l(t,["customBaseModel"]);p!=null&&u(e,["customBaseModel"],p);const m=l(t,["experiment"]);m!=null&&u(e,["experiment"],m);const _=l(t,["labels"]);_!=null&&u(e,["labels"],_);const g=l(t,["outputUri"]);g!=null&&u(e,["outputUri"],g);const C=l(t,["pipelineJob"]);C!=null&&u(e,["pipelineJob"],C);const v=l(t,["serviceAccount"]);v!=null&&u(e,["serviceAccount"],v);const y=l(t,["tunedModelDisplayName"]);return y!=null&&u(e,["tunedModelDisplayName"],y),e}function jF(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>fx(s))),u(e,["tuningJobs"],o)}return e}function e3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);return s!=null&&u(e,["error"],s),e}function t3(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);i!=null&&u(e,["step"],i);const o=l(t,["endpoint"]);return o!=null&&u(e,["endpoint"],o),e}function n3(t){const e={},n=l(t,["model"]);n!=null&&u(e,["model"],n);const r=l(t,["endpoint"]);r!=null&&u(e,["endpoint"],r);const i=l(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>t3(s))),u(e,["checkpoints"],o)}return e}function kf(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],$C(i));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=l(t,["endTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["error"]);f!=null&&u(e,["error"],f);const d=l(t,["description"]);d!=null&&u(e,["description"],d);const h=l(t,["baseModel"]);h!=null&&u(e,["baseModel"],h);const p=l(t,["tunedModel"]);p!=null&&u(e,["tunedModel"],n3(p));const m=l(t,["preTunedModel"]);m!=null&&u(e,["preTunedModel"],m);const _=l(t,["supervisedTuningSpec"]);_!=null&&u(e,["supervisedTuningSpec"],_);const g=l(t,["tuningDataStats"]);g!=null&&u(e,["tuningDataStats"],g);const C=l(t,["encryptionSpec"]);C!=null&&u(e,["encryptionSpec"],C);const v=l(t,["partnerModelTuningSpec"]);v!=null&&u(e,["partnerModelTuningSpec"],v);const y=l(t,["customBaseModel"]);y!=null&&u(e,["customBaseModel"],y);const w=l(t,["experiment"]);w!=null&&u(e,["experiment"],w);const E=l(t,["labels"]);E!=null&&u(e,["labels"],E);const A=l(t,["outputUri"]);A!=null&&u(e,["outputUri"],A);const k=l(t,["pipelineJob"]);k!=null&&u(e,["pipelineJob"],k);const I=l(t,["serviceAccount"]);I!=null&&u(e,["serviceAccount"],I);const N=l(t,["tunedModelDisplayName"]);return N!=null&&u(e,["tunedModelDisplayName"],N),e}function r3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>kf(s))),u(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i3 extends Yr{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new As(Hr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:wf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=WF(e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>kf(d))}else{const f=UF(e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>fx(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=JF(e);return a=se("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=r3(d),p=new Dy;return Object.assign(p,h),p})}else{const f=OF(e);return a=se("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=jF(d),p=new Dy;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=ZF(e);return o=se("tuningJobs",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>kf(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HF(e);return o=se("tunedModels",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>e3(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const s3=1024*1024*8,a3=3,l3=1e3,u3=2,Yu="x-goog-upload-status";async function c3(t,e,n){var r,i,o;let s=0,a=0,c=new Cf(new Response),f="upload";for(s=t.size;a<s;){const h=Math.min(s3,s-a),p=t.slice(a,a+h);a+h>=s&&(f+=", finalize");let m=0,_=l3;for(;m<a3&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[Yu]));)m++,await d3(_),_=_*u3;if(a+=h,((i=c?.headers)===null||i===void 0?void 0:i[Yu])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[Yu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function f3(t){return{size:t.size,type:t.type}}function d3(t){return new Promise(e=>setTimeout(e,t))}class h3{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await c3(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await f3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p3{create(e,n,r){return new m3(e,n,r)}}class m3{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ov="x-goog-api-key";class g3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ov)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ov,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y3="gl-node/";class v3{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=eR(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new g3(this.apiKey);this.apiClient=new FL({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:y3+"web",uploader:new h3,downloader:new o3}),this.models=new nF(this.apiClient),this.live=new YL(this.apiClient,i,new p3),this.batches=new EM(this.apiClient),this.chats=new M2(this.models,this.apiClient),this.caches=new I2(this.apiClient),this.files=new H2(this.apiClient),this.operations=new sF(this.apiClient),this.authTokens=new VF(this.apiClient),this.tunings=new i3(this.apiClient)}}const Rf="RFC3986",Mf={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},_3="RFC1738",w3=Array.isArray,Cn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Xu=1024,C3=(t,e,n,r,i)=>{if(t.length===0)return t;let o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<o.length;a+=Xu){const c=o.length>=Xu?o.slice(a,a+Xu):o,f=[];for(let d=0;d<c.length;++d){let h=c.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===_3&&(h===40||h===41)){f[f.length]=c.charAt(d);continue}if(h<128){f[f.length]=Cn[h];continue}if(h<2048){f[f.length]=Cn[192|h>>6]+Cn[128|h&63];continue}if(h<55296||h>=57344){f[f.length]=Cn[224|h>>12]+Cn[128|h>>6&63]+Cn[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|c.charCodeAt(d)&1023),f[f.length]=Cn[240|h>>18]+Cn[128|h>>12&63]+Cn[128|h>>6&63]+Cn[128|h&63]}s+=f.join("")}return s};function x3(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function sv(t,e){if(w3(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const T3=Object.prototype.hasOwnProperty,dx={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Tn=Array.isArray,S3=Array.prototype.push,hx=function(t,e){S3.apply(t,Tn(e)?e:[e])},E3=Date.prototype.toISOString,je={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:C3,encodeValuesOnly:!1,format:Rf,formatter:Mf[Rf],indices:!1,serializeDate(t){return E3.call(t)},skipNulls:!1,strictNullHandling:!1};function A3(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Zu={};function px(t,e,n,r,i,o,s,a,c,f,d,h,p,m,_,g,C,v){let y=t,w=v,E=0,A=!1;for(;(w=w.get(Zu))!==void 0&&!A;){const b=w.get(t);if(E+=1,typeof b<"u"){if(b===E)throw new RangeError("Cyclic object value");A=!0}typeof w.get(Zu)>"u"&&(E=0)}if(typeof f=="function"?y=f(e,y):y instanceof Date?y=p?.(y):n==="comma"&&Tn(y)&&(y=sv(y,function(b){return b instanceof Date?p?.(b):b})),y===null){if(o)return c&&!g?c(e,je.encoder,C,"key",m):e;y=""}if(A3(y)||x3(y)){if(c){const b=g?e:c(e,je.encoder,C,"key",m);return[_?.(b)+"="+_?.(c(y,je.encoder,C,"value",m))]}return[_?.(e)+"="+_?.(String(y))]}const k=[];if(typeof y>"u")return k;let I;if(n==="comma"&&Tn(y))g&&c&&(y=sv(y,c)),I=[{value:y.length>0?y.join(",")||null:void 0}];else if(Tn(f))I=f;else{const b=Object.keys(y);I=d?b.sort(d):b}const N=a?String(e).replace(/\./g,"%2E"):String(e),D=r&&Tn(y)&&y.length===1?N+"[]":N;if(i&&Tn(y)&&y.length===0)return D+"[]";for(let b=0;b<I.length;++b){const G=I[b],M=typeof G=="object"&&typeof G.value<"u"?G.value:y[G];if(s&&M===null)continue;const O=h&&a?G.replace(/\./g,"%2E"):G,S=Tn(y)?typeof n=="function"?n(D,O):D:D+(h?"."+O:"["+O+"]");v.set(t,E);const z=new WeakMap;z.set(Zu,v),hx(k,px(M,S,n,r,i,o,s,a,n==="comma"&&g&&Tn(y)?null:c,f,d,h,p,m,_,g,C,z))}return k}function P3(t=je){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||je.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Rf;if(typeof t.format<"u"){if(!T3.call(Mf,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Mf[n];let i=je.filter;(typeof t.filter=="function"||Tn(t.filter))&&(i=t.filter);let o;if(t.arrayFormat&&t.arrayFormat in dx?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=je.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:je.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:je.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:je.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:je.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?je.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:je.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:je.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:je.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:je.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:je.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:je.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:je.strictNullHandling}}function I3(t,e={}){let n=t;const r=P3(e);let i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):Tn(r.filter)&&(o=r.filter,i=o);const s=[];if(typeof n!="object"||n===null)return"";const a=dx[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const f=new WeakMap;for(let p=0;p<i.length;++p){const m=i[p];r.skipNulls&&n[m]===null||hx(s,px(n[m],m,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}const d=s.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}const ii="4.104.0";let av=!1,Ho,mx,gx,Nf,yx,vx,_x,wx,Cx;function k3(t,e={auto:!1}){if(av)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Ho)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Ho}'\``);av=e.auto,Ho=t.kind,mx=t.fetch,gx=t.FormData,Nf=t.File,yx=t.ReadableStream,vx=t.getMultipartRequestOptions,_x=t.getDefaultAgent,wx=t.fileFromPath,Cx=t.isFsReadStream}class R3{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function M3({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,o;try{n=fetch,r=Request,i=Response,o=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(s,a)=>({...a,body:new R3(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}const xx=()=>{Ho||k3(M3(),{auto:!0})};xx();class de extends Error{}class ht extends de{constructor(e,n,r,i){super(`${ht.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i?.["x-request-id"],this.error=n;const o=n;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Xl({message:r,cause:bf(n)});const o=n?.error;return e===400?new Tx(e,o,r,i):e===401?new Sx(e,o,r,i):e===403?new Ex(e,o,r,i):e===404?new Ax(e,o,r,i):e===409?new Px(e,o,r,i):e===422?new Ix(e,o,r,i):e===429?new kx(e,o,r,i):e>=500?new Rx(e,o,r,i):new ht(e,o,r,i)}}class jt extends ht{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Xl extends ht{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ah extends Xl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Tx extends ht{}class Sx extends ht{}class Ex extends ht{}class Ax extends ht{}class Px extends ht{}class Ix extends ht{}class kx extends ht{}class Rx extends ht{}class Mx extends de{constructor(){super("Could not parse response content as the length limit was reached")}}class Nx extends de{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var sa=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Er=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ft;class Zl{constructor(){Ft.set(this,void 0),this.buffer=new Uint8Array,sa(this,Ft,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let o;for(;(o=N3(this.buffer,Er(this,Ft,"f")))!=null;){if(o.carriage&&Er(this,Ft,"f")==null){sa(this,Ft,o.index,"f");continue}if(Er(this,Ft,"f")!=null&&(o.index!==Er(this,Ft,"f")+1||o.carriage)){i.push(this.decodeText(this.buffer.slice(0,Er(this,Ft,"f")-1))),this.buffer=this.buffer.slice(Er(this,Ft,"f")),sa(this,Ft,null,"f");continue}const s=Er(this,Ft,"f")!==null?o.preceding-1:o.preceding,a=this.decodeText(this.buffer.slice(0,s));i.push(a),this.buffer=this.buffer.slice(o.index),sa(this,Ft,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new de(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new de(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new de("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ft=new WeakMap;Zl.NEWLINE_CHARS=new Set([`
`,"\r"]);Zl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function N3(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function D3(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function Dx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class An{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const s of b3(e,n))if(!o){if(s.data.startsWith("[DONE]")){o=!0;continue}if(s.event===null||s.event.startsWith("response.")||s.event.startsWith("transcript.")){let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(a&&a.error)throw new ht(void 0,a.error,void 0,$x(e.headers));yield a}else{let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(s.event=="error")throw new ht(void 0,a.error,a.message,void 0);yield{event:s.event,data:a}}}o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||n.abort()}}return new An(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const s=new Zl,a=Dx(e);for await(const c of a)for(const f of s.decode(c))yield f;for(const c of s.flush())yield c}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of i())s||a&&(yield JSON.parse(a));s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new An(o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new An(()=>i(e),this.controller),new An(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new yx({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const a=r.encode(JSON.stringify(o)+`
`);i.enqueue(a)}catch(o){i.error(o)}},async cancel(){await n.return?.()}})}}async function*b3(t,e){if(!t.body)throw e.abort(),new de("Attempted to iterate over a response with no body");const n=new F3,r=new Zl,i=Dx(t.body);for await(const o of L3(i))for(const s of r.decode(o)){const a=n.decode(s);a&&(yield a)}for(const o of r.flush()){const s=n.decode(o);s&&(yield s)}}async function*L3(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let o;for(;(o=D3(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class F3{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=V3(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function V3(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const bx=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Lx=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ql(t),Ql=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",U3=t=>Lx(t)||bx(t)||Cx(t);async function Fx(t,e,n){if(t=await t,Lx(t))return t;if(bx(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Ql(i)?[await i.arrayBuffer()]:[i];return new Nf(o,e,n)}const r=await B3(t);if(e||(e=$3(t)??"unknown_file"),!n?.type){const i=r[0]?.type;typeof i=="string"&&(n={...n,type:i})}return new Nf(r,e,n)}async function B3(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Ql(t))e.push(await t.arrayBuffer());else if(z3(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${O3(t)}`);return e}function O3(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function $3(t){return Qu(t.name)||Qu(t.filename)||Qu(t.path)?.split(/[\\/]/).pop()}const Qu=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},z3=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",lv=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Wr=async t=>{const e=await G3(t.body);return vx(e,t)},G3=async t=>{const e=new gx;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Df(e,n,r))),e},Df=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(U3(n)){const r=await Fx(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Df(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Df(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Vx={},H3=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},W3=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},aa;xx();async function Ux(t){const{response:e}=t;if(t.options.stream)return hr("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):An.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const s=await e.json();return hr("response",e.status,e.url,e.headers,s),Bx(s,e)}const o=await e.text();return hr("response",e.status,e.url,e.headers,o),o}function Bx(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class jl extends Promise{constructor(e,n=Ux){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new jl(this.responsePromise,async n=>Bx(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class q3{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:o}){this.baseURL=e,this.maxRetries=ju("maxRetries",n),this.timeout=ju("timeout",r),this.httpAgent=i,this.fetch=o??mx}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Z3(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${tV()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const o=i&&Ql(i?.body)?new DataView(await i.body.arrayBuffer()):i?.body instanceof DataView?i.body:i?.body instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i?.body)?new DataView(i.body.buffer):i?.body;return{method:e,path:n,...i,body:o}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:o,query:s,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:lv(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,f=this.calculateContentLength(c),d=this.buildURL(o,s);"timeout"in r&&ju("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??_x(d),p=r.timeout+1e3;typeof h?.options?.timeout=="number"&&p>(h.options.timeout??0)&&(h.options.timeout=p),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:r,headers:a,contentLength:f,retryCount:n});return{req:{method:i,...c&&{body:c},headers:m,...h&&{agent:h},signal:r.signal??null},url:d,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const o={};r&&(o["content-length"]=r);const s=this.defaultHeaders(e);return dv(o,s),dv(o,n),lv(e.body)&&Ho!=="node"&&delete o["content-type"],ua(s,"x-stainless-retry-count")===void 0&&ua(n,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(i)),ua(s,"x-stainless-timeout")===void 0&&ua(n,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,n),o}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return ht.generate(e,n,r,i)}request(e,n=null){return new jl(this.makeRequest(e,n))}async makeRequest(e,n){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:o,url:s,timeout:a}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(o,{url:s,options:r}),hr("request",s,r,o.headers),r.signal?.aborted)throw new jt;const c=new AbortController,f=await this.fetchWithTimeout(s,o,a,c).catch(bf);if(f instanceof Error){if(r.signal?.aborted)throw new jt;if(n)return this.retryRequest(r,n);throw f.name==="AbortError"?new Ah:new Xl({cause:f})}const d=$x(f.headers);if(!f.ok){if(n&&this.shouldRetry(f)){const C=`retrying, ${n} attempts remaining`;return hr(`response (error; ${C})`,f.status,s,d),this.retryRequest(r,n,d)}const h=await f.text().catch(C=>bf(C).message),p=Q3(h),m=p?void 0:h;throw hr(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,f.status,s,d,m),this.makeStatusError(f.status,p,m,d)}return{response:f,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new J3(this,r,e)}buildURL(e,n){const r=eV(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return zx(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new de(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:o,...s}=n||{};o&&o.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),r),c={signal:i.signal,...s};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const o=r?.["retry-after-ms"];if(o){const a=parseFloat(o);Number.isNaN(a)||(i=a)}const s=r?.["retry-after"];if(s&&!i){const a=parseFloat(s);Number.isNaN(a)?i=Date.parse(s)-Date.now():i=a*1e3}if(!(i&&0<=i&&i<60*1e3)){const a=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,a)}return await Ps(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ii}`}}class Ox{constructor(e,n,r,i){aa.set(this,void 0),H3(this,aa,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new de("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,o]of r)e.url.searchParams.set(i,o);n.query=void 0,n.path=e.url.toString()}return await W3(this,aa,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(aa=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class J3 extends jl{constructor(e,n,r){super(n,async i=>new r(e,i.response,await Ux(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const $x=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),K3={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},We=t=>typeof t=="object"&&t!==null&&!zx(t)&&Object.keys(t).every(e=>Gx(K3,e)),Y3=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ii,"X-Stainless-OS":cv(Deno.build.os),"X-Stainless-Arch":uv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ii,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ii,"X-Stainless-OS":cv(process.platform),"X-Stainless-Arch":uv(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=X3();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ii,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ii,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const uv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",cv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let fv;const Z3=()=>fv??(fv=Y3()),Q3=t=>{try{return JSON.parse(t)}catch{return}},j3=/^[a-z][a-z0-9+.-]*:/i,eV=t=>j3.test(t),Ps=t=>new Promise(e=>setTimeout(e,t)),ju=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new de(`${t} must be an integer`);if(e<0)throw new de(`${t} must be a positive integer`);return e},bf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},la=t=>{if(typeof process<"u")return Vx?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function zx(t){if(!t)return!0;for(const e in t)return!1;return!0}function Gx(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dv(t,e){for(const n in e){if(!Gx(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const hv=new Set(["authorization","api-key"]);function hr(t,...e){if(typeof process<"u"&&Vx?.DEBUG==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const o={...r,headers:{...r.headers}};for(const s in r.headers)hv.has(s.toLowerCase())&&(o.headers[s]="REDACTED");return o}let i=null;for(const o in r)hv.has(o.toLowerCase())&&(i??(i={...r}),i[o]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const tV=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),nV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",rV=t=>typeof t?.get=="function",ua=(t,e)=>{const n=e.toLowerCase();if(rV(t)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(i,o,s)=>o+s.toUpperCase());for(const i of[e,n,e.toUpperCase(),r]){const o=t.get(i);if(o)return o}}for(const[r,i]of Object.entries(t))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},iV=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function ec(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class eu extends Ox{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class nt extends Ox{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const n=e[e.length-1]?.id;return n?{params:{after:n}}:null}}class he{constructor(e){this._client=e}}let Hx=class extends he{list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,oV,{query:n,...r})}},tu=class extends he{constructor(){super(...arguments),this.messages=new Hx(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/chat/completions",nu,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class nu extends nt{}class oV extends nt{}tu.ChatCompletionsPage=nu;tu.Messages=Hx;let ru=class extends he{constructor(){super(...arguments),this.completions=new tu(this._client)}};ru.Completions=tu;ru.ChatCompletionsPage=nu;class Wx extends he{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class qx extends he{create(e,n){return this._client.post("/audio/transcriptions",Wr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Jx extends he{create(e,n){return this._client.post("/audio/translations",Wr({body:e,...n,__metadata:{model:e.model}}))}}class Is extends he{constructor(){super(...arguments),this.transcriptions=new qx(this._client),this.translations=new Jx(this._client),this.speech=new Wx(this._client)}}Is.Transcriptions=qx;Is.Translations=Jx;Is.Speech=Wx;class Ph extends he{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/batches",Ih,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class Ih extends nt{}Ph.BatchesPage=Ih;var an=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Oe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Lf,La,Fa,xo,To,Va,So,Nn,Eo,Cl,xl,oi,Kx;class kh{constructor(){Lf.add(this),this.controller=new AbortController,La.set(this,void 0),Fa.set(this,()=>{}),xo.set(this,()=>{}),To.set(this,void 0),Va.set(this,()=>{}),So.set(this,()=>{}),Nn.set(this,{}),Eo.set(this,!1),Cl.set(this,!1),xl.set(this,!1),oi.set(this,!1),an(this,La,new Promise((e,n)=>{an(this,Fa,e,"f"),an(this,xo,n,"f")}),"f"),an(this,To,new Promise((e,n)=>{an(this,Va,e,"f"),an(this,So,n,"f")}),"f"),Oe(this,La,"f").catch(()=>{}),Oe(this,To,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Oe(this,Lf,"m",Kx).bind(this))},0)}_connected(){this.ended||(Oe(this,Fa,"f").call(this),this._emit("connect"))}get ended(){return Oe(this,Eo,"f")}get errored(){return Oe(this,Cl,"f")}get aborted(){return Oe(this,xl,"f")}abort(){this.controller.abort()}on(e,n){return(Oe(this,Nn,"f")[e]||(Oe(this,Nn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Oe(this,Nn,"f")[e];if(!r)return this;const i=r.findIndex(o=>o.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(Oe(this,Nn,"f")[e]||(Oe(this,Nn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{an(this,oi,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){an(this,oi,!0,"f"),await Oe(this,To,"f")}_emit(e,...n){if(Oe(this,Eo,"f"))return;e==="end"&&(an(this,Eo,!0,"f"),Oe(this,Va,"f").call(this));const r=Oe(this,Nn,"f")[e];if(r&&(Oe(this,Nn,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!Oe(this,oi,"f")&&!r?.length&&Promise.reject(i),Oe(this,xo,"f").call(this,i),Oe(this,So,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!Oe(this,oi,"f")&&!r?.length&&Promise.reject(i),Oe(this,xo,"f").call(this,i),Oe(this,So,"f").call(this,i),this._emit("end")}}_emitFinal(){}}La=new WeakMap,Fa=new WeakMap,xo=new WeakMap,To=new WeakMap,Va=new WeakMap,So=new WeakMap,Nn=new WeakMap,Eo=new WeakMap,Cl=new WeakMap,xl=new WeakMap,oi=new WeakMap,Lf=new WeakSet,Kx=function(e){if(an(this,Cl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new jt),e instanceof jt)return an(this,xl,!0,"f"),this._emit("abort",e);if(e instanceof de)return this._emit("error",e);if(e instanceof Error){const n=new de(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new de(String(e)))};var le=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Lt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ct,Ff,Sn,Ua,un,Lr,Si,Rr,Tl,Vt,Ba,Oa,Wo,Ao,Po,pv,mv,gv,yv,vv,_v,wv;class hn extends kh{constructor(){super(...arguments),ct.add(this),Ff.set(this,[]),Sn.set(this,{}),Ua.set(this,{}),un.set(this,void 0),Lr.set(this,void 0),Si.set(this,void 0),Rr.set(this,void 0),Tl.set(this,void 0),Vt.set(this,void 0),Ba.set(this,void 0),Oa.set(this,void 0),Wo.set(this,void 0)}[(Ff=new WeakMap,Sn=new WeakMap,Ua=new WeakMap,un=new WeakMap,Lr=new WeakMap,Si=new WeakMap,Rr=new WeakMap,Tl=new WeakMap,Vt=new WeakMap,Ba=new WeakMap,Oa=new WeakMap,Wo=new WeakMap,ct=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new hn;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=An.fromReadableStream(e,this.controller);for await(const o of i)le(this,ct,"m",Ao).call(this,o);if(i.controller.signal?.aborted)throw new jt;return this._addRun(le(this,ct,"m",Po).call(this))}toReadableStream(){return new An(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,o){const s=new hn;return s._run(()=>s._runToolAssistantStream(e,n,r,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i,o){const s=o?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},c=await e.submitToolOutputs(n,r,a,{...o,signal:this.controller.signal});this._connected();for await(const f of c)le(this,ct,"m",Ao).call(this,f);if(c.controller.signal?.aborted)throw new jt;return this._addRun(le(this,ct,"m",Po).call(this))}static createThreadAssistantStream(e,n,r){const i=new hn;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const o=new hn;return o._run(()=>o._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return le(this,Ba,"f")}currentRun(){return le(this,Oa,"f")}currentMessageSnapshot(){return le(this,un,"f")}currentRunStepSnapshot(){return le(this,Wo,"f")}async finalRunSteps(){return await this.done(),Object.values(le(this,Sn,"f"))}async finalMessages(){return await this.done(),Object.values(le(this,Ua,"f"))}async finalRun(){if(await this.done(),!le(this,Lr,"f"))throw Error("Final run was not received.");return le(this,Lr,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},s=await e.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const a of s)le(this,ct,"m",Ao).call(this,a);if(s.controller.signal?.aborted)throw new jt;return this._addRun(le(this,ct,"m",Po).call(this))}async _createAssistantStream(e,n,r,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await e.create(n,s,{...i,signal:this.controller.signal});this._connected();for await(const c of a)le(this,ct,"m",Ao).call(this,c);if(a.controller.signal?.aborted)throw new jt;return this._addRun(le(this,ct,"m",Po).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let o=e[r];if(o==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(ec(o)&&ec(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(s=>typeof s=="string"||typeof s=="number")){o.push(...i);continue}for(const s of i){if(!ec(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=o[a];c==null?o.push(s):o[a]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);e[r]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,o){return await this._createToolAssistantStream(r,e,n,i,o)}}Ao=function(e){if(!this.ended)switch(Lt(this,Ba,e,"f"),le(this,ct,"m",gv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":le(this,ct,"m",wv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":le(this,ct,"m",mv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":le(this,ct,"m",pv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Po=function(){if(this.ended)throw new de("stream has ended, this shouldn't happen");if(!le(this,Lr,"f"))throw Error("Final run has not been received");return le(this,Lr,"f")},pv=function(e){const[n,r]=le(this,ct,"m",vv).call(this,e,le(this,un,"f"));Lt(this,un,n,"f"),le(this,Ua,"f")[n.id]=n;for(const i of r){const o=n.content[i.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,s=n.content[i.index];if(s&&s.type=="text")this._emit("textDelta",o,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=le(this,Si,"f")){if(le(this,Rr,"f"))switch(le(this,Rr,"f").type){case"text":this._emit("textDone",le(this,Rr,"f").text,le(this,un,"f"));break;case"image_file":this._emit("imageFileDone",le(this,Rr,"f").image_file,le(this,un,"f"));break}Lt(this,Si,i.index,"f")}Lt(this,Rr,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(le(this,Si,"f")!==void 0){const i=e.data.content[le(this,Si,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,le(this,un,"f"));break;case"text":this._emit("textDone",i.text,le(this,un,"f"));break}}le(this,un,"f")&&this._emit("messageDone",e.data),Lt(this,un,void 0,"f")}},mv=function(e){const n=le(this,ct,"m",yv).call(this,e);switch(Lt(this,Wo,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==le(this,Tl,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(le(this,Vt,"f")&&this._emit("toolCallDone",le(this,Vt,"f")),Lt(this,Tl,o.index,"f"),Lt(this,Vt,n.step_details.tool_calls[o.index],"f"),le(this,Vt,"f")&&this._emit("toolCallCreated",le(this,Vt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Lt(this,Wo,void 0,"f"),e.data.step_details.type=="tool_calls"&&le(this,Vt,"f")&&(this._emit("toolCallDone",le(this,Vt,"f")),Lt(this,Vt,void 0,"f")),this._emit("runStepDone",e.data,n);break}},gv=function(e){le(this,Ff,"f").push(e),this._emit("event",e)},yv=function(e){switch(e.event){case"thread.run.step.created":return le(this,Sn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=le(this,Sn,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=hn.accumulateDelta(n,r.delta);le(this,Sn,"f")[e.data.id]=i}return le(this,Sn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":le(this,Sn,"f")[e.data.id]=e.data;break}if(le(this,Sn,"f")[e.data.id])return le(this,Sn,"f")[e.data.id];throw new Error("No snapshot available")},vv=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in n.content){let s=n.content[o.index];n.content[o.index]=le(this,ct,"m",_v).call(this,o,s)}else n.content[o.index]=o,r.push(o);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_v=function(e,n){return hn.accumulateDelta(n,e)},wv=function(e){switch(Lt(this,Oa,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Lt(this,Lr,e.data,"f"),le(this,Vt,"f")&&(this._emit("toolCallDone",le(this,Vt,"f")),Lt(this,Vt,void 0,"f"));break}};class Rh extends he{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/assistants",Mh,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Mh extends nt{}Rh.AssistantsPage=Mh;function Cv(t){return typeof t.parse=="function"}const bi=t=>t?.role==="assistant",Yx=t=>t?.role==="function",Xx=t=>t?.role==="tool";function Nh(t){return t?.$brand==="auto-parseable-response-format"}function ks(t){return t?.$brand==="auto-parseable-tool"}function sV(t,e){return!e||!Zx(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Dh(t,e)}function Dh(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new Mx;if(r.finish_reason==="content_filter")throw new Nx;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>lV(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?aV(e,r.message.content):null}}});return{...t,choices:n}}function aV(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function lV(t,e){const n=t.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:ks(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function uV(t,e){if(!t)return!1;const n=t.tools?.find(r=>r.function?.name===e.function.name);return ks(n)||n?.function.strict||!1}function Zx(t){return Nh(t.response_format)?!0:t.tools?.some(e=>ks(e)||e.type==="function"&&e.function.strict===!0)??!1}function cV(t){for(const e of t??[]){if(e.type!=="function")throw new de(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new de(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var kt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},gt,Vf,Sl,Uf,Bf,Of,Qx,$f;const xv=10;class jx extends kh{constructor(){super(...arguments),gt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(Yx(e)||Xx(e))&&e.content)this._emit("functionCallResult",e.content);else if(bi(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(bi(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new de("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),kt(this,gt,"m",Vf).call(this)}async finalMessage(){return await this.done(),kt(this,gt,"m",Sl).call(this)}async finalFunctionCall(){return await this.done(),kt(this,gt,"m",Uf).call(this)}async finalFunctionCallResult(){return await this.done(),kt(this,gt,"m",Bf).call(this)}async totalUsage(){return await this.done(),kt(this,gt,"m",Of).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=kt(this,gt,"m",Sl).call(this);n&&this._emit("finalMessage",n);const r=kt(this,gt,"m",Vf).call(this);r&&this._emit("finalContent",r);const i=kt(this,gt,"m",Uf).call(this);i&&this._emit("finalFunctionCall",i);const o=kt(this,gt,"m",Bf).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",kt(this,gt,"m",Of).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),kt(this,gt,"m",Qx).call(this,n);const o=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Dh(o,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const i="function",{function_call:o="auto",stream:s,...a}=n,c=typeof o!="string"&&o?.name,{maxChatCompletions:f=xv}=r||{},d={};for(const p of n.functions)d[p.name||p.function.name]=p;const h=n.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<f;++p){const _=(await this._createChatCompletion(e,{...a,function_call:o,functions:h,messages:[...this.messages]},r)).choices[0]?.message;if(!_)throw new de("missing message in ChatCompletion response");if(!_.function_call)return;const{name:g,arguments:C}=_.function_call,v=d[g];if(v){if(c&&c!==g){const A=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,name:g,content:A});continue}}else{const A=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${h.map(k=>JSON.stringify(k.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:A});continue}let y;try{y=Cv(v)?await v.parse(C):C}catch(A){this._addMessage({role:i,name:g,content:A instanceof Error?A.message:String(A)});continue}const w=await v.function(y,this),E=kt(this,gt,"m",$f).call(this,w);if(this._addMessage({role:i,name:g,content:E}),c)return}}async _runTools(e,n,r){const i="tool",{tool_choice:o="auto",stream:s,...a}=n,c=typeof o!="string"&&o?.function?.name,{maxChatCompletions:f=xv}=r||{},d=n.tools.map(m=>{if(ks(m)){if(!m.$callback)throw new de("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),h={};for(const m of d)m.type==="function"&&(h[m.function.name||m.function.function.name]=m.function);const p="tools"in n?d.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<f;++m){const g=(await this._createChatCompletion(e,{...a,tool_choice:o,tools:p,messages:[...this.messages]},r)).choices[0]?.message;if(!g)throw new de("missing message in ChatCompletion response");if(!g.tool_calls?.length)return;for(const C of g.tool_calls){if(C.type!=="function")continue;const v=C.id,{name:y,arguments:w}=C.function,E=h[y];if(E){if(c&&c!==y){const N=`Invalid tool_call: ${JSON.stringify(y)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:v,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(y)}. Available options are: ${Object.keys(h).map(D=>JSON.stringify(D)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:v,content:N});continue}let A;try{A=Cv(E)?await E.parse(w):w}catch(N){const D=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:v,content:D});continue}const k=await E.function(A,this),I=kt(this,gt,"m",$f).call(this,k);if(this._addMessage({role:i,tool_call_id:v,content:I}),c)return}}}}gt=new WeakSet,Vf=function(){return kt(this,gt,"m",Sl).call(this).content??null},Sl=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(bi(n)){const{function_call:r,...i}=n,o={...i,content:n.content??null,refusal:n.refusal??null};return r&&(o.function_call=r),o}}throw new de("stream ended without producing a ChatCompletionMessage with role=assistant")},Uf=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(bi(n)&&n?.function_call)return n.function_call;if(bi(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},Bf=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Yx(n)&&n.content!=null||Xx(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},Of=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Qx=function(e){if(e.n!=null&&e.n>1)throw new de("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},$f=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ms extends jx{static runFunctions(e,n,r){const i=new ms,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,o)),i}static runTools(e,n,r){const i=new ms,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,o)),i}_addMessage(e,n=!0){super._addMessage(e,n),bi(e)&&e.content&&this._emit("content",e.content)}}const eT=1,tT=2,nT=4,rT=8,iT=16,oT=32,sT=64,aT=128,lT=256,uT=aT|lT,cT=iT|oT|uT|sT,fT=eT|tT|cT,dT=nT|rT,fV=fT|dT,rt={STR:eT,NUM:tT,ARR:nT,OBJ:rT,NULL:iT,BOOL:oT,NAN:sT,INFINITY:aT,MINUS_INFINITY:lT,INF:uT,SPECIAL:cT,ATOM:fT,COLLECTION:dT,ALL:fV};class dV extends Error{}class hV extends Error{}function pV(t,e=rt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return mV(t.trim(),e)}const mV=(t,e)=>{const n=t.length;let r=0;const i=p=>{throw new dV(`${p} at position ${r}`)},o=p=>{throw new hV(`${p} at position ${r}`)},s=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?f():t.substring(r,r+4)==="null"||rt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||rt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||rt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||rt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||rt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||rt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),a=()=>{const p=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(m)))}catch(_){o(String(_))}else if(rt.STR&e)try{return JSON.parse(t.substring(p,r-Number(m))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,h();const p={};try{for(;t[r]!=="}";){if(h(),r>=n&&rt.OBJ&e)return p;const m=a();h(),r++;try{const _=s();Object.defineProperty(p,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(rt.OBJ&e)return p;throw _}h(),t[r]===","&&r++}}catch{if(rt.OBJ&e)return p;i("Expected '}' at end of object")}return r++,p},f=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(s()),h(),t[r]===","&&r++}catch{if(rt.ARR&e)return p;i("Expected ']' at end of array")}return r++,p},d=()=>{if(r===0){t==="-"&&rt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(rt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}o(String(m))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(rt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&rt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(_){o(String(_))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},Tv=t=>pV(t,rt.ALL^rt.NUM);var jr=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Pe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Qe,Mn,ei,Yn,tc,ca,nc,rc,ic,fa,oc,Sv;class gs extends jx{constructor(e){super(),Qe.add(this),Mn.set(this,void 0),ei.set(this,void 0),Yn.set(this,void 0),jr(this,Mn,e,"f"),jr(this,ei,[],"f")}get currentChatCompletionSnapshot(){return Pe(this,Yn,"f")}static fromReadableStream(e){const n=new gs(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new gs(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Pe(this,Qe,"m",tc).call(this);const o=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of o)Pe(this,Qe,"m",nc).call(this,s);if(o.controller.signal?.aborted)throw new jt;return this._addChatCompletion(Pe(this,Qe,"m",fa).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Pe(this,Qe,"m",tc).call(this),this._connected();const i=An.fromReadableStream(e,this.controller);let o;for await(const s of i)o&&o!==s.id&&this._addChatCompletion(Pe(this,Qe,"m",fa).call(this)),Pe(this,Qe,"m",nc).call(this,s),o=s.id;if(i.controller.signal?.aborted)throw new jt;return this._addChatCompletion(Pe(this,Qe,"m",fa).call(this))}[(Mn=new WeakMap,ei=new WeakMap,Yn=new WeakMap,Qe=new WeakSet,tc=function(){this.ended||jr(this,Yn,void 0,"f")},ca=function(n){let r=Pe(this,ei,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Pe(this,ei,"f")[n.index]=r,r)},nc=function(n){if(this.ended)return;const r=Pe(this,Qe,"m",Sv).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const o=r.choices[i.index];i.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",i.delta.content,o.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),i.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:o.message.refusal}),i.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:o.logprobs?.content??[]}),i.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});const s=Pe(this,Qe,"m",ca).call(this,o);o.finish_reason&&(Pe(this,Qe,"m",ic).call(this,o),s.current_tool_call_index!=null&&Pe(this,Qe,"m",rc).call(this,o,s.current_tool_call_index));for(const a of i.delta.tool_calls??[])s.current_tool_call_index!==a.index&&(Pe(this,Qe,"m",ic).call(this,o),s.current_tool_call_index!=null&&Pe(this,Qe,"m",rc).call(this,o,s.current_tool_call_index)),s.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const c=o.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},rc=function(n,r){if(Pe(this,Qe,"m",ca).call(this,n).done_tool_calls.has(r))return;const o=n.message.tool_calls?.[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const s=Pe(this,Mn,"f")?.tools?.find(a=>a.type==="function"&&a.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:ks(s)?s.$parseRaw(o.function.arguments):s?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},ic=function(n){const r=Pe(this,Qe,"m",ca).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=Pe(this,Qe,"m",oc).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},fa=function(){if(this.ended)throw new de("stream has ended, this shouldn't happen");const n=Pe(this,Yn,"f");if(!n)throw new de("request ended without sending any chunks");return jr(this,Yn,void 0,"f"),jr(this,ei,[],"f"),gV(n,Pe(this,Mn,"f"))},oc=function(){const n=Pe(this,Mn,"f")?.response_format;return Nh(n)?n:null},Sv=function(n){var r,i,o,s;let a=Pe(this,Yn,"f");const{choices:c,...f}=n;a?Object.assign(a,f):a=jr(this,Yn,{...f,choices:[]},"f");for(const{delta:d,finish_reason:h,index:p,logprobs:m=null,..._}of n.choices){let g=a.choices[p];if(g||(g=a.choices[p]={finish_reason:h,index:p,message:{},logprobs:m,..._}),m)if(!g.logprobs)g.logprobs=Object.assign({},m);else{const{content:k,refusal:I,...N}=m;Object.assign(g.logprobs,N),k&&((r=g.logprobs).content??(r.content=[]),g.logprobs.content.push(...k)),I&&((i=g.logprobs).refusal??(i.refusal=[]),g.logprobs.refusal.push(...I))}if(h&&(g.finish_reason=h,Pe(this,Mn,"f")&&Zx(Pe(this,Mn,"f")))){if(h==="length")throw new Mx;if(h==="content_filter")throw new Nx}if(Object.assign(g,_),!d)continue;const{content:C,refusal:v,function_call:y,role:w,tool_calls:E,...A}=d;if(Object.assign(g.message,A),v&&(g.message.refusal=(g.message.refusal||"")+v),w&&(g.message.role=w),y&&(g.message.function_call?(y.name&&(g.message.function_call.name=y.name),y.arguments&&((o=g.message.function_call).arguments??(o.arguments=""),g.message.function_call.arguments+=y.arguments)):g.message.function_call=y),C&&(g.message.content=(g.message.content||"")+C,!g.message.refusal&&Pe(this,Qe,"m",oc).call(this)&&(g.message.parsed=Tv(g.message.content))),E){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:k,id:I,type:N,function:D,...b}of E){const G=(s=g.message.tool_calls)[k]??(s[k]={});Object.assign(G,b),I&&(G.id=I),N&&(G.type=N),D&&(G.function??(G.function={name:D.name??"",arguments:""})),D?.name&&(G.function.name=D.name),D?.arguments&&(G.function.arguments+=D.arguments,uV(Pe(this,Mn,"f"),G)&&(G.function.parsed_arguments=Tv(G.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new An(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function gV(t,e){const{id:n,choices:r,created:i,model:o,system_fingerprint:s,...a}=t,c={...a,id:n,choices:r.map(({message:f,finish_reason:d,index:h,logprobs:p,...m})=>{if(!d)throw new de(`missing finish_reason for choice ${h}`);const{content:_=null,function_call:g,tool_calls:C,...v}=f,y=f.role;if(!y)throw new de(`missing role for choice ${h}`);if(g){const{arguments:w,name:E}=g;if(w==null)throw new de(`missing function_call.arguments for choice ${h}`);if(!E)throw new de(`missing function_call.name for choice ${h}`);return{...m,message:{content:_,function_call:{arguments:w,name:E},role:y,refusal:f.refusal??null},finish_reason:d,index:h,logprobs:p}}return C?{...m,index:h,finish_reason:d,logprobs:p,message:{...v,role:y,content:_,refusal:f.refusal??null,tool_calls:C.map((w,E)=>{const{function:A,type:k,id:I,...N}=w,{arguments:D,name:b,...G}=A||{};if(I==null)throw new de(`missing choices[${h}].tool_calls[${E}].id
${da(t)}`);if(k==null)throw new de(`missing choices[${h}].tool_calls[${E}].type
${da(t)}`);if(b==null)throw new de(`missing choices[${h}].tool_calls[${E}].function.name
${da(t)}`);if(D==null)throw new de(`missing choices[${h}].tool_calls[${E}].function.arguments
${da(t)}`);return{...N,id:I,type:k,function:{...G,name:b,arguments:D}}})}}:{...m,message:{...v,content:_,role:y,refusal:f.refusal??null},finish_reason:d,index:h,logprobs:p}}),created:i,model:o,object:"chat.completion",...s?{system_fingerprint:s}:{}};return sV(c,e)}function da(t){return JSON.stringify(t)}class Li extends gs{static fromReadableStream(e){const n=new Li(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Li(null),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,o)),i}static runTools(e,n,r){const i=new Li(n),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,o)),i}}let hT=class extends he{parse(e,n){return cV(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Dh(r,e))}runFunctions(e,n){return e.stream?Li.runFunctions(this._client,e,n):ms.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Li.runTools(this._client,e,n):ms.runTools(this._client,e,n)}stream(e,n){return gs.createChatCompletion(this._client,e,n)}};class zf extends he{constructor(){super(...arguments),this.completions=new hT(this._client)}}(function(t){t.Completions=hT})(zf||(zf={}));class pT extends he{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class mT extends he{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class iu extends he{constructor(){super(...arguments),this.sessions=new pT(this._client),this.transcriptionSessions=new mT(this._client)}}iu.Sessions=pT;iu.TranscriptionSessions=mT;class bh extends he{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,Lh,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Lh extends nt{}bh.MessagesPage=Lh;class Fh extends he{retrieve(e,n,r,i={},o){return We(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,n,r={},i){return We(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,Vh,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}}class Vh extends nt{}Fh.RunStepsPage=Vh;let Rs=class extends he{constructor(){super(...arguments),this.steps=new Fh(this._client)}create(e,n,r){const{include:i,...o}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:o,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Uh,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return hn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:s}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Ps(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return hn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const o=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,o.id,i)}submitToolOutputsStream(e,n,r,i){return hn.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class Uh extends nt{}Rs.RunsPage=Uh;Rs.Steps=Fh;Rs.RunStepsPage=Vh;class to extends he{constructor(){super(...arguments),this.runs=new Rs(this._client),this.messages=new bh(this._client)}create(e={},n){return We(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return hn.createThreadAssistantStream(e,this._client.beta.threads,n)}}to.Runs=Rs;to.RunsPage=Uh;to.Messages=bh;to.MessagesPage=Lh;class no extends he{constructor(){super(...arguments),this.realtime=new iu(this._client),this.chat=new zf(this._client),this.assistants=new Rh(this._client),this.threads=new to(this._client)}}no.Realtime=iu;no.Assistants=Rh;no.AssistantsPage=Mh;no.Threads=to;class gT extends he{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class yT extends he{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}}let ou=class extends he{constructor(){super(...arguments),this.content=new yT(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,Wr({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,Bh,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};class Bh extends nt{}ou.FileListResponsesPage=Bh;ou.Content=yT;class Ms extends he{constructor(){super(...arguments),this.files=new ou(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/containers",Oh,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Oh extends nt{}Ms.ContainerListResponsesPage=Oh;Ms.Files=ou;Ms.FileListResponsesPage=Bh;class vT extends he{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&hr("Request","User defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?o:(hr("response","Decoding base64 embeddings to float32 array"),o._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{const c=a.embedding;a.embedding=iV(c)}),s)))}}class $h extends he{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return We(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,zh,{query:r,...i})}}class zh extends nt{}$h.OutputItemListResponsesPage=zh;class Ns extends he{constructor(){super(...arguments),this.outputItems=new $h(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,Gh,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class Gh extends nt{}Ns.RunListResponsesPage=Gh;Ns.OutputItems=$h;Ns.OutputItemListResponsesPage=zh;class Ds extends he{constructor(){super(...arguments),this.runs=new Ns(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/evals",Hh,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class Hh extends nt{}Ds.EvalListResponsesPage=Hh;Ds.Runs=Ns;Ds.RunListResponsesPage=Gh;let Wh=class extends he{create(e,n){return this._client.post("/files",Wr({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/files",qh,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let s=await this.retrieve(e);for(;!s.status||!i.has(s.status);)if(await Ps(n),s=await this.retrieve(e),Date.now()-o>r)throw new Ah({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class qh extends nt{}Wh.FileObjectsPage=qh;class _T extends he{}let wT=class extends he{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Jh extends he{constructor(){super(...arguments),this.graders=new wT(this._client)}}Jh.Graders=wT;class Kh extends he{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Yh,{body:n,method:"post",...r})}retrieve(e,n={},r){return We(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class Yh extends eu{}Kh.PermissionCreateResponsesPage=Yh;let su=class extends he{constructor(){super(...arguments),this.permissions=new Kh(this._client)}};su.Permissions=Kh;su.PermissionCreateResponsesPage=Yh;class Xh extends he{list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Zh,{query:n,...r})}}class Zh extends nt{}Xh.FineTuningJobCheckpointsPage=Zh;class ro extends he{constructor(){super(...arguments),this.checkpoints=new Xh(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Qh,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return We(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,jh,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class Qh extends nt{}class jh extends nt{}ro.FineTuningJobsPage=Qh;ro.FineTuningJobEventsPage=jh;ro.Checkpoints=Xh;ro.FineTuningJobCheckpointsPage=Zh;class xr extends he{constructor(){super(...arguments),this.methods=new _T(this._client),this.jobs=new ro(this._client),this.checkpoints=new su(this._client),this.alpha=new Jh(this._client)}}xr.Methods=_T;xr.Jobs=ro;xr.FineTuningJobsPage=Qh;xr.FineTuningJobEventsPage=jh;xr.Checkpoints=su;xr.Alpha=Jh;class CT extends he{}class ep extends he{constructor(){super(...arguments),this.graderModels=new CT(this._client)}}ep.GraderModels=CT;class xT extends he{createVariation(e,n){return this._client.post("/images/variations",Wr({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Wr({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class tp extends he{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",np,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class np extends eu{}tp.ModelsPage=np;class TT extends he{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function yV(t,e){return!e||!_V(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:ST(t,e)}function ST(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:xV(e,i)};if(i.type==="message"){const o=i.content.map(s=>s.type==="output_text"?{...s,parsed:vV(e,s.text)}:s);return{...i,content:o}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||ET(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function vV(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function _V(t){return!!Nh(t.text?.format)}function wV(t){return t?.$brand==="auto-parseable-tool"}function CV(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function xV(t,e){const n=CV(t.tools??[],e.name);return{...e,...e,parsed_arguments:wV(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function ET(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class AT extends he{list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,SV,{query:n,...r})}}var ti=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Xn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ni,ha,Zn,pa,Ev,Av,Pv,Iv;class rp extends kh{constructor(e){super(),ni.add(this),ha.set(this,void 0),Zn.set(this,void 0),pa.set(this,void 0),ti(this,ha,e,"f")}static createResponse(e,n,r){const i=new rp(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Xn(this,ni,"m",Ev).call(this);let o,s=null;"response_id"in n?(o=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):o=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of o)Xn(this,ni,"m",Av).call(this,a,s);if(o.controller.signal?.aborted)throw new jt;return Xn(this,ni,"m",Pv).call(this)}[(ha=new WeakMap,Zn=new WeakMap,pa=new WeakMap,ni=new WeakSet,Ev=function(){this.ended||ti(this,Zn,void 0,"f")},Av=function(n,r){if(this.ended)return;const i=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},o=Xn(this,ni,"m",Iv).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const s=o.output[n.output_index];if(!s)throw new de(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new de(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new de(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=o.output[n.output_index];if(!s)throw new de(`missing output at index ${n.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:i(n.type,n);break}},Pv=function(){if(this.ended)throw new de("stream has ended, this shouldn't happen");const n=Xn(this,Zn,"f");if(!n)throw new de("request ended without sending any events");ti(this,Zn,void 0,"f");const r=TV(n,Xn(this,ha,"f"));return ti(this,pa,r,"f"),r},Iv=function(n){let r=Xn(this,Zn,"f");if(!r){if(n.type!=="response.created")throw new de(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ti(this,Zn,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new de(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new de(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new de(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new de(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new de(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{ti(this,Zn,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Xn(this,pa,"f");if(!e)throw new de("stream ended without producing a ChatCompletion");return e}}function TV(t,e){return yV(t,e)}class ip extends he{constructor(){super(...arguments),this.inputItems=new AT(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ET(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>ST(r,e))}stream(e,n){return rp.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class SV extends nt{}ip.InputItems=AT;class PT extends he{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Wr({body:n,...r}))}}class op extends he{constructor(){super(...arguments),this.parts=new PT(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}op.Parts=PT;const EV=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class au extends he{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return We(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,lu,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const o=await this.retrieve(e,n,{...r,headers:i}).withResponse(),s=o.data;switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.response.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Ps(a);break;case"failed":case"completed":return s}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,sp,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class lu extends nt{}class sp extends eu{}au.VectorStoreFilesPage=lu;au.FileContentResponsesPage=sp;class IT extends he{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return We(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,lu,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:s}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Ps(a);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=i?.maxConcurrency??5,s=Math.min(o,n.length),a=this._client,c=n.values(),f=[...r];async function d(p){for(let m of p){const _=await a.files.create({file:m,purpose:"assistants"},i);f.push(_.id)}}const h=Array(s).fill(c).map(d);return await EV(h),await this.createAndPoll(e,{file_ids:f})}}class Tr extends he{constructor(){super(...arguments),this.files=new au(this._client),this.fileBatches=new IT(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return We(e)?this.list({},e):this._client.getAPIList("/vector_stores",ap,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,lp,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class ap extends nt{}class lp extends eu{}Tr.VectorStoresPage=ap;Tr.VectorStoreSearchResponsesPage=lp;Tr.Files=au;Tr.VectorStoreFilesPage=lu;Tr.FileContentResponsesPage=sp;Tr.FileBatches=IT;var kT;class pe extends q3{constructor({baseURL:e=la("OPENAI_BASE_URL"),apiKey:n=la("OPENAI_API_KEY"),organization:r=la("OPENAI_ORG_ID")??null,project:i=la("OPENAI_PROJECT_ID")??null,...o}={}){if(n===void 0)throw new de("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:n,organization:r,project:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&nV())throw new de(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new gT(this),this.chat=new ru(this),this.embeddings=new vT(this),this.files=new Wh(this),this.images=new xT(this),this.audio=new Is(this),this.moderations=new TT(this),this.models=new tp(this),this.fineTuning=new xr(this),this.graders=new ep(this),this.vectorStores=new Tr(this),this.beta=new no(this),this.batches=new Ph(this),this.uploads=new op(this),this.responses=new ip(this),this.evals=new Ds(this),this.containers=new Ms(this),this._options=s,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return I3(e,{arrayFormat:"brackets"})}}kT=pe;pe.OpenAI=kT;pe.DEFAULT_TIMEOUT=6e5;pe.OpenAIError=de;pe.APIError=ht;pe.APIConnectionError=Xl;pe.APIConnectionTimeoutError=Ah;pe.APIUserAbortError=jt;pe.NotFoundError=Ax;pe.ConflictError=Px;pe.RateLimitError=kx;pe.BadRequestError=Tx;pe.AuthenticationError=Sx;pe.InternalServerError=Rx;pe.PermissionDeniedError=Ex;pe.UnprocessableEntityError=Ix;pe.toFile=Fx;pe.fileFromPath=wx;pe.Completions=gT;pe.Chat=ru;pe.ChatCompletionsPage=nu;pe.Embeddings=vT;pe.Files=Wh;pe.FileObjectsPage=qh;pe.Images=xT;pe.Audio=Is;pe.Moderations=TT;pe.Models=tp;pe.ModelsPage=np;pe.FineTuning=xr;pe.Graders=ep;pe.VectorStores=Tr;pe.VectorStoresPage=ap;pe.VectorStoreSearchResponsesPage=lp;pe.Beta=no;pe.Batches=Ph;pe.BatchesPage=Ih;pe.Uploads=op;pe.Responses=ip;pe.Evals=Ds;pe.EvalListResponsesPage=Hh;pe.Containers=Ms;pe.ContainerListResponsesPage=Oh;var AV={};let Io,Gf;const kv=t=>{t&&t!==Gf&&(Gf=t,Io=void 0)},up=()=>{if(Io)return Io;const t=Gf||AV.API_KEY;if(!t)throw new Error("Gemini API key is missing. Please add it via the settings menu or ensure the API_KEY environment variable is set.");return Io=new v3({apiKey:t}),Io};let ko,El;const Rv=t=>{t&&t!==El&&(El=t,ko=void 0)},cp=()=>{if(ko)return ko;if(!El)throw new Error("OpenAI API key is missing. Please add it via the settings menu to use OpenAI models.");return ko=new pe({apiKey:El,dangerouslyAllowBrowser:!0}),ko};let Hf;const Mv=t=>{t&&t!==Hf&&(Hf=t)},RT=()=>Hf,MT=()=>typeof window<"u"?window.location.origin:"",fp=t=>{if(!t)return"";const e=Reflect.get(t,"text");return typeof e=="function"?e.call(t)??"":e??""},dn={kTop:5,groupWindow:2048,tailWindow:2048,etaPercent:90,tau:.95,warmupTraces:8,maxBudget:16,minTokensBeforeStop:32},Nv='You are a strict verifier. Return ONLY JSON with fields: {"score": number, "reasons": string[]}. Score in [0,1].',Dv=(t,e)=>`
Task:
- Question/prompt:
"""${t}"""
- Model answer:
"""${e}"""

Rubric (each ~0.2 points):
1) Directly answers the asked question.
2) Uses only information entailed by the prompt/context.
3) Final answer format matches spec (e.g., number/string/code).
4) No contradictions or hedging.
5) Concise and unambiguous.

Return JSON only.`,Wf=async(t,e,n)=>{if(n.startsWith("gpt-")||n.includes("/"))try{const r=cp(),i=bC+Nv,o=Dv(t,e),a=(await r.chat.completions.create({model:Wk,messages:[{role:"system",content:i},{role:"user",content:o}],temperature:0})).choices[0].message.content;if(!a)return{score:0,reasons:["Judge model returned an empty response."]};const c=a.trim().match(/\{[\s\S]*\}/)?.[0]??"{}",f=JSON.parse(c);return typeof f.score=="number"&&Array.isArray(f.reasons)?{score:Math.max(0,Math.min(1,f.score)),reasons:f.reasons}:(console.warn("OpenAI Judge model returned invalid JSON shape:",f),{score:0,reasons:["Invalid JSON response from OpenAI judge model."]})}catch(r){console.error("Error during OpenAI answer judging:",r);const i=r instanceof Error?r.message:"An unknown error occurred.";return r instanceof SyntaxError?{score:0,reasons:[`Failed to parse JSON response from OpenAI judge: ${i}`]}:{score:0,reasons:[`An error occurred while judging the answer with OpenAI: ${i}`]}}try{const r=n===gn?gn:ps,o=await up().models.generateContent({model:r,contents:{parts:[{text:Dv(t,e)}]},config:{systemInstruction:Nv,responseMimeType:"application/json",responseSchema:{type:Qt.OBJECT,properties:{score:{type:Qt.NUMBER},reasons:{type:Qt.ARRAY,items:{type:Qt.STRING}}},propertyOrdering:["score","reasons"]},temperature:0}}),s=fp(o).trim();if(!s)return console.warn("Judge model returned empty response"),{score:0,reasons:["Empty response from judge model."]};let a;try{a=JSON.parse(s)}catch(f){return console.error("Failed to parse JSON from Gemini judge:",f),{score:0,reasons:[`Failed to parse JSON response from judge model: ${f instanceof Error?f.message:String(f)}`]}}return(f=>{if(typeof f!="object"||f===null)return!1;const d=f;return typeof d.score=="number"&&Array.isArray(d.reasons)&&d.reasons.every(h=>typeof h=="string")})(a)?{score:Math.max(0,Math.min(1,a.score)),reasons:a.reasons}:(console.warn("Judge model returned invalid JSON shape:",a),{score:0,reasons:["Invalid JSON response from judge model."]})}catch(r){return console.error("Error during answer judging:",r),{score:0,reasons:["An error occurred while judging the answer."]}}};function qf(t,e){const n=new Map;t.forEach((s,a)=>n.set(s,(n.get(s)??0)+(e[a]??0)));let r="",i=-1/0,o=0;for(const[s,a]of n)o+=a,a>i&&(i=a,r=s);return{answer:r,weights:n,consensus:i<=0||o<=0?0:i/o}}function Jf(t,e,n){if(t.length===0)return{items:[],keptScores:[]};const r=[...t.keys()];r.sort((s,a)=>e[a]-e[s]);const i=Math.max(1,Math.floor(n/100*t.length)),o=r.slice(0,i);return{items:o.map(s=>t[s]),keptScores:o.map(s=>e[s])}}async function NT(t,e,n,r,i={}){const o={...dn,...i},s=[],a=o.maxBudget??dn.maxBudget;for(let C=0;C<a;C++)s.push(t.generate(e,new AbortController().signal));const c=await Promise.all(s),f=c.map(n),d=c.map(C=>Wf(e,C.text,r)),h=(await Promise.all(d)).map(C=>C.score),{items:p,keptScores:m}=Jf(f,h,o.etaPercent??dn.etaPercent),{answer:_}=qf(p,m),g=c.find(C=>n(C)===_);return{answer:_,content:g?.text??"Could not determine winning trace."}}async function DT(t,e,n,r,i={}){const o={...dn,...i},s=[],a=[],c=o.warmupTraces??dn.warmupTraces,f=[];for(let w=0;w<c;w++)f.push(t.generate(e,new AbortController().signal));const d=await Promise.all(f),h=d.map(w=>Wf(e,w.text,r)),p=(await Promise.all(h)).map(w=>w.score);s.push(...d),a.push(...p);let m=s.map(n);const _=Jf(m,a,o.etaPercent??dn.etaPercent);let{answer:g,consensus:C}=qf(_.items,_.keptScores);const v=o.maxBudget??dn.maxBudget;for(;C<(o.tau??dn.tau)&&s.length<v;){const w=await t.generate(e,new AbortController().signal),{score:E}=await Wf(e,w.text,r);s.push(w),a.push(E);const A=s.map(n),k=Jf(A,a,o.etaPercent??dn.etaPercent),I=qf(k.items,k.keptScores);g=I.answer,C=I.consensus}const y=s.find(w=>n(w)===g);return{answer:g,content:y?.text??"Could not determine winning trace."}}const PV={low:8192,medium:24576,high:32768,dynamic:-1},IV={none:0,low:4096,medium:12288,high:24576,dynamic:-1},bT=async(t,e,n,r,i)=>{const o=[{text:e}];n.forEach(f=>{o.push({inlineData:{mimeType:f.file.type,data:f.base64}})});const s={model:t.model,contents:{parts:o},config:{systemInstruction:t.persona,temperature:.5+Math.random()*.2}};if(r.model===ps){const f=IV[r.settings.effort];s.config&&(s.config.thinkingConfig={thinkingBudget:f})}else if(r.model===gn){const f=r.settings.effort==="none"?"dynamic":r.settings.effort,d=PV[f];s.config&&(s.config.thinkingConfig={thinkingBudget:d})}i&&s.config&&(s.config.abortSignal=i);const c=await up().models.generateContent(s);return fp(c)},kV=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:o,deepConfEta:s,tau:a,groupWindow:c}=r.settings,f=()=>({generate:async(p,m)=>{const _=await bT(t,p,n,r,m);return{text:_,steps:_.split("").map(C=>({token:C,topK:[]}))}}}),d=p=>p.text.trim(),h={etaPercent:s,maxBudget:o,warmupTraces:Math.min(o,dn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await DT(f(),e,d,r.model,h);return p}else{const{content:p}=await NT(f(),e,d,r.model,h);return p}},LT=async(t,e,n,r,i)=>{const o=cp();let s=t.persona;s+=`
Your response verbosity should be ${r.settings.verbosity}.`,r.settings.effort==="high"&&(s=bC+s);const a=[{role:"system",content:s}];if(n.length>0){const f=[{type:"text",text:e}];n.forEach(d=>{f.push({type:"image_url",image_url:{url:`data:${d.file.type};base64,${d.base64}`}})}),a.push({role:"user",content:f})}else a.push({role:"user",content:e});return(await o.chat.completions.create({model:t.model,messages:a},{signal:i})).choices[0].message.content||"No content received."},RV=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:o,deepConfEta:s,tau:a,groupWindow:c}=r.settings,f=()=>({generate:async(p,m)=>{const _=await LT(t,p,n,r,m);return{text:_,steps:_.split("").map(C=>({token:C,topK:[]}))}}}),d=p=>p.text.trim(),h={etaPercent:s,maxBudget:o,warmupTraces:Math.min(o,dn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await DT(f(),e,d,r.model,h);return p}else{const{content:p}=await NT(f(),e,d,r.model,h);return p}},MV=async(t,e,n,r)=>{const i=RT();if(!i)throw new Error("OpenRouter API Key not set.");const o={Authorization:`Bearer ${i}`,"Content-Type":"application/json","HTTP-Referer":MT(),"X-Title":"HeavyOrc"},s=[{role:"system",content:t.persona}];if(n.length>0){const d=[{type:"text",text:e}];n.forEach(h=>{d.push({type:"image_url",image_url:{url:`data:${h.file.type};base64,${h.base64}`}})}),s.push({role:"user",content:d})}else s.push({role:"user",content:e});const a={model:t.model,messages:s,...r.settings},c=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:o,body:JSON.stringify(a)});if(!c.ok){const d=await c.json();throw new Error(`OpenRouter API Error: ${d.error?.message||c.statusText}`)}return(await c.json()).choices[0].message.content||"No content received."},bv=async(t,e,n,r)=>{try{let i="";if(r.provider==="gemini"){const o=r;o.settings.generationStrategy==="single"?i=await bT(t,e,n,o):i=await kV(t,e,n,o)}else if(r.provider==="openai"){const o=r;o.settings.generationStrategy==="single"?i=await LT(t,e,n,o):i=await RV(t,e,n,o)}else i=await MV(t,e,n,r);return{agentId:t.agentId,expert:t,content:i,status:"COMPLETED"}}catch(i){console.error(`Agent ${r.id} (${t.provider} - ${t.name}) failed:`,i);let o="An unknown error occurred";return i instanceof Error?o=i.message:typeof i=="string"&&(o=i),{agentId:t.agentId,expert:t,content:"This agent failed to generate a response.",status:"FAILED",error:o}}},NV=t=>new Promise(e=>setTimeout(e,t)),DV=async(t,e,n,r,i)=>{const s=t.map(m=>({expert:m,config:r.find(_=>_.id===m.agentId)})).filter(m=>m.config!==void 0),a=s.filter(m=>m.config.provider==="gemini"),c=s.filter(m=>m.config.provider==="openai"),f=s.filter(m=>m.config.provider==="openrouter"),d=[];[...a,...f].forEach(({expert:m,config:_})=>{const g=bv(m,e,n,_).then(C=>(i(C),C));d.push(g)});let p=Promise.resolve();return c.forEach(({expert:m,config:_})=>{p=p.then(async()=>{const g=bv(m,e,n,_).then(C=>(i(C),C));d.push(g),_.settings.generationStrategy==="single"&&await NV(250)})}),await p,Promise.all(d)},bV={low:8192,medium:24576,high:32768,dynamic:-1};async function*LV(t){const e=t.getReader(),n=new TextDecoder("utf-8");try{for(;;){const{done:r,value:i}=await e.read();if(r)break;const s=n.decode(i,{stream:!0}).split(`

`);for(const a of s)if(a.startsWith("data: ")){const c=a.substring(6);if(c.trim()==="[DONE]")return;try{const d=JSON.parse(c).choices[0]?.delta?.content||"";d&&(yield{text:d})}catch(f){console.error("Error parsing OpenRouter stream chunk:",f,"Chunk:",c)}}}}finally{e.releaseLock()}}const FV=async(t,e,n,r,i)=>{const o=n.filter(p=>p.status==="COMPLETED");if(o.length===0)throw new Error("All agents failed to produce a draft. Cannot generate a final answer.");const s=`The original user question is:
"${e}"

Here are ${o.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${o.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;if(t.includes("/")){const p=RT();if(!p)throw new Error("OpenRouter API Key not set.");const m={Authorization:`Bearer ${p}`,"Content-Type":"application/json","HTTP-Referer":MT(),"X-Title":"HeavyOrc"},C=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:m,body:JSON.stringify({model:t,messages:[{role:"system",content:ra},{role:"user",content:s}],stream:!0})});if(!C.ok||!C.body){const v=await C.json().catch(()=>({}));throw new Error(`OpenRouter API Error: ${v.error?.message||C.statusText}`)}return LV(C.body)}if(t.startsWith("gpt-")){const p=cp();let m=t===yf?ra+Kk:ra;m+=`
Your final synthesized response should have a verbosity level of: ${r}.`;const _=`${m}

${s}`,g=t===yf?"high":"medium";try{const C=await p.responses.create({model:Hk,input:_,reasoning:{effort:g},stream:!0});async function*v(){for await(const y of C)y.type==="response.output_text.delta"&&(yield{text:y.delta})}return v()}catch(C){throw console.error("Error calling the OpenAI API for arbiter:",C),C instanceof pe.APIError?new Error(C.message):C instanceof Error?new Error(`An error occurred with the OpenAI Arbiter: ${C.message}`):new Error("An unknown error occurred while communicating with the OpenAI model for arbitration.")}}const c=bV[i==="none"?"dynamic":i],d=await up().models.generateContentStream({model:gn,contents:{parts:[{text:s}]},config:{systemInstruction:ra,thinkingConfig:{thinkingBudget:c}}});async function*h(){for await(const p of d)yield{text:fp(p)}}return h()},VV=t=>Math.ceil(t.length/4),UV=28e3,BV=async(t,e)=>{const n=t.agentConfigs.map(d=>({agentId:d.id,id:d.expert.id,name:d.expert.name,persona:d.expert.persona,provider:d.provider,model:d.model}));e.onInitialAgents(n);const r=await DV(n,t.prompt,t.images,t.agentConfigs,e.onDraftComplete);let i=t.arbiterModel,o=!1;const s=r.filter(d=>d.status==="COMPLETED"),a=i.startsWith("gpt-"),c=i.includes("/");if(s.length>0&&(a||c)){const d=`The original user question is:
"${t.prompt}"

Here are ${s.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${s.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;VV(d)>UV&&(i=gn,o=!0)}const f=await FV(i,t.prompt,r,t.openAIArbiterVerbosity,t.geminiArbiterEffort);return{drafts:r,stream:f,switchedArbiter:o}},uu=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M10 2.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75Zm-3.25 3.5a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3Zm7 0a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3ZM10 8a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5A.75.75 0 0 1 10 8Zm-4.12 3.12a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25Zm8.24 0a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25ZM10 13.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75ZM3.75 10a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Zm12.5 0a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Z",clipRule:"evenodd"})}),OV=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M9.661 2.237a.531.531 0 0 1 .678 0 11.947 11.947 0 0 0 7.078 2.749.5.5 0 0 1 .479.425c.069.52.104 1.05.104 1.59 0 5.162-3.26 9.563-7.834 11.256a.48.48 0 0 1-.332 0C5.26 16.564 2 12.163 2 7c0-.538.035-1.069.104-1.589a.5.5 0 0 1 .48-.425 11.947 11.947 0 0 0 7.077-2.75Zm4.196 5.954a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),dp=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",...t,children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hp=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),bs=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"})}),$V=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{d:"M3 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM8.5 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM15.5 10a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),FT=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[T.jsx("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),T.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),zV=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[T.jsx("path",{fillRule:"evenodd",d:"M9.25 13.25a.75.75 0 0 0 1.5 0V4.636l2.955 3.129a.75.75 0 0 0 1.09-1.03l-4.25-4.5a.75.75 0 0 0-1.09 0l-4.25 4.5a.75.75 0 1 0 1.09 1.03L9.25 4.636V13.25Z",clipRule:"evenodd"}),T.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),VT=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),UT=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),GV=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.127.332-.183.582-.495.645-.87l.213-1.281z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),HV=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"})}),BT=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),WV=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),qV=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),JV=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),OT=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),pp=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),mp=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),KV=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m12 3.75a6 6 0 0 1-12 0v-1.5a6 6 0 0 1 12 0v1.5Zm-6 4.5v.75m-3-12.75a3 3 0 0 1 3-3h.008a3 3 0 0 1 3 3v1.5a3 3 0 0 1-3 3h-.008a3 3 0 0 1-3-3v-1.5Z"})}),YV=t=>{switch(t){case"RUNNING":return T.jsxs(T.Fragment,{children:[T.jsx(dp,{className:"h-5 w-5 text-blue-400 animate-spin"}),T.jsx("span",{className:"sr-only",children:"Running"})]});case"COMPLETED":return T.jsxs(T.Fragment,{children:[T.jsx(hp,{className:"h-5 w-5 text-green-400"}),T.jsx("span",{className:"sr-only",children:"Completed"})]});case"FAILED":return T.jsxs(T.Fragment,{children:[T.jsx(bs,{className:"h-5 w-5 text-red-400"}),T.jsx("span",{className:"sr-only",children:"Failed"})]});case"PENDING":default:return T.jsxs(T.Fragment,{children:[T.jsx($V,{className:"h-5 w-5 text-gray-500"}),T.jsx("span",{className:"sr-only",children:"Pending"})]})}},XV=t=>{switch(t){case"RUNNING":return"border-blue-500 animate-pulse";case"COMPLETED":return"border-green-500";case"FAILED":return"border-red-500";case"PENDING":default:return"border-gray-600"}},ZV=t=>{switch(t){case"gemini":return"bg-purple-800 text-purple-200";case"openai":return"bg-teal-800 text-teal-200";case"openrouter":return"bg-cyan-800 text-cyan-200";default:return"bg-gray-700 text-gray-200"}},QV=({agent:t,displayId:e})=>{const{persona:n,status:r,content:i,provider:o}=t,s=H.useId(),a=r==="COMPLETED"||r==="FAILED",[c,f]=H.useState(!1),d=XV(r);return T.jsxs("div",{className:`bg-gray-800/50 border ${d} rounded-lg shadow-lg transition-all duration-300 flex flex-col`,children:[T.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center gap-2",children:[T.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[T.jsx(uu,{className:"h-5 w-5 text-purple-400 flex-shrink-0"}),T.jsxs("h3",{className:"font-bold text-sm text-gray-200 truncate",children:["Agent ",e]}),T.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full uppercase ${ZV(o)}`,children:o})]}),T.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[YV(r),a&&T.jsxs("button",{onClick:()=>f(!c),className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-expanded":!c,"aria-controls":s,title:c?"Expand":"Collapse",children:[c?T.jsx(UT,{className:"h-5 w-5"}):T.jsx(VT,{className:"h-5 w-5"}),T.jsx("span",{className:"sr-only",children:c?"Expand card":"Collapse card"})]})]})]}),T.jsx("div",{id:s,className:`overflow-y-auto transition-all duration-500 ease-in-out ${c?"max-h-0":"max-h-[500px]"}`,children:T.jsxs("div",{className:"p-4",children:[T.jsxs("p",{className:"text-xs text-gray-400 italic mb-3",children:["Persona: ",n]}),T.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-wrap font-mono",children:i||"Awaiting task..."})]})})]})},ma=[{id:"api-keys",label:"API Keys",icon:qV,description:"Manage your API keys. They're stored in your browser and never sent to our servers."},{id:"session",label:"Session Management",icon:OT,description:"Save your current settings, API key, and query history to a file, or load a previous session."},{id:"history",label:"Query History",icon:JV,description:"Review and reuse your most recent prompts."}],jV=({currentOpenAIApiKey:t,onSaveOpenAIApiKey:e,currentGeminiApiKey:n,onSaveGeminiApiKey:r,currentOpenRouterApiKey:i,onSaveOpenRouterApiKey:o})=>{const[s,a]=H.useState(t),[c,f]=H.useState(n),[d,h]=H.useState(i);H.useEffect(()=>{a(t)},[t]),H.useEffect(()=>{f(n)},[n]),H.useEffect(()=>{h(i)},[i]);const p=()=>e(s),m=()=>r(c),_=()=>o(d);return T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"openai-api-key",className:"block text-sm font-medium text-gray-300 mb-2",children:"OpenAI API Key"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{id:"openai-api-key",type:"password",value:s,onChange:g=>a(g.target.value),placeholder:"sk-...",className:"flex-grow p-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"}),T.jsx("button",{onClick:p,type:"button",className:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-500 disabled:bg-gray-600 transition-colors",children:"Save"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"gemini-api-key",className:"block text-sm font-medium text-gray-300 mb-2",children:"Google Gemini API Key"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{id:"gemini-api-key",type:"password",value:c,onChange:g=>f(g.target.value),placeholder:"AIza...",className:"flex-grow p-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"}),T.jsx("button",{onClick:m,type:"button",className:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-500 disabled:bg-gray-600 transition-colors",children:"Save"})]}),T.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"If left blank, the application will attempt to use the pre-configured environment variable."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"openrouter-api-key",className:"block text-sm font-medium text-gray-300 mb-2",children:"OpenRouter API Key"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{id:"openrouter-api-key",type:"password",value:d,onChange:g=>h(g.target.value),placeholder:"sk-or-...",className:"flex-grow p-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"}),T.jsx("button",{onClick:_,type:"button",className:"px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-500 disabled:bg-gray-600 transition-colors",children:"Save"})]})]})]})},eU=({onSaveSession:t,onLoadSession:e})=>{const n=H.useRef(null),r=()=>n.current?.click(),i=o=>{const s=o.target.files?.[0];s&&e(s)};return T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-700/80 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 transition-colors",children:[T.jsx(FT,{className:"w-5 h-5"}),"Save Session"]}),T.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-700/80 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 transition-colors",children:[T.jsx(zV,{className:"w-5 h-5"}),"Load Session"]}),T.jsx("input",{ref:n,type:"file",accept:".json",className:"hidden",onChange:i,"aria-hidden":"true"})]})},tU=({queryHistory:t,onSelectQuery:e,onClose:n})=>{const r=i=>{e(i),n()};return t.length===0?T.jsx("p",{className:"text-gray-500 italic",children:"Your query history is empty."}):T.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((i,o)=>T.jsx("li",{children:T.jsx("button",{onClick:()=>r(i),className:"w-full text-left p-2.5 text-sm text-indigo-300 bg-gray-900/50 rounded-md hover:bg-gray-700 transition-colors truncate",title:i,children:i})},o))})},nU=t=>{const{isOpen:e,onClose:n,queryHistory:r}=t,[i,o]=H.useState("api-keys"),[s,a]=H.useState(!1),c=ma.find(_=>_.id===i)??ma[0];if(H.useEffect(()=>{const _=g=>{g.key==="Escape"&&n()};return e&&(window.addEventListener("keydown",_),o("api-keys"),a(!1)),()=>window.removeEventListener("keydown",_)},[e,n]),!e)return null;const f=_=>{o(_),a(!0)},d=()=>a(!1),h=_=>{switch(_){case"api-keys":return T.jsx(jV,{...t});case"session":return T.jsx(eU,{...t});case"history":return T.jsx(tU,{...t});default:return null}},p=r.length>0?ma:ma.filter(_=>_.id!=="history"),m=T.jsx("nav",{className:"flex flex-col gap-1 p-2","aria-label":"Settings navigation",children:p.map(_=>{const g=_.icon,C=_.id===i;return T.jsxs("button",{onClick:()=>f(_.id),className:`w-full flex items-center gap-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${C?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,"aria-current":C?"page":void 0,children:[T.jsx(g,{className:"w-5 h-5 flex-shrink-0"}),T.jsx("span",{children:_.label})]},_.id)})});return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:T.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-4xl h-full max-h-[700px] flex flex-col",onClick:_=>_.stopPropagation(),children:[T.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:d,className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 md:hidden","aria-label":"Back to settings sections",style:{visibility:s?"visible":"hidden"},children:T.jsx(BT,{className:"w-6 h-6"})}),T.jsxs("h2",{id:"settings-title",className:"text-lg font-bold text-gray-100",children:[T.jsx("span",{className:"md:hidden",children:s?c.label:"Settings"}),T.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]}),T.jsx("button",{onClick:n,type:"button",className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white","aria-label":"Close settings",children:T.jsx(pp,{className:"w-6 h-6"})})]}),T.jsxs("div",{className:"flex-grow grid md:grid-cols-[240px_1fr] grid-cols-1 min-h-0",children:[T.jsx("aside",{className:"hidden md:block border-r border-gray-700/50 overflow-y-auto",children:m}),T.jsxs("main",{className:"overflow-y-auto",children:[T.jsx("div",{className:"md:hidden",children:s?T.jsxs("div",{className:"p-6 space-y-4",children:[T.jsx("p",{className:"text-gray-400 text-sm",children:c.description}),T.jsx("div",{className:"border-t border-gray-700 pt-4",children:h(i)})]}):m}),T.jsxs("div",{className:"hidden md:block p-6 space-y-4",children:[T.jsx("h3",{className:"text-xl font-semibold text-gray-200",children:c.label}),T.jsx("p",{className:"text-gray-400 text-sm",children:c.description}),T.jsx("div",{className:"border-t border-gray-700 pt-4",children:h(i)})]})]})]})]})})},Lv=({title:t,children:e,isDisabled:n=!1,defaultOpen:r=!1})=>{const[i,o]=H.useState(r),s=()=>{n||o(!i)};return T.jsxs("div",{className:`border border-gray-700 rounded-lg transition-opacity ${n?"opacity-50":""}`,children:[T.jsxs("button",{type:"button",onClick:s,disabled:n,className:"w-full flex justify-between items-center p-4 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-800 rounded-t-lg","aria-expanded":i,children:[T.jsx("h4",{className:"text-base font-medium text-gray-200",children:t}),i?T.jsx(VT,{className:"w-5 h-5 text-gray-400"}):T.jsx(UT,{className:"w-5 h-5 text-gray-400"})]}),T.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${i?"max-h-[1000px]":"max-h-0"}`,children:T.jsx("div",{className:"p-4 border-t border-gray-700",children:e})})]})},rU=t=>{switch(t){case"RUNNING":return T.jsx(dp,{className:"h-5 w-5 text-blue-400 animate-spin"});case"COMPLETED":return T.jsx(hp,{className:"h-5 w-5 text-green-400"});case"FAILED":return T.jsx(bs,{className:"h-5 w-5 text-red-400"});case"PENDING":case"QUEUED":default:return null}},iU=t=>{switch(t){case"RUNNING":return"border-blue-500/80 ring-2 ring-blue-500/50";case"COMPLETED":return"border-green-500/80";case"FAILED":return"border-red-500/80";case"PENDING":case"QUEUED":default:return"border-gray-600"}},oU=({config:t,onUpdate:e,onRemove:n,onDuplicate:r,disabled:i})=>{const o=c=>{const f=c.target.value,d=f.startsWith("gemini"),h=f.includes("/");if(d){const p=f,m={id:t.id,expert:t.expert,status:t.status,provider:"gemini",model:p,settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,m)}else if(h){const p=f,m={id:t.id,expert:t.expert,status:t.status,provider:"openrouter",model:p,settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}};e(t.id,m)}else{const p=f,m={id:t.id,expert:t.expert,status:t.status,provider:"openai",model:p,settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,m)}},s=c=>{const f={...t,settings:{...t.settings,...c}};e(t.id,f)},a=iU(t.status);return T.jsxs("div",{className:`relative group bg-gray-800/50 p-4 rounded-lg border transition-all duration-300 ${a}`,children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-gray-200",children:t.expert.name}),T.jsxs("p",{className:"text-xs text-gray-400 italic mt-1 pr-8",children:["Persona: ",t.expert.persona]})]}),T.jsx("div",{className:"flex-shrink-0",children:rU(t.status)})]}),T.jsxs("div",{className:`absolute top-3 right-3 flex items-center gap-1.5 transition-opacity ${i?"opacity-0":"opacity-0 group-hover:opacity-100"}`,children:[T.jsxs("button",{onClick:()=>r(t.id),disabled:i,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Duplicate Agent",children:[T.jsx(OT,{className:"w-5 h-5"}),T.jsx("span",{className:"sr-only",children:"Duplicate Agent"})]}),T.jsxs("button",{onClick:()=>n(t.id),disabled:i,className:"p-1 text-gray-400 hover:text-red-400 disabled:opacity-50 disabled:cursor-not-allowed",title:"Remove Agent",children:[T.jsx(bs,{className:"w-5 h-5"}),T.jsx("span",{className:"sr-only",children:"Remove Agent"})]})]}),T.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`model-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Model"}),T.jsxs("select",{id:`model-${t.id}`,value:t.model,onChange:o,disabled:i,className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",children:[T.jsxs("optgroup",{label:"Google",children:[T.jsx("option",{value:gn,children:"Gemini 2.5 Pro"}),T.jsx("option",{value:ps,children:"Gemini 2.5 Flash"})]}),T.jsx("optgroup",{label:"OpenAI",children:T.jsx("option",{value:NC,children:"OpenAI GPT-5"})}),T.jsxs("optgroup",{label:"OpenRouter",children:[T.jsx("option",{value:wh,children:"OpenAI GPT-4o"}),T.jsx("option",{value:qk,children:"Gemini Flash 1.5"}),T.jsx("option",{value:DC,children:"Claude 3 Haiku"})]})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`strategy-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Generation Strategy"}),T.jsxs("select",{id:`strategy-${t.id}`,value:t.provider==="openrouter"?"single":t.settings.generationStrategy,onChange:c=>s({generationStrategy:c.target.value}),disabled:i||t.provider==="openrouter",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 disabled:opacity-70",title:t.provider==="openrouter"?"DeepConf is not currently supported for OpenRouter agents.":"Select the generation strategy.",children:[T.jsx("option",{value:"single",children:"Single Draft"}),T.jsx("option",{value:"deepconf-offline",children:"DeepConf Offline"}),T.jsx("option",{value:"deepconf-online",children:"DeepConf Online"})]})]}),t.provider!=="openrouter"&&t.settings.generationStrategy!=="single"&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`traces-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Trace Count"}),T.jsx("input",{type:"number",id:`traces-${t.id}`,value:t.settings.traceCount,onChange:c=>s({traceCount:parseInt(c.target.value,10)}),disabled:i,min:"2",max:"32",step:"1",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Number of parallel responses to generate for DeepConf."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`eta-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Confidence (Eta)"}),T.jsxs("select",{id:`eta-${t.id}`,value:t.settings.deepConfEta,onChange:c=>s({deepConfEta:parseInt(c.target.value,10)}),disabled:i,className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Confidence threshold. 90% is conservative (keeps more), 10% is aggressive (keeps few high-confidence traces).",children:[T.jsx("option",{value:"90",children:"90% (Conservative)"}),T.jsx("option",{value:"10",children:"10% (Aggressive)"})]})]}),T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{htmlFor:`confidence-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Confidence Source"}),T.jsx("select",{id:`confidence-${t.id}`,value:t.settings.confidenceSource,disabled:!0,className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500 disabled:opacity-70 disabled:cursor-not-allowed",title:"Only 'Judge' is available. The underlying models (Gemini and GPT-5) do not support streaming logprobs required for token-based confidence.",children:T.jsx("option",{value:"judge",children:"Judge Verifier"})})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`tau-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Consensus (Tau)"}),T.jsx("input",{type:"number",id:`tau-${t.id}`,value:t.settings.tau,onChange:c=>s({tau:parseFloat(c.target.value)}),disabled:i,min:"0.5",max:"1.0",step:"0.01",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Consensus threshold for online mode. Stops when the top answer's vote share exceeds this value (e.g., 0.95)."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`groupWindow-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Group Window"}),T.jsx("input",{type:"number",id:`groupWindow-${t.id}`,value:t.settings.groupWindow,onChange:c=>s({groupWindow:parseInt(c.target.value,10)}),disabled:i,min:"8",max:"4096",step:"8",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Sliding window size (in tokens) for calculating group confidence."})]})]}),t.provider==="gemini"?T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{htmlFor:`gemini-effort-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Thinking Effort"}),T.jsxs("select",{id:`gemini-effort-${t.id}`,value:t.settings.effort,onChange:c=>s({effort:c.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Controls how much 'thinking' the Gemini model performs before answering. 'Dynamic' is recommended. 'High' can improve quality for complex tasks but increases latency. 'None' is fastest but least thorough.",children:[T.jsx("option",{value:"dynamic",children:"Dynamic"}),T.jsx("option",{value:"high",children:"High"}),T.jsx("option",{value:"medium",children:"Medium"}),T.jsx("option",{value:"low",children:"Low"}),T.jsx("option",{value:"none",disabled:t.model===gn,children:"None (No Thinking)"})]})]}):t.provider==="openai"?T.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`openai-effort-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Reasoning"}),T.jsxs("select",{id:`openai-effort-${t.id}`,value:t.settings.effort,onChange:c=>s({effort:c.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Controls the model's reasoning process. 'High' enables more complex, step-by-step thinking, which can improve accuracy for difficult prompts. 'Medium' is faster and suitable for general tasks.",children:[T.jsx("option",{value:"high",children:"High"}),T.jsx("option",{value:"medium",children:"Medium"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`openai-verbosity-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Verbosity"}),T.jsxs("select",{id:`openai-verbosity-${t.id}`,value:t.settings.verbosity,onChange:c=>s({verbosity:c.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500",title:"Adjusts the length and detail of the agent's response. 'High' provides more comprehensive answers, while 'Low' is more concise.",children:[T.jsx("option",{value:"high",children:"High"}),T.jsx("option",{value:"medium",children:"Medium"}),T.jsx("option",{value:"low",children:"Low"})]})]})]}):T.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-temp-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Temperature"}),T.jsx("input",{type:"number",id:`or-temp-${t.id}`,value:t.settings.temperature,onChange:c=>s({temperature:parseFloat(c.target.value)}),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-topk-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Top K"}),T.jsx("input",{type:"number",id:`or-topk-${t.id}`,value:t.settings.topK,onChange:c=>s({topK:parseInt(c.target.value,10)}),disabled:i,min:"1",step:"1",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-topp-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Top P"}),T.jsx("input",{type:"number",id:`or-topp-${t.id}`,value:t.settings.topP,onChange:c=>s({topP:parseFloat(c.target.value)}),disabled:i,min:"0",max:"1",step:"0.05",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-repp-${t.id}`,className:"block text-sm font-medium text-gray-400 mb-1",children:"Repetition Penalty"}),T.jsx("input",{type:"number",id:`or-repp-${t.id}`,value:t.settings.repetitionPenalty,onChange:c=>s({repetitionPenalty:parseFloat(c.target.value)}),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-gray-900 border border-gray-600 rounded-md focus:ring-2 focus:ring-indigo-500"})]})]})]})]})},sU=({isOpen:t,onClose:e,onAddExpert:n,availableExperts:r})=>{if(H.useEffect(()=>{const o=s=>{s.key==="Escape"&&e()};return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e]),!t)return null;const i=o=>{n(o),e()};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"add-expert-title",children:T.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl border border-gray-700 w-full max-w-2xl h-full max-h-[80vh] flex flex-col",onClick:o=>o.stopPropagation(),children:[T.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0",children:[T.jsx("h2",{id:"add-expert-title",className:"text-lg font-bold text-gray-100",children:"Add an Expert to the Ensemble"}),T.jsx("button",{onClick:e,type:"button",className:"p-1 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white","aria-label":"Close modal",children:T.jsx(pp,{className:"w-6 h-6"})})]}),T.jsx("main",{className:"flex-grow p-4 sm:p-6 overflow-y-auto",children:T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(o=>T.jsxs("button",{onClick:()=>i(o),className:"w-full h-full text-left p-4 bg-gray-900/50 rounded-lg border border-gray-700 hover:bg-indigo-900/40 hover:border-indigo-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex flex-col",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(uu,{className:"w-5 h-5 text-purple-400 flex-shrink-0"}),T.jsx("h3",{className:"font-bold text-gray-200",children:o.name})]}),T.jsx("p",{className:"text-sm text-gray-400 flex-grow",children:o.persona})]},o.id))})})]})})},aU=({agentConfigs:t,setAgentConfigs:e,onDuplicateAgent:n,disabled:r})=>{const[i,o]=H.useState(!1),s=d=>{const h={id:crypto.randomUUID(),expert:d,model:"gemini-2.5-flash",provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(p=>[...p,h])},a=(d,h)=>{e(p=>p.map(m=>m.id===d?h:m))},c=d=>{e(h=>h.filter(p=>p.id!==d))},f=Ch.filter(d=>!t.some(h=>h.expert.id===d.id));return T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-base font-medium text-gray-200",children:"Agent Ensemble"}),f.length>0&&T.jsxs("button",{onClick:()=>o(!0),disabled:r,className:"flex items-center justify-center gap-2 px-3 py-1 bg-gray-700/80 text-white text-sm font-semibold rounded-lg shadow-md hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T.jsx(mp,{className:"w-4 h-4"}),"Add Expert"]})]}),T.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:t.map(d=>T.jsx(oU,{config:d,onUpdate:a,onRemove:c,onDuplicate:n,disabled:r},d.id))}),T.jsx(sU,{isOpen:i,onClose:()=>o(!1),onAddExpert:s,availableExperts:f})]})},ri=5,Fv=200,lU=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result?.split(",")[1];i?e(i):n(new Error("Failed to read file as base64."))},r.onerror=i=>n(i),r.readAsDataURL(t)}),uU=({prompt:t,onPromptChange:e,images:n,onImagesChange:r,onSubmit:i,isLoading:o=!1,disabled:s=!1})=>{const a=H.useRef(null),c=H.useRef(null),f=H.useCallback(async _=>{const g=_.target.files;if(!g)return;let C=[...n];for(const v of Array.from(g)){if(C.length>=ri){alert(`You can only upload a maximum of ${ri} images.`);break}if(v.type.startsWith("image/"))try{const y=await lU(v),w={id:`${v.name}-${Date.now()}`,file:v,base64:y};C.push(w)}catch(y){console.error("Error reading file:",y),alert("There was an error processing one of the images.")}}r(C),a.current&&(a.current.value="")},[n,r]),d=H.useCallback(_=>{r(n.filter(g=>g.id!==_))},[n,r]),h=()=>{a.current?.click()},p=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),!s&&!o&&(t.trim()||n.length>0)&&i())};H.useEffect(()=>{if(c.current){c.current.style.height="auto";const _=c.current.scrollHeight;_>Fv?(c.current.style.height=`${Fv}px`,c.current.style.overflowY="auto"):(c.current.style.height=`${_}px`,c.current.style.overflowY="hidden")}},[t]);const m=!s&&(!!t.trim()||n.length>0);return T.jsxs("div",{className:"bg-gray-800/50 p-2 rounded-2xl shadow-2xl border border-gray-700 flex flex-col gap-2",children:[n.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2 px-2 pt-1",children:n.map(_=>T.jsxs("div",{className:"relative group flex-shrink-0",children:[T.jsx("img",{src:URL.createObjectURL(_.file),alt:"Image preview",className:"w-20 h-20 rounded-lg object-cover border border-gray-600"}),T.jsx("button",{onClick:()=>d(_.id),disabled:s||o,className:"absolute top-1 right-1 p-0.5 bg-black/60 text-white rounded-full hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-400 disabled:opacity-50","aria-label":"Remove image",children:T.jsx(bs,{className:"w-5 h-5"})})]},_.id))}),T.jsxs("div",{className:"flex items-end gap-2",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsxs("button",{type:"button",onClick:h,disabled:s||o||n.length>=ri,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:n.length>=ri?`Maximum ${ri} images reached`:`Add image (${n.length}/${ri})`,children:[T.jsx(mp,{className:"w-5 h-5"}),T.jsx("span",{className:"sr-only",children:"Add Image"})]}),T.jsx("input",{ref:a,type:"file",accept:"image/*",multiple:!0,onChange:f,className:"hidden","aria-hidden":"true"}),T.jsxs("button",{type:"button",disabled:!0,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full transition-colors disabled:opacity-50",title:"Use microphone (coming soon)",children:[T.jsx(KV,{className:"w-5 h-5"}),T.jsx("span",{className:"sr-only",children:"Use microphone"})]})]}),T.jsx("textarea",{ref:c,value:t,onChange:_=>e(_.target.value),onKeyDown:p,placeholder:"Ask me anything, or add up to 5 images...",className:"w-full flex-grow bg-transparent text-gray-200 placeholder-gray-500 text-base resize-none focus:outline-none p-2 min-h-[44px]",rows:1,disabled:s||o}),T.jsx("button",{type:"button",onClick:i,disabled:!m||o,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold rounded-lg shadow-md transition-all duration-300 bg-indigo-600 text-white hover:bg-indigo-500 disabled:bg-gray-600 disabled:cursor-not-allowed",title:"Run Orchestration",children:o?T.jsxs(T.Fragment,{children:[T.jsx(dp,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):T.jsxs(T.Fragment,{children:[T.jsx(uu,{className:"w-5 h-5"}),"Run"]})})]})]})},cU=({answer:t,title:e="Arbiter's Final Answer",isStreaming:n=!1,className:r,...i})=>{const[o,s]=H.useState(""),a=H.useRef(null);H.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),H.useEffect(()=>{if(!n){a.current&&clearInterval(a.current),a.current=null,s(t);return}if(t===""&&o!==""){a.current&&clearInterval(a.current),a.current=null,s("");return}a.current||(a.current=window.setInterval(()=>{s(d=>{if(d.length<t.length){const h=t.substring(d.length,d.length+1);return d+h}else return a.current&&clearInterval(a.current),a.current=null,d})},15))},[t,n]);const c=o||n,f=n&&(!a.current||o.length===t.length);return T.jsx("div",{className:`final-answer-glow rounded-xl shadow-2xl ${r}`,...i,children:T.jsxs("div",{className:"bg-gray-800/50 p-0 rounded-xl flex flex-col w-full min-h-[200px]",children:[T.jsx("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between gap-3 flex-shrink-0",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(uu,{className:"w-6 h-6 text-indigo-400"}),T.jsx("h2",{className:"text-xl font-bold text-gray-200",children:e})]})}),T.jsx("div",{className:"p-4 flex-grow min-h-0 overflow-y-auto max-h-[70vh]",children:c?T.jsxs("p",{className:"text-gray-200 whitespace-pre-wrap font-serif leading-relaxed",children:[o,f&&T.jsx("span",{className:"inline-block w-2 h-5 bg-indigo-400 animate-pulse ml-1"})]}):T.jsx("div",{className:"flex items-center justify-center h-full",children:T.jsx("p",{className:"text-gray-500 italic",children:"Waiting for arbiter's response..."})})})]})})},fU=t=>{const e=new Date,n=new Date(t),r=Math.floor((e.getTime()-n.getTime())/1e3);if(r<60)return"Just now";const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const o=Math.floor(i/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`},Vv=({status:t})=>{switch(t){case"IN_PROGRESS":return T.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 animate-pulse",title:"In Progress",children:T.jsx("span",{className:"sr-only",children:"In Progress"})});case"COMPLETED":return T.jsx("div",{title:"Completed",children:T.jsx(hp,{className:"w-4 h-4 text-green-500"})});case"FAILED":return T.jsx("div",{title:"Failed",children:T.jsx(bs,{className:"w-4 h-4 text-red-500"})});default:return null}},dU=({history:t,selectedRunId:e,onSelectRun:n,onNewRun:r,currentRunStatus:i})=>{const[o,s]=H.useState(!0);return T.jsxs("aside",{className:`bg-gray-800/50 border-r border-gray-700 flex flex-col transition-all duration-300 ease-in-out ${o?"w-64":"w-16"}`,children:[T.jsxs("div",{className:"flex-shrink-0 p-2 flex items-center justify-between border-b border-gray-700",children:[o&&T.jsx("h2",{className:"text-lg font-semibold ml-2",children:"History"}),T.jsx("button",{onClick:()=>s(!o),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-colors",title:o?"Collapse Sidebar":"Expand Sidebar",children:o?T.jsx(BT,{className:"w-6 h-6"}):T.jsx(WV,{className:"w-6 h-6"})})]}),T.jsx("div",{className:"flex-shrink-0 p-2",children:T.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-semibold rounded-lg transition-colors ${e?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-indigo-600 text-white"}`,children:[T.jsx(mp,{className:"w-5 h-5"}),o&&T.jsx("span",{children:"New Run"})]})}),T.jsx("nav",{className:"flex-grow p-2 overflow-y-auto",children:T.jsxs("ul",{className:"space-y-1",children:[i!=="IDLE"&&T.jsx("li",{children:T.jsxs("button",{onClick:()=>r(),className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${e?"hover:bg-gray-700/50":"bg-gray-700"}`,title:"View current run",children:[T.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center",children:T.jsx(Vv,{status:i})}),o&&T.jsxs("div",{className:"overflow-hidden",children:[T.jsx("p",{className:"text-sm font-medium text-gray-300 truncate",children:"Current Run"}),T.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.replace("_"," ").toLowerCase()})]})]})}),t.map(a=>T.jsx("li",{children:T.jsxs("button",{onClick:()=>n(a.id),className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${e===a.id?"bg-gray-700":"hover:bg-gray-700/50"}`,title:a.prompt,children:[T.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center mt-0.5",children:T.jsx(Vv,{status:a.status})}),o&&T.jsxs("div",{className:"overflow-hidden",children:[T.jsx("p",{className:"text-sm font-medium text-gray-300 truncate",children:a.prompt||"Image-based prompt"}),T.jsx("p",{className:"text-xs text-gray-500",children:fU(a.timestamp)})]})]})},a.id))]})})]})},sc=({options:t,value:e,onChange:n,disabled:r=!1,"aria-label":i})=>T.jsx("div",{role:"radiogroup","aria-label":i,className:`flex w-full p-1 bg-gray-900 border border-gray-600 rounded-lg ${r?"opacity-70 cursor-not-allowed":""}`,children:t.map((o,s)=>T.jsxs("button",{onClick:()=>!r&&n(o.value),type:"button",role:"radio","aria-checked":e===o.value,disabled:r,title:o.tooltip,className:`relative flex-1 px-3 py-1.5 text-sm font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900 z-10
            ${s===0?"rounded-l-md":""}
            ${s===t.length-1?"rounded-r-md":""}
            ${e===o.value?"text-white":"text-gray-300 hover:bg-gray-700/50"}
            ${r?"cursor-not-allowed":""}
          `,children:[e===o.value&&T.jsx("span",{className:"absolute inset-0 bg-indigo-600 rounded-md -z-10 motion-safe:transition-transform"}),T.jsx("span",{className:"relative",children:o.label})]},o.value))}),Uv="openai_api_key",Bv="gemini_api_key",Ov="openrouter_api_key",hU=20,$v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},ga={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:12}}},pU=({message:t,type:e,onClose:n})=>{H.useEffect(()=>{const o=setTimeout(n,5e3);return()=>clearTimeout(o)},[n]);const r=e==="success"?"bg-green-800/90":"bg-red-800/90",i=e==="success"?"border-green-600":"border-red-600";return T.jsxs("div",{className:`fixed bottom-5 right-5 p-4 rounded-lg shadow-2xl text-white border ${i} ${r} z-50 animate-fade-in-up flex items-center gap-4`,style:{animationDuration:"0.3s"},children:[T.jsx("span",{children:t}),T.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-black/20","aria-label":"Close notification",children:T.jsx(pp,{className:"w-5 h-5"})})]})},zv=()=>{const t=Ch.slice(0,4);if(t.length<4)return[];const e=[];return e.push({id:crypto.randomUUID(),expert:t[0],model:ps,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[1],model:ps,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[2],model:wh,provider:"openrouter",status:"PENDING",settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}}),e.push({id:crypto.randomUUID(),expert:t[3],model:NC,provider:"openai",status:"PENDING",settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e},mU=t=>({id:t.agentId,name:t.expert.name,persona:t.expert.persona,status:t.status,content:t.content,error:t.error||null,model:t.expert.model,provider:t.expert.provider}),gU=()=>{const[t,e]=H.useState(""),[n,r]=H.useState([]),[i,o]=H.useState(zv()),[s,a]=H.useState(gn),[c,f]=H.useState("medium"),[d,h]=H.useState("dynamic"),[p,m]=H.useState([]),[_,g]=H.useState(""),[C,v]=H.useState(null),[y,w]=H.useState(!1),[E,A]=H.useState(null),[k,I]=H.useState(!1),[N,D]=H.useState([]),[b,G]=H.useState(null),[M,O]=H.useState(""),[S,z]=H.useState(""),[ae,q]=H.useState(""),[J,B]=H.useState(!1),[Z,V]=H.useState([]),[F,oe]=H.useState(null),ne=H.useRef(_),te=H.useRef(p),xe=H.useRef(C),Fe=H.useRef(E),ge=H.useRef(null),_e=H.useRef(!1),Ue=H.useRef(void 0);H.useEffect(()=>{ne.current=_},[_]),H.useEffect(()=>{te.current=p},[p]),H.useEffect(()=>{xe.current=C},[C]),H.useEffect(()=>{Fe.current=E},[E]),H.useEffect(()=>{if(!y&&_e.current){_e.current=!1;const re=Fe.current?"FAILED":"COMPLETED";if(Ue.current){const ce={id:`${Date.now()}`,timestamp:Date.now(),...Ue.current,finalAnswer:ne.current,agents:te.current,status:re,arbiterSwitchWarning:xe.current};D(Te=>[ce,...Te]),Ue.current=void 0}}},[y]),H.useEffect(()=>{const re=localStorage.getItem(Uv);re&&(O(re),Rv(re));const ce=localStorage.getItem(Bv);ce&&(z(ce),kv(ce));const Te=localStorage.getItem(Ov);Te&&(q(Te),Mv(Te))},[]);const Me=H.useCallback(re=>{O(re),Rv(re),localStorage.setItem(Uv,re)},[]),Pt=H.useCallback(re=>{z(re),kv(re),localStorage.setItem(Bv,re)},[]),xt=H.useCallback(re=>{q(re),Mv(re),localStorage.setItem(Ov,re)},[]),x=H.useMemo(()=>i.filter(re=>re.provider==="openai").length,[i]),W=H.useMemo(()=>i.filter(re=>re.provider==="openrouter").length,[i]),$=H.useCallback(async()=>{b&&G(null);const re=t.trim()||(n.length>0?`Analyze these ${n.length} image(s) and provide a detailed description.`:"");if(!(!re||y||i.length===0)){if(re&&!Z.includes(re)&&V(ce=>[re,...ce].slice(0,hU)),x>0&&!M){A("Please set your OpenAI API key in the settings to use OpenAI models."),B(!0);return}if(W>0&&!ae){A("Please set your OpenRouter API key in the settings to use OpenRouter models."),B(!0);return}w(!0),A(null),g(""),I(!1),m([]),v(null),_e.current=!1,Ue.current={prompt:re,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d};try{const ce=at=>{const It=at.map(qe=>({id:qe.agentId,name:qe.name,persona:qe.persona,status:"RUNNING",content:"",error:null,model:qe.model,provider:qe.provider}));m(It),o(qe=>qe.map(_n=>({..._n,status:"RUNNING"})))},Te=at=>{m(It=>{const qe=It.findIndex(_n=>_n.id===at.agentId);if(qe>-1){const _n=mU(at);return It.map((zT,GT)=>GT===qe?_n:zT)}return It}),o(It=>It.map(qe=>qe.id===at.agentId?{...qe,status:at.status}:qe))},{stream:Ie,switchedArbiter:me}=await BV({prompt:re,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d},{onInitialAgents:ce,onDraftComplete:Te});me&&v("The selected GPT-5 arbiter was automatically switched to Gemini 2.5 Pro due to a large input size to prevent errors. Gemini models support larger context windows."),I(!0);let Be="",we="";const ke=()=>{we&&(Be+=we,g(Be),we=""),ge.current=requestAnimationFrame(ke)};ge.current=requestAnimationFrame(ke);for await(const at of Ie)we+=at.text;ge.current&&cancelAnimationFrame(ge.current),we&&(Be+=we,g(Be))}catch(ce){console.error(ce);const Te=ce instanceof Error?ce.message:"An unexpected error occurred.";A(Te),m(Ie=>Ie.map(me=>({...me,status:"FAILED",error:Te}))),o(Ie=>Ie.map(me=>({...me,status:"FAILED"})))}finally{w(!1),I(!1),_e.current=!0}}},[t,n,y,i,s,c,d,x,M,W,ae,Z,b]),R=H.useCallback(()=>{e(""),r([]),o(zv()),a(gn),f("medium"),h("dynamic"),m([]),g(""),w(!1),A(null),I(!1),v(null)},[]),P=H.useCallback(()=>{G(null),R()},[R]),L=H.useCallback(re=>{N.find(Te=>Te.id===re)&&G(re)},[N]),K=H.useCallback(re=>{o(ce=>{const Te=ce.find(we=>we.id===re);if(!Te)return ce;const Ie={...Te,id:crypto.randomUUID(),status:"PENDING"},me=ce.findIndex(we=>we.id===re),Be=[...ce];return Be.splice(me+1,0,Ie),Be})},[]),Y=H.useMemo(()=>{if(!y)return{total:0,agentPercent:0,phase:"idle"};const re=.5,ce=.5,Te=i.filter(ke=>ke.status==="COMPLETED"||ke.status==="FAILED").length,Ie=i.length>0?Te/i.length:0;let me=k?.5:0;!y&&_&&(me=1);const Be=(Ie*re+me*ce)*100,we=k?"arbitrating":"drafting";return{total:Math.min(Be,100),agentPercent:Ie*100,phase:we}},[i,y,k,_]),U=re=>re.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").slice(0,50)||"orchestration-results",X=H.useMemo(()=>N.find(re=>re.id===b),[N,b]),j=H.useMemo(()=>X?{prompt:X.prompt,images:X.images,agentConfigs:X.agentConfigs,arbiterModel:X.arbiterModel,openAIArbiterVerbosity:X.openAIArbiterVerbosity,geminiArbiterEffort:X.geminiArbiterEffort,finalAnswer:X.finalAnswer,agents:X.agents,arbiterSwitchWarning:X.arbiterSwitchWarning,isHistoryView:!0}:{prompt:t,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d,finalAnswer:_,agents:p,arbiterSwitchWarning:C,isHistoryView:!1},[X,t,n,i,s,c,d,_,p,C]),ee=async()=>{const re=j,ce=re.agents.filter(ke=>ke.status==="COMPLETED");if(!re.finalAnswer&&ce.length===0&&re.images.length===0)return;const Te=new v1,Ie=U(re.prompt);if(re.finalAnswer){const ke=`# Prompt

${re.prompt}

---

# Arbiter's Final Answer

${re.finalAnswer}`;Te.file(`${Ie}-final-answer.md`,ke)}ce.forEach((ke,at)=>{const It=`# Prompt

${re.prompt}

---

# Agent ${at+1} (${ke.provider}, ${ke.name})

${ke.content}`,qe=`${Ie}-agent-${at+1}-${ke.name.toLowerCase().replace(/\s+/g,"-")}.md`;Te.file(qe,It)}),re.images.length>0&&re.images.forEach(ke=>{Te.file(ke.file.name,ke.file)});const me=await Te.generateAsync({type:"blob"}),Be=URL.createObjectURL(me),we=document.createElement("a");we.href=Be,we.download=`${Ie}.zip`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(Be)},ue=H.useCallback(()=>{try{const re=i.map(ke=>({expertId:ke.expert.id,model:ke.model,provider:ke.provider,settings:ke.settings})),Te=JSON.stringify({version:Bg,prompt:t,agentConfigs:re,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d,openAIApiKey:M,geminiApiKey:S,openRouterApiKey:ae,queryHistory:Z},null,2),Ie=new Blob([Te],{type:"application/json"}),me=URL.createObjectURL(Ie),Be=document.createElement("a");Be.href=me;const we=new Date().toISOString().split("T")[0];Be.download=`orchestrator-session-${we}.json`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),URL.revokeObjectURL(me)}catch(re){console.error("Failed to save session:",re),oe({message:"An error occurred while trying to save the session.",type:"error"})}},[t,i,s,c,d,M,S,ae,Z]),Ae=H.useCallback(re=>{const ce=new FileReader;ce.onload=Te=>{try{const Ie=Te.target?.result;if(!Ie)throw new Error("File is empty or could not be read.");const me=JSON.parse(Ie);if(me.version!==Bg){oe({message:`This session file is from a different version (v${me.version}) and cannot be loaded.`,type:"error"});return}if(!Array.isArray(me.agentConfigs))throw new Error("Invalid session file format: agentConfigs is missing or not an array.");const Be=me.agentConfigs.map(we=>{const ke=Ch.find(It=>It.id===we.expertId);if(!ke)return console.warn(`Expert with ID "${we.expertId}" not found. Skipping.`),null;const at={id:crypto.randomUUID(),expert:ke,model:we.model,provider:we.provider,status:"PENDING"};return we.provider==="gemini"?{...at,provider:"gemini",settings:we.settings}:we.provider==="openrouter"?{...at,provider:"openrouter",settings:we.settings}:{...at,provider:"openai",settings:we.settings}}).filter(we=>we!==null);P(),e(me.prompt??""),o(Be),a(me.arbiterModel??gn),f(me.openAIArbiterVerbosity??"medium"),h(me.geminiArbiterEffort??"dynamic"),Me(me.openAIApiKey??""),Pt(me.geminiApiKey??""),xt(me.openRouterApiKey??""),V(me.queryHistory??[]),B(!1),oe({message:"Session loaded successfully!",type:"success"})}catch(Ie){console.error("Failed to load session:",Ie);const me=Ie instanceof Error?Ie.message:"An unknown error occurred.";oe({message:`Error loading session file: ${me}`,type:"error"})}},ce.onerror=()=>{oe({message:"Failed to read the session file.",type:"error"})},ce.readAsText(re)},[Me,Pt,xt,P]),ve=H.useCallback(re=>{e(re)},[]),st=j.agents.length>0||j.finalAnswer,vn=y||k,qt=H.useMemo(()=>vn?"IN_PROGRESS":b?"IDLE":E?"FAILED":st?"COMPLETED":"IDLE",[vn,E,st,b]);return T.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200 font-sans flex h-screen",children:[T.jsx(dU,{history:N,selectedRunId:b,onSelectRun:L,onNewRun:P,currentRunStatus:qt}),T.jsxs("div",{className:"flex-1 flex flex-col h-screen",children:[F&&T.jsx(pU,{message:F.message,type:F.type,onClose:()=>oe(null)}),T.jsx(nU,{isOpen:J,onClose:()=>B(!1),onSaveOpenAIApiKey:Me,currentOpenAIApiKey:M,onSaveGeminiApiKey:Pt,currentGeminiApiKey:S,onSaveOpenRouterApiKey:xt,currentOpenRouterApiKey:ae,onSaveSession:ue,onLoadSession:Ae,queryHistory:Z,onSelectQuery:ve}),T.jsx("div",{className:"flex-1 overflow-y-auto",children:T.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("header",{className:"text-center py-8 relative",children:[T.jsx("img",{src:"./assets/banner.svg",alt:"HeavyOrc banner",className:"mx-auto mb-4 w-full max-w-2xl"}),T.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-100 flex items-center justify-center gap-3",children:[T.jsx(OV,{className:"w-10 h-10 text-emerald-400"}),"HeavyOrc"]}),T.jsxs("div",{className:"absolute top-8 right-0 flex items-center gap-2",children:[T.jsxs("button",{onClick:ee,disabled:!st||y,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-700 text-white font-semibold rounded-lg shadow-md hover:bg-gray-600 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors",title:"Save final answer and all drafts to a ZIP file",children:[T.jsx(FT,{className:"w-4 h-4"}),"Save"]}),T.jsx("button",{onClick:()=>B(!0),className:"p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-gray-700/50",title:"Settings","aria-label":"Open Settings",children:T.jsx(GV,{className:"w-6 h-6"})})]}),T.jsx("p",{className:"mt-4 text-lg text-gray-400 max-w-3xl mx-auto",children:"Directly configure a 'Mixture-of-Experts' ensemble. Parallel agents generate diverse drafts, and a final arbiter synthesizes the optimal response."})]}),T.jsxs("main",{className:"max-w-4xl mx-auto space-y-8 pb-40",children:[E&&!j.isHistoryView&&T.jsx("div",{className:"p-3 bg-red-900/50 text-red-300 border border-red-700 rounded-lg text-sm text-center",children:E}),x>0&&!M||W>0&&!ae&&T.jsxs("p",{className:"text-xs text-yellow-400 text-center p-2 bg-yellow-900/40 rounded-md border border-yellow-800",children:["An API key is required for one or more of your agents.",T.jsx("button",{onClick:()=>B(!0),className:"ml-1 underline font-semibold hover:text-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 rounded",children:"Set API Key"})]}),(st||vn&&!j.isHistoryView)&&T.jsxs(Qr.div,{className:"space-y-8",initial:"hidden",animate:"visible",variants:$v,children:[j.arbiterSwitchWarning&&T.jsx(Qr.div,{className:"bg-yellow-900/50 border border-yellow-700 text-yellow-200 px-4 py-3 rounded-lg relative",role:"alert",variants:ga,children:T.jsxs("div",{className:"flex items-start",children:[T.jsx(HV,{className:"w-5 h-5 mr-3 mt-0.5 text-yellow-400 flex-shrink-0"}),T.jsxs("div",{children:[T.jsx("strong",{className:"font-bold",children:"Automatic Model Switch:"}),T.jsx("span",{className:"block sm:inline sm:ml-2",children:j.arbiterSwitchWarning})]})]})}),(j.finalAnswer||vn&&!j.isHistoryView)&&T.jsx(Qr.section,{variants:ga,children:T.jsx(cU,{answer:j.finalAnswer,isStreaming:k&&!j.isHistoryView})}),j.agents.length>0&&T.jsx(Qr.section,{variants:ga,children:T.jsx(Lv,{title:"Contributing Agent Drafts",defaultOpen:!1,children:T.jsx(Qr.div,{className:"grid-adaptive-cols gap-4 pt-4",variants:$v,children:j.agents.map((re,ce)=>T.jsx(Qr.div,{variants:ga,children:T.jsx(QV,{agent:re,displayId:ce+1})},re.id))})})})]}),T.jsxs("div",{className:"space-y-6 bg-gray-800/50 p-6 rounded-xl shadow-2xl border border-gray-700",children:[T.jsx(aU,{agentConfigs:j.agentConfigs,setAgentConfigs:o,onDuplicateAgent:K,disabled:y||j.isHistoryView}),T.jsx("div",{className:"border-t border-gray-700 pt-4",children:T.jsx(Lv,{title:"Arbiter Settings",defaultOpen:!0,children:T.jsx("div",{className:"space-y-4",children:T.jsx(yU,{arbiterModel:j.arbiterModel,setArbiterModel:a,openAIArbiterVerbosity:j.openAIArbiterVerbosity,setOpenAIArbiterVerbosity:f,geminiArbiterEffort:j.geminiArbiterEffort,setGeminiArbiterEffort:h,isLoading:y||j.isHistoryView})})})})]})]})]})}),T.jsx("footer",{className:"sticky bottom-0 z-10 bg-gray-900/80 backdrop-blur-lg border-t border-gray-700 flex-shrink-0",children:T.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-3 space-y-3",children:[y&&T.jsxs("div",{children:[T.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:T.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${Y.total}%`}})}),T.jsx("p",{className:"text-center text-xs text-gray-400 mt-1",children:Y.phase==="arbitrating"?"Arbiter is synthesizing...":`Agents drafting... (${Math.round(Y.agentPercent)}%)`})]}),T.jsx(uU,{prompt:j.prompt,onPromptChange:e,images:j.images,onImagesChange:r,onSubmit:$,isLoading:y,disabled:y||j.isHistoryView||i.length===0})]})})]})]})},yU=({arbiterModel:t,setArbiterModel:e,openAIArbiterVerbosity:n,setOpenAIArbiterVerbosity:r,geminiArbiterEffort:i,setGeminiArbiterEffort:o,isLoading:s})=>{const a=[{label:"Gemini 2.5 Pro",value:gn,provider:"gemini",tooltip:"Google's most capable model, with a large context window and strong reasoning. Recommended for complex synthesis."},{label:"GPT-5 (Med)",value:Jk,provider:"openai",tooltip:"OpenAI's powerful GPT-5 model with standard reasoning. A strong, balanced choice for arbitration."},{label:"GPT-5 (High)",value:yf,provider:"openai",tooltip:"GPT-5 with enhanced, step-by-step reasoning. May produce higher quality synthesis for nuanced topics at a higher latency."},{label:"OR GPT-4o",value:wh,provider:"openrouter",tooltip:"GPT-4o via OpenRouter. Excellent general-purpose model with strong vision capabilities."},{label:"OR Claude Haiku",value:DC,provider:"openrouter",tooltip:"Anthropic's fastest model via OpenRouter. Ideal for quick, responsive arbitration."}],c=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],f=[{label:"Dynamic",value:"dynamic"},{label:"High",value:"high"},{label:"Medium",value:"medium"},{label:"Low",value:"low"}],d=a.find(h=>h.value===t);return T.jsxs(T.Fragment,{children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Arbiter Model"}),T.jsx(sc,{"aria-label":"Arbiter Model",options:a,value:t,onChange:e,disabled:s})]}),d?.provider==="openai"?T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Arbiter Verbosity"}),T.jsx(sc,{"aria-label":"Arbiter Verbosity",options:c,value:n,onChange:r,disabled:s})]}):d?.provider==="gemini"?T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Thinking Effort"}),T.jsx(sc,{"aria-label":"Arbiter Thinking Effort",options:f.filter(h=>h.value!=="none"),value:i,onChange:o,disabled:s})]}):null]})},$T=document.getElementById("root");if(!$T)throw new Error("Could not find root element to mount to");const vU=ac.createRoot($T);vU.render(T.jsx(oS.StrictMode,{children:T.jsx(gU,{})}));
