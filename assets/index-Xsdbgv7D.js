(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i0={exports:{}},Dl={},o0={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=Symbol.for("react.element"),fS=Symbol.for("react.portal"),dS=Symbol.for("react.fragment"),hS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),yS=Symbol.for("react.forward_ref"),vS=Symbol.for("react.suspense"),_S=Symbol.for("react.memo"),wS=Symbol.for("react.lazy"),kp=Symbol.iterator;function xS(t){return t===null||typeof t!="object"?null:(t=kp&&t[kp]||t["@@iterator"],typeof t=="function"?t:null)}var s0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a0=Object.assign,l0={};function ji(t,e,n){this.props=t,this.context=e,this.refs=l0,this.updater=n||s0}ji.prototype.isReactComponent={};ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function u0(){}u0.prototype=ji.prototype;function id(t,e,n){this.props=t,this.context=e,this.refs=l0,this.updater=n||s0}var od=id.prototype=new u0;od.constructor=id;a0(od,ji.prototype);od.isPureReactComponent=!0;var Rp=Array.isArray,c0=Object.prototype.hasOwnProperty,sd={current:null},f0={key:!0,ref:!0,__self:!0,__source:!0};function d0(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)c0.call(e,r)&&!f0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ts,type:t,key:o,ref:s,props:i,_owner:sd.current}}function CS(t,e){return{$$typeof:Ts,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ad(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ts}function TS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mp=/\/+/g;function yu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TS(""+t.key):e.toString(36)}function Ta(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ts:case fS:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+yu(s,0):r,Rp(i)?(n="",t!=null&&(n=t.replace(Mp,"$&/")+"/"),Ta(i,e,n,"",function(f){return f})):i!=null&&(ad(i)&&(i=CS(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Mp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Rp(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+yu(o,a);s+=Ta(o,e,n,c,i)}else if(c=xS(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+yu(o,a++),s+=Ta(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Gs(t,e,n){if(t==null)return t;var r=[],i=0;return Ta(t,r,"","",function(o){return e.call(n,o,i++)}),r}function SS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Sa={transition:null},ES={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Sa,ReactCurrentOwner:sd};function h0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Gs,forEach:function(t,e,n){Gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gs(t,function(){e++}),e},toArray:function(t){return Gs(t,function(e){return e})||[]},only:function(t){if(!ad(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=ji;ye.Fragment=dS;ye.Profiler=pS;ye.PureComponent=id;ye.StrictMode=hS;ye.Suspense=vS;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ES;ye.act=h0;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=a0({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=sd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)c0.call(e,c)&&!f0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:Ts,type:t.type,key:i,ref:o,props:r,_owner:s}};ye.createContext=function(t){return t={$$typeof:gS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mS,_context:t},t.Consumer=t};ye.createElement=d0;ye.createFactory=function(t){var e=d0.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:yS,render:t}};ye.isValidElement=ad;ye.lazy=function(t){return{$$typeof:wS,_payload:{_status:-1,_result:t},_init:SS}};ye.memo=function(t,e){return{$$typeof:_S,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Sa.transition;Sa.transition={};try{t()}finally{Sa.transition=e}};ye.unstable_act=h0;ye.useCallback=function(t,e){return kt.current.useCallback(t,e)};ye.useContext=function(t){return kt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return kt.current.useEffect(t,e)};ye.useId=function(){return kt.current.useId()};ye.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return kt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};ye.useRef=function(t){return kt.current.useRef(t)};ye.useState=function(t){return kt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return kt.current.useTransition()};ye.version="18.3.1";o0.exports=ye;var $=o0.exports;const gc=r0($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS=$,PS=Symbol.for("react.element"),IS=Symbol.for("react.fragment"),kS=Object.prototype.hasOwnProperty,RS=AS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MS={key:!0,ref:!0,__self:!0,__source:!0};function p0(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)kS.call(e,r)&&!MS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:PS,type:t,key:o,ref:s,props:i,_owner:RS.current}}Dl.Fragment=IS;Dl.jsx=p0;Dl.jsxs=p0;i0.exports=Dl;var T=i0.exports,yc={},m0={exports:{}},Jt={},g0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,B){var X=J.length;J.push(B);e:for(;0<X;){var V=X-1>>>1,F=J[V];if(0<i(F,B))J[V]=B,J[X]=F,X=V;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var B=J[0],X=J.pop();if(X!==B){J[0]=X;e:for(var V=0,F=J.length,oe=F>>>1;V<oe;){var te=2*(V+1)-1,ee=J[te],Te=te+1,Ve=J[Te];if(0>i(ee,X))Te<F&&0>i(Ve,ee)?(J[V]=Ve,J[Te]=X,V=Te):(J[V]=ee,J[te]=X,V=te);else if(Te<F&&0>i(Ve,X))J[V]=Ve,J[Te]=X,V=Te;else break e}}return B}function i(J,B){var X=J.sortIndex-B.sortIndex;return X!==0?X:J.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],f=[],d=1,h=null,p=3,m=!1,_=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(J){for(var B=n(f);B!==null;){if(B.callback===null)r(f);else if(B.startTime<=J)r(f),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(f)}}function E(J){if(g=!1,w(J),!_)if(n(c)!==null)_=!0,ae(A);else{var B=n(f);B!==null&&q(E,B.startTime-J)}}function A(J,B){_=!1,g&&(g=!1,y(N),N=-1),m=!0;var X=p;try{for(w(B),h=n(c);h!==null&&(!(h.expirationTime>B)||J&&!H());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var F=V(h.expirationTime<=B);B=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(c)&&r(c),w(B)}else r(c);h=n(c)}if(h!==null)var oe=!0;else{var te=n(f);te!==null&&q(E,te.startTime-B),oe=!1}return oe}finally{h=null,p=X,m=!1}}var I=!1,k=null,N=-1,D=5,b=-1;function H(){return!(t.unstable_now()-b<D)}function M(){if(k!==null){var J=t.unstable_now();b=J;var B=!0;try{B=k(!0,J)}finally{B?z():(I=!1,k=null)}}else I=!1}var z;if(typeof v=="function")z=function(){v(M)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,G=S.port2;S.port1.onmessage=M,z=function(){G.postMessage(null)}}else z=function(){x(M,0)};function ae(J){k=J,I||(I=!0,z())}function q(J,B){N=x(function(){J(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,ae(A))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var X=p;p=B;try{return J()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,B){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var X=p;p=J;try{return B()}finally{p=X}},t.unstable_scheduleCallback=function(J,B,X){var V=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?V+X:V):X=V,J){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=X+F,J={id:d++,callback:B,priorityLevel:J,startTime:X,expirationTime:F,sortIndex:-1},X>V?(J.sortIndex=X,e(f,J),n(c)===null&&J===n(f)&&(g?(y(N),N=-1):g=!0,q(E,X-V))):(J.sortIndex=F,e(c,J),_||m||(_=!0,ae(A))),J},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(J){var B=p;return function(){var X=p;p=B;try{return J.apply(this,arguments)}finally{p=X}}}})(y0);g0.exports=y0;var NS=g0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=$,Wt=NS;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v0=new Set,jo={};function Qr(t,e){Gi(t,e),Gi(t+"Capture",e)}function Gi(t,e){for(jo[t]=e,t=0;t<e.length;t++)v0.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vc=Object.prototype.hasOwnProperty,bS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Np={},Dp={};function LS(t){return vc.call(Dp,t)?!0:vc.call(Np,t)?!1:bS.test(t)?Dp[t]=!0:(Np[t]=!0,!1)}function FS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VS(t,e,n,r){if(e===null||typeof e>"u"||FS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ld=/[\-:]([a-z])/g;function ud(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ld,ud);mt[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ld,ud);mt[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ld,ud);mt[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function cd(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VS(e,n,i,r)&&(n=null),r||i===null?LS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=DS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),hi=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),fd=Symbol.for("react.strict_mode"),_c=Symbol.for("react.profiler"),_0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),dd=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),xc=Symbol.for("react.suspense_list"),hd=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),x0=Symbol.for("react.offscreen"),bp=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=bp&&t[bp]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,vu;function Co(t){if(vu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vu=e&&e[1]||""}return`
`+vu+t}var _u=!1;function wu(t,e){if(!t||_u)return"";_u=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{_u=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Co(t):""}function US(t){switch(t.tag){case 5:return Co(t.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return t=wu(t.type,!1),t;case 11:return t=wu(t.type.render,!1),t;case 1:return t=wu(t.type,!0),t;default:return""}}function Cc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pi:return"Fragment";case hi:return"Portal";case _c:return"Profiler";case fd:return"StrictMode";case wc:return"Suspense";case xc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w0:return(t.displayName||"Context")+".Consumer";case _0:return(t._context.displayName||"Context")+".Provider";case dd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hd:return e=t.displayName||null,e!==null?e:Cc(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return Cc(t(e))}catch{}}return null}function BS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cc(e);case 8:return e===fd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OS(t){var e=C0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ws(t){t._valueTracker||(t._valueTracker=OS(t))}function T0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tc(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S0(t,e){e=e.checked,e!=null&&cd(t,"checked",e,!1)}function Sc(t,e){S0(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ec(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ec(t,e,n){(e!=="number"||Ja(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var To=Array.isArray;function Ni(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ac(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(To(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function E0(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Up(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qs,P0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qs=qs||document.createElement("div"),qs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$S=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){$S.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function I0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function k0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=I0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zS=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ic(t,e){if(e){if(zS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function kc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rc=null;function pd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mc=null,Di=null,bi=null;function Bp(t){if(t=As(t)){if(typeof Mc!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Ul(e),Mc(t.stateNode,t.type,e))}}function R0(t){Di?bi?bi.push(t):bi=[t]:Di=t}function M0(){if(Di){var t=Di,e=bi;if(bi=Di=null,Bp(t),e)for(t=0;t<e.length;t++)Bp(e[t])}}function N0(t,e){return t(e)}function D0(){}var xu=!1;function b0(t,e,n){if(xu)return t(e,n);xu=!0;try{return N0(t,e,n)}finally{xu=!1,(Di!==null||bi!==null)&&(D0(),M0())}}function ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Ul(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Nc=!1;if(zn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Nc=!1}function GS(t,e,n,r,i,o,s,a,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var Uo=!1,Ka=null,Ya=!1,Dc=null,HS={onError:function(t){Uo=!0,Ka=t}};function WS(t,e,n,r,i,o,s,a,c){Uo=!1,Ka=null,GS.apply(HS,arguments)}function qS(t,e,n,r,i,o,s,a,c){if(WS.apply(this,arguments),Uo){if(Uo){var f=Ka;Uo=!1,Ka=null}else throw Error(Z(198));Ya||(Ya=!0,Dc=f)}}function jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Op(t){if(jr(t)!==t)throw Error(Z(188))}function JS(t){var e=t.alternate;if(!e){if(e=jr(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Op(i),t;if(o===r)return Op(i),e;o=o.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function F0(t){return t=JS(t),t!==null?V0(t):null}function V0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V0(t);if(e!==null)return e;t=t.sibling}return null}var U0=Wt.unstable_scheduleCallback,$p=Wt.unstable_cancelCallback,KS=Wt.unstable_shouldYield,YS=Wt.unstable_requestPaint,Qe=Wt.unstable_now,XS=Wt.unstable_getCurrentPriorityLevel,md=Wt.unstable_ImmediatePriority,B0=Wt.unstable_UserBlockingPriority,Xa=Wt.unstable_NormalPriority,ZS=Wt.unstable_LowPriority,O0=Wt.unstable_IdlePriority,bl=null,In=null;function QS(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(bl,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:tE,jS=Math.log,eE=Math.LN2;function tE(t){return t>>>=0,t===0?32:31-(jS(t)/eE|0)|0}var Js=64,Ks=4194304;function So(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Za(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=So(a):(o&=s,o!==0&&(r=So(o)))}else s=n&~i,s!==0?r=So(s):o!==0&&(r=So(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),i=1<<n,r|=t[n],e&=~i;return r}function nE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-vn(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=nE(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function bc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $0(){var t=Js;return Js<<=1,!(Js&4194240)&&(Js=64),t}function Cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ss(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function iE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function gd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function z0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G0,yd,H0,W0,q0,Lc=!1,Ys=[],ur=null,cr=null,fr=null,ns=new Map,rs=new Map,or=[],oE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zp(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ns.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(e.pointerId)}}function po(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=As(e),e!==null&&yd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sE(t,e,n,r,i){switch(e){case"focusin":return ur=po(ur,t,e,n,r,i),!0;case"dragenter":return cr=po(cr,t,e,n,r,i),!0;case"mouseover":return fr=po(fr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ns.set(o,po(ns.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rs.set(o,po(rs.get(o)||null,t,e,n,r,i)),!0}return!1}function J0(t){var e=Vr(t.target);if(e!==null){var n=jr(e);if(n!==null){if(e=n.tag,e===13){if(e=L0(n),e!==null){t.blockedOn=e,q0(t.priority,function(){H0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rc=r,n.target.dispatchEvent(r),Rc=null}else return e=As(n),e!==null&&yd(e),t.blockedOn=n,!1;e.shift()}return!0}function Gp(t,e,n){Ea(t)&&n.delete(e)}function aE(){Lc=!1,ur!==null&&Ea(ur)&&(ur=null),cr!==null&&Ea(cr)&&(cr=null),fr!==null&&Ea(fr)&&(fr=null),ns.forEach(Gp),rs.forEach(Gp)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,Lc||(Lc=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,aE)))}function is(t){function e(i){return mo(i,t)}if(0<Ys.length){mo(Ys[0],t);for(var n=1;n<Ys.length;n++){var r=Ys[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&mo(ur,t),cr!==null&&mo(cr,t),fr!==null&&mo(fr,t),ns.forEach(e),rs.forEach(e),n=0;n<or.length;n++)r=or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)J0(n),n.blockedOn===null&&or.shift()}var Li=Jn.ReactCurrentBatchConfig,Qa=!0;function lE(t,e,n,r){var i=ke,o=Li.transition;Li.transition=null;try{ke=1,vd(t,e,n,r)}finally{ke=i,Li.transition=o}}function uE(t,e,n,r){var i=ke,o=Li.transition;Li.transition=null;try{ke=4,vd(t,e,n,r)}finally{ke=i,Li.transition=o}}function vd(t,e,n,r){if(Qa){var i=Fc(t,e,n,r);if(i===null)Nu(t,e,r,ja,n),zp(t,r);else if(sE(i,t,e,n,r))r.stopPropagation();else if(zp(t,r),e&4&&-1<oE.indexOf(t)){for(;i!==null;){var o=As(i);if(o!==null&&G0(o),o=Fc(t,e,n,r),o===null&&Nu(t,e,r,ja,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Nu(t,e,r,null,n)}}var ja=null;function Fc(t,e,n,r){if(ja=null,t=pd(r),t=Vr(t),t!==null)if(e=jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ja=t,null}function K0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XS()){case md:return 1;case B0:return 4;case Xa:case ZS:return 16;case O0:return 536870912;default:return 16}default:return 16}}var ar=null,_d=null,Aa=null;function Y0(){if(Aa)return Aa;var t,e=_d,n=e.length,r,i="value"in ar?ar.value:ar.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Aa=i.slice(t,1<r?1-r:void 0)}function Pa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xs(){return!0}function Hp(){return!1}function Kt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xs:Hp,this.isPropagationStopped=Hp,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),e}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wd=Kt(eo),Es=qe({},eo,{view:0,detail:0}),cE=Kt(Es),Tu,Su,go,Ll=qe({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(Tu=t.screenX-go.screenX,Su=t.screenY-go.screenY):Su=Tu=0,go=t),Tu)},movementY:function(t){return"movementY"in t?t.movementY:Su}}),Wp=Kt(Ll),fE=qe({},Ll,{dataTransfer:0}),dE=Kt(fE),hE=qe({},Es,{relatedTarget:0}),Eu=Kt(hE),pE=qe({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),mE=Kt(pE),gE=qe({},eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yE=Kt(gE),vE=qe({},eo,{data:0}),qp=Kt(vE),_E={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xE[t])?!!e[t]:!1}function xd(){return CE}var TE=qe({},Es,{key:function(t){if(t.key){var e=_E[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(t){return t.type==="keypress"?Pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SE=Kt(TE),EE=qe({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jp=Kt(EE),AE=qe({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),PE=Kt(AE),IE=qe({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kE=Kt(IE),RE=qe({},Ll,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ME=Kt(RE),NE=[9,13,27,32],Cd=zn&&"CompositionEvent"in window,Bo=null;zn&&"documentMode"in document&&(Bo=document.documentMode);var DE=zn&&"TextEvent"in window&&!Bo,X0=zn&&(!Cd||Bo&&8<Bo&&11>=Bo),Kp=" ",Yp=!1;function Z0(t,e){switch(t){case"keyup":return NE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mi=!1;function bE(t,e){switch(t){case"compositionend":return Q0(e);case"keypress":return e.which!==32?null:(Yp=!0,Kp);case"textInput":return t=e.data,t===Kp&&Yp?null:t;default:return null}}function LE(t,e){if(mi)return t==="compositionend"||!Cd&&Z0(t,e)?(t=Y0(),Aa=_d=ar=null,mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X0&&e.locale!=="ko"?null:e.data;default:return null}}var FE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FE[t.type]:e==="textarea"}function j0(t,e,n,r){R0(r),e=el(e,"onChange"),0<e.length&&(n=new wd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oo=null,os=null;function VE(t){c_(t,0)}function Fl(t){var e=vi(t);if(T0(e))return t}function UE(t,e){if(t==="change")return e}var e_=!1;if(zn){var Au;if(zn){var Pu="oninput"in document;if(!Pu){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),Pu=typeof Zp.oninput=="function"}Au=Pu}else Au=!1;e_=Au&&(!document.documentMode||9<document.documentMode)}function Qp(){Oo&&(Oo.detachEvent("onpropertychange",t_),os=Oo=null)}function t_(t){if(t.propertyName==="value"&&Fl(os)){var e=[];j0(e,os,t,pd(t)),b0(VE,e)}}function BE(t,e,n){t==="focusin"?(Qp(),Oo=e,os=n,Oo.attachEvent("onpropertychange",t_)):t==="focusout"&&Qp()}function OE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fl(os)}function $E(t,e){if(t==="click")return Fl(e)}function zE(t,e){if(t==="input"||t==="change")return Fl(e)}function GE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:GE;function ss(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vc.call(e,i)||!wn(t[i],e[i]))return!1}return!0}function jp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function em(t,e){var n=jp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jp(n)}}function n_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function r_(){for(var t=window,e=Ja();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ja(t.document)}return e}function Td(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HE(t){var e=r_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&n_(n.ownerDocument.documentElement,n)){if(r!==null&&Td(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=em(n,o);var s=em(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WE=zn&&"documentMode"in document&&11>=document.documentMode,gi=null,Vc=null,$o=null,Uc=!1;function tm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uc||gi==null||gi!==Ja(r)||(r=gi,"selectionStart"in r&&Td(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$o&&ss($o,r)||($o=r,r=el(Vc,"onSelect"),0<r.length&&(e=new wd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gi)))}function Zs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yi={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},Iu={},i_={};zn&&(i_=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Vl(t){if(Iu[t])return Iu[t];if(!yi[t])return t;var e=yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i_)return Iu[t]=e[n];return t}var o_=Vl("animationend"),s_=Vl("animationiteration"),a_=Vl("animationstart"),l_=Vl("transitionend"),u_=new Map,nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,e){u_.set(t,e),Qr(e,[t])}for(var ku=0;ku<nm.length;ku++){var Ru=nm[ku],qE=Ru.toLowerCase(),JE=Ru[0].toUpperCase()+Ru.slice(1);Cr(qE,"on"+JE)}Cr(o_,"onAnimationEnd");Cr(s_,"onAnimationIteration");Cr(a_,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(l_,"onTransitionEnd");Gi("onMouseEnter",["mouseout","mouseover"]);Gi("onMouseLeave",["mouseout","mouseover"]);Gi("onPointerEnter",["pointerout","pointerover"]);Gi("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eo));function rm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qS(r,e,void 0,t),t.currentTarget=null}function c_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;rm(i,a,f),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,f=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;rm(i,a,f),o=c}}}if(Ya)throw t=Dc,Ya=!1,Dc=null,t}function De(t,e){var n=e[Gc];n===void 0&&(n=e[Gc]=new Set);var r=t+"__bubble";n.has(r)||(f_(e,t,2,!1),n.add(r))}function Mu(t,e,n){var r=0;e&&(r|=4),f_(n,t,r,e)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function as(t){if(!t[Qs]){t[Qs]=!0,v0.forEach(function(n){n!=="selectionchange"&&(KE.has(n)||Mu(n,!1,t),Mu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qs]||(e[Qs]=!0,Mu("selectionchange",!1,e))}}function f_(t,e,n,r){switch(K0(e)){case 1:var i=lE;break;case 4:i=uE;break;default:i=vd}n=i.bind(null,e,n,t),i=void 0,!Nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Vr(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}b0(function(){var f=o,d=pd(n),h=[];e:{var p=u_.get(t);if(p!==void 0){var m=wd,_=t;switch(t){case"keypress":if(Pa(n)===0)break e;case"keydown":case"keyup":m=SE;break;case"focusin":_="focus",m=Eu;break;case"focusout":_="blur",m=Eu;break;case"beforeblur":case"afterblur":m=Eu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=dE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=PE;break;case o_:case s_:case a_:m=mE;break;case l_:m=kE;break;case"scroll":m=cE;break;case"wheel":m=ME;break;case"copy":case"cut":case"paste":m=yE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Jp}var g=(e&4)!==0,x=!g&&t==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var v=f,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=ts(v,y),E!=null&&g.push(ls(v,E,w)))),x)break;v=v.return}0<g.length&&(p=new m(p,_,null,n,d),h.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Rc&&(_=n.relatedTarget||n.fromElement)&&(Vr(_)||_[Gn]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=f,_=_?Vr(_):null,_!==null&&(x=jr(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=f),m!==_)){if(g=Wp,E="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Jp,E="onPointerLeave",y="onPointerEnter",v="pointer"),x=m==null?p:vi(m),w=_==null?p:vi(_),p=new g(E,v+"leave",m,n,d),p.target=x,p.relatedTarget=w,E=null,Vr(d)===f&&(g=new g(y,v+"enter",_,n,d),g.target=w,g.relatedTarget=x,E=g),x=E,m&&_)t:{for(g=m,y=_,v=0,w=g;w;w=ii(w))v++;for(w=0,E=y;E;E=ii(E))w++;for(;0<v-w;)g=ii(g),v--;for(;0<w-v;)y=ii(y),w--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=ii(g),y=ii(y)}g=null}else g=null;m!==null&&im(h,p,m,g,!1),_!==null&&x!==null&&im(h,x,_,g,!0)}}e:{if(p=f?vi(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=UE;else if(Xp(p))if(e_)A=zE;else{A=OE;var I=BE}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=$E);if(A&&(A=A(t,f))){j0(h,A,n,d);break e}I&&I(t,p,f),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Ec(p,"number",p.value)}switch(I=f?vi(f):window,t){case"focusin":(Xp(I)||I.contentEditable==="true")&&(gi=I,Vc=f,$o=null);break;case"focusout":$o=Vc=gi=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,tm(h,n,d);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":tm(h,n,d)}var k;if(Cd)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else mi?Z0(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(X0&&n.locale!=="ko"&&(mi||N!=="onCompositionStart"?N==="onCompositionEnd"&&mi&&(k=Y0()):(ar=d,_d="value"in ar?ar.value:ar.textContent,mi=!0)),I=el(f,N),0<I.length&&(N=new qp(N,t,null,n,d),h.push({event:N,listeners:I}),k?N.data=k:(k=Q0(n),k!==null&&(N.data=k)))),(k=DE?bE(t,n):LE(t,n))&&(f=el(f,"onBeforeInput"),0<f.length&&(d=new qp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:f}),d.data=k))}c_(h,e)})}function ls(t,e,n){return{instance:t,listener:e,currentTarget:n}}function el(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ts(t,n),o!=null&&r.unshift(ls(t,o,i)),o=ts(t,e),o!=null&&r.push(ls(t,o,i))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function im(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,f=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&f!==null&&(a=f,i?(c=ts(n,o),c!=null&&s.unshift(ls(n,c,a))):i||(c=ts(n,o),c!=null&&s.push(ls(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var YE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function om(t){return(typeof t=="string"?t:""+t).replace(YE,`
`).replace(XE,"")}function js(t,e,n){if(e=om(e),om(t)!==e&&n)throw Error(Z(425))}function tl(){}var Bc=null,Oc=null;function $c(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zc=typeof setTimeout=="function"?setTimeout:void 0,ZE=typeof clearTimeout=="function"?clearTimeout:void 0,sm=typeof Promise=="function"?Promise:void 0,QE=typeof queueMicrotask=="function"?queueMicrotask:typeof sm<"u"?function(t){return sm.resolve(null).then(t).catch(jE)}:zc;function jE(t){setTimeout(function(){throw t})}function Du(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);is(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function am(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var to=Math.random().toString(36).slice(2),An="__reactFiber$"+to,us="__reactProps$"+to,Gn="__reactContainer$"+to,Gc="__reactEvents$"+to,e1="__reactListeners$"+to,t1="__reactHandles$"+to;function Vr(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=am(t);t!==null;){if(n=t[An])return n;t=am(t)}return e}t=n,n=t.parentNode}return null}function As(t){return t=t[An]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Ul(t){return t[us]||null}var Hc=[],_i=-1;function Tr(t){return{current:t}}function Le(t){0>_i||(t.current=Hc[_i],Hc[_i]=null,_i--)}function Ne(t,e){_i++,Hc[_i]=t.current,t.current=e}var _r={},Et=Tr(_r),Lt=Tr(!1),Wr=_r;function Hi(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function nl(){Le(Lt),Le(Et)}function lm(t,e,n){if(Et.current!==_r)throw Error(Z(168));Ne(Et,e),Ne(Lt,n)}function d_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,BS(t)||"Unknown",i));return qe({},n,r)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Wr=Et.current,Ne(Et,t),Ne(Lt,Lt.current),!0}function um(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=d_(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,Le(Lt),Le(Et),Ne(Et,t)):Le(Lt),Ne(Lt,n)}var Fn=null,Bl=!1,bu=!1;function h_(t){Fn===null?Fn=[t]:Fn.push(t)}function n1(t){Bl=!0,h_(t)}function Sr(){if(!bu&&Fn!==null){bu=!0;var t=0,e=ke;try{var n=Fn;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,Bl=!1}catch(i){throw Fn!==null&&(Fn=Fn.slice(t+1)),U0(md,Sr),i}finally{ke=e,bu=!1}}return null}var wi=[],xi=0,il=null,ol=0,Qt=[],jt=0,qr=null,Vn=1,Un="";function Nr(t,e){wi[xi++]=ol,wi[xi++]=il,il=t,ol=e}function p_(t,e,n){Qt[jt++]=Vn,Qt[jt++]=Un,Qt[jt++]=qr,qr=t;var r=Vn;t=Un;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var o=32-vn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Vn=1<<32-vn(e)+i|n<<i|r,Un=o+t}else Vn=1<<o|n<<i|r,Un=t}function Sd(t){t.return!==null&&(Nr(t,1),p_(t,1,0))}function Ed(t){for(;t===il;)il=wi[--xi],wi[xi]=null,ol=wi[--xi],wi[xi]=null;for(;t===qr;)qr=Qt[--jt],Qt[jt]=null,Un=Qt[--jt],Qt[jt]=null,Vn=Qt[--jt],Qt[jt]=null}var Gt=null,zt=null,Oe=!1,mn=null;function m_(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,zt=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qr!==null?{id:Vn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,zt=null,!0):!1;default:return!1}}function Wc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qc(t){if(Oe){var e=zt;if(e){var n=e;if(!cm(t,e)){if(Wc(t))throw Error(Z(418));e=dr(n.nextSibling);var r=Gt;e&&cm(t,e)?m_(r,n):(t.flags=t.flags&-4097|2,Oe=!1,Gt=t)}}else{if(Wc(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Oe=!1,Gt=t}}}function fm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function ea(t){if(t!==Gt)return!1;if(!Oe)return fm(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$c(t.type,t.memoizedProps)),e&&(e=zt)){if(Wc(t))throw g_(),Error(Z(418));for(;e;)m_(t,e),e=dr(e.nextSibling)}if(fm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Gt?dr(t.stateNode.nextSibling):null;return!0}function g_(){for(var t=zt;t;)t=dr(t.nextSibling)}function Wi(){zt=Gt=null,Oe=!1}function Ad(t){mn===null?mn=[t]:mn.push(t)}var r1=Jn.ReactCurrentBatchConfig;function yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ta(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dm(t){var e=t._init;return e(t._payload)}function y_(t){function e(y,v){if(t){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=gr(y,v),y.index=0,y.sibling=null,y}function o(y,v,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,w,E){return v===null||v.tag!==6?(v=$u(w,y.mode,E),v.return=y,v):(v=i(v,w),v.return=y,v)}function c(y,v,w,E){var A=w.type;return A===pi?d(y,v,w.props.children,E,w.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===rr&&dm(A)===v.type)?(E=i(v,w.props),E.ref=yo(y,v,w),E.return=y,E):(E=ba(w.type,w.key,w.props,null,y.mode,E),E.ref=yo(y,v,w),E.return=y,E)}function f(y,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=zu(w,y.mode,E),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function d(y,v,w,E,A){return v===null||v.tag!==7?(v=Gr(w,y.mode,E,A),v.return=y,v):(v=i(v,w),v.return=y,v)}function h(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=$u(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Hs:return w=ba(v.type,v.key,v.props,null,y.mode,w),w.ref=yo(y,null,v),w.return=y,w;case hi:return v=zu(v,y.mode,w),v.return=y,v;case rr:var E=v._init;return h(y,E(v._payload),w)}if(To(v)||fo(v))return v=Gr(v,y.mode,w,null),v.return=y,v;ta(y,v)}return null}function p(y,v,w,E){var A=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(y,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Hs:return w.key===A?c(y,v,w,E):null;case hi:return w.key===A?f(y,v,w,E):null;case rr:return A=w._init,p(y,v,A(w._payload),E)}if(To(w)||fo(w))return A!==null?null:d(y,v,w,E,null);ta(y,w)}return null}function m(y,v,w,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,a(v,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hs:return y=y.get(E.key===null?w:E.key)||null,c(v,y,E,A);case hi:return y=y.get(E.key===null?w:E.key)||null,f(v,y,E,A);case rr:var I=E._init;return m(y,v,w,I(E._payload),A)}if(To(E)||fo(E))return y=y.get(w)||null,d(v,y,E,A,null);ta(v,E)}return null}function _(y,v,w,E){for(var A=null,I=null,k=v,N=v=0,D=null;k!==null&&N<w.length;N++){k.index>N?(D=k,k=null):D=k.sibling;var b=p(y,k,w[N],E);if(b===null){k===null&&(k=D);break}t&&k&&b.alternate===null&&e(y,k),v=o(b,v,N),I===null?A=b:I.sibling=b,I=b,k=D}if(N===w.length)return n(y,k),Oe&&Nr(y,N),A;if(k===null){for(;N<w.length;N++)k=h(y,w[N],E),k!==null&&(v=o(k,v,N),I===null?A=k:I.sibling=k,I=k);return Oe&&Nr(y,N),A}for(k=r(y,k);N<w.length;N++)D=m(k,y,N,w[N],E),D!==null&&(t&&D.alternate!==null&&k.delete(D.key===null?N:D.key),v=o(D,v,N),I===null?A=D:I.sibling=D,I=D);return t&&k.forEach(function(H){return e(y,H)}),Oe&&Nr(y,N),A}function g(y,v,w,E){var A=fo(w);if(typeof A!="function")throw Error(Z(150));if(w=A.call(w),w==null)throw Error(Z(151));for(var I=A=null,k=v,N=v=0,D=null,b=w.next();k!==null&&!b.done;N++,b=w.next()){k.index>N?(D=k,k=null):D=k.sibling;var H=p(y,k,b.value,E);if(H===null){k===null&&(k=D);break}t&&k&&H.alternate===null&&e(y,k),v=o(H,v,N),I===null?A=H:I.sibling=H,I=H,k=D}if(b.done)return n(y,k),Oe&&Nr(y,N),A;if(k===null){for(;!b.done;N++,b=w.next())b=h(y,b.value,E),b!==null&&(v=o(b,v,N),I===null?A=b:I.sibling=b,I=b);return Oe&&Nr(y,N),A}for(k=r(y,k);!b.done;N++,b=w.next())b=m(k,y,N,b.value,E),b!==null&&(t&&b.alternate!==null&&k.delete(b.key===null?N:b.key),v=o(b,v,N),I===null?A=b:I.sibling=b,I=b);return t&&k.forEach(function(M){return e(y,M)}),Oe&&Nr(y,N),A}function x(y,v,w,E){if(typeof w=="object"&&w!==null&&w.type===pi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Hs:e:{for(var A=w.key,I=v;I!==null;){if(I.key===A){if(A=w.type,A===pi){if(I.tag===7){n(y,I.sibling),v=i(I,w.props.children),v.return=y,y=v;break e}}else if(I.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===rr&&dm(A)===I.type){n(y,I.sibling),v=i(I,w.props),v.ref=yo(y,I,w),v.return=y,y=v;break e}n(y,I);break}else e(y,I);I=I.sibling}w.type===pi?(v=Gr(w.props.children,y.mode,E,w.key),v.return=y,y=v):(E=ba(w.type,w.key,w.props,null,y.mode,E),E.ref=yo(y,v,w),E.return=y,y=E)}return s(y);case hi:e:{for(I=w.key;v!==null;){if(v.key===I)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=zu(w,y.mode,E),v.return=y,y=v}return s(y);case rr:return I=w._init,x(y,v,I(w._payload),E)}if(To(w))return _(y,v,w,E);if(fo(w))return g(y,v,w,E);ta(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,w),v.return=y,y=v):(n(y,v),v=$u(w,y.mode,E),v.return=y,y=v),s(y)):n(y,v)}return x}var qi=y_(!0),v_=y_(!1),sl=Tr(null),al=null,Ci=null,Pd=null;function Id(){Pd=Ci=al=null}function kd(t){var e=sl.current;Le(sl),t._currentValue=e}function Jc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fi(t,e){al=t,Pd=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function an(t){var e=t._currentValue;if(Pd!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(al===null)throw Error(Z(308));Ci=t,al.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var Ur=null;function Rd(t){Ur===null?Ur=[t]:Ur.push(t)}function __(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Hn(t,n)}return i=r.interleaved,i===null?(e.next=e,Rd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Hn(t,n)}function Ia(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gd(t,n)}}function hm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ll(t,e,n,r){var i=t.updateQueue;ir=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,f=c.next;c.next=null,s===null?o=f:s.next=f,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(o!==null){var h=i.baseState;s=0,d=f=c=null,a=o;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,g=a;switch(p=e,m=n,g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=qe({},h,p);break e;case 2:ir=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=m,c=h):d=d.next=m,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Kr|=s,t.lanes=s,t.memoizedState=h}}function pm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Ps={},kn=Tr(Ps),cs=Tr(Ps),fs=Tr(Ps);function Br(t){if(t===Ps)throw Error(Z(174));return t}function Nd(t,e){switch(Ne(fs,e),Ne(cs,t),Ne(kn,Ps),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pc(e,t)}Le(kn),Ne(kn,e)}function Ji(){Le(kn),Le(cs),Le(fs)}function x_(t){Br(fs.current);var e=Br(kn.current),n=Pc(e,t.type);e!==n&&(Ne(cs,t),Ne(kn,n))}function Dd(t){cs.current===t&&(Le(kn),Le(cs))}var Ge=Tr(0);function ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lu=[];function bd(){for(var t=0;t<Lu.length;t++)Lu[t]._workInProgressVersionPrimary=null;Lu.length=0}var ka=Jn.ReactCurrentDispatcher,Fu=Jn.ReactCurrentBatchConfig,Jr=0,We=null,nt=null,st=null,cl=!1,zo=!1,ds=0,i1=0;function vt(){throw Error(Z(321))}function Ld(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Fd(t,e,n,r,i,o){if(Jr=o,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ka.current=t===null||t.memoizedState===null?l1:u1,t=n(r,i),zo){o=0;do{if(zo=!1,ds=0,25<=o)throw Error(Z(301));o+=1,st=nt=null,e.updateQueue=null,ka.current=c1,t=n(r,i)}while(zo)}if(ka.current=fl,e=nt!==null&&nt.next!==null,Jr=0,st=nt=We=null,cl=!1,e)throw Error(Z(300));return t}function Vd(){var t=ds!==0;return ds=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?We.memoizedState=st=t:st=st.next=t,st}function ln(){if(nt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=st===null?We.memoizedState:st.next;if(e!==null)st=e,nt=t;else{if(t===null)throw Error(Z(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},st===null?We.memoizedState=st=t:st=st.next=t}return st}function hs(t,e){return typeof e=="function"?e(t):e}function Vu(t){var e=ln(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=nt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,f=o;do{var d=f.lane;if((Jr&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var h={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,We.lanes|=d,Kr|=d}f=f.next}while(f!==null&&f!==o);c===null?s=r:c.next=a,wn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,We.lanes|=o,Kr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uu(t){var e=ln(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);wn(o,e.memoizedState)||(bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function C_(){}function T_(t,e){var n=We,r=ln(),i=e(),o=!wn(r.memoizedState,i);if(o&&(r.memoizedState=i,bt=!0),r=r.queue,Ud(A_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,ps(9,E_.bind(null,n,r,i,e),void 0,null),at===null)throw Error(Z(349));Jr&30||S_(n,e,i)}return i}function S_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E_(t,e,n,r){e.value=n,e.getSnapshot=r,P_(e)&&I_(t)}function A_(t,e,n){return n(function(){P_(e)&&I_(t)})}function P_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function I_(t){var e=Hn(t,1);e!==null&&_n(e,t,1,-1)}function mm(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:t},e.queue=t,t=t.dispatch=a1.bind(null,We,t),[e.memoizedState,t]}function ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function k_(){return ln().memoizedState}function Ra(t,e,n,r){var i=Tn();We.flags|=t,i.memoizedState=ps(1|e,n,void 0,r===void 0?null:r)}function Ol(t,e,n,r){var i=ln();r=r===void 0?null:r;var o=void 0;if(nt!==null){var s=nt.memoizedState;if(o=s.destroy,r!==null&&Ld(r,s.deps)){i.memoizedState=ps(e,n,o,r);return}}We.flags|=t,i.memoizedState=ps(1|e,n,o,r)}function gm(t,e){return Ra(8390656,8,t,e)}function Ud(t,e){return Ol(2048,8,t,e)}function R_(t,e){return Ol(4,2,t,e)}function M_(t,e){return Ol(4,4,t,e)}function N_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D_(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4,4,N_.bind(null,e,t),n)}function Bd(){}function b_(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ld(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function L_(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ld(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function F_(t,e,n){return Jr&21?(wn(n,e)||(n=$0(),We.lanes|=n,Kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function o1(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Fu.transition;Fu.transition={};try{t(!1),e()}finally{ke=n,Fu.transition=r}}function V_(){return ln().memoizedState}function s1(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U_(t))B_(e,n);else if(n=__(t,e,n,r),n!==null){var i=It();_n(n,t,r,i),O_(n,e,r)}}function a1(t,e,n){var r=mr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U_(t))B_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,wn(a,s)){var c=e.interleaved;c===null?(i.next=i,Rd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=__(t,e,i,r),n!==null&&(i=It(),_n(n,t,r,i),O_(n,e,r))}}function U_(t){var e=t.alternate;return t===We||e!==null&&e===We}function B_(t,e){zo=cl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function O_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gd(t,n)}}var fl={readContext:an,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},l1={readContext:an,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:an,useEffect:gm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ra(4194308,4,N_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ra(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ra(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=s1.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:mm,useDebugValue:Bd,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=mm(!1),e=t[0];return t=o1.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=Tn();if(Oe){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),at===null)throw Error(Z(349));Jr&30||S_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,gm(A_.bind(null,r,o,t),[t]),r.flags|=2048,ps(9,E_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Tn(),e=at.identifierPrefix;if(Oe){var n=Un,r=Vn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ds++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=i1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},u1={readContext:an,useCallback:b_,useContext:an,useEffect:Ud,useImperativeHandle:D_,useInsertionEffect:R_,useLayoutEffect:M_,useMemo:L_,useReducer:Vu,useRef:k_,useState:function(){return Vu(hs)},useDebugValue:Bd,useDeferredValue:function(t){var e=ln();return F_(e,nt.memoizedState,t)},useTransition:function(){var t=Vu(hs)[0],e=ln().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:T_,useId:V_,unstable_isNewReconciler:!1},c1={readContext:an,useCallback:b_,useContext:an,useEffect:Ud,useImperativeHandle:D_,useInsertionEffect:R_,useLayoutEffect:M_,useMemo:L_,useReducer:Uu,useRef:k_,useState:function(){return Uu(hs)},useDebugValue:Bd,useDeferredValue:function(t){var e=ln();return nt===null?e.memoizedState=t:F_(e,nt.memoizedState,t)},useTransition:function(){var t=Uu(hs)[0],e=ln().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:T_,useId:V_,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $l={isMounted:function(t){return(t=t._reactInternals)?jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),i=mr(t),o=Bn(r,i);o.payload=e,n!=null&&(o.callback=n),e=hr(t,o,i),e!==null&&(_n(e,t,i,r),Ia(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),i=mr(t),o=Bn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=hr(t,o,i),e!==null&&(_n(e,t,i,r),Ia(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=mr(t),i=Bn(n,r);i.tag=2,e!=null&&(i.callback=e),e=hr(t,i,r),e!==null&&(_n(e,t,r,n),Ia(e,t,r))}};function ym(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ss(n,r)||!ss(i,o):!0}function $_(t,e,n){var r=!1,i=_r,o=e.contextType;return typeof o=="object"&&o!==null?o=an(o):(i=Ft(e)?Wr:Et.current,r=e.contextTypes,o=(r=r!=null)?Hi(t,i):_r),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function vm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$l.enqueueReplaceState(e,e.state,null)}function Yc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Md(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=an(o):(o=Ft(e)?Wr:Et.current,i.context=Hi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Kc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$l.enqueueReplaceState(i,i.state,null),ll(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ki(t,e){try{var n="",r=e;do n+=US(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Bu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f1=typeof WeakMap=="function"?WeakMap:Map;function z_(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hl||(hl=!0,af=r),Xc(t,e)},n}function G_(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Xc(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function _m(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=E1.bind(null,t,e,n),e.then(t,t))}function wm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,hr(n,e,1))),n.lanes|=1),t)}var d1=Jn.ReactCurrentOwner,bt=!1;function Pt(t,e,n,r){e.child=t===null?v_(e,null,n,r):qi(e,t.child,n,r)}function Cm(t,e,n,r,i){n=n.render;var o=e.ref;return Fi(e,i),r=Fd(t,e,n,r,o,i),n=Vd(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wn(t,e,i)):(Oe&&n&&Sd(e),e.flags|=1,Pt(t,e,r,i),e.child)}function Tm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Jd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,H_(t,e,o,r,i)):(t=ba(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ss,n(s,r)&&t.ref===e.ref)return Wn(t,e,i)}return e.flags|=1,t=gr(o,r),t.ref=e.ref,t.return=e,e.child=t}function H_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ss(o,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Wn(t,e,i)}return Zc(t,e,n,r,i)}function W_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Si,$t),$t|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Si,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(Si,$t),$t|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ne(Si,$t),$t|=r;return Pt(t,e,i,n),e.child}function q_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zc(t,e,n,r,i){var o=Ft(n)?Wr:Et.current;return o=Hi(e,o),Fi(e,i),n=Fd(t,e,n,r,o,i),r=Vd(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wn(t,e,i)):(Oe&&r&&Sd(e),e.flags|=1,Pt(t,e,n,i),e.child)}function Sm(t,e,n,r,i){if(Ft(n)){var o=!0;rl(e)}else o=!1;if(Fi(e,i),e.stateNode===null)Ma(t,e),$_(e,n,r),Yc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=an(f):(f=Ft(n)?Wr:Et.current,f=Hi(e,f));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==f)&&vm(e,s,r,f),ir=!1;var p=e.memoizedState;s.state=p,ll(e,r,s,i),c=e.memoizedState,a!==r||p!==c||Lt.current||ir?(typeof d=="function"&&(Kc(e,n,d,r),c=e.memoizedState),(a=ir||ym(e,n,a,r,p,c,f))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=f,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,w_(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:dn(e.type,a),s.props=f,h=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=an(c):(c=Ft(n)?Wr:Et.current,c=Hi(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==c)&&vm(e,s,r,c),ir=!1,p=e.memoizedState,s.state=p,ll(e,r,s,i);var _=e.memoizedState;a!==h||p!==_||Lt.current||ir?(typeof m=="function"&&(Kc(e,n,m,r),_=e.memoizedState),(f=ir||ym(e,n,f,r,p,_,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Qc(t,e,n,r,o,i)}function Qc(t,e,n,r,i,o){q_(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&um(e,n,!1),Wn(t,e,o);r=e.stateNode,d1.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=qi(e,t.child,null,o),e.child=qi(e,null,a,o)):Pt(t,e,a,o),e.memoizedState=r.state,i&&um(e,n,!0),e.child}function J_(t){var e=t.stateNode;e.pendingContext?lm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lm(t,e.context,!1),Nd(t,e.containerInfo)}function Em(t,e,n,r,i){return Wi(),Ad(i),e.flags|=256,Pt(t,e,n,r),e.child}var jc={dehydrated:null,treeContext:null,retryLane:0};function ef(t){return{baseLanes:t,cachePool:null,transitions:null}}function K_(t,e,n){var r=e.pendingProps,i=Ge.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(Ge,i&1),t===null)return qc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Hl(s,r,0,null),t=Gr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ef(n),e.memoizedState=jc,t):Od(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return h1(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=gr(a,o):(o=Gr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ef(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=jc,r}return o=t.child,t=o.sibling,r=gr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Od(t,e){return e=Hl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function na(t,e,n,r){return r!==null&&Ad(r),qi(e,t.child,null,n),t=Od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h1(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Bu(Error(Z(422))),na(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Hl({mode:"visible",children:r.children},i,0,null),o=Gr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&qi(e,t.child,null,s),e.child.memoizedState=ef(s),e.memoizedState=jc,o);if(!(e.mode&1))return na(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Z(419)),r=Bu(o,r,void 0),na(t,e,s,r)}if(a=(s&t.childLanes)!==0,bt||a){if(r=at,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Hn(t,i),_n(r,t,i,-1))}return qd(),r=Bu(Error(Z(421))),na(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=A1.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,zt=dr(i.nextSibling),Gt=e,Oe=!0,mn=null,t!==null&&(Qt[jt++]=Vn,Qt[jt++]=Un,Qt[jt++]=qr,Vn=t.id,Un=t.overflow,qr=e),e=Od(e,r.children),e.flags|=4096,e)}function Am(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jc(t.return,e,n)}function Ou(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Y_(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Pt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Am(t,n,e);else if(t.tag===19)Am(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ul(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ou(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ul(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ou(e,!0,n,null,o);break;case"together":Ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ma(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function p1(t,e,n){switch(e.tag){case 3:J_(e),Wi();break;case 5:x_(e);break;case 1:Ft(e.type)&&rl(e);break;case 4:Nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(sl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?K_(t,e,n):(Ne(Ge,Ge.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);Ne(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Y_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,W_(t,e,n)}return Wn(t,e,n)}var X_,tf,Z_,Q_;X_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tf=function(){};Z_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Br(kn.current);var o=null;switch(n){case"input":i=Tc(t,i),r=Tc(t,r),o=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),o=[];break;case"textarea":i=Ac(t,i),r=Ac(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tl)}Ic(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(jo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var c=r[f];if(a=i?.[f],r.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(jo.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&De("scroll",t),o||a===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};Q_=function(t,e,n,r){n!==r&&(e.flags|=4)};function vo(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function m1(t,e,n){var r=e.pendingProps;switch(Ed(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Ft(e.type)&&nl(),_t(e),null;case 3:return r=e.stateNode,Ji(),Le(Lt),Le(Et),bd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ea(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(cf(mn),mn=null))),tf(t,e),_t(e),null;case 5:Dd(e);var i=Br(fs.current);if(n=e.type,t!==null&&e.stateNode!=null)Z_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return _t(e),null}if(t=Br(kn.current),ea(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[An]=e,r[us]=o,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(i=0;i<Eo.length;i++)De(Eo[i],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Lp(r,o),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},De("invalid",r);break;case"textarea":Vp(r,o),De("invalid",r)}Ic(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&js(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&js(r.textContent,a,t),i=["children",""+a]):jo.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&De("scroll",r)}switch(n){case"input":Ws(r),Fp(r,o,!0);break;case"textarea":Ws(r),Up(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=tl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[An]=e,t[us]=r,X_(t,e,!1,!1),e.stateNode=t;e:{switch(s=kc(n,r),n){case"dialog":De("cancel",t),De("close",t),i=r;break;case"iframe":case"object":case"embed":De("load",t),i=r;break;case"video":case"audio":for(i=0;i<Eo.length;i++)De(Eo[i],t);i=r;break;case"source":De("error",t),i=r;break;case"img":case"image":case"link":De("error",t),De("load",t),i=r;break;case"details":De("toggle",t),i=r;break;case"input":Lp(t,r),i=Tc(t,r),De("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),De("invalid",t);break;case"textarea":Vp(t,r),i=Ac(t,r),De("invalid",t);break;default:i=r}Ic(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?k0(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P0(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&es(t,c):typeof c=="number"&&es(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(jo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&De("scroll",t):c!=null&&cd(t,o,c,s))}switch(n){case"input":Ws(t),Fp(t,r,!1);break;case"textarea":Ws(t),Up(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ni(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)Q_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Br(fs.current),Br(kn.current),ea(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(o=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:js(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&js(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return _t(e),null;case 13:if(Le(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&zt!==null&&e.mode&1&&!(e.flags&128))g_(),Wi(),e.flags|=98560,o=!1;else if(o=ea(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[An]=e}else Wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),o=!1}else mn!==null&&(cf(mn),mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?rt===0&&(rt=3):qd())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Ji(),tf(t,e),t===null&&as(e.stateNode.containerInfo),_t(e),null;case 10:return kd(e.type._context),_t(e),null;case 17:return Ft(e.type)&&nl(),_t(e),null;case 19:if(Le(Ge),o=e.memoizedState,o===null)return _t(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)vo(o,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ul(t),s!==null){for(e.flags|=128,vo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&Qe()>Yi&&(e.flags|=128,r=!0,vo(o,!1),e.lanes=4194304)}else{if(!r)if(t=ul(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Oe)return _t(e),null}else 2*Qe()-o.renderingStartTime>Yi&&n!==1073741824&&(e.flags|=128,r=!0,vo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qe(),e.sibling=null,n=Ge.current,Ne(Ge,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Wd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function g1(t,e){switch(Ed(e),e.tag){case 1:return Ft(e.type)&&nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ji(),Le(Lt),Le(Et),bd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dd(e),null;case 13:if(Le(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Ge),null;case 4:return Ji(),null;case 10:return kd(e.type._context),null;case 22:case 23:return Wd(),null;case 24:return null;default:return null}}var ra=!1,Ct=!1,y1=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function nf(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var Pm=!1;function v1(t,e){if(Bc=Qa,t=r_(),Td(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,f=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++f===i&&(a=s),p===o&&++d===r&&(c=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oc={focusedElem:t,selectionRange:n},Qa=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,x=_.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:dn(e.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(E){Ye(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return _=Pm,Pm=!1,_}function Go(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&nf(e,n,o)}i=i.next}while(i!==r)}}function zl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function j_(t){var e=t.alternate;e!==null&&(t.alternate=null,j_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[us],delete e[Gc],delete e[e1],delete e[t1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ew(t){return t.tag===5||t.tag===3||t.tag===4}function Im(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ew(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function of(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tl));else if(r!==4&&(t=t.child,t!==null))for(of(t,e,n),t=t.sibling;t!==null;)of(t,e,n),t=t.sibling}function sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sf(t,e,n),t=t.sibling;t!==null;)sf(t,e,n),t=t.sibling}var ft=null,pn=!1;function Qn(t,e,n){for(n=n.child;n!==null;)tw(t,e,n),n=n.sibling}function tw(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(bl,n)}catch{}switch(n.tag){case 5:Ct||Ti(n,e);case 6:var r=ft,i=pn;ft=null,Qn(t,e,n),ft=r,pn=i,ft!==null&&(pn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(pn?(t=ft,n=n.stateNode,t.nodeType===8?Du(t.parentNode,n):t.nodeType===1&&Du(t,n),is(t)):Du(ft,n.stateNode));break;case 4:r=ft,i=pn,ft=n.stateNode.containerInfo,pn=!0,Qn(t,e,n),ft=r,pn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&nf(n,e,s),i=i.next}while(i!==r)}Qn(t,e,n);break;case 1:if(!Ct&&(Ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Qn(t,e,n),Ct=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function km(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new y1),e.forEach(function(r){var i=P1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,pn=!1;break e;case 3:ft=a.stateNode.containerInfo,pn=!0;break e;case 4:ft=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(ft===null)throw Error(Z(160));tw(o,s,i),ft=null,pn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){Ye(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nw(e,t),e=e.sibling}function nw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),xn(t),r&4){try{Go(3,t,t.return),zl(3,t)}catch(g){Ye(t,t.return,g)}try{Go(5,t,t.return)}catch(g){Ye(t,t.return,g)}}break;case 1:un(e,t),xn(t),r&512&&n!==null&&Ti(n,n.return);break;case 5:if(un(e,t),xn(t),r&512&&n!==null&&Ti(n,n.return),t.flags&32){var i=t.stateNode;try{es(i,"")}catch(g){Ye(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&S0(i,o),kc(a,s);var f=kc(a,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];d==="style"?k0(i,h):d==="dangerouslySetInnerHTML"?P0(i,h):d==="children"?es(i,h):cd(i,d,h,f)}switch(a){case"input":Sc(i,o);break;case"textarea":E0(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Ni(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Ni(i,!!o.multiple,o.defaultValue,!0):Ni(i,!!o.multiple,o.multiple?[]:"",!1))}i[us]=o}catch(g){Ye(t,t.return,g)}}break;case 6:if(un(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Ye(t,t.return,g)}}break;case 3:if(un(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(e.containerInfo)}catch(g){Ye(t,t.return,g)}break;case 4:un(e,t),xn(t);break;case 13:un(e,t),xn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Gd=Qe())),r&4&&km(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(f=Ct)||d,un(e,t),Ct=f):un(e,t),xn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Go(4,p,p.return);break;case 1:Ti(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(g){Ye(r,n,g)}}break;case 5:Ti(p,p.return);break;case 22:if(p.memoizedState!==null){Mm(h);continue}}m!==null?(m.return=p,ie=m):Mm(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=I0("display",s))}catch(g){Ye(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(g){Ye(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:un(e,t),xn(t),r&4&&km(t);break;case 21:break;default:un(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ew(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(es(i,""),r.flags&=-33);var o=Im(t);sf(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Im(t);of(t,a,s);break;default:throw Error(Z(161))}}catch(c){Ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _1(t,e,n){ie=t,rw(t)}function rw(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ra;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Ct;a=ra;var f=Ct;if(ra=s,(Ct=c)&&!f)for(ie=i;ie!==null;)s=ie,c=s.child,s.tag===22&&s.memoizedState!==null?Nm(i):c!==null?(c.return=s,ie=c):Nm(i);for(;o!==null;)ie=o,rw(o),o=o.sibling;ie=i,ra=a,Ct=f}Rm(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ie=o):Rm(t)}}function Rm(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||zl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&pm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pm(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&is(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ct||e.flags&512&&rf(e)}catch(p){Ye(e,e.return,p)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Mm(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Nm(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zl(4,e)}catch(c){Ye(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ye(e,i,c)}}var o=e.return;try{rf(e)}catch(c){Ye(e,o,c)}break;case 5:var s=e.return;try{rf(e)}catch(c){Ye(e,s,c)}}}catch(c){Ye(e,e.return,c)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var w1=Math.ceil,dl=Jn.ReactCurrentDispatcher,$d=Jn.ReactCurrentOwner,rn=Jn.ReactCurrentBatchConfig,Ce=0,at=null,je=null,pt=0,$t=0,Si=Tr(0),rt=0,ms=null,Kr=0,Gl=0,zd=0,Ho=null,Dt=null,Gd=0,Yi=1/0,Ln=null,hl=!1,af=null,pr=null,ia=!1,lr=null,pl=0,Wo=0,lf=null,Na=-1,Da=0;function It(){return Ce&6?Qe():Na!==-1?Na:Na=Qe()}function mr(t){return t.mode&1?Ce&2&&pt!==0?pt&-pt:r1.transition!==null?(Da===0&&(Da=$0()),Da):(t=ke,t!==0||(t=window.event,t=t===void 0?16:K0(t.type)),t):1}function _n(t,e,n,r){if(50<Wo)throw Wo=0,lf=null,Error(Z(185));Ss(t,n,r),(!(Ce&2)||t!==at)&&(t===at&&(!(Ce&2)&&(Gl|=n),rt===4&&sr(t,pt)),Vt(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Yi=Qe()+500,Bl&&Sr()))}function Vt(t,e){var n=t.callbackNode;rE(t,e);var r=Za(t,t===at?pt:0);if(r===0)n!==null&&$p(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$p(n),e===1)t.tag===0?n1(Dm.bind(null,t)):h_(Dm.bind(null,t)),QE(function(){!(Ce&6)&&Sr()}),n=null;else{switch(z0(r)){case 1:n=md;break;case 4:n=B0;break;case 16:n=Xa;break;case 536870912:n=O0;break;default:n=Xa}n=fw(n,iw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iw(t,e){if(Na=-1,Da=0,Ce&6)throw Error(Z(327));var n=t.callbackNode;if(Vi()&&t.callbackNode!==n)return null;var r=Za(t,t===at?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ml(t,r);else{e=r;var i=Ce;Ce|=2;var o=sw();(at!==t||pt!==e)&&(Ln=null,Yi=Qe()+500,zr(t,e));do try{T1();break}catch(a){ow(t,a)}while(!0);Id(),dl.current=o,Ce=i,je!==null?e=0:(at=null,pt=0,e=rt)}if(e!==0){if(e===2&&(i=bc(t),i!==0&&(r=i,e=uf(t,i))),e===1)throw n=ms,zr(t,0),sr(t,r),Vt(t,Qe()),n;if(e===6)sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!x1(i)&&(e=ml(t,r),e===2&&(o=bc(t),o!==0&&(r=o,e=uf(t,o))),e===1))throw n=ms,zr(t,0),sr(t,r),Vt(t,Qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Dr(t,Dt,Ln);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=Gd+500-Qe(),10<e)){if(Za(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zc(Dr.bind(null,t,Dt,Ln),e);break}Dr(t,Dt,Ln);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-vn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w1(r/1960))-r,10<r){t.timeoutHandle=zc(Dr.bind(null,t,Dt,Ln),r);break}Dr(t,Dt,Ln);break;case 5:Dr(t,Dt,Ln);break;default:throw Error(Z(329))}}}return Vt(t,Qe()),t.callbackNode===n?iw.bind(null,t):null}function uf(t,e){var n=Ho;return t.current.memoizedState.isDehydrated&&(zr(t,e).flags|=256),t=ml(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&cf(e)),t}function cf(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function x1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~zd,e&=~Gl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function Dm(t){if(Ce&6)throw Error(Z(327));Vi();var e=Za(t,0);if(!(e&1))return Vt(t,Qe()),null;var n=ml(t,e);if(t.tag!==0&&n===2){var r=bc(t);r!==0&&(e=r,n=uf(t,r))}if(n===1)throw n=ms,zr(t,0),sr(t,e),Vt(t,Qe()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dr(t,Dt,Ln),Vt(t,Qe()),null}function Hd(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Yi=Qe()+500,Bl&&Sr())}}function Yr(t){lr!==null&&lr.tag===0&&!(Ce&6)&&Vi();var e=Ce;Ce|=1;var n=rn.transition,r=ke;try{if(rn.transition=null,ke=1,t)return t()}finally{ke=r,rn.transition=n,Ce=e,!(Ce&6)&&Sr()}}function Wd(){$t=Si.current,Le(Si)}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZE(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Ed(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nl();break;case 3:Ji(),Le(Lt),Le(Et),bd();break;case 5:Dd(r);break;case 4:Ji();break;case 13:Le(Ge);break;case 19:Le(Ge);break;case 10:kd(r.type._context);break;case 22:case 23:Wd()}n=n.return}if(at=t,je=t=gr(t.current,null),pt=$t=e,rt=0,ms=null,zd=Gl=Kr=0,Dt=Ho=null,Ur!==null){for(e=0;e<Ur.length;e++)if(n=Ur[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ur=null}return t}function ow(t,e){do{var n=je;try{if(Id(),ka.current=fl,cl){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cl=!1}if(Jr=0,st=nt=We=null,zo=!1,ds=0,$d.current=null,n===null||n.return===null){rt=1,ms=e,je=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=pt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=wm(s);if(m!==null){m.flags&=-257,xm(m,s,a,o,e),m.mode&1&&_m(o,f,e),e=m,c=f;var _=e.updateQueue;if(_===null){var g=new Set;g.add(c),e.updateQueue=g}else _.add(c);break e}else{if(!(e&1)){_m(o,f,e),qd();break e}c=Error(Z(426))}}else if(Oe&&a.mode&1){var x=wm(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),xm(x,s,a,o,e),Ad(Ki(c,a));break e}}o=c=Ki(c,a),rt!==4&&(rt=2),Ho===null?Ho=[o]:Ho.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=z_(o,c,e);hm(o,y);break e;case 1:a=c;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(pr===null||!pr.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=G_(o,a,e);hm(o,E);break e}}o=o.return}while(o!==null)}lw(n)}catch(A){e=A,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function sw(){var t=dl.current;return dl.current=fl,t===null?fl:t}function qd(){(rt===0||rt===3||rt===2)&&(rt=4),at===null||!(Kr&268435455)&&!(Gl&268435455)||sr(at,pt)}function ml(t,e){var n=Ce;Ce|=2;var r=sw();(at!==t||pt!==e)&&(Ln=null,zr(t,e));do try{C1();break}catch(i){ow(t,i)}while(!0);if(Id(),Ce=n,dl.current=r,je!==null)throw Error(Z(261));return at=null,pt=0,rt}function C1(){for(;je!==null;)aw(je)}function T1(){for(;je!==null&&!KS();)aw(je)}function aw(t){var e=cw(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?lw(t):je=e,$d.current=null}function lw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=g1(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,je=null;return}}else if(n=m1(n,e,$t),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);rt===0&&(rt=5)}function Dr(t,e,n){var r=ke,i=rn.transition;try{rn.transition=null,ke=1,S1(t,e,n,r)}finally{rn.transition=i,ke=r}return null}function S1(t,e,n,r){do Vi();while(lr!==null);if(Ce&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(iE(t,o),t===at&&(je=at=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ia||(ia=!0,fw(Xa,function(){return Vi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rn.transition,rn.transition=null;var s=ke;ke=1;var a=Ce;Ce|=4,$d.current=null,v1(t,n),nw(n,t),HE(Oc),Qa=!!Bc,Oc=Bc=null,t.current=n,_1(n),YS(),Ce=a,ke=s,rn.transition=o}else t.current=n;if(ia&&(ia=!1,lr=t,pl=i),o=t.pendingLanes,o===0&&(pr=null),QS(n.stateNode),Vt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hl)throw hl=!1,t=af,af=null,t;return pl&1&&t.tag!==0&&Vi(),o=t.pendingLanes,o&1?t===lf?Wo++:(Wo=0,lf=t):Wo=0,Sr(),null}function Vi(){if(lr!==null){var t=z0(pl),e=rn.transition,n=ke;try{if(rn.transition=null,ke=16>t?16:t,lr===null)var r=!1;else{if(t=lr,lr=null,pl=0,Ce&6)throw Error(Z(331));var i=Ce;for(Ce|=4,ie=t.current;ie!==null;){var o=ie,s=o.child;if(ie.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(ie=f;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:Go(8,d,o)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var p=d.sibling,m=d.return;if(j_(d),d===f){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var _=o.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}ie=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ie=s;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Go(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,ie=y;break e}ie=o.return}}var v=t.current;for(ie=v;ie!==null;){s=ie;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,ie=w;else e:for(s=v;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zl(9,a)}}catch(A){Ye(a,a.return,A)}if(a===s){ie=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ie=E;break e}ie=a.return}}if(Ce=i,Sr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(bl,t)}catch{}r=!0}return r}finally{ke=n,rn.transition=e}}return!1}function bm(t,e,n){e=Ki(n,e),e=z_(t,e,1),t=hr(t,e,1),e=It(),t!==null&&(Ss(t,1,e),Vt(t,e))}function Ye(t,e,n){if(t.tag===3)bm(t,t,n);else for(;e!==null;){if(e.tag===3){bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=Ki(n,t),t=G_(e,t,1),e=hr(e,t,1),t=It(),e!==null&&(Ss(e,1,t),Vt(e,t));break}}e=e.return}}function E1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(pt&n)===n&&(rt===4||rt===3&&(pt&130023424)===pt&&500>Qe()-Gd?zr(t,0):zd|=n),Vt(t,e)}function uw(t,e){e===0&&(t.mode&1?(e=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):e=1);var n=It();t=Hn(t,e),t!==null&&(Ss(t,e,n),Vt(t,n))}function A1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uw(t,n)}function P1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),uw(t,n)}var cw;cw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,p1(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Oe&&e.flags&1048576&&p_(e,ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ma(t,e),t=e.pendingProps;var i=Hi(e,Et.current);Fi(e,n),i=Fd(null,e,r,t,i,n);var o=Vd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(o=!0,rl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Md(e),i.updater=$l,e.stateNode=i,i._reactInternals=e,Yc(e,r,t,n),e=Qc(null,e,r,!0,o,n)):(e.tag=0,Oe&&o&&Sd(e),Pt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ma(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=k1(r),t=dn(r,t),i){case 0:e=Zc(null,e,r,t,n);break e;case 1:e=Sm(null,e,r,t,n);break e;case 11:e=Cm(null,e,r,t,n);break e;case 14:e=Tm(null,e,r,dn(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Zc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Sm(t,e,r,i,n);case 3:e:{if(J_(e),t===null)throw Error(Z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,w_(t,e),ll(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ki(Error(Z(423)),e),e=Em(t,e,r,n,i);break e}else if(r!==i){i=Ki(Error(Z(424)),e),e=Em(t,e,r,n,i);break e}else for(zt=dr(e.stateNode.containerInfo.firstChild),Gt=e,Oe=!0,mn=null,n=v_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wi(),r===i){e=Wn(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return x_(e),t===null&&qc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,$c(r,i)?s=null:o!==null&&$c(r,o)&&(e.flags|=32),q_(t,e),Pt(t,e,s,n),e.child;case 6:return t===null&&qc(e),null;case 13:return K_(t,e,n);case 4:return Nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qi(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Cm(t,e,r,i,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ne(sl,r._currentValue),r._currentValue=s,o!==null)if(wn(o.value,s)){if(o.children===i.children&&!Lt.current){e=Wn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Bn(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Jc(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Z(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Jc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Pt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fi(e,n),i=an(i),r=r(i),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,i=dn(r,e.pendingProps),i=dn(r.type,i),Tm(t,e,r,i,n);case 15:return H_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Ma(t,e),e.tag=1,Ft(r)?(t=!0,rl(e)):t=!1,Fi(e,n),$_(e,r,i),Yc(e,r,i,n),Qc(null,e,r,!0,t,n);case 19:return Y_(t,e,n);case 22:return W_(t,e,n)}throw Error(Z(156,e.tag))};function fw(t,e){return U0(t,e)}function I1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new I1(t,e,n,r)}function Jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k1(t){if(typeof t=="function")return Jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dd)return 11;if(t===hd)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ba(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Jd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case pi:return Gr(n.children,i,o,e);case fd:s=8,i|=8;break;case _c:return t=en(12,n,e,i|2),t.elementType=_c,t.lanes=o,t;case wc:return t=en(13,n,e,i),t.elementType=wc,t.lanes=o,t;case xc:return t=en(19,n,e,i),t.elementType=xc,t.lanes=o,t;case x0:return Hl(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _0:s=10;break e;case w0:s=9;break e;case dd:s=11;break e;case hd:s=14;break e;case rr:s=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=en(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Gr(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Hl(t,e,n,r){return t=en(22,t,r,e),t.elementType=x0,t.lanes=n,t.stateNode={isHidden:!1},t}function $u(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function zu(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cu(0),this.expirationTimes=Cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kd(t,e,n,r,i,o,s,a,c){return t=new R1(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=en(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(o),t}function M1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dw(t){if(!t)return _r;t=t._reactInternals;e:{if(jr(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Ft(n))return d_(t,n,e)}return e}function hw(t,e,n,r,i,o,s,a,c){return t=Kd(n,r,!0,t,i,o,s,a,c),t.context=dw(null),n=t.current,r=It(),i=mr(n),o=Bn(r,i),o.callback=e??null,hr(n,o,i),t.current.lanes=i,Ss(t,i,r),Vt(t,r),t}function Wl(t,e,n,r){var i=e.current,o=It(),s=mr(i);return n=dw(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hr(i,e,s),t!==null&&(_n(t,i,s,o),Ia(t,i,s)),s}function gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yd(t,e){Lm(t,e),(t=t.alternate)&&Lm(t,e)}function N1(){return null}var pw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xd(t){this._internalRoot=t}ql.prototype.render=Xd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Wl(t,e,null,null)};ql.prototype.unmount=Xd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){Wl(null,t,null,null)}),e[Gn]=null}};function ql(t){this._internalRoot=t}ql.prototype.unstable_scheduleHydration=function(t){if(t){var e=W0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&J0(t)}};function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function D1(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=gl(s);o.call(f)}}var s=hw(e,r,t,0,null,!1,!1,"",Fm);return t._reactRootContainer=s,t[Gn]=s.current,as(t.nodeType===8?t.parentNode:t),Yr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=gl(c);a.call(f)}}var c=Kd(t,0,!1,null,null,!1,!1,"",Fm);return t._reactRootContainer=c,t[Gn]=c.current,as(t.nodeType===8?t.parentNode:t),Yr(function(){Wl(e,c,n,r)}),c}function Kl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=gl(s);a.call(c)}}Wl(e,s,t,i)}else s=D1(n,e,t,i,r);return gl(s)}G0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=So(e.pendingLanes);n!==0&&(gd(e,n|1),Vt(e,Qe()),!(Ce&6)&&(Yi=Qe()+500,Sr()))}break;case 13:Yr(function(){var r=Hn(t,1);if(r!==null){var i=It();_n(r,t,1,i)}}),Yd(t,1)}};yd=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=It();_n(e,t,134217728,n)}Yd(t,134217728)}};H0=function(t){if(t.tag===13){var e=mr(t),n=Hn(t,e);if(n!==null){var r=It();_n(n,t,e,r)}Yd(t,e)}};W0=function(){return ke};q0=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Mc=function(t,e,n){switch(e){case"input":if(Sc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ul(r);if(!i)throw Error(Z(90));T0(r),Sc(r,i)}}}break;case"textarea":E0(t,n);break;case"select":e=n.value,e!=null&&Ni(t,!!n.multiple,e,!1)}};N0=Hd;D0=Yr;var b1={usingClientEntryPoint:!1,Events:[As,vi,Ul,R0,M0,Hd]},_o={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L1={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=F0(t),t===null?null:t.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||N1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{bl=oa.inject(L1),In=oa}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zd(e))throw Error(Z(200));return M1(t,e,null,n)};Jt.createRoot=function(t,e){if(!Zd(t))throw Error(Z(299));var n=!1,r="",i=pw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kd(t,1,!1,null,null,n,!1,r,i),t[Gn]=e.current,as(t.nodeType===8?t.parentNode:t),new Xd(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=F0(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Yr(t)};Jt.hydrate=function(t,e,n){if(!Jl(e))throw Error(Z(200));return Kl(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!Zd(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=pw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=hw(e,null,t,1,n??null,i,!1,o,s),t[Gn]=e.current,as(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ql(e)};Jt.render=function(t,e,n){if(!Jl(e))throw Error(Z(200));return Kl(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(Z(40));return t._reactRootContainer?(Yr(function(){Kl(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};Jt.unstable_batchedUpdates=Hd;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jl(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Kl(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function mw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mw)}catch(t){console.error(t)}}mw(),m0.exports=Jt;var F1=m0.exports,Vm=F1;yc.createRoot=Vm.createRoot,yc.hydrateRoot=Vm.hydrateRoot;function sa(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gw={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,o){function s(f,d){if(!i[f]){if(!r[f]){var h=typeof sa=="function"&&sa;if(!d&&h)return h(f,!0);if(a)return a(f,!0);var p=new Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[f]={exports:{}};r[f][0].call(m.exports,function(_){var g=r[f][1][_];return s(g||_)},m,m.exports,n,r,i,o)}return i[f].exports}for(var a=typeof sa=="function"&&sa,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(n,r,i){var o=n("./utils"),s=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var f,d,h,p,m,_,g,x=[],y=0,v=c.length,w=v,E=o.getTypeOf(c)!=="string";y<c.length;)w=v-y,h=E?(f=c[y++],d=y<v?c[y++]:0,y<v?c[y++]:0):(f=c.charCodeAt(y++),d=y<v?c.charCodeAt(y++):0,y<v?c.charCodeAt(y++):0),p=f>>2,m=(3&f)<<4|d>>4,_=1<w?(15&d)<<2|h>>6:64,g=2<w?63&h:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(_)+a.charAt(g));return x.join("")},i.decode=function(c){var f,d,h,p,m,_,g=0,x=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&w--,c.charAt(c.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=s.uint8array?new Uint8Array(0|w):new Array(0|w);g<c.length;)f=a.indexOf(c.charAt(g++))<<2|(p=a.indexOf(c.charAt(g++)))>>4,d=(15&p)<<4|(m=a.indexOf(c.charAt(g++)))>>2,h=(3&m)<<6|(_=a.indexOf(c.charAt(g++))),v[x++]=f,m!==64&&(v[x++]=d),_!==64&&(v[x++]=h);return v}},{"./support":30,"./utils":32}],2:[function(n,r,i){var o=n("./external"),s=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function f(d,h,p,m,_){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=m,this.compressedContent=_}f.prototype={getContentWorker:function(){var d=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(d,h,p){return d.pipe(new a).pipe(new c("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var o=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var o=n("./utils"),s=function(){for(var a,c=[],f=0;f<256;f++){a=f;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;c[f]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(f,d,h,p){var m=s,_=p+h;f^=-1;for(var g=p;g<_;g++)f=f>>>8^m[255&(f^d[g])];return-1^f}(0|c,a,a.length,0):function(f,d,h,p){var m=s,_=p+h;f^=-1;for(var g=p;g<_;g++)f=f>>>8^m[255&(f^d.charCodeAt(g))];return-1^f}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),f=o?"uint8array":"array";function d(h,p){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function o(m,_){var g,x="";for(g=0;g<_;g++)x+=String.fromCharCode(255&m),m>>>=8;return x}function s(m,_,g,x,y,v){var w,E,A=m.file,I=m.compression,k=v!==f.utf8encode,N=a.transformTo("string",v(A.name)),D=a.transformTo("string",f.utf8encode(A.name)),b=A.comment,H=a.transformTo("string",v(b)),M=a.transformTo("string",f.utf8encode(b)),z=D.length!==A.name.length,S=M.length!==b.length,G="",ae="",q="",J=A.dir,B=A.date,X={crc32:0,compressedSize:0,uncompressedSize:0};_&&!g||(X.crc32=m.crc32,X.compressedSize=m.compressedSize,X.uncompressedSize=m.uncompressedSize);var V=0;_&&(V|=8),k||!z&&!S||(V|=2048);var F=0,oe=0;J&&(F|=16),y==="UNIX"?(oe=798,F|=function(ee,Te){var Ve=ee;return ee||(Ve=Te?16893:33204),(65535&Ve)<<16}(A.unixPermissions,J)):(oe=20,F|=function(ee){return 63&(ee||0)}(A.dosPermissions)),w=B.getUTCHours(),w<<=6,w|=B.getUTCMinutes(),w<<=5,w|=B.getUTCSeconds()/2,E=B.getUTCFullYear()-1980,E<<=4,E|=B.getUTCMonth()+1,E<<=5,E|=B.getUTCDate(),z&&(ae=o(1,1)+o(d(N),4)+D,G+="up"+o(ae.length,2)+ae),S&&(q=o(1,1)+o(d(H),4)+M,G+="uc"+o(q.length,2)+q);var te="";return te+=`
\0`,te+=o(V,2),te+=I.magic,te+=o(w,2),te+=o(E,2),te+=o(X.crc32,4),te+=o(X.compressedSize,4),te+=o(X.uncompressedSize,4),te+=o(N.length,2),te+=o(G.length,2),{fileRecord:h.LOCAL_FILE_HEADER+te+N+G,dirRecord:h.CENTRAL_FILE_HEADER+o(oe,2)+te+o(H.length,2)+"\0\0\0\0"+o(F,4)+o(x,4)+N+G+H}}var a=n("../utils"),c=n("../stream/GenericWorker"),f=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(m,_,g,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=g,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,c),p.prototype.push=function(m){var _=m.meta.percent||0,g=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(_+100*(g-x-1))/g:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var g=s(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,g=s(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),_)this.push({data:function(x){return h.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var g=this.bytesWritten-m,x=function(y,v,w,E,A){var I=a.transformTo("string",A(E));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(y,2)+o(y,2)+o(v,4)+o(w,4)+o(I.length,2)+I}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(g){_.processChunk(g)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(g){_.error(g)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var _=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var g=0;g<_.length;g++)try{_[g].error(m)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var o=n("../compressions"),s=n("./ZipFileWorker");i.generateWorker=function(a,c,f){var d=new s(c.streamFiles,f,c.platform,c.encodeFileName),h=0;try{a.forEach(function(p,m){h++;var _=function(v,w){var E=v||w,A=o[E];if(!A)throw new Error(E+" is not a valid compression method !");return A}(m.options.compression,c.compression),g=m.options.compressionOptions||c.compressionOptions||{},x=m.dir,y=m.date;m._compressWorker(_,g).withStreamInfo("file",{name:p,dir:x,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var o=n("./utils"),s=n("./external"),a=n("./utf8"),c=n("./zipEntries"),f=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new s.Promise(function(m,_){var g=p.decompressed.getContentWorker().pipe(new f);g.on("error",function(x){_(x)}).on("end",function(){g.streamInfo.crc32!==p.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var _=this;return m=o.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(p)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(g){var x=new c(m);return x.load(g),x}).then(function(g){var x=[s.Promise.resolve(g)],y=g.files;if(m.checkCRC32)for(var v=0;v<y.length;v++)x.push(h(y[v]));return s.Promise.all(x)}).then(function(g){for(var x=g.shift(),y=x.files,v=0;v<y.length;v++){var w=y[v],E=w.fileNameStr,A=o.resolve(w.fileNameStr);_.file(A,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:m.createFolders}),w.dir||(_.file(A).unsafeOriginalName=E)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var o=n("../utils"),s=n("../stream/GenericWorker");function a(c,f){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(a,s),a.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(d){f.push({data:d,meta:{percent:0}})}).on("error",function(d){f.isPaused?this.generatedError=d:f.error(d)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var o=n("readable-stream").Readable;function s(a,c,f){o.call(this,c),this._helper=a;var d=this;a.on("data",function(h,p){d.push(h)||d._helper.pause(),f&&f(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,i){function o(A,I,k){var N,D=a.getTypeOf(I),b=a.extend(k||{},d);b.date=b.date||new Date,b.compression!==null&&(b.compression=b.compression.toUpperCase()),typeof b.unixPermissions=="string"&&(b.unixPermissions=parseInt(b.unixPermissions,8)),b.unixPermissions&&16384&b.unixPermissions&&(b.dir=!0),b.dosPermissions&&16&b.dosPermissions&&(b.dir=!0),b.dir&&(A=y(A)),b.createFolders&&(N=x(A))&&v.call(this,N,!0);var H=D==="string"&&b.binary===!1&&b.base64===!1;k&&k.binary!==void 0||(b.binary=!H),(I instanceof h&&I.uncompressedSize===0||b.dir||!I||I.length===0)&&(b.base64=!1,b.binary=!0,I="",b.compression="STORE",D="string");var M=null;M=I instanceof h||I instanceof c?I:_.isNode&&_.isStream(I)?new g(A,I):a.prepareContent(A,I,b.binary,b.optimizedBinaryString,b.base64);var z=new p(A,M,b);this.files[A]=z}var s=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),x=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var I=A.lastIndexOf("/");return 0<I?A.substring(0,I):""},y=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},v=function(A,I){return I=I!==void 0?I:d.createFolders,A=y(A),this.files[A]||o.call(this,A,null,{dir:!0,createFolders:I}),this.files[A]};function w(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var I,k,N;for(I in this.files)N=this.files[I],(k=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&A(k,N)},filter:function(A){var I=[];return this.forEach(function(k,N){A(k,N)&&I.push(N)}),I},file:function(A,I,k){if(arguments.length!==1)return A=this.root+A,o.call(this,A,I,k),this;if(w(A)){var N=A;return this.filter(function(b,H){return!H.dir&&N.test(b)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(w(A))return this.filter(function(D,b){return b.dir&&A.test(D)});var I=this.root+A,k=v.call(this,I),N=this.clone();return N.root=k.name,N},remove:function(A){A=this.root+A;var I=this.files[A];if(I||(A.slice(-1)!=="/"&&(A+="/"),I=this.files[A]),I&&!I.dir)delete this.files[A];else for(var k=this.filter(function(D,b){return b.name.slice(0,A.length)===A}),N=0;N<k.length;N++)delete this.files[k[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var I,k={};try{if((k=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var N=k.comment||this.comment||"";I=m.generateWorker(this,k,N)}catch(D){(I=new c("error")).error(D)}return new f(I,k.type||"string",k.mimeType)},generateAsync:function(A,I){return this.generateInternalStream(A).accumulate(I)},generateNodeStream:function(A,I){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(I)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var o=n("./DataReader");function s(a){o.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),f=a.charCodeAt(1),d=a.charCodeAt(2),h=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===f&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),f=a.charCodeAt(1),d=a.charCodeAt(2),h=a.charCodeAt(3),p=this.readData(4);return c===p[0]&&f===p[1]&&d===p[2]&&h===p[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var o=n("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,f=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=a,f},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,i){var o=n("./Uint8ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var o=n("./DataReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var o=n("./ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var o=n("../utils"),s=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),f=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=o.getTypeOf(h);return o.checkSupport(p),p!=="string"||s.uint8array?p==="nodebuffer"?new f(h):s.uint8array?new d(o.transformTo("uint8array",h)):new a(o.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var o=n("./GenericWorker"),s=n("../utils");function a(c){o.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(a,o),a.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var o=n("./GenericWorker"),s=n("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,o),a.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var o=n("../utils"),s=n("./GenericWorker");function a(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(a,s),a.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}s.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var o=n("../utils"),s=n("./GenericWorker");function a(c){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){f.dataIsReady=!0,f.data=d,f.max=d&&d.length||0,f.type=o.getTypeOf(d),f.isPaused||f._tickAndRepeat()},function(d){f.error(d)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(c){a.processChunk(c)}),s.on("end",function(){a.end()}),s.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=o},{}],29:[function(n,r,i){var o=n("../utils"),s=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),f=n("../support"),d=n("../external"),h=null;if(f.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(_,g){return new d.Promise(function(x,y){var v=[],w=_._internalType,E=_._outputType,A=_._mimeType;_.on("data",function(I,k){v.push(I),g&&g(k)}).on("error",function(I){v=[],y(I)}).on("end",function(){try{var I=function(k,N,D){switch(k){case"blob":return o.newBlob(o.transformTo("arraybuffer",N),D);case"base64":return c.encode(N);default:return o.transformTo(k,N)}}(E,function(k,N){var D,b=0,H=null,M=0;for(D=0;D<N.length;D++)M+=N[D].length;switch(k){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(H=new Uint8Array(M),D=0;D<N.length;D++)H.set(N[D],b),b+=N[D].length;return H;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+k+"'")}}(w,v),A);x(I)}catch(k){y(k)}v=[]}).resume()})}function m(_,g,x){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=x,o.checkSupport(y),this._worker=_.pipe(new s(y)),_.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}m.prototype={accumulate:function(_){return p(this,_)},on:function(_,g){var x=this;return _==="data"?this._worker.on(_,function(y){g.call(x,y.data,y.meta)}):this._worker.on(_,function(){o.delay(g,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var o=n("./utils"),s=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),f=new Array(256),d=0;d<256;d++)f[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;f[254]=f[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}i.utf8encode=function(m){return s.nodebuffer?a.newBufferFrom(m,"utf-8"):function(_){var g,x,y,v,w,E=_.length,A=0;for(v=0;v<E;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<E&&(64512&(y=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),v++),A+=x<128?1:x<2048?2:x<65536?3:4;for(g=s.uint8array?new Uint8Array(A):new Array(A),v=w=0;w<A;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<E&&(64512&(y=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),v++),x<128?g[w++]=x:(x<2048?g[w++]=192|x>>>6:(x<65536?g[w++]=224|x>>>12:(g[w++]=240|x>>>18,g[w++]=128|x>>>12&63),g[w++]=128|x>>>6&63),g[w++]=128|63&x);return g}(m)},i.utf8decode=function(m){return s.nodebuffer?o.transformTo("nodebuffer",m).toString("utf-8"):function(_){var g,x,y,v,w=_.length,E=new Array(2*w);for(g=x=0;g<w;)if((y=_[g++])<128)E[x++]=y;else if(4<(v=f[y]))E[x++]=65533,g+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&g<w;)y=y<<6|63&_[g++],v--;1<v?E[x++]=65533:y<65536?E[x++]=y:(y-=65536,E[x++]=55296|y>>10&1023,E[x++]=56320|1023&y)}return E.length!==x&&(E.subarray?E=E.subarray(0,x):E.length=x),o.applyFromCharCode(E)}(m=o.transformTo(s.uint8array?"uint8array":"array",m))},o.inherits(h,c),h.prototype.processChunk=function(m){var _=o.transformTo(s.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=_;(_=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),_.set(g,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(v,w){var E;for((w=w||v.length)>v.length&&(w=v.length),E=w-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?w:E+f[v[E]]>w?E:w}(_),y=_;x!==_.length&&(s.uint8array?(y=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(y=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:i.utf8decode(y),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,o.inherits(p,c),p.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var o=n("./support"),s=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function f(g){return g}function d(g,x){for(var y=0;y<g.length;++y)x[y]=255&g.charCodeAt(y);return x}n("setimmediate"),i.newBlob=function(g,x){i.checkSupport("blob");try{return new Blob([g],{type:x})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,x,y){var v=[],w=0,E=g.length;if(E<=y)return String.fromCharCode.apply(null,g);for(;w<E;)x==="array"||x==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+y,E)))):v.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+y,E)))),w+=y;return v.join("")},stringifyByChar:function(g){for(var x="",y=0;y<g.length;y++)x+=String.fromCharCode(g[y]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(g){var x=65536,y=i.getTypeOf(g),v=!0;if(y==="uint8array"?v=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<x;)try{return h.stringifyByChunk(g,y,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(g)}function m(g,x){for(var y=0;y<g.length;y++)x[y]=g[y];return x}i.applyFromCharCode=p;var _={};_.string={string:f,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return _.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,a.allocBuffer(g.length))}},_.array={string:p,array:f,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},_.arraybuffer={string:function(g){return p(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:f,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},_.uint8array={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:f,nodebuffer:function(g){return a.newBufferFrom(g)}},_.nodebuffer={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return _.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:f},i.transformTo=function(g,x){if(x=x||"",!g)return x;i.checkSupport(g);var y=i.getTypeOf(x);return _[y][g](x)},i.resolve=function(g){for(var x=g.split("/"),y=[],v=0;v<x.length;v++){var w=x[v];w==="."||w===""&&v!==0&&v!==x.length-1||(w===".."?y.pop():y.push(w))}return y.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var x,y,v="";for(y=0;y<(g||"").length;y++)v+="\\x"+((x=g.charCodeAt(y))<16?"0":"")+x.toString(16).toUpperCase();return v},i.delay=function(g,x,y){setImmediate(function(){g.apply(y||null,x||[])})},i.inherits=function(g,x){function y(){}y.prototype=x.prototype,g.prototype=new y},i.extend=function(){var g,x,y={};for(g=0;g<arguments.length;g++)for(x in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],x)&&y[x]===void 0&&(y[x]=arguments[g][x]);return y},i.prepareContent=function(g,x,y,v,w){return c.Promise.resolve(x).then(function(E){return o.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,I){var k=new FileReader;k.onload=function(N){A(N.target.result)},k.onerror=function(N){I(N.target.error)},k.readAsArrayBuffer(E)}):E}).then(function(E){var A=i.getTypeOf(E);return A?(A==="arraybuffer"?E=i.transformTo("uint8array",E):A==="string"&&(w?E=s.decode(E):y&&v!==!0&&(E=function(I){return d(I,o.uint8array?new Uint8Array(I.length):new Array(I.length))}(E))),E):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./signature"),c=n("./zipEntry"),f=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(p)+", expected "+s.pretty(h)+")")}},isSignature:function(h,p){var m=this.reader.index;this.reader.setIndex(h);var _=this.reader.readString(4)===p;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=f.uint8array?"uint8array":"array",m=s.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,m,_=this.zip64EndOfCentralSize-44;0<_;)h=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=p-m;if(0<_)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),f=n("./utf8"),d=n("./compressions"),h=n("./support");function p(m,_){this.options=m,this.loadOptions=_}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===x)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,g,x,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)_=m.readInt(2),g=m.readInt(2),x=m.readData(g),this.extraFields[_]={id:_,length:g,value:x};m.setIndex(y)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var g=s.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var y=s.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=o(m.value);return _.readInt(1)!==1||c(this.fileName)!==_.readInt(4)?null:f.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=o(m.value);return _.readInt(1)!==1||c(this.fileComment)!==_.readInt(4)?null:f.utf8decode(_.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function o(_,g,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=g,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),f=n("./compressedObject"),d=n("./stream/GenericWorker");o.prototype={internalStream:function(_){var g=null,x="string";try{if(!_)throw new Error("No output type specified.");var y=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(g=g.pipe(new c.Utf8EncodeWorker)),!v&&y&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(w){(g=new d("error")).error(w)}return new s(g,x,"")},async:function(_,g){return this.internalStream(_).accumulate(g)},nodeStream:function(_,g){return this.internalStream(_||"nodebuffer").toNodejsStream(g)},_compressWorker:function(_,g){if(this._data instanceof f&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(x,_,g)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)o.prototype[h[m]]=p;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(o){var s,a,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var f=0,d=new c(_),h=o.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){_(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(_,0)};else{var p=new o.MessageChannel;p.port1.onmessage=_,s=function(){p.port2.postMessage(0)}}var m=[];function _(){var g,x;a=!0;for(var y=m.length;y;){for(x=m,m=[],g=-1;++g<y;)x[g]();y=m.length}a=!1}r.exports=function(g){m.push(g)!==1||a||s()}}).call(this,typeof zs<"u"?zs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var o=n("immediate");function s(){}var a={},c=["REJECTED"],f=["FULFILLED"],d=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==s&&g(this,y)}function p(y,v,w){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function m(y,v,w){o(function(){var E;try{E=v(w)}catch(A){return a.reject(y,A)}E===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,E)})}function _(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function g(y,v){var w=!1;function E(k){w||(w=!0,a.reject(y,k))}function A(k){w||(w=!0,a.resolve(y,k))}var I=x(function(){v(A,E)});I.status==="error"&&E(I.value)}function x(y,v){var w={};try{w.value=y(v),w.status="success"}catch(E){w.status="error",w.value=E}return w}(r.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(y()).then(function(){return w})},function(w){return v.resolve(y()).then(function(){throw w})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,v){if(typeof y!="function"&&this.state===f||typeof v!="function"&&this.state===c)return this;var w=new this.constructor(s);return this.state!==d?m(w,this.state===f?y:v,this.outcome):this.queue.push(new p(w,y,v)),w},p.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},p.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},p.prototype.callRejected=function(y){a.reject(this.promise,y)},p.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},a.resolve=function(y,v){var w=x(_,v);if(w.status==="error")return a.reject(y,w.value);var E=w.value;if(E)g(y,E);else{y.state=f,y.outcome=v;for(var A=-1,I=y.queue.length;++A<I;)y.queue[A].callFulfilled(v)}return y},a.reject=function(y,v){y.state=c,y.outcome=v;for(var w=-1,E=y.queue.length;++w<E;)y.queue[w].callRejected(v);return y},h.resolve=function(y){return y instanceof this?y:a.resolve(new this(s),y)},h.reject=function(y){var v=new this(s);return a.reject(v,y)},h.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,E=!1;if(!w)return this.resolve([]);for(var A=new Array(w),I=0,k=-1,N=new this(s);++k<w;)D(y[k],k);return N;function D(b,H){v.resolve(b).then(function(M){A[H]=M,++I!==w||E||(E=!0,a.resolve(N,A))},function(M){E||(E=!0,a.reject(N,M))})}},h.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=y.length,E=!1;if(!w)return this.resolve([]);for(var A=-1,I=new this(s);++A<w;)k=y[A],v.resolve(k).then(function(N){E||(E=!0,a.resolve(I,N))},function(N){E||(E=!0,a.reject(I,N))});var k;return I}},{immediate:36}],38:[function(n,r,i){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var o=n("./zlib/deflate"),s=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),f=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,m=0,_=8;function g(y){if(!(this instanceof g))return new g(y);this.options=s.assign({level:p,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var w=o.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==h)throw new Error(c[w]);if(v.header&&o.deflateSetHeader(this.strm,v.header),v.dictionary){var E;if(E=typeof v.dictionary=="string"?a.string2buf(v.dictionary):d.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=o.deflateSetDictionary(this.strm,E))!==h)throw new Error(c[w]);this._dict_set=!0}}function x(y,v){var w=new g(v);if(w.push(y,!0),w.err)throw w.msg||c[w.err];return w.result}g.prototype.push=function(y,v){var w,E,A=this.strm,I=this.options.chunkSize;if(this.ended)return!1;E=v===~~v?v:v===!0?4:0,typeof y=="string"?A.input=a.string2buf(y):d.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new s.Buf8(I),A.next_out=0,A.avail_out=I),(w=o.deflate(A,E))!==1&&w!==h)return this.onEnd(w),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(A.output,A.next_out))):this.onData(s.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&w!==1);return E===4?(w=o.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===h):E!==2||(this.onEnd(h),!(A.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=g,i.deflate=x,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,x(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,x(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var o=n("./zlib/inflate"),s=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),f=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||g&&g.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=o.inflateInit2(this.strm,x.windowBits);if(y!==c.Z_OK)throw new Error(f[y]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function _(g,x){var y=new m(x);if(y.push(g,!0),y.err)throw y.msg||f[y.err];return y.result}m.prototype.push=function(g,x){var y,v,w,E,A,I,k=this.strm,N=this.options.chunkSize,D=this.options.dictionary,b=!1;if(this.ended)return!1;v=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?k.input=a.binstring2buf(g):p.call(g)==="[object ArrayBuffer]"?k.input=new Uint8Array(g):k.input=g,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(N),k.next_out=0,k.avail_out=N),(y=o.inflate(k,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(I=typeof D=="string"?a.string2buf(D):p.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,y=o.inflateSetDictionary(this.strm,I)),y===c.Z_BUF_ERROR&&b===!0&&(y=c.Z_OK,b=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&y!==c.Z_STREAM_END&&(k.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(k.output,k.next_out),E=k.next_out-w,A=a.buf2string(k.output,w),k.next_out=E,k.avail_out=N-E,E&&s.arraySet(k.output,k.output,w,E,0),this.onData(A)):this.onData(s.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(b=!0)}while((0<k.avail_in||k.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(y=o.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(k.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=m,i.inflate=_,i.inflateRaw=function(g,x){return(x=x||{}).raw=!0,_(g,x)},i.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var d=f.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},i.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var s={arraySet:function(c,f,d,h,p){if(f.subarray&&c.subarray)c.set(f.subarray(d,d+h),p);else for(var m=0;m<h;m++)c[p+m]=f[d+m]},flattenChunks:function(c){var f,d,h,p,m,_;for(f=h=0,d=c.length;f<d;f++)h+=c[f].length;for(_=new Uint8Array(h),f=p=0,d=c.length;f<d;f++)m=c[f],_.set(m,p),p+=m.length;return _}},a={arraySet:function(c,f,d,h,p){for(var m=0;m<h;m++)c[p+m]=f[d+m]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(o)},{}],42:[function(n,r,i){var o=n("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new o.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function d(h,p){if(p<65537&&(h.subarray&&a||!h.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(h,p));for(var m="",_=0;_<p;_++)m+=String.fromCharCode(h[_]);return m}c[254]=c[254]=1,i.string2buf=function(h){var p,m,_,g,x,y=h.length,v=0;for(g=0;g<y;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(_=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),g++),v+=m<128?1:m<2048?2:m<65536?3:4;for(p=new o.Buf8(v),g=x=0;x<v;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(_=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),g++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var p=new o.Buf8(h.length),m=0,_=p.length;m<_;m++)p[m]=h.charCodeAt(m);return p},i.buf2string=function(h,p){var m,_,g,x,y=p||h.length,v=new Array(2*y);for(m=_=0;m<y;)if((g=h[m++])<128)v[_++]=g;else if(4<(x=c[g]))v[_++]=65533,m+=x-1;else{for(g&=x===2?31:x===3?15:7;1<x&&m<y;)g=g<<6|63&h[m++],x--;1<x?v[_++]=65533:g<65536?v[_++]=g:(g-=65536,v[_++]=55296|g>>10&1023,v[_++]=56320|1023&g)}return d(v,_)},i.utf8border=function(h,p){var m;for((p=p||h.length)>h.length&&(p=h.length),m=p-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?p:m+c[h[m]]>p?m:p}},{"./common":41}],43:[function(n,r,i){r.exports=function(o,s,a,c){for(var f=65535&o|0,d=o>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;d=d+(f=f+s[c++]|0)|0,--h;);f%=65521,d%=65521}return f|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var o=function(){for(var s,a=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;a[c]=s}return a}();r.exports=function(s,a,c,f){var d=o,h=f+c;s^=-1;for(var p=f;p<h;p++)s=s>>>8^d[255&(s^a[p])];return-1^s}},{}],46:[function(n,r,i){var o,s=n("../utils/common"),a=n("./trees"),c=n("./adler32"),f=n("./crc32"),d=n("./messages"),h=0,p=4,m=0,_=-2,g=-1,x=4,y=2,v=8,w=9,E=286,A=30,I=19,k=2*E+1,N=15,D=3,b=258,H=b+D+1,M=42,z=113,S=1,G=2,ae=3,q=4;function J(C,W){return C.msg=d[W],W}function B(C){return(C<<1)-(4<C?9:0)}function X(C){for(var W=C.length;0<=--W;)C[W]=0}function V(C){var W=C.state,O=W.pending;O>C.avail_out&&(O=C.avail_out),O!==0&&(s.arraySet(C.output,W.pending_buf,W.pending_out,O,C.next_out),C.next_out+=O,W.pending_out+=O,C.total_out+=O,C.avail_out-=O,W.pending-=O,W.pending===0&&(W.pending_out=0))}function F(C,W){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,W),C.block_start=C.strstart,V(C.strm)}function oe(C,W){C.pending_buf[C.pending++]=W}function te(C,W){C.pending_buf[C.pending++]=W>>>8&255,C.pending_buf[C.pending++]=255&W}function ee(C,W){var O,R,P=C.max_chain_length,L=C.strstart,K=C.prev_length,Y=C.nice_match,U=C.strstart>C.w_size-H?C.strstart-(C.w_size-H):0,Q=C.window,re=C.w_mask,j=C.prev,ue=C.strstart+b,Pe=Q[L+K-1],ve=Q[L+K];C.prev_length>=C.good_match&&(P>>=2),Y>C.lookahead&&(Y=C.lookahead);do if(Q[(O=W)+K]===ve&&Q[O+K-1]===Pe&&Q[O]===Q[L]&&Q[++O]===Q[L+1]){L+=2,O++;do;while(Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&Q[++L]===Q[++O]&&L<ue);if(R=b-(ue-L),L=ue-b,K<R){if(C.match_start=W,Y<=(K=R))break;Pe=Q[L+K-1],ve=Q[L+K]}}while((W=j[W&re])>U&&--P!=0);return K<=C.lookahead?K:C.lookahead}function Te(C){var W,O,R,P,L,K,Y,U,Q,re,j=C.w_size;do{if(P=C.window_size-C.lookahead-C.strstart,C.strstart>=j+(j-H)){for(s.arraySet(C.window,C.window,j,j,0),C.match_start-=j,C.strstart-=j,C.block_start-=j,W=O=C.hash_size;R=C.head[--W],C.head[W]=j<=R?R-j:0,--O;);for(W=O=j;R=C.prev[--W],C.prev[W]=j<=R?R-j:0,--O;);P+=j}if(C.strm.avail_in===0)break;if(K=C.strm,Y=C.window,U=C.strstart+C.lookahead,Q=P,re=void 0,re=K.avail_in,Q<re&&(re=Q),O=re===0?0:(K.avail_in-=re,s.arraySet(Y,K.input,K.next_in,re,U),K.state.wrap===1?K.adler=c(K.adler,Y,re,U):K.state.wrap===2&&(K.adler=f(K.adler,Y,re,U)),K.next_in+=re,K.total_in+=re,re),C.lookahead+=O,C.lookahead+C.insert>=D)for(L=C.strstart-C.insert,C.ins_h=C.window[L],C.ins_h=(C.ins_h<<C.hash_shift^C.window[L+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[L+D-1])&C.hash_mask,C.prev[L&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=L,L++,C.insert--,!(C.lookahead+C.insert<D)););}while(C.lookahead<H&&C.strm.avail_in!==0)}function Ve(C,W){for(var O,R;;){if(C.lookahead<H){if(Te(C),C.lookahead<H&&W===h)return S;if(C.lookahead===0)break}if(O=0,C.lookahead>=D&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+D-1])&C.hash_mask,O=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),O!==0&&C.strstart-O<=C.w_size-H&&(C.match_length=ee(C,O)),C.match_length>=D)if(R=a._tr_tally(C,C.strstart-C.match_start,C.match_length-D),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=D){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+D-1])&C.hash_mask,O=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else R=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(R&&(F(C,!1),C.strm.avail_out===0))return S}return C.insert=C.strstart<D-1?C.strstart:D-1,W===p?(F(C,!0),C.strm.avail_out===0?ae:q):C.last_lit&&(F(C,!1),C.strm.avail_out===0)?S:G}function ge(C,W){for(var O,R,P;;){if(C.lookahead<H){if(Te(C),C.lookahead<H&&W===h)return S;if(C.lookahead===0)break}if(O=0,C.lookahead>=D&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+D-1])&C.hash_mask,O=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=D-1,O!==0&&C.prev_length<C.max_lazy_match&&C.strstart-O<=C.w_size-H&&(C.match_length=ee(C,O),C.match_length<=5&&(C.strategy===1||C.match_length===D&&4096<C.strstart-C.match_start)&&(C.match_length=D-1)),C.prev_length>=D&&C.match_length<=C.prev_length){for(P=C.strstart+C.lookahead-D,R=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-D),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=P&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+D-1])&C.hash_mask,O=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=D-1,C.strstart++,R&&(F(C,!1),C.strm.avail_out===0))return S}else if(C.match_available){if((R=a._tr_tally(C,0,C.window[C.strstart-1]))&&F(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return S}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(R=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<D-1?C.strstart:D-1,W===p?(F(C,!0),C.strm.avail_out===0?ae:q):C.last_lit&&(F(C,!1),C.strm.avail_out===0)?S:G}function _e(C,W,O,R,P){this.good_length=C,this.max_lazy=W,this.nice_length=O,this.max_chain=R,this.func=P}function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*k),this.dyn_dtree=new s.Buf16(2*(2*A+1)),this.bl_tree=new s.Buf16(2*(2*I+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*E+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ue(C){var W;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=y,(W=C.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?M:z,C.adler=W.wrap===2?0:1,W.last_flush=h,a._tr_init(W),m):J(C,_)}function At(C){var W=Ue(C);return W===m&&function(O){O.window_size=2*O.w_size,X(O.head),O.max_lazy_match=o[O.level].max_lazy,O.good_match=o[O.level].good_length,O.nice_match=o[O.level].nice_length,O.max_chain_length=o[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=D-1,O.match_available=0,O.ins_h=0}(C.state),W}function yt(C,W,O,R,P,L){if(!C)return _;var K=1;if(W===g&&(W=6),R<0?(K=0,R=-R):15<R&&(K=2,R-=16),P<1||w<P||O!==v||R<8||15<R||W<0||9<W||L<0||x<L)return J(C,_);R===8&&(R=9);var Y=new Xe;return(C.state=Y).strm=C,Y.wrap=K,Y.gzhead=null,Y.w_bits=R,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=P+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+D-1)/D),Y.window=new s.Buf8(2*Y.w_size),Y.head=new s.Buf16(Y.hash_size),Y.prev=new s.Buf16(Y.w_size),Y.lit_bufsize=1<<P+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new s.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=W,Y.strategy=L,Y.method=O,At(C)}o=[new _e(0,0,0,0,function(C,W){var O=65535;for(O>C.pending_buf_size-5&&(O=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Te(C),C.lookahead===0&&W===h)return S;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var R=C.block_start+O;if((C.strstart===0||C.strstart>=R)&&(C.lookahead=C.strstart-R,C.strstart=R,F(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-H&&(F(C,!1),C.strm.avail_out===0))return S}return C.insert=0,W===p?(F(C,!0),C.strm.avail_out===0?ae:q):(C.strstart>C.block_start&&(F(C,!1),C.strm.avail_out),S)}),new _e(4,4,8,4,Ve),new _e(4,5,16,8,Ve),new _e(4,6,32,32,Ve),new _e(4,4,16,16,ge),new _e(8,16,32,32,ge),new _e(8,16,128,128,ge),new _e(8,32,128,256,ge),new _e(32,128,258,1024,ge),new _e(32,258,258,4096,ge)],i.deflateInit=function(C,W){return yt(C,W,v,15,8,0)},i.deflateInit2=yt,i.deflateReset=At,i.deflateResetKeep=Ue,i.deflateSetHeader=function(C,W){return C&&C.state?C.state.wrap!==2?_:(C.state.gzhead=W,m):_},i.deflate=function(C,W){var O,R,P,L;if(!C||!C.state||5<W||W<0)return C?J(C,_):_;if(R=C.state,!C.output||!C.input&&C.avail_in!==0||R.status===666&&W!==p)return J(C,C.avail_out===0?-5:_);if(R.strm=C,O=R.last_flush,R.last_flush=W,R.status===M)if(R.wrap===2)C.adler=0,oe(R,31),oe(R,139),oe(R,8),R.gzhead?(oe(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),oe(R,255&R.gzhead.time),oe(R,R.gzhead.time>>8&255),oe(R,R.gzhead.time>>16&255),oe(R,R.gzhead.time>>24&255),oe(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),oe(R,255&R.gzhead.os),R.gzhead.extra&&R.gzhead.extra.length&&(oe(R,255&R.gzhead.extra.length),oe(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(C.adler=f(C.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(oe(R,0),oe(R,0),oe(R,0),oe(R,0),oe(R,0),oe(R,R.level===9?2:2<=R.strategy||R.level<2?4:0),oe(R,3),R.status=z);else{var K=v+(R.w_bits-8<<4)<<8;K|=(2<=R.strategy||R.level<2?0:R.level<6?1:R.level===6?2:3)<<6,R.strstart!==0&&(K|=32),K+=31-K%31,R.status=z,te(R,K),R.strstart!==0&&(te(R,C.adler>>>16),te(R,65535&C.adler)),C.adler=1}if(R.status===69)if(R.gzhead.extra){for(P=R.pending;R.gzindex<(65535&R.gzhead.extra.length)&&(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&&R.pending>P&&(C.adler=f(C.adler,R.pending_buf,R.pending-P,P)),V(C),P=R.pending,R.pending!==R.pending_buf_size));)oe(R,255&R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&&R.pending>P&&(C.adler=f(C.adler,R.pending_buf,R.pending-P,P)),R.gzindex===R.gzhead.extra.length&&(R.gzindex=0,R.status=73)}else R.status=73;if(R.status===73)if(R.gzhead.name){P=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>P&&(C.adler=f(C.adler,R.pending_buf,R.pending-P,P)),V(C),P=R.pending,R.pending===R.pending_buf_size)){L=1;break}L=R.gzindex<R.gzhead.name.length?255&R.gzhead.name.charCodeAt(R.gzindex++):0,oe(R,L)}while(L!==0);R.gzhead.hcrc&&R.pending>P&&(C.adler=f(C.adler,R.pending_buf,R.pending-P,P)),L===0&&(R.gzindex=0,R.status=91)}else R.status=91;if(R.status===91)if(R.gzhead.comment){P=R.pending;do{if(R.pending===R.pending_buf_size&&(R.gzhead.hcrc&&R.pending>P&&(C.adler=f(C.adler,R.pending_buf,R.pending-P,P)),V(C),P=R.pending,R.pending===R.pending_buf_size)){L=1;break}L=R.gzindex<R.gzhead.comment.length?255&R.gzhead.comment.charCodeAt(R.gzindex++):0,oe(R,L)}while(L!==0);R.gzhead.hcrc&&R.pending>P&&(C.adler=f(C.adler,R.pending_buf,R.pending-P,P)),L===0&&(R.status=103)}else R.status=103;if(R.status===103&&(R.gzhead.hcrc?(R.pending+2>R.pending_buf_size&&V(C),R.pending+2<=R.pending_buf_size&&(oe(R,255&C.adler),oe(R,C.adler>>8&255),C.adler=0,R.status=z)):R.status=z),R.pending!==0){if(V(C),C.avail_out===0)return R.last_flush=-1,m}else if(C.avail_in===0&&B(W)<=B(O)&&W!==p)return J(C,-5);if(R.status===666&&C.avail_in!==0)return J(C,-5);if(C.avail_in!==0||R.lookahead!==0||W!==h&&R.status!==666){var Y=R.strategy===2?function(U,Q){for(var re;;){if(U.lookahead===0&&(Te(U),U.lookahead===0)){if(Q===h)return S;break}if(U.match_length=0,re=a._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,re&&(F(U,!1),U.strm.avail_out===0))return S}return U.insert=0,Q===p?(F(U,!0),U.strm.avail_out===0?ae:q):U.last_lit&&(F(U,!1),U.strm.avail_out===0)?S:G}(R,W):R.strategy===3?function(U,Q){for(var re,j,ue,Pe,ve=U.window;;){if(U.lookahead<=b){if(Te(U),U.lookahead<=b&&Q===h)return S;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=D&&0<U.strstart&&(j=ve[ue=U.strstart-1])===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]){Pe=U.strstart+b;do;while(j===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]&&j===ve[++ue]&&ue<Pe);U.match_length=b-(Pe-ue),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=D?(re=a._tr_tally(U,1,U.match_length-D),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(re=a._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),re&&(F(U,!1),U.strm.avail_out===0))return S}return U.insert=0,Q===p?(F(U,!0),U.strm.avail_out===0?ae:q):U.last_lit&&(F(U,!1),U.strm.avail_out===0)?S:G}(R,W):o[R.level].func(R,W);if(Y!==ae&&Y!==q||(R.status=666),Y===S||Y===ae)return C.avail_out===0&&(R.last_flush=-1),m;if(Y===G&&(W===1?a._tr_align(R):W!==5&&(a._tr_stored_block(R,0,0,!1),W===3&&(X(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),V(C),C.avail_out===0))return R.last_flush=-1,m}return W!==p?m:R.wrap<=0?1:(R.wrap===2?(oe(R,255&C.adler),oe(R,C.adler>>8&255),oe(R,C.adler>>16&255),oe(R,C.adler>>24&255),oe(R,255&C.total_in),oe(R,C.total_in>>8&255),oe(R,C.total_in>>16&255),oe(R,C.total_in>>24&255)):(te(R,C.adler>>>16),te(R,65535&C.adler)),V(C),0<R.wrap&&(R.wrap=-R.wrap),R.pending!==0?m:1)},i.deflateEnd=function(C){var W;return C&&C.state?(W=C.state.status)!==M&&W!==69&&W!==73&&W!==91&&W!==103&&W!==z&&W!==666?J(C,_):(C.state=null,W===z?J(C,-3):m):_},i.deflateSetDictionary=function(C,W){var O,R,P,L,K,Y,U,Q,re=W.length;if(!C||!C.state||(L=(O=C.state).wrap)===2||L===1&&O.status!==M||O.lookahead)return _;for(L===1&&(C.adler=c(C.adler,W,re,0)),O.wrap=0,re>=O.w_size&&(L===0&&(X(O.head),O.strstart=0,O.block_start=0,O.insert=0),Q=new s.Buf8(O.w_size),s.arraySet(Q,W,re-O.w_size,O.w_size,0),W=Q,re=O.w_size),K=C.avail_in,Y=C.next_in,U=C.input,C.avail_in=re,C.next_in=0,C.input=W,Te(O);O.lookahead>=D;){for(R=O.strstart,P=O.lookahead-(D-1);O.ins_h=(O.ins_h<<O.hash_shift^O.window[R+D-1])&O.hash_mask,O.prev[R&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=R,R++,--P;);O.strstart=R,O.lookahead=D-1,Te(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=D-1,O.match_available=0,C.next_in=Y,C.input=U,C.avail_in=K,O.wrap=L,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(o,s){var a,c,f,d,h,p,m,_,g,x,y,v,w,E,A,I,k,N,D,b,H,M,z,S,G;a=o.state,c=o.next_in,S=o.input,f=c+(o.avail_in-5),d=o.next_out,G=o.output,h=d-(s-o.avail_out),p=d+(o.avail_out-257),m=a.dmax,_=a.wsize,g=a.whave,x=a.wnext,y=a.window,v=a.hold,w=a.bits,E=a.lencode,A=a.distcode,I=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{w<15&&(v+=S[c++]<<w,w+=8,v+=S[c++]<<w,w+=8),N=E[v&I];t:for(;;){if(v>>>=D=N>>>24,w-=D,(D=N>>>16&255)===0)G[d++]=65535&N;else{if(!(16&D)){if(!(64&D)){N=E[(65535&N)+(v&(1<<D)-1)];continue t}if(32&D){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}b=65535&N,(D&=15)&&(w<D&&(v+=S[c++]<<w,w+=8),b+=v&(1<<D)-1,v>>>=D,w-=D),w<15&&(v+=S[c++]<<w,w+=8,v+=S[c++]<<w,w+=8),N=A[v&k];n:for(;;){if(v>>>=D=N>>>24,w-=D,!(16&(D=N>>>16&255))){if(!(64&D)){N=A[(65535&N)+(v&(1<<D)-1)];continue n}o.msg="invalid distance code",a.mode=30;break e}if(H=65535&N,w<(D&=15)&&(v+=S[c++]<<w,(w+=8)<D&&(v+=S[c++]<<w,w+=8)),m<(H+=v&(1<<D)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=D,w-=D,(D=d-h)<H){if(g<(D=H-D)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(z=y,(M=0)===x){if(M+=_-D,D<b){for(b-=D;G[d++]=y[M++],--D;);M=d-H,z=G}}else if(x<D){if(M+=_+x-D,(D-=x)<b){for(b-=D;G[d++]=y[M++],--D;);if(M=0,x<b){for(b-=D=x;G[d++]=y[M++],--D;);M=d-H,z=G}}}else if(M+=x-D,D<b){for(b-=D;G[d++]=y[M++],--D;);M=d-H,z=G}for(;2<b;)G[d++]=z[M++],G[d++]=z[M++],G[d++]=z[M++],b-=3;b&&(G[d++]=z[M++],1<b&&(G[d++]=z[M++]))}else{for(M=d-H;G[d++]=G[M++],G[d++]=G[M++],G[d++]=G[M++],2<(b-=3););b&&(G[d++]=G[M++],1<b&&(G[d++]=G[M++]))}break}}break}}while(c<f&&d<p);c-=b=w>>3,v&=(1<<(w-=b<<3))-1,o.next_in=c,o.next_out=d,o.avail_in=c<f?f-c+5:5-(c-f),o.avail_out=d<p?p-d+257:257-(d-p),a.hold=v,a.bits=w}},{}],49:[function(n,r,i){var o=n("../utils/common"),s=n("./adler32"),a=n("./crc32"),c=n("./inffast"),f=n("./inftrees"),d=1,h=2,p=0,m=-2,_=1,g=852,x=592;function y(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(M){var z;return M&&M.state?(z=M.state,M.total_in=M.total_out=z.total=0,M.msg="",z.wrap&&(M.adler=1&z.wrap),z.mode=_,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new o.Buf32(g),z.distcode=z.distdyn=new o.Buf32(x),z.sane=1,z.back=-1,p):m}function E(M){var z;return M&&M.state?((z=M.state).wsize=0,z.whave=0,z.wnext=0,w(M)):m}function A(M,z){var S,G;return M&&M.state?(G=M.state,z<0?(S=0,z=-z):(S=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?m:(G.window!==null&&G.wbits!==z&&(G.window=null),G.wrap=S,G.wbits=z,E(M))):m}function I(M,z){var S,G;return M?(G=new v,(M.state=G).window=null,(S=A(M,z))!==p&&(M.state=null),S):m}var k,N,D=!0;function b(M){if(D){var z;for(k=new o.Buf32(512),N=new o.Buf32(32),z=0;z<144;)M.lens[z++]=8;for(;z<256;)M.lens[z++]=9;for(;z<280;)M.lens[z++]=7;for(;z<288;)M.lens[z++]=8;for(f(d,M.lens,0,288,k,0,M.work,{bits:9}),z=0;z<32;)M.lens[z++]=5;f(h,M.lens,0,32,N,0,M.work,{bits:5}),D=!1}M.lencode=k,M.lenbits=9,M.distcode=N,M.distbits=5}function H(M,z,S,G){var ae,q=M.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new o.Buf8(q.wsize)),G>=q.wsize?(o.arraySet(q.window,z,S-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(G<(ae=q.wsize-q.wnext)&&(ae=G),o.arraySet(q.window,z,S-G,ae,q.wnext),(G-=ae)?(o.arraySet(q.window,z,S-G,G,0),q.wnext=G,q.whave=q.wsize):(q.wnext+=ae,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=ae))),0}i.inflateReset=E,i.inflateReset2=A,i.inflateResetKeep=w,i.inflateInit=function(M){return I(M,15)},i.inflateInit2=I,i.inflate=function(M,z){var S,G,ae,q,J,B,X,V,F,oe,te,ee,Te,Ve,ge,_e,Xe,Ue,At,yt,C,W,O,R,P=0,L=new o.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return m;(S=M.state).mode===12&&(S.mode=13),J=M.next_out,ae=M.output,X=M.avail_out,q=M.next_in,G=M.input,B=M.avail_in,V=S.hold,F=S.bits,oe=B,te=X,W=p;e:for(;;)switch(S.mode){case _:if(S.wrap===0){S.mode=13;break}for(;F<16;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(2&S.wrap&&V===35615){L[S.check=0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0),F=V=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&V)<<8)+(V>>8))%31){M.msg="incorrect header check",S.mode=30;break}if((15&V)!=8){M.msg="unknown compression method",S.mode=30;break}if(F-=4,C=8+(15&(V>>>=4)),S.wbits===0)S.wbits=C;else if(C>S.wbits){M.msg="invalid window size",S.mode=30;break}S.dmax=1<<C,M.adler=S.check=1,S.mode=512&V?10:12,F=V=0;break;case 2:for(;F<16;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(S.flags=V,(255&S.flags)!=8){M.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){M.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=V>>8&1),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0)),F=V=0,S.mode=3;case 3:for(;F<32;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}S.head&&(S.head.time=V),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,L[2]=V>>>16&255,L[3]=V>>>24&255,S.check=a(S.check,L,4,0)),F=V=0,S.mode=4;case 4:for(;F<16;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}S.head&&(S.head.xflags=255&V,S.head.os=V>>8),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0)),F=V=0,S.mode=5;case 5:if(1024&S.flags){for(;F<16;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}S.length=V,S.head&&(S.head.extra_len=V),512&S.flags&&(L[0]=255&V,L[1]=V>>>8&255,S.check=a(S.check,L,2,0)),F=V=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(B<(ee=S.length)&&(ee=B),ee&&(S.head&&(C=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),o.arraySet(S.head.extra,G,q,ee,C)),512&S.flags&&(S.check=a(S.check,G,ee,q)),B-=ee,q+=ee,S.length-=ee),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(B===0)break e;for(ee=0;C=G[q+ee++],S.head&&C&&S.length<65536&&(S.head.name+=String.fromCharCode(C)),C&&ee<B;);if(512&S.flags&&(S.check=a(S.check,G,ee,q)),B-=ee,q+=ee,C)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(B===0)break e;for(ee=0;C=G[q+ee++],S.head&&C&&S.length<65536&&(S.head.comment+=String.fromCharCode(C)),C&&ee<B;);if(512&S.flags&&(S.check=a(S.check,G,ee,q)),B-=ee,q+=ee,C)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;F<16;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(V!==(65535&S.check)){M.msg="header crc mismatch",S.mode=30;break}F=V=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),M.adler=S.check=0,S.mode=12;break;case 10:for(;F<32;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}M.adler=S.check=y(V),F=V=0,S.mode=11;case 11:if(S.havedict===0)return M.next_out=J,M.avail_out=X,M.next_in=q,M.avail_in=B,S.hold=V,S.bits=F,2;M.adler=S.check=1,S.mode=12;case 12:if(z===5||z===6)break e;case 13:if(S.last){V>>>=7&F,F-=7&F,S.mode=27;break}for(;F<3;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}switch(S.last=1&V,F-=1,3&(V>>>=1)){case 0:S.mode=14;break;case 1:if(b(S),S.mode=20,z!==6)break;V>>>=2,F-=2;break e;case 2:S.mode=17;break;case 3:M.msg="invalid block type",S.mode=30}V>>>=2,F-=2;break;case 14:for(V>>>=7&F,F-=7&F;F<32;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if((65535&V)!=(V>>>16^65535)){M.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&V,F=V=0,S.mode=15,z===6)break e;case 15:S.mode=16;case 16:if(ee=S.length){if(B<ee&&(ee=B),X<ee&&(ee=X),ee===0)break e;o.arraySet(ae,G,q,ee,J),B-=ee,q+=ee,X-=ee,J+=ee,S.length-=ee;break}S.mode=12;break;case 17:for(;F<14;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(S.nlen=257+(31&V),V>>>=5,F-=5,S.ndist=1+(31&V),V>>>=5,F-=5,S.ncode=4+(15&V),V>>>=4,F-=4,286<S.nlen||30<S.ndist){M.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;F<3;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}S.lens[K[S.have++]]=7&V,V>>>=3,F-=3}for(;S.have<19;)S.lens[K[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,O={bits:S.lenbits},W=f(0,S.lens,0,19,S.lencode,0,S.work,O),S.lenbits=O.bits,W){M.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;_e=(P=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,Xe=65535&P,!((ge=P>>>24)<=F);){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(Xe<16)V>>>=ge,F-=ge,S.lens[S.have++]=Xe;else{if(Xe===16){for(R=ge+2;F<R;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(V>>>=ge,F-=ge,S.have===0){M.msg="invalid bit length repeat",S.mode=30;break}C=S.lens[S.have-1],ee=3+(3&V),V>>>=2,F-=2}else if(Xe===17){for(R=ge+3;F<R;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}F-=ge,C=0,ee=3+(7&(V>>>=ge)),V>>>=3,F-=3}else{for(R=ge+7;F<R;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}F-=ge,C=0,ee=11+(127&(V>>>=ge)),V>>>=7,F-=7}if(S.have+ee>S.nlen+S.ndist){M.msg="invalid bit length repeat",S.mode=30;break}for(;ee--;)S.lens[S.have++]=C}}if(S.mode===30)break;if(S.lens[256]===0){M.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,O={bits:S.lenbits},W=f(d,S.lens,0,S.nlen,S.lencode,0,S.work,O),S.lenbits=O.bits,W){M.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,O={bits:S.distbits},W=f(h,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,O),S.distbits=O.bits,W){M.msg="invalid distances set",S.mode=30;break}if(S.mode=20,z===6)break e;case 20:S.mode=21;case 21:if(6<=B&&258<=X){M.next_out=J,M.avail_out=X,M.next_in=q,M.avail_in=B,S.hold=V,S.bits=F,c(M,te),J=M.next_out,ae=M.output,X=M.avail_out,q=M.next_in,G=M.input,B=M.avail_in,V=S.hold,F=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;_e=(P=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,Xe=65535&P,!((ge=P>>>24)<=F);){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(_e&&!(240&_e)){for(Ue=ge,At=_e,yt=Xe;_e=(P=S.lencode[yt+((V&(1<<Ue+At)-1)>>Ue)])>>>16&255,Xe=65535&P,!(Ue+(ge=P>>>24)<=F);){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}V>>>=Ue,F-=Ue,S.back+=Ue}if(V>>>=ge,F-=ge,S.back+=ge,S.length=Xe,_e===0){S.mode=26;break}if(32&_e){S.back=-1,S.mode=12;break}if(64&_e){M.msg="invalid literal/length code",S.mode=30;break}S.extra=15&_e,S.mode=22;case 22:if(S.extra){for(R=S.extra;F<R;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}S.length+=V&(1<<S.extra)-1,V>>>=S.extra,F-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;_e=(P=S.distcode[V&(1<<S.distbits)-1])>>>16&255,Xe=65535&P,!((ge=P>>>24)<=F);){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(!(240&_e)){for(Ue=ge,At=_e,yt=Xe;_e=(P=S.distcode[yt+((V&(1<<Ue+At)-1)>>Ue)])>>>16&255,Xe=65535&P,!(Ue+(ge=P>>>24)<=F);){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}V>>>=Ue,F-=Ue,S.back+=Ue}if(V>>>=ge,F-=ge,S.back+=ge,64&_e){M.msg="invalid distance code",S.mode=30;break}S.offset=Xe,S.extra=15&_e,S.mode=24;case 24:if(S.extra){for(R=S.extra;F<R;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}S.offset+=V&(1<<S.extra)-1,V>>>=S.extra,F-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){M.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(X===0)break e;if(ee=te-X,S.offset>ee){if((ee=S.offset-ee)>S.whave&&S.sane){M.msg="invalid distance too far back",S.mode=30;break}Te=ee>S.wnext?(ee-=S.wnext,S.wsize-ee):S.wnext-ee,ee>S.length&&(ee=S.length),Ve=S.window}else Ve=ae,Te=J-S.offset,ee=S.length;for(X<ee&&(ee=X),X-=ee,S.length-=ee;ae[J++]=Ve[Te++],--ee;);S.length===0&&(S.mode=21);break;case 26:if(X===0)break e;ae[J++]=S.length,X--,S.mode=21;break;case 27:if(S.wrap){for(;F<32;){if(B===0)break e;B--,V|=G[q++]<<F,F+=8}if(te-=X,M.total_out+=te,S.total+=te,te&&(M.adler=S.check=S.flags?a(S.check,ae,te,J-te):s(S.check,ae,te,J-te)),te=X,(S.flags?V:y(V))!==S.check){M.msg="incorrect data check",S.mode=30;break}F=V=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;F<32;){if(B===0)break e;B--,V+=G[q++]<<F,F+=8}if(V!==(4294967295&S.total)){M.msg="incorrect length check",S.mode=30;break}F=V=0}S.mode=29;case 29:W=1;break e;case 30:W=-3;break e;case 31:return-4;case 32:default:return m}return M.next_out=J,M.avail_out=X,M.next_in=q,M.avail_in=B,S.hold=V,S.bits=F,(S.wsize||te!==M.avail_out&&S.mode<30&&(S.mode<27||z!==4))&&H(M,M.output,M.next_out,te-M.avail_out)?(S.mode=31,-4):(oe-=M.avail_in,te-=M.avail_out,M.total_in+=oe,M.total_out+=te,S.total+=te,S.wrap&&te&&(M.adler=S.check=S.flags?a(S.check,ae,te,M.next_out-te):s(S.check,ae,te,M.next_out-te)),M.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(oe==0&&te===0||z===4)&&W===p&&(W=-5),W)},i.inflateEnd=function(M){if(!M||!M.state)return m;var z=M.state;return z.window&&(z.window=null),M.state=null,p},i.inflateGetHeader=function(M,z){var S;return M&&M.state&&2&(S=M.state).wrap?((S.head=z).done=!1,p):m},i.inflateSetDictionary=function(M,z){var S,G=z.length;return M&&M.state?(S=M.state).wrap!==0&&S.mode!==11?m:S.mode===11&&s(1,z,G,0)!==S.check?-3:H(M,z,G,G)?(S.mode=31,-4):(S.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var o=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,m,_,g,x,y){var v,w,E,A,I,k,N,D,b,H=y.bits,M=0,z=0,S=0,G=0,ae=0,q=0,J=0,B=0,X=0,V=0,F=null,oe=0,te=new o.Buf16(16),ee=new o.Buf16(16),Te=null,Ve=0;for(M=0;M<=15;M++)te[M]=0;for(z=0;z<m;z++)te[h[p+z]]++;for(ae=H,G=15;1<=G&&te[G]===0;G--);if(G<ae&&(ae=G),G===0)return _[g++]=20971520,_[g++]=20971520,y.bits=1,0;for(S=1;S<G&&te[S]===0;S++);for(ae<S&&(ae=S),M=B=1;M<=15;M++)if(B<<=1,(B-=te[M])<0)return-1;if(0<B&&(d===0||G!==1))return-1;for(ee[1]=0,M=1;M<15;M++)ee[M+1]=ee[M]+te[M];for(z=0;z<m;z++)h[p+z]!==0&&(x[ee[h[p+z]]++]=z);if(k=d===0?(F=Te=x,19):d===1?(F=s,oe-=257,Te=a,Ve-=257,256):(F=c,Te=f,-1),M=S,I=g,J=z=V=0,E=-1,A=(X=1<<(q=ae))-1,d===1&&852<X||d===2&&592<X)return 1;for(;;){for(N=M-J,b=x[z]<k?(D=0,x[z]):x[z]>k?(D=Te[Ve+x[z]],F[oe+x[z]]):(D=96,0),v=1<<M-J,S=w=1<<q;_[I+(V>>J)+(w-=v)]=N<<24|D<<16|b|0,w!==0;);for(v=1<<M-1;V&v;)v>>=1;if(v!==0?(V&=v-1,V+=v):V=0,z++,--te[M]==0){if(M===G)break;M=h[p+x[z]]}if(ae<M&&(V&A)!==E){for(J===0&&(J=ae),I+=S,B=1<<(q=M-J);q+J<G&&!((B-=te[q+J])<=0);)q++,B<<=1;if(X+=1<<q,d===1&&852<X||d===2&&592<X)return 1;_[E=V&A]=ae<<24|q<<16|I-g|0}}return V!==0&&(_[I+V]=M-J<<24|64<<16|0),y.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var o=n("../utils/common"),s=0,a=1;function c(P){for(var L=P.length;0<=--L;)P[L]=0}var f=0,d=29,h=256,p=h+1+d,m=30,_=19,g=2*p+1,x=15,y=16,v=7,w=256,E=16,A=17,I=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(p+2));c(H);var M=new Array(2*m);c(M);var z=new Array(512);c(z);var S=new Array(256);c(S);var G=new Array(d);c(G);var ae,q,J,B=new Array(m);function X(P,L,K,Y,U){this.static_tree=P,this.extra_bits=L,this.extra_base=K,this.elems=Y,this.max_length=U,this.has_stree=P&&P.length}function V(P,L){this.dyn_tree=P,this.max_code=0,this.stat_desc=L}function F(P){return P<256?z[P]:z[256+(P>>>7)]}function oe(P,L){P.pending_buf[P.pending++]=255&L,P.pending_buf[P.pending++]=L>>>8&255}function te(P,L,K){P.bi_valid>y-K?(P.bi_buf|=L<<P.bi_valid&65535,oe(P,P.bi_buf),P.bi_buf=L>>y-P.bi_valid,P.bi_valid+=K-y):(P.bi_buf|=L<<P.bi_valid&65535,P.bi_valid+=K)}function ee(P,L,K){te(P,K[2*L],K[2*L+1])}function Te(P,L){for(var K=0;K|=1&P,P>>>=1,K<<=1,0<--L;);return K>>>1}function Ve(P,L,K){var Y,U,Q=new Array(x+1),re=0;for(Y=1;Y<=x;Y++)Q[Y]=re=re+K[Y-1]<<1;for(U=0;U<=L;U++){var j=P[2*U+1];j!==0&&(P[2*U]=Te(Q[j]++,j))}}function ge(P){var L;for(L=0;L<p;L++)P.dyn_ltree[2*L]=0;for(L=0;L<m;L++)P.dyn_dtree[2*L]=0;for(L=0;L<_;L++)P.bl_tree[2*L]=0;P.dyn_ltree[2*w]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function _e(P){8<P.bi_valid?oe(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function Xe(P,L,K,Y){var U=2*L,Q=2*K;return P[U]<P[Q]||P[U]===P[Q]&&Y[L]<=Y[K]}function Ue(P,L,K){for(var Y=P.heap[K],U=K<<1;U<=P.heap_len&&(U<P.heap_len&&Xe(L,P.heap[U+1],P.heap[U],P.depth)&&U++,!Xe(L,Y,P.heap[U],P.depth));)P.heap[K]=P.heap[U],K=U,U<<=1;P.heap[K]=Y}function At(P,L,K){var Y,U,Q,re,j=0;if(P.last_lit!==0)for(;Y=P.pending_buf[P.d_buf+2*j]<<8|P.pending_buf[P.d_buf+2*j+1],U=P.pending_buf[P.l_buf+j],j++,Y===0?ee(P,U,L):(ee(P,(Q=S[U])+h+1,L),(re=k[Q])!==0&&te(P,U-=G[Q],re),ee(P,Q=F(--Y),K),(re=N[Q])!==0&&te(P,Y-=B[Q],re)),j<P.last_lit;);ee(P,w,L)}function yt(P,L){var K,Y,U,Q=L.dyn_tree,re=L.stat_desc.static_tree,j=L.stat_desc.has_stree,ue=L.stat_desc.elems,Pe=-1;for(P.heap_len=0,P.heap_max=g,K=0;K<ue;K++)Q[2*K]!==0?(P.heap[++P.heap_len]=Pe=K,P.depth[K]=0):Q[2*K+1]=0;for(;P.heap_len<2;)Q[2*(U=P.heap[++P.heap_len]=Pe<2?++Pe:0)]=1,P.depth[U]=0,P.opt_len--,j&&(P.static_len-=re[2*U+1]);for(L.max_code=Pe,K=P.heap_len>>1;1<=K;K--)Ue(P,Q,K);for(U=ue;K=P.heap[1],P.heap[1]=P.heap[P.heap_len--],Ue(P,Q,1),Y=P.heap[1],P.heap[--P.heap_max]=K,P.heap[--P.heap_max]=Y,Q[2*U]=Q[2*K]+Q[2*Y],P.depth[U]=(P.depth[K]>=P.depth[Y]?P.depth[K]:P.depth[Y])+1,Q[2*K+1]=Q[2*Y+1]=U,P.heap[1]=U++,Ue(P,Q,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],function(ve,Be){var Se,Yt,Ir,$e,ri,Xn,Mt=Be.dyn_tree,$s=Be.max_code,ne=Be.stat_desc.static_tree,he=Be.stat_desc.has_stree,we=Be.stat_desc.extra_bits,Ie=Be.stat_desc.extra_base,me=Be.stat_desc.max_length,Ee=0;for($e=0;$e<=x;$e++)ve.bl_count[$e]=0;for(Mt[2*ve.heap[ve.heap_max]+1]=0,Se=ve.heap_max+1;Se<g;Se++)me<($e=Mt[2*Mt[2*(Yt=ve.heap[Se])+1]+1]+1)&&($e=me,Ee++),Mt[2*Yt+1]=$e,$s<Yt||(ve.bl_count[$e]++,ri=0,Ie<=Yt&&(ri=we[Yt-Ie]),Xn=Mt[2*Yt],ve.opt_len+=Xn*($e+ri),he&&(ve.static_len+=Xn*(ne[2*Yt+1]+ri)));if(Ee!==0){do{for($e=me-1;ve.bl_count[$e]===0;)$e--;ve.bl_count[$e]--,ve.bl_count[$e+1]+=2,ve.bl_count[me]--,Ee-=2}while(0<Ee);for($e=me;$e!==0;$e--)for(Yt=ve.bl_count[$e];Yt!==0;)$s<(Ir=ve.heap[--Se])||(Mt[2*Ir+1]!==$e&&(ve.opt_len+=($e-Mt[2*Ir+1])*Mt[2*Ir],Mt[2*Ir+1]=$e),Yt--)}}(P,L),Ve(Q,Pe,P.bl_count)}function C(P,L,K){var Y,U,Q=-1,re=L[1],j=0,ue=7,Pe=4;for(re===0&&(ue=138,Pe=3),L[2*(K+1)+1]=65535,Y=0;Y<=K;Y++)U=re,re=L[2*(Y+1)+1],++j<ue&&U===re||(j<Pe?P.bl_tree[2*U]+=j:U!==0?(U!==Q&&P.bl_tree[2*U]++,P.bl_tree[2*E]++):j<=10?P.bl_tree[2*A]++:P.bl_tree[2*I]++,Q=U,Pe=(j=0)===re?(ue=138,3):U===re?(ue=6,3):(ue=7,4))}function W(P,L,K){var Y,U,Q=-1,re=L[1],j=0,ue=7,Pe=4;for(re===0&&(ue=138,Pe=3),Y=0;Y<=K;Y++)if(U=re,re=L[2*(Y+1)+1],!(++j<ue&&U===re)){if(j<Pe)for(;ee(P,U,P.bl_tree),--j!=0;);else U!==0?(U!==Q&&(ee(P,U,P.bl_tree),j--),ee(P,E,P.bl_tree),te(P,j-3,2)):j<=10?(ee(P,A,P.bl_tree),te(P,j-3,3)):(ee(P,I,P.bl_tree),te(P,j-11,7));Q=U,Pe=(j=0)===re?(ue=138,3):U===re?(ue=6,3):(ue=7,4)}}c(B);var O=!1;function R(P,L,K,Y){te(P,(f<<1)+(Y?1:0),3),function(U,Q,re,j){_e(U),oe(U,re),oe(U,~re),o.arraySet(U.pending_buf,U.window,Q,re,U.pending),U.pending+=re}(P,L,K)}i._tr_init=function(P){O||(function(){var L,K,Y,U,Q,re=new Array(x+1);for(U=Y=0;U<d-1;U++)for(G[U]=Y,L=0;L<1<<k[U];L++)S[Y++]=U;for(S[Y-1]=U,U=Q=0;U<16;U++)for(B[U]=Q,L=0;L<1<<N[U];L++)z[Q++]=U;for(Q>>=7;U<m;U++)for(B[U]=Q<<7,L=0;L<1<<N[U]-7;L++)z[256+Q++]=U;for(K=0;K<=x;K++)re[K]=0;for(L=0;L<=143;)H[2*L+1]=8,L++,re[8]++;for(;L<=255;)H[2*L+1]=9,L++,re[9]++;for(;L<=279;)H[2*L+1]=7,L++,re[7]++;for(;L<=287;)H[2*L+1]=8,L++,re[8]++;for(Ve(H,p+1,re),L=0;L<m;L++)M[2*L+1]=5,M[2*L]=Te(L,5);ae=new X(H,k,h+1,p,x),q=new X(M,N,0,m,x),J=new X(new Array(0),D,0,_,v)}(),O=!0),P.l_desc=new V(P.dyn_ltree,ae),P.d_desc=new V(P.dyn_dtree,q),P.bl_desc=new V(P.bl_tree,J),P.bi_buf=0,P.bi_valid=0,ge(P)},i._tr_stored_block=R,i._tr_flush_block=function(P,L,K,Y){var U,Q,re=0;0<P.level?(P.strm.data_type===2&&(P.strm.data_type=function(j){var ue,Pe=4093624447;for(ue=0;ue<=31;ue++,Pe>>>=1)if(1&Pe&&j.dyn_ltree[2*ue]!==0)return s;if(j.dyn_ltree[18]!==0||j.dyn_ltree[20]!==0||j.dyn_ltree[26]!==0)return a;for(ue=32;ue<h;ue++)if(j.dyn_ltree[2*ue]!==0)return a;return s}(P)),yt(P,P.l_desc),yt(P,P.d_desc),re=function(j){var ue;for(C(j,j.dyn_ltree,j.l_desc.max_code),C(j,j.dyn_dtree,j.d_desc.max_code),yt(j,j.bl_desc),ue=_-1;3<=ue&&j.bl_tree[2*b[ue]+1]===0;ue--);return j.opt_len+=3*(ue+1)+5+5+4,ue}(P),U=P.opt_len+3+7>>>3,(Q=P.static_len+3+7>>>3)<=U&&(U=Q)):U=Q=K+5,K+4<=U&&L!==-1?R(P,L,K,Y):P.strategy===4||Q===U?(te(P,2+(Y?1:0),3),At(P,H,M)):(te(P,4+(Y?1:0),3),function(j,ue,Pe,ve){var Be;for(te(j,ue-257,5),te(j,Pe-1,5),te(j,ve-4,4),Be=0;Be<ve;Be++)te(j,j.bl_tree[2*b[Be]+1],3);W(j,j.dyn_ltree,ue-1),W(j,j.dyn_dtree,Pe-1)}(P,P.l_desc.max_code+1,P.d_desc.max_code+1,re+1),At(P,P.dyn_ltree,P.dyn_dtree)),ge(P),Y&&_e(P)},i._tr_tally=function(P,L,K){return P.pending_buf[P.d_buf+2*P.last_lit]=L>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&L,P.pending_buf[P.l_buf+P.last_lit]=255&K,P.last_lit++,L===0?P.dyn_ltree[2*K]++:(P.matches++,L--,P.dyn_ltree[2*(S[K]+h+1)]++,P.dyn_dtree[2*F(L)]++),P.last_lit===P.lit_bufsize-1},i._tr_align=function(P){te(P,2,3),ee(P,w,H),function(L){L.bi_valid===16?(oe(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(P)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(o){(function(s,a){if(!s.setImmediate){var c,f,d,h,p=1,m={},_=!1,g=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,c={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){v(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,A=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=A,E}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",w,!1):s.attachEvent("onmessage",w),function(E){s.postMessage(h+E,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(E){v(E.data)},function(E){d.port2.postMessage(E)}):g&&"onreadystatechange"in g.createElement("script")?(f=g.documentElement,function(E){var A=g.createElement("script");A.onreadystatechange=function(){v(E),A.onreadystatechange=null,f.removeChild(A),A=null},f.appendChild(A)}):function(E){setTimeout(v,0,E)},x.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var A=new Array(arguments.length-1),I=0;I<A.length;I++)A[I]=arguments[I+1];var k={callback:E,args:A};return m[p]=k,c(p),p++},x.clearImmediate=y}function y(E){delete m[E]}function v(E){if(_)setTimeout(v,0,E);else{var A=m[E];if(A){_=!0;try{(function(I){var k=I.callback,N=I.args;switch(N.length){case 0:k();break;case 1:k(N[0]);break;case 2:k(N[0],N[1]);break;case 3:k(N[0],N[1],N[2]);break;default:k.apply(a,N)}})(A)}finally{y(E),_=!1}}}}function w(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(h)===0&&v(+E.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof zs<"u"?zs:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(gw);var V1=gw.exports;const U1=r0(V1),yw=$.createContext({});function B1(t){const e=$.useRef(null);return e.current===null&&(e.current=t()),e.current}const Qd=$.createContext(null),vw=$.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function O1(t=!0){const e=$.useContext(Qd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=$.useId();$.useEffect(()=>{t&&i(o)},[t]);const s=$.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,s]:[!0]}const jd=typeof window<"u",$1=jd?$.useLayoutEffect:$.useEffect,Ht=t=>t;let _w=Ht;function eh(t){let e;return()=>(e===void 0&&(e=t()),e)}const Xi=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},On=t=>t*1e3,$n=t=>t/1e3,z1={useManualTiming:!1};function G1(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(f){o.has(f)&&(c.schedule(f),t()),f(s)}const c={schedule:(f,d=!1,h=!1)=>{const m=h&&r?e:n;return d&&o.add(f),m.has(f)||m.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(s=f,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,c.process(f))}};return c}const aa=["read","resolveKeyframes","update","preRender","render","postRender"],H1=40;function ww(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=aa.reduce((y,v)=>(y[v]=G1(o),y),{}),{read:a,resolveKeyframes:c,update:f,preRender:d,render:h,postRender:p}=s,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,H1),1),i.timestamp=y,i.isProcessing=!0,a.process(i),c.process(i),f.process(i),d.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:aa.reduce((y,v)=>{const w=s[v];return y[v]=(E,A=!1,I=!1)=>(n||_(),w.schedule(E,A,I)),y},{}),cancel:y=>{for(let v=0;v<aa.length;v++)s[aa[v]].cancel(y)},state:i,steps:s}}const{schedule:Fe,cancel:wr,state:dt,steps:Gu}=ww(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ht,!0),xw=$.createContext({strict:!1}),Um={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zi={};for(const t in Um)Zi[t]={isEnabled:e=>Um[t].some(n=>!!e[n])};function W1(t){for(const e in t)Zi[e]={...Zi[e],...t[e]}}const q1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||q1.has(t)}let Cw=t=>!yl(t);function J1(t){t&&(Cw=e=>e.startsWith("on")?!yl(e):t(e))}try{J1(require("@emotion/is-prop-valid").default)}catch{}function K1(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Cw(i)||n===!0&&yl(i)||!e&&!yl(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Y1(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Yl=$.createContext({});function gs(t){return typeof t=="string"||Array.isArray(t)}function Xl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const th=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nh=["initial",...th];function Zl(t){return Xl(t.animate)||nh.some(e=>gs(t[e]))}function Tw(t){return!!(Zl(t)||t.variants)}function X1(t,e){if(Zl(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gs(n)?n:void 0,animate:gs(r)?r:void 0}}return t.inherit!==!1?e:{}}function Z1(t){const{initial:e,animate:n}=X1(t,$.useContext(Yl));return $.useMemo(()=>({initial:e,animate:n}),[Bm(e),Bm(n)])}function Bm(t){return Array.isArray(t)?t.join(" "):t}const Q1=Symbol.for("motionComponentSymbol");function Ei(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function j1(t,e,n){return $.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ei(n)&&(n.current=r))},[e])}const rh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eA="framerAppearId",Sw="data-"+rh(eA),{schedule:ih}=ww(queueMicrotask,!1),Ew=$.createContext({});function tA(t,e,n,r,i){var o,s;const{visualElement:a}=$.useContext(Yl),c=$.useContext(xw),f=$.useContext(Qd),d=$.useContext(vw).reducedMotion,h=$.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=$.useContext(Ew);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&nA(h.current,n,i,m);const _=$.useRef(!1);$.useInsertionEffect(()=>{p&&_.current&&p.update(n,f)});const g=n[Sw],x=$.useRef(!!g&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,g))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,g)));return $1(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),ih.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),$.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),x.current=!1))}),p}function nA(t,e,n,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:c,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Aw(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||a&&Ei(a),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:f})}function Aw(t){if(t)return t.options.allowProjection!==!1?t.projection:Aw(t.parent)}function rA({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var o,s;t&&W1(t);function a(f,d){let h;const p={...$.useContext(vw),...f,layoutId:iA(f)},{isStatic:m}=p,_=Z1(f),g=r(f,m);if(!m&&jd){oA();const x=sA(p);h=x.MeasureLayout,_.visualElement=tA(i,g,p,e,x.ProjectionNode)}return T.jsxs(Yl.Provider,{value:_,children:[h&&_.visualElement?T.jsx(h,{visualElement:_.visualElement,...p}):null,n(i,f,j1(g,_.visualElement,d),g,m,_.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(s=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&s!==void 0?s:""})`}`;const c=$.forwardRef(a);return c[Q1]=i,c}function iA({layoutId:t}){const e=$.useContext(yw).id;return e&&t!==void 0?e+"-"+t:t}function oA(t,e){$.useContext(xw).strict}function sA(t){const{drag:e,layout:n}=Zi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const aA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oh(t){return typeof t!="string"||t.includes("-")?!1:!!(aA.indexOf(t)>-1||/[A-Z]/u.test(t))}function Om(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sh(t,e,n,r){if(typeof e=="function"){const[i,o]=Om(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Om(r);e=e(n!==void 0?n:t.custom,i,o)}return e}const ff=t=>Array.isArray(t),lA=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),uA=t=>ff(t)?t[t.length-1]||0:t,Tt=t=>!!(t&&t.getVelocity);function La(t){const e=Tt(t)?t.get():t;return lA(e)?e.toValue():e}function cA({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,o){const s={latestValues:fA(r,i,o,t),renderState:e()};return n&&(s.onMount=a=>n({props:r,current:a,...s}),s.onUpdate=a=>n(a)),s}const Pw=t=>(e,n)=>{const r=$.useContext(Yl),i=$.useContext(Qd),o=()=>cA(t,e,r,i);return n?o():B1(o)};function fA(t,e,n,r){const i={},o=r(t,{});for(const p in o)i[p]=La(o[p]);let{initial:s,animate:a}=t;const c=Zl(t),f=Tw(t);e&&f&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?a:s;if(h&&typeof h!="boolean"&&!Xl(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const _=sh(t,p[m]);if(_){const{transitionEnd:g,transition:x,...y}=_;for(const v in y){let w=y[v];if(Array.isArray(w)){const E=d?w.length-1:0;w=w[E]}w!==null&&(i[v]=w)}for(const v in g)i[v]=g[v]}}}return i}const no=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ei=new Set(no),Iw=t=>e=>typeof e=="string"&&e.startsWith(t),kw=Iw("--"),dA=Iw("var(--"),ah=t=>dA(t)?hA.test(t.split("/*")[0].trim()):!1,hA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rw=(t,e)=>e&&typeof t=="number"?e.transform(t):t,qn=(t,e,n)=>n>e?e:n<t?t:n,ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ys={...ro,transform:t=>qn(0,1,t)},la={...ro,default:1},Is=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),nr=Is("deg"),Rn=Is("%"),ce=Is("px"),pA=Is("vh"),mA=Is("vw"),$m={...Rn,parse:t=>Rn.parse(t)/100,transform:t=>Rn.transform(t*100)},gA={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce},yA={rotate:nr,rotateX:nr,rotateY:nr,rotateZ:nr,scale:la,scaleX:la,scaleY:la,scaleZ:la,skew:nr,skewX:nr,skewY:nr,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:ys,originX:$m,originY:$m,originZ:ce},zm={...ro,transform:Math.round},lh={...gA,...yA,zIndex:zm,size:ce,fillOpacity:ys,strokeOpacity:ys,numOctaves:zm},vA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_A=no.length;function wA(t,e,n){let r="",i=!0;for(let o=0;o<_A;o++){const s=no[o],a=t[s];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(s.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const f=Rw(a,lh[s]);if(!c){i=!1;const d=vA[s]||s;r+=`${d}(${f}) `}n&&(e[s]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function uh(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let s=!1,a=!1;for(const c in e){const f=e[c];if(ei.has(c)){s=!0;continue}else if(kw(c)){i[c]=f;continue}else{const d=Rw(f,lh[c]);c.startsWith("origin")?(a=!0,o[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=wA(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:f="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${f} ${d}`}}const xA={offset:"stroke-dashoffset",array:"stroke-dasharray"},CA={offset:"strokeDashoffset",array:"strokeDasharray"};function TA(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?xA:CA;t[o.offset]=ce.transform(-r);const s=ce.transform(e),a=ce.transform(n);t[o.array]=`${s} ${a}`}function Gm(t,e,n){return typeof t=="string"?t:ce.transform(e+n*t)}function SA(t,e,n){const r=Gm(e,t.x,t.width),i=Gm(n,t.y,t.height);return`${r} ${i}`}function ch(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...f},d,h){if(uh(t,f,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:_}=t;p.transform&&(_&&(m.transform=p.transform),delete p.transform),_&&(i!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=SA(_,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&TA(p,s,a,c,!1)}const fh=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Mw=()=>({...fh(),attrs:{}}),dh=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Nw(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const Dw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bw(t,e,n,r){Nw(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Dw.has(i)?i:rh(i),e.attrs[i])}const vl={};function EA(t){Object.assign(vl,t)}function Lw(t,{layout:e,layoutId:n}){return ei.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vl[t]||t==="opacity")}function hh(t,e,n){var r;const{style:i}=t,o={};for(const s in i)(Tt(i[s])||e.style&&Tt(e.style[s])||Lw(s,t)||((r=n?.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[s]=i[s]);return o}function Fw(t,e,n){const r=hh(t,e,n);for(const i in t)if(Tt(t[i])||Tt(e[i])){const o=no.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function AA(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Hm=["x","y","width","height","cx","cy","r"],PA={useVisualState:Pw({scrapeMotionValuesFromProps:Fw,createRenderState:Mw,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let o=!!t.drag;if(!o){for(const a in i)if(ei.has(a)){o=!0;break}}if(!o)return;let s=!e;if(e)for(let a=0;a<Hm.length;a++){const c=Hm[a];t[c]!==e[c]&&(s=!0)}s&&Fe.read(()=>{AA(n,r),Fe.render(()=>{ch(r,i,dh(n.tagName),t.transformTemplate),bw(n,r)})})}})},IA={useVisualState:Pw({scrapeMotionValuesFromProps:hh,createRenderState:fh})};function Vw(t,e,n){for(const r in e)!Tt(e[r])&&!Lw(r,n)&&(t[r]=e[r])}function kA({transformTemplate:t},e){return $.useMemo(()=>{const n=fh();return uh(n,e,t),Object.assign({},n.vars,n.style)},[e])}function RA(t,e){const n=t.style||{},r={};return Vw(r,n,t),Object.assign(r,kA(t,e)),r}function MA(t,e){const n={},r=RA(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function NA(t,e,n,r){const i=$.useMemo(()=>{const o=Mw();return ch(o,e,dh(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Vw(o,t.style,t),i.style={...o,...i.style}}return i}function DA(t=!1){return(n,r,i,{latestValues:o},s)=>{const c=(oh(n)?NA:MA)(r,o,s,n),f=K1(r,typeof n=="string",t),d=n!==$.Fragment?{...f,...c,ref:i}:{},{children:h}=r,p=$.useMemo(()=>Tt(h)?h.get():h,[h]);return $.createElement(n,{...d,children:p})}}function bA(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...oh(r)?PA:IA,preloadedFeatures:t,useRender:DA(i),createVisualElement:e,Component:r};return rA(s)}}function Uw(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ql(t,e,n){const r=t.getProps();return sh(r,e,n!==void 0?n:r.custom,t)}const LA=eh(()=>window.ScrollTimeline!==void 0);class FA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(LA()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class VA extends FA{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ph(t,e){return t?t[e]||t.default||t:void 0}const df=2e4;function Bw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<df;)e+=n,r=t.next(e);return e>=df?1/0:e}function mh(t){return typeof t=="function"}function Wm(t,e){t.timeline=e,t.onfinish=null}const gh=t=>Array.isArray(t)&&typeof t[0]=="number",UA={linearEasing:void 0};function BA(t,e){const n=eh(t);return()=>{var r;return(r=UA[e])!==null&&r!==void 0?r:n()}}const _l=BA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ow=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(Xi(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function $w(t){return!!(typeof t=="function"&&_l()||!t||typeof t=="string"&&(t in hf||_l())||gh(t)||Array.isArray(t)&&t.every($w))}const Ao=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,hf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ao([0,.65,.55,1]),circOut:Ao([.55,0,1,.45]),backIn:Ao([.31,.01,.66,-.59]),backOut:Ao([.33,1.53,.69,.99])};function zw(t,e){if(t)return typeof t=="function"&&_l()?Ow(t,e):gh(t)?Ao(t):Array.isArray(t)?t.map(n=>zw(n,e)||hf.easeOut):hf[t]}const cn={x:!1,y:!1};function Gw(){return cn.x||cn.y}function OA(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function Hw(t,e){const n=OA(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function qm(t){return e=>{e.pointerType==="touch"||Gw()||t(e)}}function $A(t,e,n={}){const[r,i,o]=Hw(t,n),s=qm(a=>{const{target:c}=a,f=e(a);if(typeof f!="function"||!c)return;const d=qm(h=>{f(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return r.forEach(a=>{a.addEventListener("pointerenter",s,i)}),o}const Ww=(t,e)=>e?t===e?!0:Ww(t,e.parentElement):!1,yh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function GA(t){return zA.has(t.tagName)||t.tabIndex!==-1}const Po=new WeakSet;function Jm(t){return e=>{e.key==="Enter"&&t(e)}}function Hu(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const HA=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Jm(()=>{if(Po.has(n))return;Hu(n,"down");const i=Jm(()=>{Hu(n,"up")}),o=()=>Hu(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Km(t){return yh(t)&&!Gw()}function WA(t,e,n={}){const[r,i,o]=Hw(t,n),s=a=>{const c=a.currentTarget;if(!Km(a)||Po.has(c))return;Po.add(c);const f=e(a),d=(m,_)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!Km(m)||!Po.has(c))&&(Po.delete(c),typeof f=="function"&&f(m,{success:_}))},h=m=>{d(m,n.useGlobalTarget||Ww(c,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!GA(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),a.addEventListener("focus",f=>HA(f,i),i)}),o}function qA(t){return t==="x"||t==="y"?cn[t]?null:(cn[t]=!0,()=>{cn[t]=!1}):cn.x||cn.y?null:(cn.x=cn.y=!0,()=>{cn.x=cn.y=!1})}const qw=new Set(["width","height","top","left","right","bottom",...no]);let Fa;function JA(){Fa=void 0}const Mn={now:()=>(Fa===void 0&&Mn.set(dt.isProcessing||z1.useManualTiming?dt.timestamp:performance.now()),Fa),set:t=>{Fa=t,queueMicrotask(JA)}};function vh(t,e){t.indexOf(e)===-1&&t.push(e)}function _h(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class wh{constructor(){this.subscriptions=[]}add(e){return vh(this.subscriptions,e),()=>_h(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Jw(t,e){return e?t*(1e3/e):0}const Ym=30,KA=t=>!isNaN(parseFloat(t));class YA{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Mn.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=KA(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wh);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ym)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ym);return Jw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vs(t,e){return new YA(t,e)}function XA(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vs(n))}function ZA(t,e){const n=Ql(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const s in o){const a=uA(o[s]);XA(t,s,a)}}function QA(t){return!!(Tt(t)&&t.add)}function pf(t,e){const n=t.getValue("willChange");if(QA(n))return n.add(e)}function Kw(t){return t.props[Sw]}const Yw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,jA=1e-7,eP=12;function tP(t,e,n,r,i){let o,s,a=0;do s=e+(n-e)/2,o=Yw(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>jA&&++a<eP);return s}function ks(t,e,n,r){if(t===e&&n===r)return Ht;const i=o=>tP(o,0,1,t,n);return o=>o===0||o===1?o:Yw(i(o),e,r)}const Xw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Zw=t=>e=>1-t(1-e),Qw=ks(.33,1.53,.69,.99),xh=Zw(Qw),jw=Xw(xh),ex=t=>(t*=2)<1?.5*xh(t):.5*(2-Math.pow(2,-10*(t-1))),Ch=t=>1-Math.sin(Math.acos(t)),tx=Zw(Ch),nx=Xw(Ch),rx=t=>/^0[^.\s]+$/u.test(t);function nP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||rx(t):!0}const qo=t=>Math.round(t*1e5)/1e5,Th=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rP(t){return t==null}const iP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sh=(t,e)=>n=>!!(typeof n=="string"&&iP.test(n)&&n.startsWith(t)||e&&!rP(n)&&Object.prototype.hasOwnProperty.call(n,e)),ix=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,s,a]=r.match(Th);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},oP=t=>qn(0,255,t),Wu={...ro,transform:t=>Math.round(oP(t))},Or={test:Sh("rgb","red"),parse:ix("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Wu.transform(t)+", "+Wu.transform(e)+", "+Wu.transform(n)+", "+qo(ys.transform(r))+")"};function sP(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mf={test:Sh("#"),parse:sP,transform:Or.transform},Ai={test:Sh("hsl","hue"),parse:ix("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rn.transform(qo(e))+", "+Rn.transform(qo(n))+", "+qo(ys.transform(r))+")"},xt={test:t=>Or.test(t)||mf.test(t)||Ai.test(t),parse:t=>Or.test(t)?Or.parse(t):Ai.test(t)?Ai.parse(t):mf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Or.transform(t):Ai.transform(t)},aP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lP(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Th))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(aP))===null||n===void 0?void 0:n.length)||0)>0}const ox="number",sx="color",uP="var",cP="var(",Xm="${}",fP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _s(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=e.replace(fP,c=>(xt.test(c)?(r.color.push(o),i.push(sx),n.push(xt.parse(c))):c.startsWith(cP)?(r.var.push(o),i.push(uP),n.push(c)):(r.number.push(o),i.push(ox),n.push(parseFloat(c))),++o,Xm)).split(Xm);return{values:n,split:a,indexes:r,types:i}}function ax(t){return _s(t).values}function lx(t){const{split:e,types:n}=_s(t),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const a=n[s];a===ox?o+=qo(i[s]):a===sx?o+=xt.transform(i[s]):o+=i[s]}return o}}const dP=t=>typeof t=="number"?0:t;function hP(t){const e=ax(t);return lx(t)(e.map(dP))}const xr={test:lP,parse:ax,createTransformer:lx,getAnimatableNone:hP},pP=new Set(["brightness","contrast","saturate","opacity"]);function mP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Th)||[];if(!r)return t;const i=n.replace(r,"");let o=pP.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const gP=/\b([a-z-]*)\(.*?\)/gu,gf={...xr,getAnimatableNone:t=>{const e=t.match(gP);return e?e.map(mP).join(" "):t}},yP={...lh,color:xt,backgroundColor:xt,outlineColor:xt,fill:xt,stroke:xt,borderColor:xt,borderTopColor:xt,borderRightColor:xt,borderBottomColor:xt,borderLeftColor:xt,filter:gf,WebkitFilter:gf},Eh=t=>yP[t];function ux(t,e){let n=Eh(t);return n!==gf&&(n=xr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vP=new Set(["auto","none","0"]);function _P(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!vP.has(o)&&_s(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=ux(n,i)}const Zm=t=>t===ro||t===ce,Qm=(t,e)=>parseFloat(t.split(", ")[e]),jm=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Qm(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?Qm(o[1],t):0}},wP=new Set(["x","y","z"]),xP=no.filter(t=>!wP.has(t));function CP(t){const e=[];return xP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Qi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:jm(4,13),y:jm(5,14)};Qi.translateX=Qi.x;Qi.translateY=Qi.y;const Hr=new Set;let yf=!1,vf=!1;function cx(){if(vf){const t=Array.from(Hr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=CP(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,s])=>{var a;(a=r.getValue(o))===null||a===void 0||a.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vf=!1,yf=!1,Hr.forEach(t=>t.complete()),Hr.clear()}function fx(){Hr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(vf=!0)})}function TP(){fx(),cx()}class Ah{constructor(e,n,r,i,o,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Hr.add(this),yf||(yf=!0,Fe.read(fx),Fe.resolveKeyframes(cx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Hr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Hr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const dx=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),SP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EP(t){const e=SP.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function hx(t,e,n=1){const[r,i]=EP(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return dx(s)?parseFloat(s):s}return ah(i)?hx(i,e,n+1):i}const px=t=>e=>e.test(t),AP={test:t=>t==="auto",parse:t=>t},mx=[ro,ce,Rn,nr,mA,pA,AP],eg=t=>mx.find(px(t));class gx extends Ah{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),ah(f))){const d=hx(f,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!qw.has(r)||e.length!==2)return;const[i,o]=e,s=eg(i),a=eg(o);if(s!==a)if(Zm(s)&&Zm(a))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)nP(e[i])&&r.push(i);r.length&&_P(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=Qi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,f])=>{n.getValue(c).set(f)}),this.resolveNoneKeyframes()}}const tg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xr.test(t)||t==="0")&&!t.startsWith("url("));function PP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function IP(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],s=tg(i,e),a=tg(o,e);return!s||!a?!1:PP(t)||(n==="spring"||mh(n))&&r}const kP=t=>t!==null;function jl(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(kP),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const RP=40;class yx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>RP?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&TP(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Mn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:s,onComplete:a,onUpdate:c,isGenerator:f}=this.options;if(!f&&!IP(e,r,i,o))if(s)this.options.duration=0;else{c&&c(jl(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const He=(t,e,n)=>t+(e-t)*n;function qu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function MP({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=qu(c,a,t+1/3),o=qu(c,a,t),s=qu(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function wl(t,e){return n=>n>0?e:t}const Ju=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},NP=[mf,Or,Ai],DP=t=>NP.find(e=>e.test(t));function ng(t){const e=DP(t);if(!e)return!1;let n=e.parse(t);return e===Ai&&(n=MP(n)),n}const rg=(t,e)=>{const n=ng(t),r=ng(e);if(!n||!r)return wl(t,e);const i={...n};return o=>(i.red=Ju(n.red,r.red,o),i.green=Ju(n.green,r.green,o),i.blue=Ju(n.blue,r.blue,o),i.alpha=He(n.alpha,r.alpha,o),Or.transform(i))},bP=(t,e)=>n=>e(t(n)),Rs=(...t)=>t.reduce(bP),_f=new Set(["none","hidden"]);function LP(t,e){return _f.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function FP(t,e){return n=>He(t,e,n)}function Ph(t){return typeof t=="number"?FP:typeof t=="string"?ah(t)?wl:xt.test(t)?rg:BP:Array.isArray(t)?vx:typeof t=="object"?xt.test(t)?rg:VP:wl}function vx(t,e){const n=[...t],r=n.length,i=t.map((o,s)=>Ph(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}}function VP(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Ph(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function UP(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],a=t.indexes[s][i[s]],c=(n=t.values[a])!==null&&n!==void 0?n:0;r[o]=c,i[s]++}return r}const BP=(t,e)=>{const n=xr.createTransformer(e),r=_s(t),i=_s(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_f.has(t)&&!i.values.length||_f.has(e)&&!r.values.length?LP(t,e):Rs(vx(UP(r,i),i.values),n):wl(t,e)};function _x(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?He(t,e,n):Ph(t)(t,e)}const OP=5;function wx(t,e,n){const r=Math.max(e-OP,0);return Jw(n-t(r),e-r)}const Ke={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ku=.001;function $P({duration:t=Ke.duration,bounce:e=Ke.bounce,velocity:n=Ke.velocity,mass:r=Ke.mass}){let i,o,s=1-e;s=qn(Ke.minDamping,Ke.maxDamping,s),t=qn(Ke.minDuration,Ke.maxDuration,$n(t)),s<1?(i=f=>{const d=f*s,h=d*t,p=d-n,m=wf(f,s),_=Math.exp(-h);return Ku-p/m*_},o=f=>{const h=f*s*t,p=h*n+n,m=Math.pow(s,2)*Math.pow(f,2)*t,_=Math.exp(-h),g=wf(Math.pow(f,2),s);return(-i(f)+Ku>0?-1:1)*((p-m)*_)/g}):(i=f=>{const d=Math.exp(-f*t),h=(f-n)*t+1;return-Ku+d*h},o=f=>{const d=Math.exp(-f*t),h=(n-f)*(t*t);return d*h});const a=5/t,c=GP(i,o,a);if(t=On(t),isNaN(c))return{stiffness:Ke.stiffness,damping:Ke.damping,duration:t};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:t}}}const zP=12;function GP(t,e,n){let r=n;for(let i=1;i<zP;i++)r=r-t(r)/e(r);return r}function wf(t,e){return t*Math.sqrt(1-e*e)}const HP=["duration","bounce"],WP=["stiffness","damping","mass"];function ig(t,e){return e.some(n=>t[n]!==void 0)}function qP(t){let e={velocity:Ke.velocity,stiffness:Ke.stiffness,damping:Ke.damping,mass:Ke.mass,isResolvedFromDuration:!1,...t};if(!ig(t,WP)&&ig(t,HP))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*qn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ke.mass,stiffness:i,damping:o}}else{const n=$P(t);e={...e,...n,mass:Ke.mass},e.isResolvedFromDuration=!0}return e}function xx(t=Ke.visualDuration,e=Ke.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:c,damping:f,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=qP({...n,velocity:-$n(n.velocity||0)}),_=p||0,g=f/(2*Math.sqrt(c*d)),x=s-o,y=$n(Math.sqrt(c/d)),v=Math.abs(x)<5;r||(r=v?Ke.restSpeed.granular:Ke.restSpeed.default),i||(i=v?Ke.restDelta.granular:Ke.restDelta.default);let w;if(g<1){const A=wf(y,g);w=I=>{const k=Math.exp(-g*y*I);return s-k*((_+g*y*x)/A*Math.sin(A*I)+x*Math.cos(A*I))}}else if(g===1)w=A=>s-Math.exp(-y*A)*(x+(_+y*x)*A);else{const A=y*Math.sqrt(g*g-1);w=I=>{const k=Math.exp(-g*y*I),N=Math.min(A*I,300);return s-k*((_+g*y*x)*Math.sinh(N)+A*x*Math.cosh(N))/A}}const E={calculatedDuration:m&&h||null,next:A=>{const I=w(A);if(m)a.done=A>=h;else{let k=0;g<1&&(k=A===0?On(_):wx(w,A,I));const N=Math.abs(k)<=r,D=Math.abs(s-I)<=i;a.done=N&&D}return a.value=a.done?s:I,a},toString:()=>{const A=Math.min(Bw(E),df),I=Ow(k=>E.next(A*k).value,A,30);return A+"ms "+I}};return E}function og({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:c,restDelta:f=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=N=>a!==void 0&&N<a||c!==void 0&&N>c,_=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let g=n*e;const x=h+g,y=s===void 0?x:s(x);y!==x&&(g=y-h);const v=N=>-g*Math.exp(-N/r),w=N=>y+v(N),E=N=>{const D=v(N),b=w(N);p.done=Math.abs(D)<=f,p.value=p.done?y:b};let A,I;const k=N=>{m(p.value)&&(A=N,I=xx({keyframes:[p.value,_(p.value)],velocity:wx(w,N,p.value),damping:i,stiffness:o,restDelta:f,restSpeed:d}))};return k(0),{calculatedDuration:null,next:N=>{let D=!1;return!I&&A===void 0&&(D=!0,E(N),k(N)),A!==void 0&&N>=A?I.next(N-A):(!D&&E(N),p)}}}const JP=ks(.42,0,1,1),KP=ks(0,0,.58,1),Cx=ks(.42,0,.58,1),YP=t=>Array.isArray(t)&&typeof t[0]!="number",XP={linear:Ht,easeIn:JP,easeInOut:Cx,easeOut:KP,circIn:Ch,circInOut:nx,circOut:tx,backIn:xh,backInOut:jw,backOut:Qw,anticipate:ex},sg=t=>{if(gh(t)){_w(t.length===4);const[e,n,r,i]=t;return ks(e,n,r,i)}else if(typeof t=="string")return XP[t];return t};function ZP(t,e,n){const r=[],i=n||_x,o=t.length-1;for(let s=0;s<o;s++){let a=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Ht:e;a=Rs(c,a)}r.push(a)}return r}function QP(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(_w(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ZP(e,r,i),c=a.length,f=d=>{if(s&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=Xi(t[h],t[h+1],d);return a[h](p)};return n?d=>f(qn(t[0],t[o-1],d)):f}function jP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Xi(0,e,r);t.push(He(n,1,i))}}function eI(t){const e=[0];return jP(e,t.length-1),e}function tI(t,e){return t.map(n=>n*e)}function nI(t,e){return t.map(()=>e||Cx).splice(0,t.length-1)}function xl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=YP(r)?r.map(sg):sg(r),o={done:!1,value:e[0]},s=tI(n&&n.length===e.length?n:eI(e),t),a=QP(s,e,{ease:Array.isArray(i)?i:nI(e,i)});return{calculatedDuration:t,next:c=>(o.value=a(c),o.done=c>=t,o)}}const rI=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Fe.update(e,!0),stop:()=>wr(e),now:()=>dt.isProcessing?dt.timestamp:Mn.now()}},iI={decay:og,inertia:og,tween:xl,keyframes:xl,spring:xx},oI=t=>t/100;class Ih extends yx{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,s=i?.KeyframeResolver||Ah,a=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new s(o,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=this.options,a=mh(n)?n:iI[n]||xl;let c,f;a!==xl&&typeof e[0]!="number"&&(c=Rs(oI,_x(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});o==="mirror"&&(f=a({...this.options,keyframes:[...e].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=Bw(d));const{calculatedDuration:h}=d,p=h+i,m=p*(r+1)-i;return{generator:d,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:f,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return o.next(0);const{delay:p,repeat:m,repeatType:_,repeatDelay:g,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,E=o;if(m){const N=Math.min(this.currentTime,d)/h;let D=Math.floor(N),b=N%1;!b&&N>=1&&(b=1),b===1&&D--,D=Math.min(D,m+1),!!(D%2)&&(_==="reverse"?(b=1-b,g&&(b-=g/h)):_==="mirror"&&(E=s)),w=qn(0,1,b)*h}const A=v?{done:!1,value:c[0]}:E.next(w);a&&(A.value=a(A.value));let{done:I}=A;!v&&f!==null&&(I=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return k&&i!==void 0&&(A.value=jl(c,this.options,i)),x&&x(A.value),k&&this.finish(),A}get duration(){const{resolved:e}=this;return e?$n(e.calculatedDuration):0}get time(){return $n(this.currentTime)}set time(e){e=On(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=$n(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rI,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const sI=new Set(["opacity","clipPath","filter","transform"]);function aI(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:c}={}){const f={[e]:n};c&&(f.offset=c);const d=zw(a,i);return Array.isArray(d)&&(f.easing=d),t.animate(f,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}const lI=eh(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cl=10,uI=2e4;function cI(t){return mh(t.type)||t.type==="spring"||!$w(t.ease)}function fI(t,e){const n=new Ih({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<uI;)r=n.sample(o),i.push(r.value),o+=Cl;return{times:void 0,keyframes:i,duration:o-Cl,ease:"linear"}}const Tx={anticipate:ex,backInOut:jw,circInOut:nx};function dI(t){return t in Tx}class ag extends yx{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new gx(o,(s,a)=>this.onKeyframesResolved(s,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:o,type:s,motionValue:a,name:c,startTime:f}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof o=="string"&&_l()&&dI(o)&&(o=Tx[o]),cI(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:_,...g}=this.options,x=fI(e,g);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,o=x.ease,s="keyframes"}const d=aI(a.owner.current,c,e,{...this.options,duration:r,times:i,ease:o});return d.startTime=f??this.calcStartTime(),this.pendingTimeline?(Wm(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(jl(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:s,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return $n(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return $n(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=On(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ht;const{animation:r}=n;Wm(r,e)}return Ht}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:s,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:d,onComplete:h,element:p,...m}=this.options,_=new Ih({...m,keyframes:r,duration:i,type:o,ease:s,times:a,isGenerator:!0}),g=On(this.time);f.setWithVelocity(_.sample(g-Cl).value,_.sample(g).value,Cl)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:s,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return lI()&&r&&sI.has(r)&&!c&&!f&&!i&&o!=="mirror"&&s!==0&&a!=="inertia"}}const hI={type:"spring",stiffness:500,damping:25,restSpeed:10},pI=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mI={type:"keyframes",duration:.8},gI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yI=(t,{keyframes:e})=>e.length>2?mI:ei.has(t)?t.startsWith("scale")?pI(e[1]):hI:gI;function vI({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:c,elapsed:f,...d}){return!!Object.keys(d).length}const kh=(t,e,n,r={},i,o)=>s=>{const a=ph(r,t)||{},c=a.delay||r.delay||0;let{elapsed:f=0}=r;f=f-On(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-f,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:i};vI(a)||(d={...d,...yI(t,d)}),d.duration&&(d.duration=On(d.duration)),d.repeatDelay&&(d.repeatDelay=On(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const p=jl(d.keyframes,a);if(p!==void 0)return Fe.update(()=>{d.onUpdate(p),d.onComplete()}),new VA([])}return!o&&ag.supports(d)?new ag(d):new Ih(d)};function _I({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Sx(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:s=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(s=r);const f=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const p=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),m=c[h];if(m===void 0||d&&_I(d,h))continue;const _={delay:n,...ph(s||{},h)};let g=!1;if(window.MotionHandoffAnimation){const y=Kw(t);if(y){const v=window.MotionHandoffAnimation(y,h,Fe);v!==null&&(_.startTime=v,g=!0)}}pf(t,h),p.start(kh(h,p,m,t.shouldReduceMotion&&qw.has(h)?{type:!1}:_,t,g));const x=p.animation;x&&f.push(x)}return a&&Promise.all(f).then(()=>{Fe.update(()=>{a&&ZA(t,a)})}),f}function xf(t,e,n={}){var r;const i=Ql(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const s=i?()=>Promise.all(Sx(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=o;return wI(t,e,d+f,h,p,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,d]=c==="beforeChildren"?[s,a]:[a,s];return f().then(()=>d())}else return Promise.all([s(),a(n.delay)])}function wI(t,e,n=0,r=0,i=1,o){const s=[],a=(t.variantChildren.size-1)*r,c=i===1?(f=0)=>f*r:(f=0)=>a-f*r;return Array.from(t.variantChildren).sort(xI).forEach((f,d)=>{f.notify("AnimationStart",e),s.push(xf(f,e,{...o,delay:n+c(d)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(s)}function xI(t,e){return t.sortNodePosition(e)}function CI(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>xf(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=xf(t,e,n);else{const i=typeof e=="function"?Ql(t,e,n.custom):e;r=Promise.all(Sx(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const TI=nh.length;function Ex(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ex(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<TI;n++){const r=nh[n],i=t.props[r];(gs(i)||i===!1)&&(e[r]=i)}return e}const SI=[...th].reverse(),EI=th.length;function AI(t){return e=>Promise.all(e.map(({animation:n,options:r})=>CI(t,n,r)))}function PI(t){let e=AI(t),n=lg(),r=!0;const i=c=>(f,d)=>{var h;const p=Ql(t,d,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:_,...g}=p;f={...f,...g,..._}}return f};function o(c){e=c(t)}function s(c){const{props:f}=t,d=Ex(t.parent)||{},h=[],p=new Set;let m={},_=1/0;for(let x=0;x<EI;x++){const y=SI[x],v=n[y],w=f[y]!==void 0?f[y]:d[y],E=gs(w),A=y===c?v.isActive:null;A===!1&&(_=x);let I=w===d[y]&&w!==f[y]&&E;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),v.protectedKeys={...m},!v.isActive&&A===null||!w&&!v.prevProp||Xl(w)||typeof w=="boolean")continue;const k=II(v.prevProp,w);let N=k||y===c&&v.isActive&&!I&&E||x>_&&E,D=!1;const b=Array.isArray(w)?w:[w];let H=b.reduce(i(y),{});A===!1&&(H={});const{prevResolvedValues:M={}}=v,z={...M,...H},S=q=>{N=!0,p.has(q)&&(D=!0,p.delete(q)),v.needsAnimating[q]=!0;const J=t.getValue(q);J&&(J.liveStyle=!1)};for(const q in z){const J=H[q],B=M[q];if(m.hasOwnProperty(q))continue;let X=!1;ff(J)&&ff(B)?X=!Uw(J,B):X=J!==B,X?J!=null?S(q):p.add(q):J!==void 0&&p.has(q)?S(q):v.protectedKeys[q]=!0}v.prevProp=w,v.prevResolvedValues=H,v.isActive&&(m={...m,...H}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(I&&k)||D)&&h.push(...b.map(q=>({animation:q,options:{type:y}})))}if(p.size){const x={};p.forEach(y=>{const v=t.getBaseTarget(y),w=t.getValue(y);w&&(w.liveStyle=!0),x[y]=v??null}),h.push({animation:x})}let g=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(c,f){var d;if(n[c].isActive===f)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(c,f)}),n[c].isActive=f;const h=s(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=lg(),r=!0}}}function II(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Uw(e,t):!1}function kr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lg(){return{animate:kr(!0),whileInView:kr(),whileHover:kr(),whileTap:kr(),whileDrag:kr(),whileFocus:kr(),exit:kr()}}class Er{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kI extends Er{constructor(e){super(e),e.animationState||(e.animationState=PI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let RI=0;class MI extends Er{constructor(){super(...arguments),this.id=RI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const NI={animation:{Feature:kI},exit:{Feature:MI}};function ws(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ms(t){return{point:{x:t.pageX,y:t.pageY}}}const DI=t=>e=>yh(e)&&t(e,Ms(e));function Jo(t,e,n,r){return ws(t,e,DI(n),r)}const ug=(t,e)=>Math.abs(t-e);function bI(t,e){const n=ug(t.x,e.x),r=ug(t.y,e.y);return Math.sqrt(n**2+r**2)}class Ax{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Xu(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=bI(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:_}=h,{timestamp:g}=dt;this.history.push({..._,timestamp:g});const{onStart:x,onMove:y}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Yu(p,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:_,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Xu(h.type==="pointercancel"?this.lastMoveEventInfo:Yu(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),_&&_(h,x)},!yh(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Ms(e),a=Yu(s,this.transformPagePoint),{point:c}=a,{timestamp:f}=dt;this.history=[{...c,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,Xu(a,this.history)),this.removeListeners=Rs(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wr(this.updatePoint)}}function Yu(t,e){return e?{point:e(t.point)}:t}function cg(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xu({point:t},e){return{point:t,delta:cg(t,Px(e)),offset:cg(t,LI(e)),velocity:FI(e,.1)}}function LI(t){return t[0]}function Px(t){return t[t.length-1]}function FI(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Px(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>On(e)));)n--;if(!r)return{x:0,y:0};const o=$n(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const Ix=1e-4,VI=1-Ix,UI=1+Ix,kx=.01,BI=0-kx,OI=0+kx;function qt(t){return t.max-t.min}function $I(t,e,n){return Math.abs(t-e)<=n}function fg(t,e,n,r=.5){t.origin=r,t.originPoint=He(e.min,e.max,t.origin),t.scale=qt(n)/qt(e),t.translate=He(n.min,n.max,t.origin)-t.originPoint,(t.scale>=VI&&t.scale<=UI||isNaN(t.scale))&&(t.scale=1),(t.translate>=BI&&t.translate<=OI||isNaN(t.translate))&&(t.translate=0)}function Ko(t,e,n,r){fg(t.x,e.x,n.x,r?r.originX:void 0),fg(t.y,e.y,n.y,r?r.originY:void 0)}function dg(t,e,n){t.min=n.min+e.min,t.max=t.min+qt(e)}function zI(t,e,n){dg(t.x,e.x,n.x),dg(t.y,e.y,n.y)}function hg(t,e,n){t.min=e.min-n.min,t.max=t.min+qt(e)}function Yo(t,e,n){hg(t.x,e.x,n.x),hg(t.y,e.y,n.y)}function GI(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?He(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?He(n,t,r.max):Math.min(t,n)),t}function pg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function HI(t,{top:e,left:n,bottom:r,right:i}){return{x:pg(t.x,n,i),y:pg(t.y,e,r)}}function mg(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function WI(t,e){return{x:mg(t.x,e.x),y:mg(t.y,e.y)}}function qI(t,e){let n=.5;const r=qt(t),i=qt(e);return i>r?n=Xi(e.min,e.max-r,t.min):r>i&&(n=Xi(t.min,t.max-i,e.min)),qn(0,1,n)}function JI(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Cf=.35;function KI(t=Cf){return t===!1?t=0:t===!0&&(t=Cf),{x:gg(t,"left","right"),y:gg(t,"top","bottom")}}function gg(t,e,n){return{min:yg(t,e),max:yg(t,n)}}function yg(t,e){return typeof t=="number"?t:t[e]||0}const vg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pi=()=>({x:vg(),y:vg()}),_g=()=>({min:0,max:0}),Ze=()=>({x:_g(),y:_g()});function Zt(t){return[t("x"),t("y")]}function Rx({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function YI({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function XI(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zu(t){return t===void 0||t===1}function Tf({scale:t,scaleX:e,scaleY:n}){return!Zu(t)||!Zu(e)||!Zu(n)}function br(t){return Tf(t)||Mx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mx(t){return wg(t.x)||wg(t.y)}function wg(t){return t&&t!=="0%"}function Tl(t,e,n){const r=t-n,i=e*r;return n+i}function xg(t,e,n,r,i){return i!==void 0&&(t=Tl(t,i,r)),Tl(t,n,r)+e}function Sf(t,e=0,n=1,r,i){t.min=xg(t.min,e,n,r,i),t.max=xg(t.max,e,n,r,i)}function Nx(t,{x:e,y:n}){Sf(t.x,e.translate,e.scale,e.originPoint),Sf(t.y,n.translate,n.scale,n.originPoint)}const Cg=.999999999999,Tg=1.0000000000001;function ZI(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ki(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Nx(t,s)),r&&br(o.latestValues)&&ki(t,o.latestValues))}e.x<Tg&&e.x>Cg&&(e.x=1),e.y<Tg&&e.y>Cg&&(e.y=1)}function Ii(t,e){t.min=t.min+e,t.max=t.max+e}function Sg(t,e,n,r,i=.5){const o=He(t.min,t.max,i);Sf(t,e,n,o,r)}function ki(t,e){Sg(t.x,e.x,e.scaleX,e.scale,e.originX),Sg(t.y,e.y,e.scaleY,e.scale,e.originY)}function Dx(t,e){return Rx(XI(t.getBoundingClientRect(),e))}function QI(t,e,n){const r=Dx(t,n),{scroll:i}=e;return i&&(Ii(r.x,i.offset.x),Ii(r.y,i.offset.y)),r}const bx=({current:t})=>t?t.ownerDocument.defaultView:null,jI=new WeakMap;class ek{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ze(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ms(d).point)},o=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:_}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qA(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zt(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Rn.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[x];w&&(y=qt(w)*(parseFloat(y)/100))}}this.originPoint[x]=y}),_&&Fe.postRender(()=>_(d,h)),pf(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:_,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=tk(x),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),c=()=>Zt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new Ax(e,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:bx(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Fe.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ua(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=GI(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ei(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=HI(i.layoutBox,n):this.constraints=!1,this.elastic=KI(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Zt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=JI(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ei(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=QI(r,i.root,this.visualElement.getTransformPagePoint());let s=WI(i.layout.layoutBox,o);if(n){const a=n(YI(s));this.hasMutatedConstraints=!!a,a&&(s=Rx(a))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},f=Zt(d=>{if(!ua(d,n,this.currentDirection))return;let h=c&&c[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,_={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(f).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return pf(this.visualElement,e),r.start(kh(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zt(n=>{const{drag:r}=this.getProps();if(!ua(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(e[n]-He(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ei(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zt(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const c=a.get();i[s]=qI({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zt(s=>{if(!ua(s,e,null))return;const a=this.getAxisMotionValue(s),{min:c,max:f}=this.constraints[s];a.set(He(c,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;jI.set(this.visualElement,this);const e=this.visualElement.current,n=Jo(e,"pointerdown",c=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ei(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fe.read(r);const s=ws(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Zt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=Cf,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function ua(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function tk(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class nk extends Er{constructor(e){super(e),this.removeGroupControls=Ht,this.removeListeners=Ht,this.controls=new ek(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ht}unmount(){this.removeGroupControls(),this.removeListeners()}}const Eg=t=>(e,n)=>{t&&Fe.postRender(()=>t(e,n))};class rk extends Er{constructor(){super(...arguments),this.removePointerDownListener=Ht}onPointerDown(e){this.session=new Ax(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Eg(e),onStart:Eg(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&Fe.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Va={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ag(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const wo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const n=Ag(t,e.target.x),r=Ag(t,e.target.y);return`${n}% ${r}%`}},ik={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=xr.parse(t);if(i.length>5)return r;const o=xr.createTransformer(t),s=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=a,i[1+s]/=c;const f=He(a,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};class ok extends $.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;EA(sk),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Va.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Fe.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ih.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Lx(t){const[e,n]=O1(),r=$.useContext(yw);return T.jsx(ok,{...t,layoutGroup:r,switchLayoutGroup:$.useContext(Ew),isPresent:e,safeToRemove:n})}const sk={borderRadius:{...wo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wo,borderTopRightRadius:wo,borderBottomLeftRadius:wo,borderBottomRightRadius:wo,boxShadow:ik};function ak(t,e,n){const r=Tt(t)?t:vs(t);return r.start(kh("",r,e,n)),r.animation}function lk(t){return t instanceof SVGElement&&t.tagName!=="svg"}const uk=(t,e)=>t.depth-e.depth;class ck{constructor(){this.children=[],this.isDirty=!1}add(e){vh(this.children,e),this.isDirty=!0}remove(e){_h(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uk),this.isDirty=!1,this.children.forEach(e)}}function fk(t,e){const n=Mn.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(wr(r),t(o-e))};return Fe.read(r,!0),()=>wr(r)}const Fx=["TopLeft","TopRight","BottomLeft","BottomRight"],dk=Fx.length,Pg=t=>typeof t=="string"?parseFloat(t):t,Ig=t=>typeof t=="number"||ce.test(t);function hk(t,e,n,r,i,o){i?(t.opacity=He(0,n.opacity!==void 0?n.opacity:1,pk(r)),t.opacityExit=He(e.opacity!==void 0?e.opacity:1,0,mk(r))):o&&(t.opacity=He(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<dk;s++){const a=`border${Fx[s]}Radius`;let c=kg(e,a),f=kg(n,a);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||Ig(c)===Ig(f)?(t[a]=Math.max(He(Pg(c),Pg(f),r),0),(Rn.test(f)||Rn.test(c))&&(t[a]+="%")):t[a]=f}(e.rotate||n.rotate)&&(t.rotate=He(e.rotate||0,n.rotate||0,r))}function kg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pk=Vx(0,.5,tx),mk=Vx(.5,.95,Ht);function Vx(t,e,n){return r=>r<t?0:r>e?1:n(Xi(t,e,r))}function Rg(t,e){t.min=e.min,t.max=e.max}function Xt(t,e){Rg(t.x,e.x),Rg(t.y,e.y)}function Mg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ng(t,e,n,r,i){return t-=e,t=Tl(t,1/n,r),i!==void 0&&(t=Tl(t,1/i,r)),t}function gk(t,e=0,n=1,r=.5,i,o=t,s=t){if(Rn.test(e)&&(e=parseFloat(e),e=He(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=He(o.min,o.max,r);t===o&&(a-=e),t.min=Ng(t.min,e,n,a,i),t.max=Ng(t.max,e,n,a,i)}function Dg(t,e,[n,r,i],o,s){gk(t,e[n],e[r],e[i],e.scale,o,s)}const yk=["x","scaleX","originX"],vk=["y","scaleY","originY"];function bg(t,e,n,r){Dg(t.x,e,yk,n?n.x:void 0,r?r.x:void 0),Dg(t.y,e,vk,n?n.y:void 0,r?r.y:void 0)}function Lg(t){return t.translate===0&&t.scale===1}function Ux(t){return Lg(t.x)&&Lg(t.y)}function Fg(t,e){return t.min===e.min&&t.max===e.max}function _k(t,e){return Fg(t.x,e.x)&&Fg(t.y,e.y)}function Vg(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Bx(t,e){return Vg(t.x,e.x)&&Vg(t.y,e.y)}function Ug(t){return qt(t.x)/qt(t.y)}function Bg(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class wk{constructor(){this.members=[]}add(e){vh(this.members,e),e.scheduleRender()}remove(e){if(_h(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xk(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,s=n?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:_}=n;f&&(r=`perspective(${f}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const Lr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Io=typeof window<"u"&&window.MotionDebug!==void 0,Qu=["","X","Y","Z"],Ck={visibility:"hidden"},Og=1e3;let Tk=0;function ju(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Ox(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Kw(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fe,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Ox(r)}function $x({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e?.()){this.id=Tk++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Io&&(Lr.totalNodes=Lr.resolvedTargetDeltas=Lr.recalculatedProjection=0),this.nodes.forEach(Ak),this.nodes.forEach(Mk),this.nodes.forEach(Nk),this.nodes.forEach(Pk),Io&&window.MotionDebug.record(Lr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ck)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new wh),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const c=this.eventHandlers.get(s);c&&c.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lk(s),this.instance=s;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(f||c)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=fk(p,250),Va.hasAnimatedSinceResize&&(Va.hasAnimatedSinceResize=!1,this.nodes.forEach(zg))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Vk,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=d.getProps(),v=!this.targetLayout||!Bx(this.targetLayout,_)||m,w=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const E={...ph(g,"layout"),onPlay:x,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||zg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Dk),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ox(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($g);return}this.isUpdating||this.nodes.forEach(kk),this.isUpdating=!1,this.nodes.forEach(Rk),this.nodes.forEach(Sk),this.nodes.forEach(Ek),this.clearAllSnapshots();const a=Mn.now();dt.delta=qn(0,1e3/60,a-dt.timestamp),dt.timestamp=a,dt.isProcessing=!0,Gu.update.process(dt),Gu.preRender.process(dt),Gu.render.process(dt),dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ih.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ik),this.sharedNodes.forEach(bk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Ux(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;s&&(a||br(this.latestValues)||d)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return s&&(c=this.removeTransform(c)),Uk(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:a}=this.options;if(!a)return Ze();const c=a.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(Bk))){const{scroll:d}=this.root;d&&(Ii(c.x,d.offset.x),Ii(c.y,d.offset.y))}return c}removeElementScroll(s){var a;const c=Ze();if(Xt(c,s),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Xt(c,s),Ii(c.x,h.offset.x),Ii(c.y,h.offset.y))}return c}applyTransform(s,a=!1){const c=Ze();Xt(c,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ki(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),br(d.latestValues)&&ki(c,d.latestValues)}return br(this.latestValues)&&ki(c,this.latestValues),c}removeTransform(s){const a=Ze();Xt(a,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!br(f.latestValues))continue;Tf(f.latestValues)&&f.updateSnapshot();const d=Ze(),h=f.measurePageBox();Xt(d,h),bg(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return br(this.latestValues)&&bg(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(s||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=dt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),Yo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ze(),this.targetWithTransforms=Ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xt(this.target,this.layout.layoutBox),Nx(this.target,this.targetDelta)):Xt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),Yo(this.relativeTargetOrigin,this.target,m.target),Xt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Io&&Lr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Tf(this.parent.latestValues)||Mx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let f=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===dt.timestamp&&(f=!1),f)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Xt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;ZI(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ze());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Mg(this.prevProjectionDelta.x,this.projectionDelta.x),Mg(this.prevProjectionDelta.y,this.projectionDelta.y)),Ko(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!Bg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Io&&Lr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pi(),this.projectionDelta=Pi(),this.projectionDeltaWithTransform=Pi()}setAnimationOrigin(s,a=!1){const c=this.snapshot,f=c?c.latestValues:{},d={...this.latestValues},h=Pi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ze(),m=c?c.source:void 0,_=this.layout?this.layout.source:void 0,g=m!==_,x=this.getStack(),y=!x||x.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(Fk));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const A=E/1e3;Gg(h.x,s.x,A),Gg(h.y,s.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lk(this.relativeTarget,this.relativeTargetOrigin,p,A),w&&_k(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ze()),Xt(w,this.relativeTarget)),g&&(this.animationValues=d,hk(d,f,this.latestValues,A,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{Va.hasAnimatedSinceResize=!0,this.currentAnimation=ak(0,Og,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Og),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:c,layout:f,latestValues:d}=s;if(!(!a||!c||!f)){if(this!==s&&this.layout&&f&&zx(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||Ze();const h=qt(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=qt(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}Xt(a,c),ki(a,d),Ko(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new wk),this.sharedNodes.get(s).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const f={};c.z&&ju("z",s,f,this.animationValues);for(let d=0;d<Qu.length;d++)ju(`rotate${Qu[d]}`,s,f,this.animationValues),ju(`skew${Qu[d]}`,s,f,this.animationValues);s.render();for(const d in f)s.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);s.scheduleRender()}getProjectionStyles(s){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ck;const f={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=La(s?.pointerEvents)||"",f.transform=d?d(this.latestValues,""):"none",f;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=La(s?.pointerEvents)||""),this.hasProjected&&!br(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),f.transform=xk(this.projectionDeltaWithTransform,this.treeScale,p),d&&(f.transform=d(p,f.transform));const{x:m,y:_}=this.projectionDelta;f.transformOrigin=`${m.origin*100}% ${_.origin*100}% 0`,h.animationValues?f.opacity=h===this?(c=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:f.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in vl){if(p[g]===void 0)continue;const{correct:x,applyTo:y}=vl[g],v=f.transform==="none"?p[g]:x(p[g],h);if(y){const w=y.length;for(let E=0;E<w;E++)f[y[E]]=v}else f[g]=v}return this.options.layoutId&&(f.pointerEvents=h===this?La(s?.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach($g),this.root.sharedNodes.clear()}}}function Sk(t){t.updateLayout()}function Ek(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?Zt(h=>{const p=s?n.measuredBox[h]:n.layoutBox[h],m=qt(p);p.min=r[h].min,p.max=p.min+m}):zx(o,n.layoutBox,r)&&Zt(h=>{const p=s?n.measuredBox[h]:n.layoutBox[h],m=qt(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=Pi();Ko(a,r,n.layoutBox);const c=Pi();s?Ko(c,t.applyTransform(i,!0),n.measuredBox):Ko(c,r,n.layoutBox);const f=!Ux(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const _=Ze();Yo(_,n.layoutBox,p.layoutBox);const g=Ze();Yo(g,r,m.layoutBox),Bx(_,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:f,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Ak(t){Io&&Lr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Pk(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ik(t){t.clearSnapshot()}function $g(t){t.clearMeasurements()}function kk(t){t.isLayoutDirty=!1}function Rk(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zg(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Mk(t){t.resolveTargetDelta()}function Nk(t){t.calcProjection()}function Dk(t){t.resetSkewAndRotation()}function bk(t){t.removeLeadSnapshot()}function Gg(t,e,n){t.translate=He(e.translate,0,n),t.scale=He(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Hg(t,e,n,r){t.min=He(e.min,n.min,r),t.max=He(e.max,n.max,r)}function Lk(t,e,n,r){Hg(t.x,e.x,n.x,r),Hg(t.y,e.y,n.y,r)}function Fk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Vk={duration:.45,ease:[.4,0,.1,1]},Wg=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),qg=Wg("applewebkit/")&&!Wg("chrome/")?Math.round:Ht;function Jg(t){t.min=qg(t.min),t.max=qg(t.max)}function Uk(t){Jg(t.x),Jg(t.y)}function zx(t,e,n){return t==="position"||t==="preserve-aspect"&&!$I(Ug(e),Ug(n),.2)}function Bk(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Ok=$x({attachResizeListener:(t,e)=>ws(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ec={current:void 0},Gx=$x({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ec.current){const t=new Ok({});t.mount(window),t.setOptions({layoutScroll:!0}),ec.current=t}return ec.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$k={pan:{Feature:rk},drag:{Feature:nk,ProjectionNode:Gx,MeasureLayout:Lx}};function Kg(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Fe.postRender(()=>o(e,Ms(e)))}class zk extends Er{mount(){const{current:e}=this.node;e&&(this.unmount=$A(e,n=>(Kg(this.node,n,"Start"),r=>Kg(this.node,r,"End"))))}unmount(){}}class Gk extends Er{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rs(ws(this.node.current,"focus",()=>this.onFocus()),ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yg(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Fe.postRender(()=>o(e,Ms(e)))}class Hk extends Er{mount(){const{current:e}=this.node;e&&(this.unmount=WA(e,n=>(Yg(this.node,n,"Start"),(r,{success:i})=>Yg(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ef=new WeakMap,tc=new WeakMap,Wk=t=>{const e=Ef.get(t.target);e&&e(t)},qk=t=>{t.forEach(Wk)};function Jk({root:t,...e}){const n=t||document;tc.has(n)||tc.set(n,{});const r=tc.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(qk,{root:t,...e})),r[i]}function Kk(t,e,n){const r=Jk(e);return Ef.set(t,n),r.observe(t),()=>{Ef.delete(t),r.unobserve(t)}}const Yk={some:0,all:1};class Xk extends Er{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Yk[i]},a=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=f?d:h;p&&p(c)};return Kk(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Zk(e,n))&&this.startObserver()}unmount(){}}function Zk({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Qk={inView:{Feature:Xk},tap:{Feature:Hk},focus:{Feature:Gk},hover:{Feature:zk}},jk={layout:{ProjectionNode:Gx,MeasureLayout:Lx}},Af={current:null},Hx={current:!1};function eR(){if(Hx.current=!0,!!jd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Af.current=t.matches;t.addListener(e),e()}else Af.current=!1}const tR=[...mx,xt,xr],nR=t=>tR.find(px(t)),Xg=new WeakMap;function rR(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Tt(i))t.addValue(r,i);else if(Tt(o))t.addValue(r,vs(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,vs(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Zg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iR{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ah,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Mn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Fe.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:d}=s;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=Zl(n),this.isVariantNode=Tw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const _=p[m];c[m]!==void 0&&Tt(_)&&_.set(c[m],!1)}}mount(e){this.current=e,Xg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Hx.current||eR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Af.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xg.delete(this.current),this.projection&&this.projection.unmount(),wr(this.notifyUpdate),wr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ei.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zi){const n=Zi[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ze()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Zg.length;r++){const i=Zg[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=rR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vs(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(dx(i)||rx(i))?i=parseFloat(i):!nR(i)&&xr.test(n)&&(i=ux(e,n)),this.setBaseTarget(e,Tt(i)?i.get():i)),Tt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=sh(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Tt(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Wx extends iR{constructor(){super(...arguments),this.KeyframeResolver=gx}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Tt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function oR(t){return window.getComputedStyle(t)}class sR extends Wx{constructor(){super(...arguments),this.type="html",this.renderInstance=Nw}readValueFromInstance(e,n){if(ei.has(n)){const r=Eh(n);return r&&r.default||0}else{const r=oR(e),i=(kw(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Dx(e,n)}build(e,n,r){uh(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return hh(e,n,r)}}class aR extends Wx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ze}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ei.has(n)){const r=Eh(n);return r&&r.default||0}return n=Dw.has(n)?n:rh(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Fw(e,n,r)}build(e,n,r){ch(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){bw(e,n,r,i)}mount(e){this.isSVGTag=dh(e.tagName),super.mount(e)}}const lR=(t,e)=>oh(t)?new aR(e):new sR(e,{allowProjection:t!==$.Fragment}),uR=bA({...NI,...Qk,...$k,...jk},lR),oi=Y1(uR),Qg=1,nc=`You are a world-class arbiter and editor. Your task is to synthesize multiple expert drafts into a single, coherent, and comprehensive answer that is superior to any individual draft.

Instructions:
1.  Read the original user question carefully.
2.  Review all the provided candidate answers, labeled A, B, C, etc.
3.  Identify the strengths, weaknesses, and unique insights from each draft.
4.  Synthesize the best elements from all drafts into a single, well-structured, and easy-to-read response.
5.  Do NOT simply list the drafts. Create a new, unified answer.
6.  If drafts contradict, use your judgment to determine the most likely correct information or acknowledge the controversy.
7.  Ensure your final answer directly and thoroughly addresses the original user's question.
8.  Do not include headings like "Final Answer" or "Synthesized Response". Begin the response directly.`,Nn="gemini-2.5-flash",on="gemini-2.5-pro",qx="gpt-5",Rh="gpt-5-mini",cR="gpt-5",fR=Rh,Jx="openai/gpt-4o",dR="google/gemini-flash-1.5",Kx="anthropic/claude-3-haiku-20240307",Yx="gpt-5-medium-reasoning",Pf="gpt-5-high-reasoning",Mh="You are a world-class expert. Reason step-by-step before providing your answer. ",hR=`
Your reasoning and synthesis abilities are paramount. Before writing the final answer, explicitly outline the key points from each draft, identify convergences and divergences, and then construct a synthesis that resolves contradictions and builds upon the strongest arguments. Your final output should only be the synthesized answer itself.`;function pR(t){if(typeof t!="object"||t===null)return null;const e=t,n=e.id??e.key??e.slug??e.uuid??(typeof e.name=="string"?e.name.toLowerCase().replace(/\s+/g,"-"):null)??null,r=e.name??e.title??e.label??(typeof e.id=="string"?e.id:null)??null,i=e.persona;return typeof n!="string"||typeof r!="string"||typeof i!="string"||!i?null:{id:n,name:r,persona:i}}async function mR(){const e=await fetch("/HeavyOrc/config/experts.json");if(!e.ok)throw new Error(`Failed to fetch experts.json: ${e.status} ${e.statusText}`);const n=await e.json(),r=Array.isArray(n)?n:n&&Array.isArray(n.experts)?n.experts:[],i=[];for(const o of r){const s=pR(o);s?i.push(s):console.warn("Skipping expert missing id, name, or persona:",o)}return i}let If;try{If=await mR()}catch(t){console.error("Fatal: Could not load experts configuration. The application will run with no agents.",t),If=[]}const Nh=If;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gR,yR;function vR(){return{geminiUrl:gR,vertexUrl:yR}}function _R(t,e,n,r){var i,o;if(!t?.baseUrl){const s=vR();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti{}function se(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function u(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let f=0;f<c.length;f++){const d=c[f];u(d,e.slice(o+1),n[f])}else for(const f of c)u(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>l(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jg||(jg={}));var ey;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ey||(ey={}));var tn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(tn||(tn={}));var ty;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ty||(ty={}));var ny;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ny||(ny={}));var ry;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ry||(ry={}));var iy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(iy||(iy={}));var oy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(oy||(oy={}));var sy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sy||(sy={}));var ay;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ay||(ay={}));var ly;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(ly||(ly={}));var uy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(uy||(uy={}));var cy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cy||(cy={}));var fy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(fy||(fy={}));var dy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dy||(dy={}));var Sl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Sl||(Sl={}));var hy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hy||(hy={}));var Rf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rf||(Rf={}));var py;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(py||(py={}));var my;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(my||(my={}));var gy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(gy||(gy={}));var yy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(yy||(yy={}));var vy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vy||(vy={}));var _y;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_y||(_y={}));var wy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(wy||(wy={}));var xy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xy||(xy={}));var Cy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Cy||(Cy={}));var Ty;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Ty||(Ty={}));var Sy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Sy||(Sy={}));var Ey;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ey||(Ey={}));var Ay;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ay||(Ay={}));var Py;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Py||(Py={}));var Iy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Iy||(Iy={}));var ky;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ky||(ky={}));var Ry;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ry||(Ry={}));var My;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(My||(My={}));var Ny;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ny||(Ny={}));var Dy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Dy||(Dy={}));var by;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(by||(by={}));var Ly;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Ly||(Ly={}));var Fy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fy||(Fy={}));var Vy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Vy||(Vy={}));var Uy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Uy||(Uy={}));var By;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(By||(By={}));var Ri;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ri||(Ri={}));class Mf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class xo{get text(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1;const h=[];for(const p of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,_]of Object.entries(p))m!=="text"&&m!=="thought"&&(_!==null||_!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,f+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const d=[];for(const h of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(f+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,r,i,o,s,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.output}}class Oy{}class $y{}class wR{}class xR{}class CR{}class TR{}class zy{}class Gy{}class Hy{}class SR{}class Wy{}class qy{}class Jy{}class Ky{}class ER{}class AR{}class PR{}class Yy{}class IR{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(a))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class El{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new El;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new Wy,s=i.videos;o.generatedVideos=s?.map(a=>({video:{uri:a.gcsUri,videoBytes:a.bytesBase64Encoded?kf(a.bytesBase64Encoded):void 0,mimeType:a.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new Wy,s=i.generateVideoResponse,a=s?.generatedSamples;o.generatedVideos=a?.map(c=>{const f=c.video;return{video:{uri:f?.uri,videoBytes:f?.encodedVideo?kf(f?.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s?.raiMediaFilteredCount,o.raiMediaFilteredReasons=s?.raiMediaFilteredReasons,r.response=o}}return r}}class kR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ae(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Xx(t,e){const n=Ae(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Zx(t){return Array.isArray(t)?t.map(e=>Al(e)):[Al(t)]}function Al(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Qx(t){const e=Al(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jx(t){const e=Al(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function eC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Xy(e)):[Xy(t)]}function Nf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Zy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Qy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function St(t){if(t==null)throw new Error("ContentUnion is required");return Nf(t)?t:{role:"user",parts:eC(t)}}function tC(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=St(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=St(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>St(n)):[St(e)]}function sn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Zy(t)||Qy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[St(t)]}const e=[],n=[],r=Nf(t[0]);for(const i of t){const o=Nf(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Zy(i)||Qy(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:eC(n)}),e}function RR(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(tn).includes(n[0].toUpperCase())?n[0].toUpperCase():tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(tn).includes(r.toUpperCase())?r.toUpperCase():tn.TYPE_UNSPECIFIED})}}function Ui(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&RR(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(tn).includes(a.toUpperCase())?a.toUpperCase():tn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ui(a);else if(r.includes(s)){const c=[];for(const f of a){if(f.type=="null"){e.nullable=!0;continue}c.push(Ui(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,d]of Object.entries(a))c[f]=Ui(d);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Dh(t){return Ui(t)}function bh(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Lh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function io(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ui(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ui(e.response));return t}function oo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function MR(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Kn(t,e){if(typeof e!="string")throw new Error("name must be a string");return MR(t,e,"cachedContents")}function nC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ni(t){return kf(t)}function NR(t){return t!=null&&typeof t=="object"&&"name"in t}function DR(t){return t!=null&&typeof t=="object"&&"video"in t}function bR(t){return t!=null&&typeof t=="object"&&"uri"in t}function rC(t){var e;let n;if(NR(t)&&(n=t.name),!(bR(t)&&(n=t.uri,n===void 0))&&!(DR(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function iC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function oC(t){for(const e of["models","tunedModels","publisherModels"])if(LR(t,e))return t[e];return[]}function LR(t,e){return t!==null&&typeof t=="object"&&e in t}function FR(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function VR(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=FR(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function sC(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function UR(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function so(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function aC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BR(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function OR(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function $R(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function zR(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],BR(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],OR(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],$R(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function lC(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>zR(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function GR(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const x=l(t,["minimum"]);x!=null&&u(e,["minimum"],x);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const I=l(t,["title"]);I!=null&&u(e,["title"],I);const k=l(t,["type"]);return k!=null&&u(e,["type"],k),e}function HR(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function WR(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function qR(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function JR(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],qR(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function KR(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function YR(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],KR(n)),e}function XR(){return{}}function ZR(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function QR(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>WR(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],JR(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],YR(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],XR());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],ZR(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function jR(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function eM(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function tM(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],eM(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function nM(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],jR(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],tM(r)),e}function rM(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function uC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],rM(n)),e}function iM(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],uC(r)),e}function oM(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iM(i))),u(e,["speakerVoiceConfigs"],r)}return e}function sM(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],uC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],oM(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function aM(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function lM(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],lC(St(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const x=l(e,["responseMimeType"]);x!=null&&u(r,["responseMimeType"],x);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],GR(Dh(y)));const v=l(e,["responseJsonSchema"]);if(v!=null&&u(r,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let H=w;Array.isArray(H)&&(H=H.map(M=>HR(M))),u(n,["safetySettings"],H)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let H=oo(E);Array.isArray(H)&&(H=H.map(M=>QR(io(M)))),u(n,["tools"],H)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],nM(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],Kn(t,I));const k=l(e,["responseModalities"]);k!=null&&u(r,["responseModalities"],k);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],sM(bh(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=l(e,["thinkingConfig"]);return b!=null&&u(r,["thinkingConfig"],aM(b)),r}function uM(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],Ae(t,r));const i=l(e,["contents"]);if(i!=null){let s=sn(i);Array.isArray(s)&&(s=s.map(a=>lC(a))),u(n,["request","contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["request","generationConfig"],lM(t,o,n)),n}function cM(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>uM(t,s))),u(n,["requests","requests"],o)}return n}function fM(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function jy(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["src"]);i!=null&&u(n,["batch","inputConfig"],cM(t,sC(t,i)));const o=l(e,["config"]);return o!=null&&u(n,["config"],fM(o,n)),n}function dM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],so(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function hM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],so(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function pM(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mM(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],pM(n,e)),e}function gM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],so(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function yM(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function vM(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function _M(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&u(e,["outputConfig"],vM(UR(i))),n}function wM(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Ae(t,r));const i=l(e,["src"]);i!=null&&u(n,["inputConfig"],yM(sC(t,i)));const o=l(e,["config"]);return o!=null&&u(n,["config"],_M(o,n)),n}function xM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],so(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function CM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],so(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function TM(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function SM(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],TM(n,e)),e}function EM(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],so(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function AM(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function PM(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function IM(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function kM(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],AM(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],PM(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],IM(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function RM(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kM(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function MM(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function NM(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function DM(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>NM(i))),u(e,["urlMetadata"],r)}return e}function bM(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],RM(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],MM(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],DM(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function LM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>bM(f))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function cC(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function FM(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],LM(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],cC(r)),e}function VM(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>FM(o))),u(e,["inlinedResponses"],i)}return e}function Ua(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&u(e,["state"],aC(i));const o=l(t,["metadata","createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const f=l(t,["metadata","output"]);return f!=null&&u(e,["dest"],VM(f)),e}function UM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ua(s))),u(e,["batchJobs"],o)}return e}function BM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],cC(o)),e}function fC(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function OM(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function $M(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function Df(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],aC(i));const o=l(t,["error"]);o!=null&&u(e,["error"],fC(o));const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const f=l(t,["updateTime"]);f!=null&&u(e,["updateTime"],f);const d=l(t,["model"]);d!=null&&u(e,["model"],d);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],OM(h));const p=l(t,["outputConfig"]);return p!=null&&u(e,["dest"],$M(p)),e}function zM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Df(s))),u(e,["batchJobs"],o)}return e}function GM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],fC(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Xr||(Xr={}));class Ns{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let HM=class extends ti{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const a=jy(this.apiClient,n);o=se("{model}:batchGenerateContent",a._url),s=a._query;const d=a.batch.inputConfig.requests,h=d.requests,p=[];for(const _ of h){const g=_;if(g.systemInstruction){const x=g.systemInstruction;delete g.systemInstruction;const y=g.request;y.systemInstruction=x,g.request=y}p.push(g)}return d.requests=p,delete a.config,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()).then(_=>Ua(_))}return await this.createInternal(n)},this.list=async(n={})=>new Ns(Xr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=wM(this.apiClient,e);return a=se("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Df(d))}else{const f=jy(this.apiClient,e);return a=se("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ua(d))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=xM(this.apiClient,e);return a=se("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Df(d))}else{const f=dM(this.apiClient,e);return a=se("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ua(d))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const c=CM(this.apiClient,e);s=se("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=hM(this.apiClient,e);s=se("batches/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=SM(e);return a=se("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=zM(d),p=new Yy;return Object.assign(p,h),p})}else{const f=mM(e);return a=se("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=UM(d),p=new Yy;return Object.assign(p,h),p})}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=EM(this.apiClient,e);return a=se("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>GM(d))}else{const f=gM(this.apiClient,e);return a=se("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>BM(d))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WM(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function qM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function JM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function KM(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],WM(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],qM(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],JM(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function ev(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KM(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function YM(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function XM(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function ZM(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],XM(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function QM(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function jM(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],QM(n)),e}function e2(){return{}}function t2(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function n2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>YM(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],ZM(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],jM(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],e2());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],t2(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function r2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function i2(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function o2(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],i2(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function s2(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],r2(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],o2(r)),e}function a2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let d=sn(s);Array.isArray(d)&&(d=d.map(h=>ev(h))),u(e,["contents"],d)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],ev(St(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>n2(h))),u(e,["tools"],d)}const f=l(t,["toolConfig"]);if(e!==void 0&&f!=null&&u(e,["toolConfig"],s2(f)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function l2(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Xx(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],a2(i,n)),n}function u2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Kn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function c2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Kn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function f2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function d2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Kn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],f2(i,n)),n}function h2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function p2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],h2(n,e)),e}function m2(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function g2(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function y2(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function v2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],m2(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],g2(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],y2(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function tv(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>v2(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function _2(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function w2(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function x2(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],w2(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function C2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function T2(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],C2(n)),e}function S2(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function E2(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function A2(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],E2(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function P2(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],A2(n)),e}function I2(){return{}}function k2(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function R2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>_2(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],x2(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],T2(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],S2(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],P2(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],I2());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],k2(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function M2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function N2(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function D2(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],N2(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function b2(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],M2(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],D2(r)),e}function L2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=sn(s);Array.isArray(h)&&(h=h.map(p=>tv(p))),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],tv(St(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>R2(p))),u(e,["tools"],h)}const f=l(t,["toolConfig"]);e!==void 0&&f!=null&&u(e,["toolConfig"],b2(f));const d=l(t,["kmsKeyName"]);return e!==void 0&&d!=null&&u(e,["encryption_spec","kmsKeyName"],d),n}function F2(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Xx(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],L2(i,n)),n}function V2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Kn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function U2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Kn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function B2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function O2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Kn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],B2(i,n)),n}function $2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function z2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],$2(n,e)),e}function Ba(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&u(e,["updateTime"],s);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function G2(){return{}}function H2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ba(s))),u(e,["cachedContents"],o)}return e}function Oa(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&u(e,["updateTime"],s);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function W2(){return{}}function q2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Oa(s))),u(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J2 extends ti{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ns(Xr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=F2(this.apiClient,e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Oa(d))}else{const f=l2(this.apiClient,e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ba(d))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=V2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Oa(d))}else{const f=u2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ba(d))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=U2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(()=>{const d=W2(),h=new Jy;return Object.assign(h,d),h})}else{const f=c2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=G2(),h=new Jy;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=O2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Oa(d))}else{const f=d2(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ba(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=z2(e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=q2(d),p=new Ky;return Object.assign(p,h),p})}else{const f=p2(e);return a=se("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=H2(d),p=new Ky;return Object.assign(p,h),p})}}}function nv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(t){return this instanceof be?(this.v=t,this):new be(t)}function Bi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(i[m]=function(g){return new Promise(function(x,y){o.push([m,g,x,y])>1||c(m,g)})},_&&(i[m]=_(i[m])))}function c(m,_){try{f(r[m](_))}catch(g){p(o[0][3],g)}}function f(m){m.value instanceof be?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,_){m(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Xo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nv=="function"?nv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(f){o({value:f,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K2(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:dC(n)}function dC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Y2(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function rv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!dC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class X2{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Z2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let Z2=class{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Y2(o)}async sendMessage(e){var n;await this.sendPromise;const r=St(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,d=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(h))!==null&&a!==void 0?a:[]);const m=f?[f]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=St(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?rv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Bi(this,arguments,function*(){var s,a,c,f;const d=[];try{for(var h=!0,p=Xo(e),m;m=yield be(p.next()),s=m.done,!s;h=!0){f=m.value,h=!1;const _=f;if(K2(_)){const g=(i=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;g!==void 0&&d.push(g)}yield yield be(_)}}catch(_){a={error:_}}finally{try{!h&&!s&&(c=p.return)&&(yield be(c.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...rv(r)):this.history.push(e),this.history.push(...i)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function j2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],Q2(n,e)),e}function eN(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function tN(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&u(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const _=l(t,["videoMetadata"]);_!=null&&u(e,["videoMetadata"],_);const g=l(t,["error"]);return g!=null&&u(e,["error"],eN(g)),e}function nN(t){const e={},n=l(t,["file"]);n!=null&&u(e,["file"],tN(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function rN(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],rC(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function iN(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],rC(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function oN(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function bf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&u(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const _=l(t,["videoMetadata"]);_!=null&&u(e,["videoMetadata"],_);const g=l(t,["error"]);return g!=null&&u(e,["error"],oN(g)),e}function sN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bf(s))),u(e,["files"],o)}return e}function aN(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function lN(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uN=class extends ti{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ns(Xr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>bf(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=j2(e);return o=se("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=sN(c),d=new ER;return Object.assign(d,f),d})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nN(e);return o=se("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=aN(c),d=new AR;return Object.assign(d,f),d})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rN(e);return o=se("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>bf(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iN(e);return o=se("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{const c=lN(),f=new PR;return Object.assign(f,c),f})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cN(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function hC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],cN(n)),e}function fN(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],hC(r)),e}function dN(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fN(i))),u(e,["speakerVoiceConfigs"],r)}return e}function hN(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],hC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],dN(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function pN(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function mN(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function gN(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function yN(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],pN(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],mN(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],gN(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function vN(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yN(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function _N(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function wN(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function xN(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],wN(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function CN(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function TN(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],CN(n)),e}function SN(){return{}}function EN(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function AN(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>_N(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],xN(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],TN(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],SN());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],EN(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function PN(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iv(){return{}}function IN(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function kN(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],IN(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function RN(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function MN(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],RN(r)),e}function NN(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function DN(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],hN(Lh(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],vN(St(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=oo(_);Array.isArray(A)&&(A=A.map(I=>AN(io(I)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],PN(g));const x=l(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&u(e,["setup","inputAudioTranscription"],iv());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],iv());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],kN(v));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],MN(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],NN(E)),n}function bN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],DN(i,n)),n}function LN(){return{}}function FN(){return{}}function VN(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],Zx(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],jx(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],Qx(o));const s=l(t,["text"]);return s!=null&&u(e,["text"],s),l(t,["activityStart"])!=null&&u(e,["activityStart"],LN()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],FN()),e}function pC(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function UN(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>pC(i))),u(e,["weightedPrompts"],r)}return e}function mC(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&u(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&u(e,["bpm"],s);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function BN(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],mC(n)),e}function gC(t){const e={},n=l(t,["model"]);return n!=null&&u(e,["model"],n),e}function yC(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>pC(i))),u(e,["weightedPrompts"],r)}return e}function Lf(t){const e={},n=l(t,["setup"]);n!=null&&u(e,["setup"],gC(n));const r=l(t,["clientContent"]);r!=null&&u(e,["clientContent"],yC(r));const i=l(t,["musicGenerationConfig"]);i!=null&&u(e,["musicGenerationConfig"],mC(i));const o=l(t,["playbackControl"]);return o!=null&&u(e,["playbackControl"],o),e}function ON(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function $N(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],ON(n)),e}function zN(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],$N(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function GN(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function HN(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function WN(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function qN(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],GN(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],HN(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],WN(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function JN(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qN(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function KN(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function YN(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function XN(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],YN(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function ZN(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function QN(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],ZN(n)),e}function jN(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function eD(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function tD(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],eD(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function nD(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],tD(n)),e}function rD(){return{}}function iD(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function oD(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>KN(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],XN(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],QN(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],jN(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],nD(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],rD());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],iD(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function sD(t){const e={},n=l(t,["handle"]);n!=null&&u(e,["handle"],n);const r=l(t,["transparent"]);return r!=null&&u(e,["transparent"],r),e}function ov(){return{}}function aD(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function lD(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],aD(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function uD(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function cD(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],uD(r)),e}function fD(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function dD(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],zN(Lh(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],JN(St(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=oo(_);Array.isArray(A)&&(A=A.map(I=>oD(io(I)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],sD(g));const x=l(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&u(e,["setup","inputAudioTranscription"],ov());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],ov());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],lD(v));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],cD(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],fD(E)),n}function hD(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],dD(i,n)),n}function pD(){return{}}function mD(){return{}}function gD(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],Zx(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],jx(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],Qx(o));const s=l(t,["text"]);return s!=null&&u(e,["text"],s),l(t,["activityStart"])!=null&&u(e,["activityStart"],pD()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],mD()),e}function yD(){return{}}function vD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function _D(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function wD(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function xD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],vD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],_D(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],wD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function CD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function sv(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function TD(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function SD(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>TD(i))),u(e,["urlMetadata"],r)}return e}function ED(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],CD(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&u(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&u(e,["generationComplete"],s);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],sv(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],sv(c));const f=l(t,["urlContextMetadata"]);return f!=null&&u(e,["urlContextMetadata"],SD(f)),e}function AD(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);return i!=null&&u(e,["name"],i),e}function PD(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AD(i))),u(e,["functionCalls"],r)}return e}function ID(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function ca(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function kD(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["responseTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ca(m))),u(e,["promptTokensDetails"],p)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>ca(m))),u(e,["cacheTokensDetails"],p)}const d=l(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>ca(m))),u(e,["responseTokensDetails"],p)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>ca(m))),u(e,["toolUsePromptTokensDetails"],p)}return e}function RD(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function MD(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function ND(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],yD());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],ED(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],PD(i));const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],ID(o));const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],kD(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],RD(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],MD(c)),e}function DD(){return{}}function bD(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function LD(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>bD(i))),u(e,["weightedPrompts"],r)}return e}function FD(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&u(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&u(e,["bpm"],s);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function VD(t){const e={},n=l(t,["clientContent"]);n!=null&&u(e,["clientContent"],LD(n));const r=l(t,["musicGenerationConfig"]);return r!=null&&u(e,["musicGenerationConfig"],FD(r)),e}function UD(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);r!=null&&u(e,["mimeType"],r);const i=l(t,["sourceMetadata"]);return i!=null&&u(e,["sourceMetadata"],VD(i)),e}function BD(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>UD(i))),u(e,["audioChunks"],r)}return e}function OD(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["filteredReason"]);return r!=null&&u(e,["filteredReason"],r),e}function $D(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],DD());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],BD(r));const i=l(t,["filteredPrompt"]);return i!=null&&u(e,["filteredPrompt"],OD(i)),e}function zD(t){const e={},n=l(t,["sessionId"]);return n!=null&&u(e,["sessionId"],n),e}function GD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function HD(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function WD(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function qD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],GD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],HD(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],WD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function JD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function av(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function KD(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],JD(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&u(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&u(e,["generationComplete"],s);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],av(a));const c=l(t,["outputTranscription"]);return c!=null&&u(e,["outputTranscription"],av(c)),e}function YD(t){const e={},n=l(t,["args"]);n!=null&&u(e,["args"],n);const r=l(t,["name"]);return r!=null&&u(e,["name"],r),e}function XD(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>YD(i))),u(e,["functionCalls"],r)}return e}function ZD(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function fa(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function QD(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(_=>fa(_))),u(e,["promptTokensDetails"],m)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>fa(_))),u(e,["cacheTokensDetails"],m)}const d=l(t,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>fa(_))),u(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>fa(_))),u(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}function jD(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function eb(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function tb(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],zD(n));const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],KD(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],XD(i));const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],ZD(o));const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],QD(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],jD(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],eb(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nb(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function rb(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ib(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ob(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],nb(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],rb(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],ib(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function tu(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ob(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function sb(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const x=l(t,["minimum"]);x!=null&&u(e,["minimum"],x);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const I=l(t,["title"]);I!=null&&u(e,["title"],I);const k=l(t,["type"]);return k!=null&&u(e,["type"],k),e}function ab(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function lb(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function ub(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function cb(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],ub(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function fb(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function db(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],fb(n)),e}function hb(){return{}}function pb(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function mb(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>lb(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],cb(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],db(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],hb());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],pb(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function gb(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function yb(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function vb(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],yb(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function _b(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],gb(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],vb(r)),e}function wb(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function vC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],wb(n)),e}function xb(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],vC(r)),e}function Cb(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xb(i))),u(e,["speakerVoiceConfigs"],r)}return e}function Tb(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],vC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],Cb(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function Sb(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function Eb(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],tu(St(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const x=l(e,["responseMimeType"]);x!=null&&u(r,["responseMimeType"],x);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],sb(Dh(y)));const v=l(e,["responseJsonSchema"]);if(v!=null&&u(r,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=l(e,["safetySettings"]);if(n!==void 0&&w!=null){let H=w;Array.isArray(H)&&(H=H.map(M=>ab(M))),u(n,["safetySettings"],H)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let H=oo(E);Array.isArray(H)&&(H=H.map(M=>mb(io(M)))),u(n,["tools"],H)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],_b(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],Kn(t,I));const k=l(e,["responseModalities"]);k!=null&&u(r,["responseModalities"],k);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],Tb(bh(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=l(e,["thinkingConfig"]);return b!=null&&u(r,["thinkingConfig"],Sb(b)),r}function lv(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);if(i!=null){let s=sn(i);Array.isArray(s)&&(s=s.map(a=>tu(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],Eb(t,o,n)),n}function Ab(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&u(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Pb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);i!=null&&u(n,["requests[]","content"],tC(t,i));const o=l(e,["config"]);o!=null&&u(n,["config"],Ab(o,n));const s=l(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],Ae(t,s)),n}function Ib(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&u(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const f=l(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const d=l(t,["language"]);e!==void 0&&d!=null&&u(e,["parameters","language"],d);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const m=l(t,["imageSize"]);if(e!==void 0&&m!=null&&u(e,["parameters","sampleImageSize"],m),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function kb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&u(n,["config"],Ib(o,n)),n}function Rb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function Mb(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],iC(t,a)),r}function Nb(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],Mb(t,r,n)),n}function Db(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function bb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],Db(i,n)),n}function Lb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function Fb(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Vb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);if(i!=null){let s=sn(i);Array.isArray(s)&&(s=s.map(a=>tu(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],Fb(o)),n}function Ub(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],ni(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Bb(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);if(e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=l(t,["personGeneration"]);if(e!==void 0&&s!=null&&u(e,["parameters","personGeneration"],s),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=l(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&u(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Ob(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);if(o!=null&&u(n,["instances[0]","image"],Ub(o)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=l(e,["config"]);return s!=null&&u(n,["config"],Bb(s,n)),n}function $b(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function zb(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Gb(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Hb(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],$b(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],zb(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],Gb(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function ao(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Hb(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Wb(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const _=l(t,["minLength"]);_!=null&&u(e,["minLength"],_);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const x=l(t,["minimum"]);x!=null&&u(e,["minimum"],x);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const w=l(t,["properties"]);w!=null&&u(e,["properties"],w);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const I=l(t,["title"]);I!=null&&u(e,["title"],I);const k=l(t,["type"]);return k!=null&&u(e,["type"],k),e}function qb(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&u(e,["featureSelectionPreference"],n),e}function Jb(t){const e={},n=l(t,["method"]);n!=null&&u(e,["method"],n);const r=l(t,["category"]);r!=null&&u(e,["category"],r);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function Kb(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function Yb(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function Xb(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],Yb(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function Zb(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function Qb(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],Zb(n)),e}function jb(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function e5(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function t5(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],e5(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function n5(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],t5(n)),e}function r5(){return{}}function i5(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function _C(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Kb(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],Xb(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],Qb(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],jb(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],n5(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],r5());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],i5(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function o5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function s5(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function a5(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],s5(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function l5(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],o5(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],a5(r)),e}function u5(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function c5(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],u5(n)),e}function f5(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],c5(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function d5(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function h5(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],ao(St(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const x=l(e,["responseMimeType"]);x!=null&&u(r,["responseMimeType"],x);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],Wb(Dh(y)));const v=l(e,["responseJsonSchema"]);v!=null&&u(r,["responseJsonSchema"],v);const w=l(e,["routingConfig"]);w!=null&&u(r,["routingConfig"],w);const E=l(e,["modelSelectionConfig"]);E!=null&&u(r,["modelConfig"],qb(E));const A=l(e,["safetySettings"]);if(n!==void 0&&A!=null){let G=A;Array.isArray(G)&&(G=G.map(ae=>Jb(ae))),u(n,["safetySettings"],G)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let G=oo(I);Array.isArray(G)&&(G=G.map(ae=>_C(io(ae)))),u(n,["tools"],G)}const k=l(e,["toolConfig"]);n!==void 0&&k!=null&&u(n,["toolConfig"],l5(k));const N=l(e,["labels"]);n!==void 0&&N!=null&&u(n,["labels"],N);const D=l(e,["cachedContent"]);n!==void 0&&D!=null&&u(n,["cachedContent"],Kn(t,D));const b=l(e,["responseModalities"]);b!=null&&u(r,["responseModalities"],b);const H=l(e,["mediaResolution"]);H!=null&&u(r,["mediaResolution"],H);const M=l(e,["speechConfig"]);M!=null&&u(r,["speechConfig"],f5(bh(M)));const z=l(e,["audioTimestamp"]);z!=null&&u(r,["audioTimestamp"],z);const S=l(e,["thinkingConfig"]);return S!=null&&u(r,["thinkingConfig"],d5(S)),r}function uv(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);if(i!=null){let s=sn(i);Array.isArray(s)&&(s=s.map(a=>ao(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],h5(t,o,n)),n}function p5(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&u(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function m5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);i!=null&&u(n,["instances[]","content"],tC(t,i));const o=l(e,["config"]);return o!=null&&u(n,["config"],p5(o,n)),n}function g5(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const x=l(t,["addWatermark"]);e!==void 0&&x!=null&&u(e,["parameters","addWatermark"],x);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v),n}function y5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&u(n,["config"],g5(o,n)),n}function Yn(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],ni(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function v5(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&u(e,["dilation"],i),e}function _5(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function w5(t){const e={},n=l(t,["styleDescription"]);return n!=null&&u(e,["styleDescription"],n),e}function x5(t){const e={},n=l(t,["subjectType"]);n!=null&&u(e,["subjectType"],n);const r=l(t,["subjectDescription"]);return r!=null&&u(e,["subjectDescription"],r),e}function C5(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Yn(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&u(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&u(e,["maskImageConfig"],v5(o));const s=l(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],_5(s));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],w5(a));const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],x5(c)),e}function T5(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const x=l(t,["addWatermark"]);e!==void 0&&x!=null&&u(e,["parameters","addWatermark"],x);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&u(e,["parameters","editConfig","baseSteps"],v),n}function S5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>C5(c))),u(n,["instances[0]","referenceImages"],a)}const s=l(e,["config"]);return s!=null&&u(n,["config"],T5(s,n)),n}function E5(t,e){const n={},r=l(t,["includeRaiReason"]);e!==void 0&&r!=null&&u(e,["parameters","includeRaiReason"],r);const i=l(t,["outputMimeType"]);e!==void 0&&i!=null&&u(e,["parameters","outputOptions","mimeType"],i);const o=l(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&u(e,["parameters","outputOptions","compressionQuality"],o);const s=l(t,["enhanceInputImage"]);e!==void 0&&s!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],s);const a=l(t,["imagePreservationFactor"]);e!==void 0&&a!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const c=l(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=l(t,["mode"]);return e!==void 0&&f!=null&&u(e,["parameters","mode"],f),n}function A5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],Yn(i));const o=l(e,["upscaleFactor"]);o!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&u(n,["config"],E5(s,n)),n}function P5(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],Yn(n)),e}function I5(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&u(e,["instances[0]","personImage","image"],Yn(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>P5(a))),u(e,["instances[0]","productImages"],s)}return n}function k5(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&u(e,["parameters","editConfig","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const d=l(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&u(e,["parameters","outputOptions","compressionQuality"],d);const h=l(t,["enhancePrompt"]);return e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h),n}function R5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],I5(i,n));const o=l(e,["config"]);return o!=null&&u(n,["config"],k5(o,n)),n}function M5(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],Yn(n)),e}function N5(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],Yn(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&u(e,["instances[0]","scribble"],M5(o)),n}function D5(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&u(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&u(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const a=l(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a),n}function b5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],N5(i,n));const o=l(e,["config"]);return o!=null&&u(n,["config"],D5(o,n)),n}function L5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function F5(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],iC(t,a)),r}function V5(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],F5(t,r,n)),n}function U5(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function B5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],U5(i,n)),n}function O5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function $5(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],ao(St(r)));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>_C(a))),u(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&u(e,["generationConfig"],o),n}function z5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);if(i!=null){let s=sn(i);Array.isArray(s)&&(s=s.map(a=>ao(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],$5(o,n)),n}function G5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["contents"]);if(i!=null){let s=sn(i);Array.isArray(s)&&(s=s.map(a=>ao(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],o),n}function H5(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],ni(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function W5(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Yn(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function q5(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&u(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=l(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const _=l(t,["generateAudio"]);e!==void 0&&_!=null&&u(e,["parameters","generateAudio"],_);const g=l(t,["lastFrame"]);e!==void 0&&g!=null&&u(e,["instances[0]","lastFrame"],Yn(g));const x=l(t,["referenceImages"]);if(e!==void 0&&x!=null){let v=x;Array.isArray(v)&&(v=v.map(w=>W5(w))),u(e,["instances[0]","referenceImages"],v)}const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),n}function J5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ae(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],Yn(o));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],H5(s));const a=l(e,["config"]);return a!=null&&u(n,["config"],q5(a,n)),n}function K5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function Y5(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function X5(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Z5(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],K5(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],Y5(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],X5(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Q5(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Z5(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function j5(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function eL(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function tL(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>eL(i))),u(e,["urlMetadata"],r)}return e}function nL(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],Q5(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],j5(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],tL(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function cv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>nL(f))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function rL(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function iL(){return{}}function oL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>rL(s))),u(e,["embeddings"],o)}return l(t,["metadata"])!=null&&u(e,["metadata"],iL()),e}function sL(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],ni(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function wC(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function aL(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],sL(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&u(e,["safetyAttributes"],wC(i)),e}function lL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>aL(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],wC(i)),e}function uL(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function Ff(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["version"]);o!=null&&u(e,["version"],o);const s=l(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],uL(s));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const f=l(t,["supportedGenerationMethods"]);return f!=null&&u(e,["supportedActions"],f),e}function cL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=oC(i);Array.isArray(o)&&(o=o.map(s=>Ff(s))),u(e,["models"],o)}return e}function fL(){return{}}function dL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(e,["cachedContentTokenCount"],i),e}function hL(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["video","encodedVideo"]);r!=null&&u(e,["videoBytes"],ni(r));const i=l(t,["encoding"]);return i!=null&&u(e,["mimeType"],i),e}function pL(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],hL(n)),e}function mL(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>pL(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function gL(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],mL(s)),e}function yL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function vL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function _L(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function wL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],yL(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],vL(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],_L(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function xL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wL(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function CL(t){const e={},n=l(t,["citations"]);return n!=null&&u(e,["citations"],n),e}function TL(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function SL(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>TL(i))),u(e,["urlMetadata"],r)}return e}function EL(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],xL(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],CL(r));const i=l(t,["finishMessage"]);i!=null&&u(e,["finishMessage"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],SL(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function fv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>EL(d))),u(e,["candidates"],f)}const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function AL(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function PL(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],AL(r)),e}function IL(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&u(e,["billableCharacterCount"],n),e}function kL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>PL(s))),u(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],IL(i)),e}function xC(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],ni(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function CC(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function nu(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],xC(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&u(e,["safetyAttributes"],CC(i));const o=l(t,["prompt"]);return o!=null&&u(e,["enhancedPrompt"],o),e}function RL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>nu(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],CC(i)),e}function ML(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>nu(o))),u(e,["generatedImages"],i)}return e}function NL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>nu(o))),u(e,["generatedImages"],i)}return e}function DL(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>nu(i))),u(e,["generatedImages"],r)}return e}function bL(t){const e={},n=l(t,["label"]);n!=null&&u(e,["label"],n);const r=l(t,["score"]);return r!=null&&u(e,["score"],r),e}function LL(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],xC(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bL(o))),u(e,["labels"],i)}return e}function FL(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>LL(i))),u(e,["generatedMasks"],r)}return e}function VL(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function UL(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function BL(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);return i!=null&&u(e,["step"],i),e}function Vf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["versionId"]);o!=null&&u(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>VL(p))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],UL(c));const f=l(t,["defaultCheckpointId"]);f!=null&&u(e,["defaultCheckpointId"],f);const d=l(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>BL(p))),u(e,["checkpoints"],h)}return e}function OL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=oC(i);Array.isArray(o)&&(o=o.map(s=>Vf(s))),u(e,["models"],o)}return e}function $L(){return{}}function zL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function GL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);return r!=null&&u(e,["tokensInfo"],r),e}function HL(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],ni(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function WL(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],HL(n)),e}function qL(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>WL(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function JL(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],qL(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KL="Content-Type",YL="X-Server-Timeout",XL="User-Agent",Uf="x-goog-api-client",ZL="1.15.0",QL=`google-genai-sdk/${ZL}`,jL="v1beta1",eF="v1beta",dv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class tF{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:jL,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:eF,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&n?.timeout>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&nF(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await hv(i),new Mf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await hv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Bi(this,arguments,function*(){const i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:c}=yield be(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const h=JSON.parse(f);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,_=p.code,g=`got status: ${m}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new eu({message:g,status:_})}}catch(h){if(h.name==="ApiError")throw h}s+=f;let d=s.match(dv);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield be(new Mf(p)),s=s.slice(d[0].length),d=s.match(dv)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=QL+" "+this.clientOptions.userAgentExtra;return e[XL]=n,e[Uf]=n,e[KL]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(YL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n?.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:se("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!s?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=s?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function hv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new eu({message:i,status:n}):new Error(i)}}function nF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],d=a[c];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?a[c]=r(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),a[c]=f)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rF="mcp_used/unknown";let iF=!1;function TC(t){for(const e of t)if(oF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return iF}function SC(t){var e;const n=(e=t[Uf])!==null&&e!==void 0?e:"";t[Uf]=(n+` ${rF}`).trimStart()}function oF(t){return t!==null&&typeof t=="object"&&t instanceof Fh}function sF(t,e=100){return Bi(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield be(t.listTools({cursor:r}));for(const s of o.tools)yield yield be(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Fh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Fh(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const d of this.mcpClients)try{for(var a=!0,c=(n=void 0,Xo(sF(d))),f;f=await c.next(),e=f.done,!e;a=!0){i=f.value,a=!1;const h=i;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),VR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function aF(t,e,n){const r=new kR;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=$D(i);Object.assign(r,o),e(r)}class lF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=fF(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let f=()=>{};const d=new Promise(w=>{f=w}),h=e.callbacks,p=function(){f({})},m=this.apiClient,_={onopen:p,onmessage:w=>{aF(m,h.onmessage,w)},onerror:(n=h?.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=h?.onclose)!==null&&r!==void 0?r:function(w){}},g=this.webSocketFactory.create(c,cF(s),_);g.connect(),await d;const x=Ae(this.apiClient,e.model),y=gC({model:x}),v=Lf({setup:y});return g.send(JSON.stringify(v)),new uF(g,this.apiClient)}}class uF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=UN(e),r=yC(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=BN(e),r=Lf(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=Lf({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ri.PLAY)}pause(){this.sendPlaybackControl(Ri.PAUSE)}stop(){this.sendPlaybackControl(Ri.STOP)}resetContext(){this.sendPlaybackControl(Ri.RESET_CONTEXT)}close(){this.conn.close()}}function cF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function fF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hF(t,e,n){const r=new IR;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=tb(o);Object.assign(r,s)}else{const s=ND(o);Object.assign(r,s)}e(r)}class pF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new lF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&TC(e.config.tools)&&SC(h);const p=vF(h);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const D=this.apiClient.getApiKey();let b="BidiGenerateContent",H="key";D?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",H="access_token"),d=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${b}?${H}=${D}`}let m=()=>{};const _=new Promise(D=>{m=D}),g=e.callbacks,x=function(){var D;(D=g?.onopen)===null||D===void 0||D.call(g),m({})},y=this.apiClient,v={onopen:x,onmessage:D=>{hF(y,g.onmessage,D)},onerror:(n=g?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=g?.onclose)!==null&&r!==void 0?r:function(D){}},w=this.webSocketFactory.create(d,yF(p),v);w.connect(),await _;let E=Ae(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const D=this.apiClient.getProject(),b=this.apiClient.getLocation();E=`projects/${D}/locations/${b}/`+E}let A={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sl.AUDIO]}:e.config.responseModalities=[Sl.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],k=[];for(const D of I)if(this.isCallableTool(D)){const b=D;k.push(await b.tool())}else k.push(D);k.length>0&&(e.config.tools=k);const N={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=hD(this.apiClient,N):A=bN(this.apiClient,N),delete A.config,w.send(JSON.stringify(A)),new gF(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mF={turnComplete:!0};class gF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=sn(n.turns),e.isVertexAI()?r=r.map(i=>ao(i)):r=r.map(i=>tu(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(dF)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},mF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:gD(e)}:n={realtimeInput:VN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function yF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function vF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pv=10;function mv(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Oi(s)){i=!0;break}if(!i)return!0;const o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Oi(t){return"callTool"in t&&typeof t.callTool=="function"}function _F(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Oi(i)))!==null&&r!==void 0?r:!1}function wF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Oi(i)))!==null&&r!==void 0?r:!1}function gv(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xF=class extends ti{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!_F(n)||mv(n.config))return await this.generateContentInternal(c);if(wF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,d;const h=sn(c.contents),p=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:pv;let m=0;for(;m<p&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const _=f.candidates[0].content,g=[];for(const x of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Oi(x)){const v=await x.callTool(f.functionCalls);g.push(...v)}m++,d={role:"user",parts:g},c.contents=sn(c.contents),c.contents.push(_),c.contents.push(d),gv(c.config)&&(h.push(_),h.push(d))}return gv(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),mv(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c?.safetyAttributes:s.push(c);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ns(Xr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Oi(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&TC(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),SC(f),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Oi(s)){const a=s,c=await a.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:pv;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(f,d,h){var p,m;return Bi(this,arguments,function*(){for(var _,g,x,y;a<o;){s&&(a++,s=!1);const A=yield be(f.processParamsMaybeAddMcpUsage(h)),I=yield be(f.generateContentStreamInternal(A)),k=[],N=[];try{for(var v=!0,w=(g=void 0,Xo(I)),E;E=yield be(w.next()),_=E.done,!_;v=!0){y=E.value,v=!1;const D=y;if(yield yield be(D),D.candidates&&(!((p=D.candidates[0])===null||p===void 0)&&p.content)){N.push(D.candidates[0].content);for(const b of(m=D.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(a<o&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(b.functionCall.name)){const H=yield be(d.get(b.functionCall.name).callTool([b.functionCall]));k.push(...H)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(D){g={error:D}}finally{try{!v&&!_&&(x=w.return)&&(yield be(x.call(w)))}finally{if(g)throw g.error}}if(k.length>0){s=!0;const D=new xo;D.candidates=[{content:{role:"user",parts:k}}],yield yield be(D);const b=[];b.push(...N),b.push({role:"user",parts:k});const H=sn(h.contents).concat(b);h.contents=H}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=uv(this.apiClient,e);return a=se("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=fv(d),p=new xo;return Object.assign(p,h),p})}else{const f=lv(this.apiClient,e);return a=se("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=cv(d),p=new xo;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=uv(this.apiClient,e);return a=se("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return Bi(this,arguments,function*(){var p,m,_,g;try{for(var x=!0,y=Xo(h),v;v=yield be(y.next()),p=v.done,!p;x=!0){g=v.value,x=!1;const w=g,E=fv(yield be(w.json()));E.sdkHttpResponse={headers:w.headers};const A=new xo;Object.assign(A,E),yield yield be(A)}}catch(w){m={error:w}}finally{try{!x&&!p&&(_=y.return)&&(yield be(_.call(y)))}finally{if(m)throw m.error}}})})}else{const f=lv(this.apiClient,e);return a=se("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return Bi(this,arguments,function*(){var p,m,_,g;try{for(var x=!0,y=Xo(h),v;v=yield be(y.next()),p=v.done,!p;x=!0){g=v.value,x=!1;const w=g,E=cv(yield be(w.json()));E.sdkHttpResponse={headers:w.headers};const A=new xo;Object.assign(A,E),yield yield be(A)}}catch(w){m={error:w}}finally{try{!x&&!p&&(_=y.return)&&(yield be(_.call(y)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=m5(this.apiClient,e);return a=se("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=kL(d),p=new Oy;return Object.assign(p,h),p})}else{const f=Pb(this.apiClient,e);return a=se("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=oL(d),p=new Oy;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=y5(this.apiClient,e);return a=se("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=RL(d),p=new $y;return Object.assign(p,h),p})}else{const f=kb(this.apiClient,e);return a=se("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=lL(d),p=new $y;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=S5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=ML(c),d=new wR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=A5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=NL(c),d=new xR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=R5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=DL(c),d=new CR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=b5(this.apiClient,e);return o=se("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=FL(c),d=new TR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=L5(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Vf(d))}else{const f=Rb(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ff(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=V5(this.apiClient,e);return a=se("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=OL(d),p=new zy;return Object.assign(p,h),p})}else{const f=Nb(this.apiClient,e);return a=se("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=cL(d),p=new zy;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=B5(this.apiClient,e);return a=se("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Vf(d))}else{const f=bb(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Ff(d))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=O5(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(()=>{const d=$L(),h=new Gy;return Object.assign(h,d),h})}else{const f=Lb(this.apiClient,e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=fL(),h=new Gy;return Object.assign(h,d),h})}}async countTokens(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=z5(this.apiClient,e);return a=se("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=zL(d),p=new Hy;return Object.assign(p,h),p})}else{const f=Vb(this.apiClient,e);return a=se("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=dL(d),p=new Hy;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=G5(this.apiClient,e);return o=se("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=GL(c),d=new SR;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=J5(this.apiClient,e);return a=se("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{const h=JL(d),p=new El;return Object.assign(p,h),p})}else{const f=Ob(this.apiClient,e);return a=se("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const h=gL(d),p=new El;return Object.assign(p,h),p})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CF(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function TF(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function SF(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);r!=null&&u(e,["_url","resourceName"],r);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EF extends ti{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=TF(e);return a=se("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}else{const f=CF(e);return a=se("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=SF(e);return o=se("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AF(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function EC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],AF(n)),e}function PF(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],EC(r)),e}function IF(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>PF(i))),u(e,["speakerVoiceConfigs"],r)}return e}function kF(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],EC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],IF(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function RF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function MF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function NF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function DF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],RF(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],MF(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],NF(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function bF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>DF(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function LF(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function FF(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function VF(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],FF(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function UF(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function BF(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],UF(n)),e}function OF(){return{}}function $F(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function zF(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>LF(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],VF(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],BF(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],OF());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],$F(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function GF(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yv(){return{}}function HF(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function WF(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],HF(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function qF(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function JF(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],qF(r)),e}function KF(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function YF(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],kF(Lh(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],bF(St(m)));const _=l(t,["tools"]);if(e!==void 0&&_!=null){let A=oo(_);Array.isArray(A)&&(A=A.map(I=>zF(io(I)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],GF(g));const x=l(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&u(e,["setup","inputAudioTranscription"],yv());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],yv());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],WF(v));const w=l(t,["contextWindowCompression"]);e!==void 0&&w!=null&&u(e,["setup","contextWindowCompression"],JF(w));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],KF(E)),n}function XF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ae(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],YF(i,n)),n}function ZF(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&u(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&u(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],XF(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function QF(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],ZF(t,r,n)),n}function jF(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function t3(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=e3(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class n3 extends ti{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=QF(this.apiClient,e);o=se("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=t3(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>jF(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r3(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function i3(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function o3(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],i3(n,e)),e}function s3(t){const e={},n=l(t,["textInput"]);n!=null&&u(e,["textInput"],n);const r=l(t,["output"]);return r!=null&&u(e,["output"],r),e}function a3(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>s3(i))),u(e,["examples","examples"],r)}return e}function l3(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const o=l(t,["learningRateMultiplier"]);if(o!=null&&u(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(t,["batchSize"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","batchSize"],s);const a=l(t,["learningRate"]);return e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","learningRate"],a),n}function u3(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["tuningTask","trainingData"],a3(i));const o=l(t,["config"]);return o!=null&&u(e,["config"],l3(o,e)),e}function c3(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function f3(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function d3(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],f3(n,e)),e}function h3(t,e){const n={},r=l(t,["gcsUri"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function p3(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function m3(t,e){const n={},r=l(t,["validationDataset"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec"],p3(r,n));const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const s=l(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=l(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=l(t,["preTunedModelCheckpointId"]);f!=null&&u(n,["preTunedModel","checkpointId"],f);const d=l(t,["adapterSize"]);if(e!==void 0&&d!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function g3(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],h3(i,e));const o=l(t,["config"]);return o!=null&&u(e,["config"],m3(o,e)),e}function y3(t){const e={},n=l(t,["name"]);n!=null&&u(e,["model"],n);const r=l(t,["name"]);return r!=null&&u(e,["endpoint"],r),e}function AC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],nC(i));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["tuningTask","startTime"]);s!=null&&u(e,["startTime"],s);const a=l(t,["tuningTask","completeTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["description"]);f!=null&&u(e,["description"],f);const d=l(t,["baseModel"]);d!=null&&u(e,["baseModel"],d);const h=l(t,["_self"]);h!=null&&u(e,["tunedModel"],y3(h));const p=l(t,["customBaseModel"]);p!=null&&u(e,["customBaseModel"],p);const m=l(t,["experiment"]);m!=null&&u(e,["experiment"],m);const _=l(t,["labels"]);_!=null&&u(e,["labels"],_);const g=l(t,["outputUri"]);g!=null&&u(e,["outputUri"],g);const x=l(t,["pipelineJob"]);x!=null&&u(e,["pipelineJob"],x);const y=l(t,["serviceAccount"]);y!=null&&u(e,["serviceAccount"],y);const v=l(t,["tunedModelDisplayName"]);return v!=null&&u(e,["tunedModelDisplayName"],v),e}function v3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>AC(s))),u(e,["tuningJobs"],o)}return e}function _3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);return s!=null&&u(e,["error"],s),e}function w3(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);i!=null&&u(e,["step"],i);const o=l(t,["endpoint"]);return o!=null&&u(e,["endpoint"],o),e}function x3(t){const e={},n=l(t,["model"]);n!=null&&u(e,["model"],n);const r=l(t,["endpoint"]);r!=null&&u(e,["endpoint"],r);const i=l(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>w3(s))),u(e,["checkpoints"],o)}return e}function Bf(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],nC(i));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=l(t,["endTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["error"]);f!=null&&u(e,["error"],f);const d=l(t,["description"]);d!=null&&u(e,["description"],d);const h=l(t,["baseModel"]);h!=null&&u(e,["baseModel"],h);const p=l(t,["tunedModel"]);p!=null&&u(e,["tunedModel"],x3(p));const m=l(t,["preTunedModel"]);m!=null&&u(e,["preTunedModel"],m);const _=l(t,["supervisedTuningSpec"]);_!=null&&u(e,["supervisedTuningSpec"],_);const g=l(t,["tuningDataStats"]);g!=null&&u(e,["tuningDataStats"],g);const x=l(t,["encryptionSpec"]);x!=null&&u(e,["encryptionSpec"],x);const y=l(t,["partnerModelTuningSpec"]);y!=null&&u(e,["partnerModelTuningSpec"],y);const v=l(t,["customBaseModel"]);v!=null&&u(e,["customBaseModel"],v);const w=l(t,["experiment"]);w!=null&&u(e,["experiment"],w);const E=l(t,["labels"]);E!=null&&u(e,["labels"],E);const A=l(t,["outputUri"]);A!=null&&u(e,["outputUri"],A);const I=l(t,["pipelineJob"]);I!=null&&u(e,["pipelineJob"],I);const k=l(t,["serviceAccount"]);k!=null&&u(e,["serviceAccount"],k);const N=l(t,["tunedModelDisplayName"]);return N!=null&&u(e,["tunedModelDisplayName"],N),e}function C3(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Bf(s))),u(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T3 extends ti{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ns(Xr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Rf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=c3(e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>Bf(d))}else{const f=r3(e);return a=se("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>AC(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=d3(e);return a=se("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=C3(d),p=new qy;return Object.assign(p,h),p})}else{const f=o3(e);return a=se("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=v3(d),p=new qy;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=g3(e);return o=se("tuningJobs",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>Bf(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=u3(e);return o=se("tunedModels",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>_3(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S3{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const E3=1024*1024*8,A3=3,P3=1e3,I3=2,rc="x-goog-upload-status";async function k3(t,e,n){var r,i,o;let s=0,a=0,c=new Mf(new Response),f="upload";for(s=t.size;a<s;){const h=Math.min(E3,s-a),p=t.slice(a,a+h);a+h>=s&&(f+=", finalize");let m=0,_=P3;for(;m<A3&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[rc]));)m++,await M3(_),_=_*I3;if(a+=h,((i=c?.headers)===null||i===void 0?void 0:i[rc])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[rc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function R3(t){return{size:t.size,type:t.type}}function M3(t){return new Promise(e=>setTimeout(e,t))}class N3{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k3(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await R3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D3{create(e,n,r){return new b3(e,n,r)}}class b3{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vv="x-goog-api-key";class L3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(vv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F3="gl-node/";class V3{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=_R(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new L3(this.apiKey);this.apiClient=new tF({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:F3+"web",uploader:new N3,downloader:new S3}),this.models=new xF(this.apiClient),this.live=new pF(this.apiClient,i,new D3),this.batches=new HM(this.apiClient),this.chats=new X2(this.models,this.apiClient),this.caches=new J2(this.apiClient),this.files=new uN(this.apiClient),this.operations=new EF(this.apiClient),this.authTokens=new n3(this.apiClient),this.tunings=new T3(this.apiClient)}}const Of="RFC3986",$f={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},U3="RFC1738",B3=Array.isArray,Cn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ic=1024,O3=(t,e,n,r,i)=>{if(t.length===0)return t;let o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<o.length;a+=ic){const c=o.length>=ic?o.slice(a,a+ic):o,f=[];for(let d=0;d<c.length;++d){let h=c.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===U3&&(h===40||h===41)){f[f.length]=c.charAt(d);continue}if(h<128){f[f.length]=Cn[h];continue}if(h<2048){f[f.length]=Cn[192|h>>6]+Cn[128|h&63];continue}if(h<55296||h>=57344){f[f.length]=Cn[224|h>>12]+Cn[128|h>>6&63]+Cn[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|c.charCodeAt(d)&1023),f[f.length]=Cn[240|h>>18]+Cn[128|h>>12&63]+Cn[128|h>>6&63]+Cn[128|h&63]}s+=f.join("")}return s};function $3(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function _v(t,e){if(B3(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const z3=Object.prototype.hasOwnProperty,PC={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Sn=Array.isArray,G3=Array.prototype.push,IC=function(t,e){G3.apply(t,Sn(e)?e:[e])},H3=Date.prototype.toISOString,tt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:O3,encodeValuesOnly:!1,format:Of,formatter:$f[Of],indices:!1,serializeDate(t){return H3.call(t)},skipNulls:!1,strictNullHandling:!1};function W3(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const oc={};function kC(t,e,n,r,i,o,s,a,c,f,d,h,p,m,_,g,x,y){let v=t,w=y,E=0,A=!1;for(;(w=w.get(oc))!==void 0&&!A;){const b=w.get(t);if(E+=1,typeof b<"u"){if(b===E)throw new RangeError("Cyclic object value");A=!0}typeof w.get(oc)>"u"&&(E=0)}if(typeof f=="function"?v=f(e,v):v instanceof Date?v=p?.(v):n==="comma"&&Sn(v)&&(v=_v(v,function(b){return b instanceof Date?p?.(b):b})),v===null){if(o)return c&&!g?c(e,tt.encoder,x,"key",m):e;v=""}if(W3(v)||$3(v)){if(c){const b=g?e:c(e,tt.encoder,x,"key",m);return[_?.(b)+"="+_?.(c(v,tt.encoder,x,"value",m))]}return[_?.(e)+"="+_?.(String(v))]}const I=[];if(typeof v>"u")return I;let k;if(n==="comma"&&Sn(v))g&&c&&(v=_v(v,c)),k=[{value:v.length>0?v.join(",")||null:void 0}];else if(Sn(f))k=f;else{const b=Object.keys(v);k=d?b.sort(d):b}const N=a?String(e).replace(/\./g,"%2E"):String(e),D=r&&Sn(v)&&v.length===1?N+"[]":N;if(i&&Sn(v)&&v.length===0)return D+"[]";for(let b=0;b<k.length;++b){const H=k[b],M=typeof H=="object"&&typeof H.value<"u"?H.value:v[H];if(s&&M===null)continue;const z=h&&a?H.replace(/\./g,"%2E"):H,S=Sn(v)?typeof n=="function"?n(D,z):D:D+(h?"."+z:"["+z+"]");y.set(t,E);const G=new WeakMap;G.set(oc,y),IC(I,kC(M,S,n,r,i,o,s,a,n==="comma"&&g&&Sn(v)?null:c,f,d,h,p,m,_,g,x,G))}return I}function q3(t=tt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||tt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Of;if(typeof t.format<"u"){if(!z3.call($f,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=$f[n];let i=tt.filter;(typeof t.filter=="function"||Sn(t.filter))&&(i=t.filter);let o;if(t.arrayFormat&&t.arrayFormat in PC?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=tt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:tt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:tt.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:tt.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:tt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?tt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:tt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:tt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:tt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:tt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:tt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:tt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:tt.strictNullHandling}}function J3(t,e={}){let n=t;const r=q3(e);let i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):Sn(r.filter)&&(o=r.filter,i=o);const s=[];if(typeof n!="object"||n===null)return"";const a=PC[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const f=new WeakMap;for(let p=0;p<i.length;++p){const m=i[p];r.skipNulls&&n[m]===null||IC(s,kC(n[m],m,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}const d=s.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}const fi="4.104.0";let wv=!1,Zo,RC,MC,zf,NC,DC,bC,LC,FC;function K3(t,e={auto:!1}){if(wv)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Zo)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Zo}'\``);wv=e.auto,Zo=t.kind,RC=t.fetch,MC=t.FormData,zf=t.File,NC=t.ReadableStream,DC=t.getMultipartRequestOptions,bC=t.getDefaultAgent,LC=t.fileFromPath,FC=t.isFsReadStream}class Y3{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function X3({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,o;try{n=fetch,r=Request,i=Response,o=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(s,a)=>({...a,body:new Y3(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}const VC=()=>{Zo||K3(X3(),{auto:!0})};VC();class fe extends Error{}class gt extends fe{constructor(e,n,r,i){super(`${gt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i?.["x-request-id"],this.error=n;const o=n;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new ru({message:r,cause:Hf(n)});const o=n?.error;return e===400?new UC(e,o,r,i):e===401?new BC(e,o,r,i):e===403?new OC(e,o,r,i):e===404?new $C(e,o,r,i):e===409?new zC(e,o,r,i):e===422?new GC(e,o,r,i):e===429?new HC(e,o,r,i):e>=500?new WC(e,o,r,i):new gt(e,o,r,i)}}class nn extends gt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ru extends gt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Vh extends ru{constructor({message:e}={}){super({message:e??"Request timed out."})}}class UC extends gt{}class BC extends gt{}class OC extends gt{}class $C extends gt{}class zC extends gt{}class GC extends gt{}class HC extends gt{}class WC extends gt{}class qC extends fe{constructor(){super("Could not parse response content as the length limit was reached")}}class JC extends fe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var da=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Rr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Bt;class iu{constructor(){Bt.set(this,void 0),this.buffer=new Uint8Array,da(this,Bt,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let o;for(;(o=Z3(this.buffer,Rr(this,Bt,"f")))!=null;){if(o.carriage&&Rr(this,Bt,"f")==null){da(this,Bt,o.index,"f");continue}if(Rr(this,Bt,"f")!=null&&(o.index!==Rr(this,Bt,"f")+1||o.carriage)){i.push(this.decodeText(this.buffer.slice(0,Rr(this,Bt,"f")-1))),this.buffer=this.buffer.slice(Rr(this,Bt,"f")),da(this,Bt,null,"f");continue}const s=Rr(this,Bt,"f")!==null?o.preceding-1:o.preceding,a=this.decodeText(this.buffer.slice(0,s));i.push(a),this.buffer=this.buffer.slice(o.index),da(this,Bt,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new fe(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new fe(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new fe("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Bt=new WeakMap;iu.NEWLINE_CHARS=new Set([`
`,"\r"]);iu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Z3(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Q3(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function KC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Pn{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const s of j3(e,n))if(!o){if(s.data.startsWith("[DONE]")){o=!0;continue}if(s.event===null||s.event.startsWith("response.")||s.event.startsWith("transcript.")){let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(a&&a.error)throw new gt(void 0,a.error,void 0,nT(e.headers));yield a}else{let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(s.event=="error")throw new gt(void 0,a.error,a.message,void 0);yield{event:s.event,data:a}}}o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||n.abort()}}return new Pn(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const s=new iu,a=KC(e);for await(const c of a)for(const f of s.decode(c))yield f;for(const c of s.flush())yield c}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of i())s||a&&(yield JSON.parse(a));s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new Pn(o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new Pn(()=>i(e),this.controller),new Pn(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new NC({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const a=r.encode(JSON.stringify(o)+`
`);i.enqueue(a)}catch(o){i.error(o)}},async cancel(){await n.return?.()}})}}async function*j3(t,e){if(!t.body)throw e.abort(),new fe("Attempted to iterate over a response with no body");const n=new tV,r=new iu,i=KC(t.body);for await(const o of eV(i))for(const s of r.decode(o)){const a=n.decode(s);a&&(yield a)}for(const o of r.flush()){const s=n.decode(o);s&&(yield s)}}async function*eV(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let o;for(;(o=Q3(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class tV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=nV(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function nV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const YC=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",XC=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ou(t),ou=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",rV=t=>XC(t)||YC(t)||FC(t);async function ZC(t,e,n){if(t=await t,XC(t))return t;if(YC(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=ou(i)?[await i.arrayBuffer()]:[i];return new zf(o,e,n)}const r=await iV(t);if(e||(e=sV(t)??"unknown_file"),!n?.type){const i=r[0]?.type;typeof i=="string"&&(n={...n,type:i})}return new zf(r,e,n)}async function iV(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(ou(t))e.push(await t.arrayBuffer());else if(aV(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${oV(t)}`);return e}function oV(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function sV(t){return sc(t.name)||sc(t.filename)||sc(t.path)?.split(/[\\/]/).pop()}const sc=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},aV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",xv=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Zr=async t=>{const e=await lV(t.body);return DC(e,t)},lV=async t=>{const e=new MC;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Gf(e,n,r))),e},Gf=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(rV(n)){const r=await ZC(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Gf(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Gf(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var QC={},uV=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},cV=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ha;VC();async function jC(t){const{response:e}=t;if(t.options.stream)return yr("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Pn.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const s=await e.json();return yr("response",e.status,e.url,e.headers,s),eT(s,e)}const o=await e.text();return yr("response",e.status,e.url,e.headers,o),o}function eT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class su extends Promise{constructor(e,n=jC){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new su(this.responsePromise,async n=>eT(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class fV{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:o}){this.baseURL=e,this.maxRetries=ac("maxRetries",n),this.timeout=ac("timeout",r),this.httpAgent=i,this.fetch=o??RC}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...gV(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${wV()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const o=i&&ou(i?.body)?new DataView(await i.body.arrayBuffer()):i?.body instanceof DataView?i.body:i?.body instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i?.body)?new DataView(i.body.buffer):i?.body;return{method:e,path:n,...i,body:o}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:o,query:s,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:xv(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,f=this.calculateContentLength(c),d=this.buildURL(o,s);"timeout"in r&&ac("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??bC(d),p=r.timeout+1e3;typeof h?.options?.timeout=="number"&&p>(h.options.timeout??0)&&(h.options.timeout=p),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:r,headers:a,contentLength:f,retryCount:n});return{req:{method:i,...c&&{body:c},headers:m,...h&&{agent:h},signal:r.signal??null},url:d,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const o={};r&&(o["content-length"]=r);const s=this.defaultHeaders(e);return Ev(o,s),Ev(o,n),xv(e.body)&&Zo!=="node"&&delete o["content-type"],ma(s,"x-stainless-retry-count")===void 0&&ma(n,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(i)),ma(s,"x-stainless-timeout")===void 0&&ma(n,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,n),o}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return gt.generate(e,n,r,i)}request(e,n=null){return new su(this.makeRequest(e,n))}async makeRequest(e,n){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:o,url:s,timeout:a}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(o,{url:s,options:r}),yr("request",s,r,o.headers),r.signal?.aborted)throw new nn;const c=new AbortController,f=await this.fetchWithTimeout(s,o,a,c).catch(Hf);if(f instanceof Error){if(r.signal?.aborted)throw new nn;if(n)return this.retryRequest(r,n);throw f.name==="AbortError"?new Vh:new ru({cause:f})}const d=nT(f.headers);if(!f.ok){if(n&&this.shouldRetry(f)){const x=`retrying, ${n} attempts remaining`;return yr(`response (error; ${x})`,f.status,s,d),this.retryRequest(r,n,d)}const h=await f.text().catch(x=>Hf(x).message),p=yV(h),m=p?void 0:h;throw yr(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,f.status,s,d,m),this.makeStatusError(f.status,p,m,d)}return{response:f,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new dV(this,r,e)}buildURL(e,n){const r=_V(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return rT(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new fe(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:o,...s}=n||{};o&&o.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),r),c={signal:i.signal,...s};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const o=r?.["retry-after-ms"];if(o){const a=parseFloat(o);Number.isNaN(a)||(i=a)}const s=r?.["retry-after"];if(s&&!i){const a=parseFloat(s);Number.isNaN(a)?i=Date.parse(s)-Date.now():i=a*1e3}if(!(i&&0<=i&&i<60*1e3)){const a=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,a)}return await Ds(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${fi}`}}class tT{constructor(e,n,r,i){ha.set(this,void 0),uV(this,ha,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new fe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,o]of r)e.url.searchParams.set(i,o);n.query=void 0,n.path=e.url.toString()}return await cV(this,ha,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ha=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class dV extends su{constructor(e,n,r){super(n,async i=>new r(e,i.response,await jC(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const nT=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),hV={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Je=t=>typeof t=="object"&&t!==null&&!rT(t)&&Object.keys(t).every(e=>iT(hV,e)),pV=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fi,"X-Stainless-OS":Tv(Deno.build.os),"X-Stainless-Arch":Cv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fi,"X-Stainless-OS":Tv(process.platform),"X-Stainless-Arch":Cv(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=mV();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const Cv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Tv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Sv;const gV=()=>Sv??(Sv=pV()),yV=t=>{try{return JSON.parse(t)}catch{return}},vV=/^[a-z][a-z0-9+.-]*:/i,_V=t=>vV.test(t),Ds=t=>new Promise(e=>setTimeout(e,t)),ac=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fe(`${t} must be an integer`);if(e<0)throw new fe(`${t} must be a positive integer`);return e},Hf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},pa=t=>{if(typeof process<"u")return QC?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function rT(t){if(!t)return!0;for(const e in t)return!1;return!0}function iT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ev(t,e){for(const n in e){if(!iT(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const Av=new Set(["authorization","api-key"]);function yr(t,...e){if(typeof process<"u"&&QC?.DEBUG==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const o={...r,headers:{...r.headers}};for(const s in r.headers)Av.has(s.toLowerCase())&&(o.headers[s]="REDACTED");return o}let i=null;for(const o in r)Av.has(o.toLowerCase())&&(i??(i={...r}),i[o]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const wV=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),xV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",CV=t=>typeof t?.get=="function",ma=(t,e)=>{const n=e.toLowerCase();if(CV(t)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(i,o,s)=>o+s.toUpperCase());for(const i of[e,n,e.toUpperCase(),r]){const o=t.get(i);if(o)return o}}for(const[r,i]of Object.entries(t))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},TV=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function lc(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class au extends tT{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class it extends tT{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const n=e[e.length-1]?.id;return n?{params:{after:n}}:null}}class de{constructor(e){this._client=e}}let oT=class extends de{list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,SV,{query:n,...r})}},lu=class extends de{constructor(){super(...arguments),this.messages=new oT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/chat/completions",uu,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class uu extends it{}class SV extends it{}lu.ChatCompletionsPage=uu;lu.Messages=oT;let cu=class extends de{constructor(){super(...arguments),this.completions=new lu(this._client)}};cu.Completions=lu;cu.ChatCompletionsPage=uu;class sT extends de{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class aT extends de{create(e,n){return this._client.post("/audio/transcriptions",Zr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class lT extends de{create(e,n){return this._client.post("/audio/translations",Zr({body:e,...n,__metadata:{model:e.model}}))}}class bs extends de{constructor(){super(...arguments),this.transcriptions=new aT(this._client),this.translations=new lT(this._client),this.speech=new sT(this._client)}}bs.Transcriptions=aT;bs.Translations=lT;bs.Speech=sT;class Uh extends de{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/batches",Bh,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class Bh extends it{}Uh.BatchesPage=Bh;var fn=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ze=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Wf,$a,za,ko,Ro,Ga,Mo,bn,No,Pl,Il,di,uT;class Oh{constructor(){Wf.add(this),this.controller=new AbortController,$a.set(this,void 0),za.set(this,()=>{}),ko.set(this,()=>{}),Ro.set(this,void 0),Ga.set(this,()=>{}),Mo.set(this,()=>{}),bn.set(this,{}),No.set(this,!1),Pl.set(this,!1),Il.set(this,!1),di.set(this,!1),fn(this,$a,new Promise((e,n)=>{fn(this,za,e,"f"),fn(this,ko,n,"f")}),"f"),fn(this,Ro,new Promise((e,n)=>{fn(this,Ga,e,"f"),fn(this,Mo,n,"f")}),"f"),ze(this,$a,"f").catch(()=>{}),ze(this,Ro,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ze(this,Wf,"m",uT).bind(this))},0)}_connected(){this.ended||(ze(this,za,"f").call(this),this._emit("connect"))}get ended(){return ze(this,No,"f")}get errored(){return ze(this,Pl,"f")}get aborted(){return ze(this,Il,"f")}abort(){this.controller.abort()}on(e,n){return(ze(this,bn,"f")[e]||(ze(this,bn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=ze(this,bn,"f")[e];if(!r)return this;const i=r.findIndex(o=>o.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(ze(this,bn,"f")[e]||(ze(this,bn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{fn(this,di,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){fn(this,di,!0,"f"),await ze(this,Ro,"f")}_emit(e,...n){if(ze(this,No,"f"))return;e==="end"&&(fn(this,No,!0,"f"),ze(this,Ga,"f").call(this));const r=ze(this,bn,"f")[e];if(r&&(ze(this,bn,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!ze(this,di,"f")&&!r?.length&&Promise.reject(i),ze(this,ko,"f").call(this,i),ze(this,Mo,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!ze(this,di,"f")&&!r?.length&&Promise.reject(i),ze(this,ko,"f").call(this,i),ze(this,Mo,"f").call(this,i),this._emit("end")}}_emitFinal(){}}$a=new WeakMap,za=new WeakMap,ko=new WeakMap,Ro=new WeakMap,Ga=new WeakMap,Mo=new WeakMap,bn=new WeakMap,No=new WeakMap,Pl=new WeakMap,Il=new WeakMap,di=new WeakMap,Wf=new WeakSet,uT=function(e){if(fn(this,Pl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new nn),e instanceof nn)return fn(this,Il,!0,"f"),this._emit("abort",e);if(e instanceof fe)return this._emit("error",e);if(e instanceof Error){const n=new fe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new fe(String(e)))};var le=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ut=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ht,qf,En,Ha,hn,$r,Mi,Fr,kl,Ot,Wa,qa,Qo,Do,bo,Pv,Iv,kv,Rv,Mv,Nv,Dv;class yn extends Oh{constructor(){super(...arguments),ht.add(this),qf.set(this,[]),En.set(this,{}),Ha.set(this,{}),hn.set(this,void 0),$r.set(this,void 0),Mi.set(this,void 0),Fr.set(this,void 0),kl.set(this,void 0),Ot.set(this,void 0),Wa.set(this,void 0),qa.set(this,void 0),Qo.set(this,void 0)}[(qf=new WeakMap,En=new WeakMap,Ha=new WeakMap,hn=new WeakMap,$r=new WeakMap,Mi=new WeakMap,Fr=new WeakMap,kl=new WeakMap,Ot=new WeakMap,Wa=new WeakMap,qa=new WeakMap,Qo=new WeakMap,ht=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new yn;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Pn.fromReadableStream(e,this.controller);for await(const o of i)le(this,ht,"m",Do).call(this,o);if(i.controller.signal?.aborted)throw new nn;return this._addRun(le(this,ht,"m",bo).call(this))}toReadableStream(){return new Pn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,o){const s=new yn;return s._run(()=>s._runToolAssistantStream(e,n,r,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i,o){const s=o?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},c=await e.submitToolOutputs(n,r,a,{...o,signal:this.controller.signal});this._connected();for await(const f of c)le(this,ht,"m",Do).call(this,f);if(c.controller.signal?.aborted)throw new nn;return this._addRun(le(this,ht,"m",bo).call(this))}static createThreadAssistantStream(e,n,r){const i=new yn;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const o=new yn;return o._run(()=>o._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return le(this,Wa,"f")}currentRun(){return le(this,qa,"f")}currentMessageSnapshot(){return le(this,hn,"f")}currentRunStepSnapshot(){return le(this,Qo,"f")}async finalRunSteps(){return await this.done(),Object.values(le(this,En,"f"))}async finalMessages(){return await this.done(),Object.values(le(this,Ha,"f"))}async finalRun(){if(await this.done(),!le(this,$r,"f"))throw Error("Final run was not received.");return le(this,$r,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},s=await e.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const a of s)le(this,ht,"m",Do).call(this,a);if(s.controller.signal?.aborted)throw new nn;return this._addRun(le(this,ht,"m",bo).call(this))}async _createAssistantStream(e,n,r,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await e.create(n,s,{...i,signal:this.controller.signal});this._connected();for await(const c of a)le(this,ht,"m",Do).call(this,c);if(a.controller.signal?.aborted)throw new nn;return this._addRun(le(this,ht,"m",bo).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let o=e[r];if(o==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(lc(o)&&lc(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(s=>typeof s=="string"||typeof s=="number")){o.push(...i);continue}for(const s of i){if(!lc(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=o[a];c==null?o.push(s):o[a]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);e[r]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,o){return await this._createToolAssistantStream(r,e,n,i,o)}}Do=function(e){if(!this.ended)switch(Ut(this,Wa,e,"f"),le(this,ht,"m",kv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":le(this,ht,"m",Dv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":le(this,ht,"m",Iv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":le(this,ht,"m",Pv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},bo=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");if(!le(this,$r,"f"))throw Error("Final run has not been received");return le(this,$r,"f")},Pv=function(e){const[n,r]=le(this,ht,"m",Mv).call(this,e,le(this,hn,"f"));Ut(this,hn,n,"f"),le(this,Ha,"f")[n.id]=n;for(const i of r){const o=n.content[i.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,s=n.content[i.index];if(s&&s.type=="text")this._emit("textDelta",o,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=le(this,Mi,"f")){if(le(this,Fr,"f"))switch(le(this,Fr,"f").type){case"text":this._emit("textDone",le(this,Fr,"f").text,le(this,hn,"f"));break;case"image_file":this._emit("imageFileDone",le(this,Fr,"f").image_file,le(this,hn,"f"));break}Ut(this,Mi,i.index,"f")}Ut(this,Fr,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(le(this,Mi,"f")!==void 0){const i=e.data.content[le(this,Mi,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,le(this,hn,"f"));break;case"text":this._emit("textDone",i.text,le(this,hn,"f"));break}}le(this,hn,"f")&&this._emit("messageDone",e.data),Ut(this,hn,void 0,"f")}},Iv=function(e){const n=le(this,ht,"m",Rv).call(this,e);switch(Ut(this,Qo,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==le(this,kl,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(le(this,Ot,"f")&&this._emit("toolCallDone",le(this,Ot,"f")),Ut(this,kl,o.index,"f"),Ut(this,Ot,n.step_details.tool_calls[o.index],"f"),le(this,Ot,"f")&&this._emit("toolCallCreated",le(this,Ot,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ut(this,Qo,void 0,"f"),e.data.step_details.type=="tool_calls"&&le(this,Ot,"f")&&(this._emit("toolCallDone",le(this,Ot,"f")),Ut(this,Ot,void 0,"f")),this._emit("runStepDone",e.data,n);break}},kv=function(e){le(this,qf,"f").push(e),this._emit("event",e)},Rv=function(e){switch(e.event){case"thread.run.step.created":return le(this,En,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=le(this,En,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=yn.accumulateDelta(n,r.delta);le(this,En,"f")[e.data.id]=i}return le(this,En,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":le(this,En,"f")[e.data.id]=e.data;break}if(le(this,En,"f")[e.data.id])return le(this,En,"f")[e.data.id];throw new Error("No snapshot available")},Mv=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in n.content){let s=n.content[o.index];n.content[o.index]=le(this,ht,"m",Nv).call(this,o,s)}else n.content[o.index]=o,r.push(o);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Nv=function(e,n){return yn.accumulateDelta(n,e)},Dv=function(e){switch(Ut(this,qa,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Ut(this,$r,e.data,"f"),le(this,Ot,"f")&&(this._emit("toolCallDone",le(this,Ot,"f")),Ut(this,Ot,void 0,"f"));break}};class $h extends de{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/assistants",zh,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class zh extends it{}$h.AssistantsPage=zh;function bv(t){return typeof t.parse=="function"}const $i=t=>t?.role==="assistant",cT=t=>t?.role==="function",fT=t=>t?.role==="tool";function Gh(t){return t?.$brand==="auto-parseable-response-format"}function Ls(t){return t?.$brand==="auto-parseable-tool"}function EV(t,e){return!e||!dT(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Hh(t,e)}function Hh(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new qC;if(r.finish_reason==="content_filter")throw new JC;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>PV(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?AV(e,r.message.content):null}}});return{...t,choices:n}}function AV(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function PV(t,e){const n=t.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Ls(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function IV(t,e){if(!t)return!1;const n=t.tools?.find(r=>r.function?.name===e.function.name);return Ls(n)||n?.function.strict||!1}function dT(t){return Gh(t.response_format)?!0:t.tools?.some(e=>Ls(e)||e.type==="function"&&e.function.strict===!0)??!1}function kV(t){for(const e of t??[]){if(e.type!=="function")throw new fe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new fe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Nt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},wt,Jf,Rl,Kf,Yf,Xf,hT,Zf;const Lv=10;class pT extends Oh{constructor(){super(...arguments),wt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(cT(e)||fT(e))&&e.content)this._emit("functionCallResult",e.content);else if($i(e)&&e.function_call)this._emit("functionCall",e.function_call);else if($i(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Nt(this,wt,"m",Jf).call(this)}async finalMessage(){return await this.done(),Nt(this,wt,"m",Rl).call(this)}async finalFunctionCall(){return await this.done(),Nt(this,wt,"m",Kf).call(this)}async finalFunctionCallResult(){return await this.done(),Nt(this,wt,"m",Yf).call(this)}async totalUsage(){return await this.done(),Nt(this,wt,"m",Xf).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Nt(this,wt,"m",Rl).call(this);n&&this._emit("finalMessage",n);const r=Nt(this,wt,"m",Jf).call(this);r&&this._emit("finalContent",r);const i=Nt(this,wt,"m",Kf).call(this);i&&this._emit("finalFunctionCall",i);const o=Nt(this,wt,"m",Yf).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",Nt(this,wt,"m",Xf).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Nt(this,wt,"m",hT).call(this,n);const o=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Hh(o,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const i="function",{function_call:o="auto",stream:s,...a}=n,c=typeof o!="string"&&o?.name,{maxChatCompletions:f=Lv}=r||{},d={};for(const p of n.functions)d[p.name||p.function.name]=p;const h=n.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<f;++p){const _=(await this._createChatCompletion(e,{...a,function_call:o,functions:h,messages:[...this.messages]},r)).choices[0]?.message;if(!_)throw new fe("missing message in ChatCompletion response");if(!_.function_call)return;const{name:g,arguments:x}=_.function_call,y=d[g];if(y){if(c&&c!==g){const A=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,name:g,content:A});continue}}else{const A=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${h.map(I=>JSON.stringify(I.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:A});continue}let v;try{v=bv(y)?await y.parse(x):x}catch(A){this._addMessage({role:i,name:g,content:A instanceof Error?A.message:String(A)});continue}const w=await y.function(v,this),E=Nt(this,wt,"m",Zf).call(this,w);if(this._addMessage({role:i,name:g,content:E}),c)return}}async _runTools(e,n,r){const i="tool",{tool_choice:o="auto",stream:s,...a}=n,c=typeof o!="string"&&o?.function?.name,{maxChatCompletions:f=Lv}=r||{},d=n.tools.map(m=>{if(Ls(m)){if(!m.$callback)throw new fe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),h={};for(const m of d)m.type==="function"&&(h[m.function.name||m.function.function.name]=m.function);const p="tools"in n?d.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<f;++m){const g=(await this._createChatCompletion(e,{...a,tool_choice:o,tools:p,messages:[...this.messages]},r)).choices[0]?.message;if(!g)throw new fe("missing message in ChatCompletion response");if(!g.tool_calls?.length)return;for(const x of g.tool_calls){if(x.type!=="function")continue;const y=x.id,{name:v,arguments:w}=x.function,E=h[v];if(E){if(c&&c!==v){const N=`Invalid tool_call: ${JSON.stringify(v)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:y,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(v)}. Available options are: ${Object.keys(h).map(D=>JSON.stringify(D)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:y,content:N});continue}let A;try{A=bv(E)?await E.parse(w):w}catch(N){const D=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:y,content:D});continue}const I=await E.function(A,this),k=Nt(this,wt,"m",Zf).call(this,I);if(this._addMessage({role:i,tool_call_id:y,content:k}),c)return}}}}wt=new WeakSet,Jf=function(){return Nt(this,wt,"m",Rl).call(this).content??null},Rl=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if($i(n)){const{function_call:r,...i}=n,o={...i,content:n.content??null,refusal:n.refusal??null};return r&&(o.function_call=r),o}}throw new fe("stream ended without producing a ChatCompletionMessage with role=assistant")},Kf=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if($i(n)&&n?.function_call)return n.function_call;if($i(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},Yf=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(cT(n)&&n.content!=null||fT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},Xf=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},hT=function(e){if(e.n!=null&&e.n>1)throw new fe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Zf=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class xs extends pT{static runFunctions(e,n,r){const i=new xs,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,o)),i}static runTools(e,n,r){const i=new xs,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,o)),i}_addMessage(e,n=!0){super._addMessage(e,n),$i(e)&&e.content&&this._emit("content",e.content)}}const mT=1,gT=2,yT=4,vT=8,_T=16,wT=32,xT=64,CT=128,TT=256,ST=CT|TT,ET=_T|wT|ST|xT,AT=mT|gT|ET,PT=yT|vT,RV=AT|PT,ot={STR:mT,NUM:gT,ARR:yT,OBJ:vT,NULL:_T,BOOL:wT,NAN:xT,INFINITY:CT,MINUS_INFINITY:TT,INF:ST,SPECIAL:ET,ATOM:AT,COLLECTION:PT,ALL:RV};class MV extends Error{}class NV extends Error{}function DV(t,e=ot.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return bV(t.trim(),e)}const bV=(t,e)=>{const n=t.length;let r=0;const i=p=>{throw new MV(`${p} at position ${r}`)},o=p=>{throw new NV(`${p} at position ${r}`)},s=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?f():t.substring(r,r+4)==="null"||ot.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||ot.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||ot.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||ot.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||ot.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||ot.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),a=()=>{const p=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(m)))}catch(_){o(String(_))}else if(ot.STR&e)try{return JSON.parse(t.substring(p,r-Number(m))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,h();const p={};try{for(;t[r]!=="}";){if(h(),r>=n&&ot.OBJ&e)return p;const m=a();h(),r++;try{const _=s();Object.defineProperty(p,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(ot.OBJ&e)return p;throw _}h(),t[r]===","&&r++}}catch{if(ot.OBJ&e)return p;i("Expected '}' at end of object")}return r++,p},f=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(s()),h(),t[r]===","&&r++}catch{if(ot.ARR&e)return p;i("Expected ']' at end of array")}return r++,p},d=()=>{if(r===0){t==="-"&&ot.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(ot.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}o(String(m))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(ot.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&ot.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(_){o(String(_))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},Fv=t=>DV(t,ot.ALL^ot.NUM);var si=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Re=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},et,Dn,ai,jn,uc,ga,cc,fc,dc,ya,hc,Vv;class Cs extends pT{constructor(e){super(),et.add(this),Dn.set(this,void 0),ai.set(this,void 0),jn.set(this,void 0),si(this,Dn,e,"f"),si(this,ai,[],"f")}get currentChatCompletionSnapshot(){return Re(this,jn,"f")}static fromReadableStream(e){const n=new Cs(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Cs(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Re(this,et,"m",uc).call(this);const o=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of o)Re(this,et,"m",cc).call(this,s);if(o.controller.signal?.aborted)throw new nn;return this._addChatCompletion(Re(this,et,"m",ya).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Re(this,et,"m",uc).call(this),this._connected();const i=Pn.fromReadableStream(e,this.controller);let o;for await(const s of i)o&&o!==s.id&&this._addChatCompletion(Re(this,et,"m",ya).call(this)),Re(this,et,"m",cc).call(this,s),o=s.id;if(i.controller.signal?.aborted)throw new nn;return this._addChatCompletion(Re(this,et,"m",ya).call(this))}[(Dn=new WeakMap,ai=new WeakMap,jn=new WeakMap,et=new WeakSet,uc=function(){this.ended||si(this,jn,void 0,"f")},ga=function(n){let r=Re(this,ai,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Re(this,ai,"f")[n.index]=r,r)},cc=function(n){if(this.ended)return;const r=Re(this,et,"m",Vv).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const o=r.choices[i.index];i.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",i.delta.content,o.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),i.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:o.message.refusal}),i.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:o.logprobs?.content??[]}),i.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});const s=Re(this,et,"m",ga).call(this,o);o.finish_reason&&(Re(this,et,"m",dc).call(this,o),s.current_tool_call_index!=null&&Re(this,et,"m",fc).call(this,o,s.current_tool_call_index));for(const a of i.delta.tool_calls??[])s.current_tool_call_index!==a.index&&(Re(this,et,"m",dc).call(this,o),s.current_tool_call_index!=null&&Re(this,et,"m",fc).call(this,o,s.current_tool_call_index)),s.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const c=o.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},fc=function(n,r){if(Re(this,et,"m",ga).call(this,n).done_tool_calls.has(r))return;const o=n.message.tool_calls?.[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const s=Re(this,Dn,"f")?.tools?.find(a=>a.type==="function"&&a.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:Ls(s)?s.$parseRaw(o.function.arguments):s?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},dc=function(n){const r=Re(this,et,"m",ga).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=Re(this,et,"m",hc).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ya=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const n=Re(this,jn,"f");if(!n)throw new fe("request ended without sending any chunks");return si(this,jn,void 0,"f"),si(this,ai,[],"f"),LV(n,Re(this,Dn,"f"))},hc=function(){const n=Re(this,Dn,"f")?.response_format;return Gh(n)?n:null},Vv=function(n){var r,i,o,s;let a=Re(this,jn,"f");const{choices:c,...f}=n;a?Object.assign(a,f):a=si(this,jn,{...f,choices:[]},"f");for(const{delta:d,finish_reason:h,index:p,logprobs:m=null,..._}of n.choices){let g=a.choices[p];if(g||(g=a.choices[p]={finish_reason:h,index:p,message:{},logprobs:m,..._}),m)if(!g.logprobs)g.logprobs=Object.assign({},m);else{const{content:I,refusal:k,...N}=m;Object.assign(g.logprobs,N),I&&((r=g.logprobs).content??(r.content=[]),g.logprobs.content.push(...I)),k&&((i=g.logprobs).refusal??(i.refusal=[]),g.logprobs.refusal.push(...k))}if(h&&(g.finish_reason=h,Re(this,Dn,"f")&&dT(Re(this,Dn,"f")))){if(h==="length")throw new qC;if(h==="content_filter")throw new JC}if(Object.assign(g,_),!d)continue;const{content:x,refusal:y,function_call:v,role:w,tool_calls:E,...A}=d;if(Object.assign(g.message,A),y&&(g.message.refusal=(g.message.refusal||"")+y),w&&(g.message.role=w),v&&(g.message.function_call?(v.name&&(g.message.function_call.name=v.name),v.arguments&&((o=g.message.function_call).arguments??(o.arguments=""),g.message.function_call.arguments+=v.arguments)):g.message.function_call=v),x&&(g.message.content=(g.message.content||"")+x,!g.message.refusal&&Re(this,et,"m",hc).call(this)&&(g.message.parsed=Fv(g.message.content))),E){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:I,id:k,type:N,function:D,...b}of E){const H=(s=g.message.tool_calls)[I]??(s[I]={});Object.assign(H,b),k&&(H.id=k),N&&(H.type=N),D&&(H.function??(H.function={name:D.name??"",arguments:""})),D?.name&&(H.function.name=D.name),D?.arguments&&(H.function.arguments+=D.arguments,IV(Re(this,Dn,"f"),H)&&(H.function.parsed_arguments=Fv(H.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Pn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function LV(t,e){const{id:n,choices:r,created:i,model:o,system_fingerprint:s,...a}=t,c={...a,id:n,choices:r.map(({message:f,finish_reason:d,index:h,logprobs:p,...m})=>{if(!d)throw new fe(`missing finish_reason for choice ${h}`);const{content:_=null,function_call:g,tool_calls:x,...y}=f,v=f.role;if(!v)throw new fe(`missing role for choice ${h}`);if(g){const{arguments:w,name:E}=g;if(w==null)throw new fe(`missing function_call.arguments for choice ${h}`);if(!E)throw new fe(`missing function_call.name for choice ${h}`);return{...m,message:{content:_,function_call:{arguments:w,name:E},role:v,refusal:f.refusal??null},finish_reason:d,index:h,logprobs:p}}return x?{...m,index:h,finish_reason:d,logprobs:p,message:{...y,role:v,content:_,refusal:f.refusal??null,tool_calls:x.map((w,E)=>{const{function:A,type:I,id:k,...N}=w,{arguments:D,name:b,...H}=A||{};if(k==null)throw new fe(`missing choices[${h}].tool_calls[${E}].id
${va(t)}`);if(I==null)throw new fe(`missing choices[${h}].tool_calls[${E}].type
${va(t)}`);if(b==null)throw new fe(`missing choices[${h}].tool_calls[${E}].function.name
${va(t)}`);if(D==null)throw new fe(`missing choices[${h}].tool_calls[${E}].function.arguments
${va(t)}`);return{...N,id:k,type:I,function:{...H,name:b,arguments:D}}})}}:{...m,message:{...y,content:_,role:v,refusal:f.refusal??null},finish_reason:d,index:h,logprobs:p}}),created:i,model:o,object:"chat.completion",...s?{system_fingerprint:s}:{}};return EV(c,e)}function va(t){return JSON.stringify(t)}class zi extends Cs{static fromReadableStream(e){const n=new zi(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new zi(null),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,o)),i}static runTools(e,n,r){const i=new zi(n),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,o)),i}}let IT=class extends de{parse(e,n){return kV(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Hh(r,e))}runFunctions(e,n){return e.stream?zi.runFunctions(this._client,e,n):xs.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?zi.runTools(this._client,e,n):xs.runTools(this._client,e,n)}stream(e,n){return Cs.createChatCompletion(this._client,e,n)}};class Qf extends de{constructor(){super(...arguments),this.completions=new IT(this._client)}}(function(t){t.Completions=IT})(Qf||(Qf={}));class kT extends de{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class RT extends de{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class fu extends de{constructor(){super(...arguments),this.sessions=new kT(this._client),this.transcriptionSessions=new RT(this._client)}}fu.Sessions=kT;fu.TranscriptionSessions=RT;class Wh extends de{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,qh,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class qh extends it{}Wh.MessagesPage=qh;class Jh extends de{retrieve(e,n,r,i={},o){return Je(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,n,r={},i){return Je(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,Kh,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}}class Kh extends it{}Jh.RunStepsPage=Kh;let Fs=class extends de{constructor(){super(...arguments),this.steps=new Jh(this._client)}create(e,n,r){const{include:i,...o}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:o,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Yh,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return yn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:s}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Ds(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return yn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const o=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,o.id,i)}submitToolOutputsStream(e,n,r,i){return yn.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class Yh extends it{}Fs.RunsPage=Yh;Fs.Steps=Jh;Fs.RunStepsPage=Kh;class lo extends de{constructor(){super(...arguments),this.runs=new Fs(this._client),this.messages=new Wh(this._client)}create(e={},n){return Je(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return yn.createThreadAssistantStream(e,this._client.beta.threads,n)}}lo.Runs=Fs;lo.RunsPage=Yh;lo.Messages=Wh;lo.MessagesPage=qh;class uo extends de{constructor(){super(...arguments),this.realtime=new fu(this._client),this.chat=new Qf(this._client),this.assistants=new $h(this._client),this.threads=new lo(this._client)}}uo.Realtime=fu;uo.Assistants=$h;uo.AssistantsPage=zh;uo.Threads=lo;class MT extends de{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class NT extends de{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}}let du=class extends de{constructor(){super(...arguments),this.content=new NT(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,Zr({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,Xh,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};class Xh extends it{}du.FileListResponsesPage=Xh;du.Content=NT;class Vs extends de{constructor(){super(...arguments),this.files=new du(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/containers",Zh,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Zh extends it{}Vs.ContainerListResponsesPage=Zh;Vs.Files=du;Vs.FileListResponsesPage=Xh;class DT extends de{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&yr("Request","User defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?o:(yr("response","Decoding base64 embeddings to float32 array"),o._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{const c=a.embedding;a.embedding=TV(c)}),s)))}}class Qh extends de{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return Je(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,jh,{query:r,...i})}}class jh extends it{}Qh.OutputItemListResponsesPage=jh;class Us extends de{constructor(){super(...arguments),this.outputItems=new Qh(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,ep,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class ep extends it{}Us.RunListResponsesPage=ep;Us.OutputItems=Qh;Us.OutputItemListResponsesPage=jh;class Bs extends de{constructor(){super(...arguments),this.runs=new Us(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/evals",tp,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class tp extends it{}Bs.EvalListResponsesPage=tp;Bs.Runs=Us;Bs.RunListResponsesPage=ep;let np=class extends de{create(e,n){return this._client.post("/files",Zr({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/files",rp,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let s=await this.retrieve(e);for(;!s.status||!i.has(s.status);)if(await Ds(n),s=await this.retrieve(e),Date.now()-o>r)throw new Vh({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class rp extends it{}np.FileObjectsPage=rp;class bT extends de{}let LT=class extends de{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class ip extends de{constructor(){super(...arguments),this.graders=new LT(this._client)}}ip.Graders=LT;class op extends de{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,sp,{body:n,method:"post",...r})}retrieve(e,n={},r){return Je(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class sp extends au{}op.PermissionCreateResponsesPage=sp;let hu=class extends de{constructor(){super(...arguments),this.permissions=new op(this._client)}};hu.Permissions=op;hu.PermissionCreateResponsesPage=sp;class ap extends de{list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,lp,{query:n,...r})}}class lp extends it{}ap.FineTuningJobCheckpointsPage=lp;class co extends de{constructor(){super(...arguments),this.checkpoints=new ap(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",up,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Je(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,cp,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class up extends it{}class cp extends it{}co.FineTuningJobsPage=up;co.FineTuningJobEventsPage=cp;co.Checkpoints=ap;co.FineTuningJobCheckpointsPage=lp;class Ar extends de{constructor(){super(...arguments),this.methods=new bT(this._client),this.jobs=new co(this._client),this.checkpoints=new hu(this._client),this.alpha=new ip(this._client)}}Ar.Methods=bT;Ar.Jobs=co;Ar.FineTuningJobsPage=up;Ar.FineTuningJobEventsPage=cp;Ar.Checkpoints=hu;Ar.Alpha=ip;class FT extends de{}class fp extends de{constructor(){super(...arguments),this.graderModels=new FT(this._client)}}fp.GraderModels=FT;class VT extends de{createVariation(e,n){return this._client.post("/images/variations",Zr({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Zr({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class dp extends de{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",hp,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class hp extends au{}dp.ModelsPage=hp;class UT extends de{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function FV(t,e){return!e||!UV(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:BT(t,e)}function BT(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:$V(e,i)};if(i.type==="message"){const o=i.content.map(s=>s.type==="output_text"?{...s,parsed:VV(e,s.text)}:s);return{...i,content:o}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||OT(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function VV(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function UV(t){return!!Gh(t.text?.format)}function BV(t){return t?.$brand==="auto-parseable-tool"}function OV(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function $V(t,e){const n=OV(t.tools??[],e.name);return{...e,...e,parsed_arguments:BV(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function OT(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class $T extends de{list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,GV,{query:n,...r})}}var li=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},er=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ui,_a,tr,wa,Uv,Bv,Ov,$v;class pp extends Oh{constructor(e){super(),ui.add(this),_a.set(this,void 0),tr.set(this,void 0),wa.set(this,void 0),li(this,_a,e,"f")}static createResponse(e,n,r){const i=new pp(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),er(this,ui,"m",Uv).call(this);let o,s=null;"response_id"in n?(o=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):o=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of o)er(this,ui,"m",Bv).call(this,a,s);if(o.controller.signal?.aborted)throw new nn;return er(this,ui,"m",Ov).call(this)}[(_a=new WeakMap,tr=new WeakMap,wa=new WeakMap,ui=new WeakSet,Uv=function(){this.ended||li(this,tr,void 0,"f")},Bv=function(n,r){if(this.ended)return;const i=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},o=er(this,ui,"m",$v).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const s=o.output[n.output_index];if(!s)throw new fe(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new fe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=o.output[n.output_index];if(!s)throw new fe(`missing output at index ${n.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:i(n.type,n);break}},Ov=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const n=er(this,tr,"f");if(!n)throw new fe("request ended without sending any events");li(this,tr,void 0,"f");const r=zV(n,er(this,_a,"f"));return li(this,wa,r,"f"),r},$v=function(n){let r=er(this,tr,"f");if(!r){if(n.type!=="response.created")throw new fe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=li(this,tr,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new fe(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new fe(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new fe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new fe(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{li(this,tr,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=er(this,wa,"f");if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}}function zV(t,e){return FV(t,e)}class mp extends de{constructor(){super(...arguments),this.inputItems=new $T(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&OT(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>BT(r,e))}stream(e,n){return pp.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class GV extends it{}mp.InputItems=$T;class zT extends de{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,Zr({body:n,...r}))}}class gp extends de{constructor(){super(...arguments),this.parts=new zT(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}gp.Parts=zT;const HV=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class pu extends de{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return Je(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,mu,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const o=await this.retrieve(e,n,{...r,headers:i}).withResponse(),s=o.data;switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.response.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Ds(a);break;case"failed":case"completed":return s}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,yp,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class mu extends it{}class yp extends au{}pu.VectorStoreFilesPage=mu;pu.FileContentResponsesPage=yp;class GT extends de{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return Je(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,mu,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:s}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Ds(a);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=i?.maxConcurrency??5,s=Math.min(o,n.length),a=this._client,c=n.values(),f=[...r];async function d(p){for(let m of p){const _=await a.files.create({file:m,purpose:"assistants"},i);f.push(_.id)}}const h=Array(s).fill(c).map(d);return await HV(h),await this.createAndPoll(e,{file_ids:f})}}class Pr extends de{constructor(){super(...arguments),this.files=new pu(this._client),this.fileBatches=new GT(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return Je(e)?this.list({},e):this._client.getAPIList("/vector_stores",vp,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,_p,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class vp extends it{}class _p extends au{}Pr.VectorStoresPage=vp;Pr.VectorStoreSearchResponsesPage=_p;Pr.Files=pu;Pr.VectorStoreFilesPage=mu;Pr.FileContentResponsesPage=yp;Pr.FileBatches=GT;var HT;class pe extends fV{constructor({baseURL:e=pa("OPENAI_BASE_URL"),apiKey:n=pa("OPENAI_API_KEY"),organization:r=pa("OPENAI_ORG_ID")??null,project:i=pa("OPENAI_PROJECT_ID")??null,...o}={}){if(n===void 0)throw new fe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:n,organization:r,project:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&xV())throw new fe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new MT(this),this.chat=new cu(this),this.embeddings=new DT(this),this.files=new np(this),this.images=new VT(this),this.audio=new bs(this),this.moderations=new UT(this),this.models=new dp(this),this.fineTuning=new Ar(this),this.graders=new fp(this),this.vectorStores=new Pr(this),this.beta=new uo(this),this.batches=new Uh(this),this.uploads=new gp(this),this.responses=new mp(this),this.evals=new Bs(this),this.containers=new Vs(this),this._options=s,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return J3(e,{arrayFormat:"brackets"})}}HT=pe;pe.OpenAI=HT;pe.DEFAULT_TIMEOUT=6e5;pe.OpenAIError=fe;pe.APIError=gt;pe.APIConnectionError=ru;pe.APIConnectionTimeoutError=Vh;pe.APIUserAbortError=nn;pe.NotFoundError=$C;pe.ConflictError=zC;pe.RateLimitError=HC;pe.BadRequestError=UC;pe.AuthenticationError=BC;pe.InternalServerError=WC;pe.PermissionDeniedError=OC;pe.UnprocessableEntityError=GC;pe.toFile=ZC;pe.fileFromPath=LC;pe.Completions=MT;pe.Chat=cu;pe.ChatCompletionsPage=uu;pe.Embeddings=DT;pe.Files=np;pe.FileObjectsPage=rp;pe.Images=VT;pe.Audio=bs;pe.Moderations=UT;pe.Models=dp;pe.ModelsPage=hp;pe.FineTuning=Ar;pe.Graders=fp;pe.VectorStores=Pr;pe.VectorStoresPage=vp;pe.VectorStoreSearchResponsesPage=_p;pe.Beta=uo;pe.Batches=Uh;pe.BatchesPage=Bh;pe.Uploads=gp;pe.Responses=mp;pe.Evals=Bs;pe.EvalListResponsesPage=tp;pe.Containers=Vs;pe.ContainerListResponsesPage=Zh;var WV={};const WT=t=>new Promise(e=>setTimeout(e,t)),qT=async(t,e,n=3,r=500)=>{if(n<0)throw new Error("retries must be non-negative");for(let i=0;i<=n;i++){try{const o=await fetch(t,e);if(!(o.status>=500&&o.status<600))return o;if(i===n){const a=new URL(t.toString()).hostname;throw new Error(`${a} service is temporarily unavailable. Please try again later.`)}}catch(o){if(i===n)throw o}await WT(r*Math.pow(2,i))}throw new Error("fetchWithRetry exhausted all retries without success.")},JT=async(t,e,n=3,r=500)=>{if(n<0)throw new Error("retries must be non-negative");for(let i=0;i<=n;i++){try{return await t()}catch(o){if(o.name==="AbortError")throw o;const s=o,a=s.status??s.response?.status,c=!a||a>=500&&a<600;if(!c||i===n)throw c?new Error(`${e} service is temporarily unavailable. Please try again later.`):o}await WT(r*Math.pow(2,i))}throw new Error("callWithRetry exhausted all retries without success.")};let Lo,jf;const zv=t=>{t&&t!==jf&&(jf=t,Lo=void 0)},wp=()=>{if(Lo)return Lo;const t=jf||WV.API_KEY;if(!t)throw new Error("Gemini API key is missing. Please add it via the settings menu or ensure the API_KEY environment variable is set.");return Lo=new V3({apiKey:t}),Lo};let Fo,Ml;const Gv=t=>{t&&t!==Ml&&(Ml=t,Fo=void 0)},xp=()=>{if(Fo)return Fo;if(!Ml)throw new Error("OpenAI API key is missing. Please add it via the settings menu to use OpenAI models.");return Fo=new pe({apiKey:Ml,dangerouslyAllowBrowser:!0}),Fo};let ed;const Hv=t=>{t&&t!==ed&&(ed=t)},KT=()=>ed,YT=()=>typeof window<"u"&&window.location?window.location.origin:"http://localhost",Cp=t=>{if(!t)return"";const e=Reflect.get(t,"text");return typeof e=="function"?e.call(t)??"":e??""},Tp="Gemini quota exceeded, please wait before retrying.",qV=t=>new Promise(e=>setTimeout(e,t)),Nl=t=>{if(typeof t!="object"||t===null)return!1;const e=t,n=e.status??e.response?.status,r=e.message,i=typeof r=="string"?r.toLowerCase():"";return n===429||i.includes("rate limit")||i.includes("quota")},Wv=t=>{if(typeof t!="object"||t===null)return!1;const e=t,n=e.status??e.response?.status;return typeof n=="number"&&n>=500},Sp=async(t,e=2,n=1e3)=>{for(let r=0;;r++)try{return await t()}catch(i){if((Nl(i)||Wv(i))&&r<e){await qV(n*Math.pow(2,r));continue}throw Nl(i)?new Error(Tp):Wv(i)?new Error("Gemini service is temporarily unavailable. Please try again later."):i}},JV=t=>t.charAt(0).toUpperCase()+t.slice(1),XT=(t,e,n)=>{throw console.error(`Error calling the Gemini API for ${e}:`,t),Nl(t)?new Error(Tp):t instanceof Error?new Error(`An error occurred with the Gemini ${JV(e)}: ${t.message}`):new Error(`An unknown error occurred while communicating with the Gemini model for ${n??e}.`)},gn={kTop:5,groupWindow:2048,tailWindow:2048,etaPercent:90,tau:.95,warmupTraces:8,maxBudget:16,minTokensBeforeStop:32},qv='You are a strict verifier. Return ONLY JSON with fields: {"score": number, "reasons": string[]}. Score in [0,1].',Jv=(t,e)=>`
Task:
- Question/prompt:
"""${t}"""
- Model answer:
"""${e}"""

Rubric (each ~0.2 points):
1) Directly answers the asked question.
2) Uses only information entailed by the prompt/context.
3) Final answer format matches spec (e.g., number/string/code).
4) No contradictions or hedging.
5) Concise and unambiguous.

Return JSON only.`,td=async(t,e,n)=>{if(n.startsWith("gpt-")||n.includes("/"))try{const r=xp(),i=Mh+qv,o=Jv(t,e),a=(await r.chat.completions.create({model:fR,messages:[{role:"system",content:i},{role:"user",content:o}],temperature:0})).choices[0].message.content;if(!a)return{score:0,reasons:["Judge model returned an empty response."]};const c=a.trim().match(/\{[\s\S]*\}/)?.[0]??"{}",f=JSON.parse(c);return typeof f.score=="number"&&Array.isArray(f.reasons)?{score:Math.max(0,Math.min(1,f.score)),reasons:f.reasons}:(console.warn("OpenAI Judge model returned invalid JSON shape:",f),{score:0,reasons:["Invalid JSON response from OpenAI judge model."]})}catch(r){console.error("Error during OpenAI answer judging:",r);const i=r instanceof Error?r.message:"An unknown error occurred.";return r instanceof SyntaxError?{score:0,reasons:[`Failed to parse JSON response from OpenAI judge: ${i}`]}:{score:0,reasons:[`An error occurred while judging the answer with OpenAI: ${i}`]}}try{const r=n===on?on:Nn,i=wp(),o=await Sp(()=>i.models.generateContent({model:r,contents:{parts:[{text:Jv(t,e)}]},config:{systemInstruction:qv,responseMimeType:"application/json",responseSchema:{type:tn.OBJECT,properties:{score:{type:tn.NUMBER},reasons:{type:tn.ARRAY,items:{type:tn.STRING}}},propertyOrdering:["score","reasons"]},temperature:0}})),s=Cp(o).trim();if(!s)return console.warn("Judge model returned empty response"),{score:0,reasons:["Empty response from judge model."]};let a;try{a=JSON.parse(s)}catch(f){return console.error("Failed to parse JSON from Gemini judge:",f),{score:0,reasons:[`Failed to parse JSON response from judge model: ${f instanceof Error?f.message:String(f)}`]}}return(f=>{if(typeof f!="object"||f===null)return!1;const d=f;return typeof d.score=="number"&&Array.isArray(d.reasons)&&d.reasons.every(h=>typeof h=="string")})(a)?{score:Math.max(0,Math.min(1,a.score)),reasons:a.reasons}:(console.warn("Judge model returned invalid JSON shape:",a),{score:0,reasons:["Invalid JSON response from judge model."]})}catch(r){return console.error("Error during answer judging:",r),Nl(r)?{score:0,reasons:[Tp]}:{score:0,reasons:["An error occurred while judging the answer."]}}};function nd(t,e){const n=new Map;t.forEach((s,a)=>n.set(s,(n.get(s)??0)+(e[a]??0)));let r="",i=-1/0,o=0;for(const[s,a]of n)o+=a,a>i&&(i=a,r=s);return{answer:r,weights:n,consensus:i<=0||o<=0?0:i/o}}function rd(t,e,n){if(t.length===0)return{items:[],keptScores:[]};const r=[...t.keys()];r.sort((s,a)=>e[a]-e[s]);const i=Math.max(1,Math.floor(n/100*t.length)),o=r.slice(0,i);return{items:o.map(s=>t[s]),keptScores:o.map(s=>e[s])}}async function ZT(t,e,n,r,i={}){const o={...gn,...i},s=[],a=o.maxBudget??gn.maxBudget;for(let x=0;x<a;x++)s.push(t.generate(e,new AbortController().signal));const c=await Promise.all(s),f=c.map(n),d=c.map(x=>td(e,x.text,r)),h=(await Promise.all(d)).map(x=>x.score),{items:p,keptScores:m}=rd(f,h,o.etaPercent??gn.etaPercent),{answer:_}=nd(p,m),g=c.find(x=>n(x)===_);return{answer:_,content:g?.text??"Could not determine winning trace."}}async function QT(t,e,n,r,i={}){const o={...gn,...i},s=[],a=[],c=o.warmupTraces??gn.warmupTraces,f=[];for(let w=0;w<c;w++)f.push(t.generate(e,new AbortController().signal));const d=await Promise.all(f),h=d.map(w=>td(e,w.text,r)),p=(await Promise.all(h)).map(w=>w.score);s.push(...d),a.push(...p);let m=s.map(n);const _=rd(m,a,o.etaPercent??gn.etaPercent);let{answer:g,consensus:x}=nd(_.items,_.keptScores);const y=o.maxBudget??gn.maxBudget;for(;x<(o.tau??gn.tau)&&s.length<y;){const w=await t.generate(e,new AbortController().signal),{score:E}=await td(e,w.text,r);s.push(w),a.push(E);const A=s.map(n),I=rd(A,a,o.etaPercent??gn.etaPercent),k=nd(I.items,I.keptScores);g=k.answer,x=k.consensus}const v=s.find(w=>n(w)===g);return{answer:g,content:v?.text??"Could not determine winning trace."}}const KV={low:8192,medium:24576,high:32768,dynamic:-1},YV={none:0,low:4096,medium:12288,high:24576,dynamic:-1},jT=async(t,e,n,r,i)=>{const o=[{text:e}];n.forEach(c=>{o.push({inlineData:{mimeType:c.file.type,data:c.base64}})});const s={model:t.model,contents:{parts:o},config:{systemInstruction:t.persona,temperature:.5+Math.random()*.2}};if(r.model===Nn){const c=YV[r.settings.effort];s.config&&(s.config.thinkingConfig={thinkingBudget:c})}else if(r.model===on){const c=r.settings.effort==="none"?"dynamic":r.settings.effort,f=KV[c];s.config&&(s.config.thinkingConfig={thinkingBudget:f})}i&&s.config&&(s.config.abortSignal=i);const a=wp();try{const c=await Sp(()=>a.models.generateContent(s));return Cp(c)}catch(c){return XT(c,"dispatcher","dispatch")}},XV=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:o,deepConfEta:s,tau:a,groupWindow:c}=r.settings,f=()=>({generate:async(p,m)=>{const _=await jT(t,p,n,r,m);return{text:_,steps:_.split("").map(x=>({token:x,topK:[]}))}}}),d=p=>p.text.trim(),h={etaPercent:s,maxBudget:o,warmupTraces:Math.min(o,gn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await QT(f(),e,d,r.model,h);return p}else{const{content:p}=await ZT(f(),e,d,r.model,h);return p}},eS=async(t,e,n,r,i)=>{const o=xp();let s=t.persona;s+=`
Your response verbosity should be ${r.settings.verbosity}.`,r.settings.effort==="high"&&(s=Mh+s);const a=[{role:"system",content:s}];if(n.length>0){const f=[{type:"text",text:e}];n.forEach(d=>{f.push({type:"image_url",image_url:{url:`data:${d.file.type};base64,${d.base64}`}})}),a.push({role:"user",content:f})}else a.push({role:"user",content:e});return(await JT(()=>o.chat.completions.create({model:t.model,messages:a},{signal:i}),"OpenAI")).choices[0].message.content||"No content received."},ZV=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:o,deepConfEta:s,tau:a,groupWindow:c}=r.settings,f=()=>({generate:async(p,m)=>{const _=await eS(t,p,n,r,m);return{text:_,steps:_.split("").map(x=>({token:x,topK:[]}))}}}),d=p=>p.text.trim(),h={etaPercent:s,maxBudget:o,warmupTraces:Math.min(o,gn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await QT(f(),e,d,r.model,h);return p}else{const{content:p}=await ZT(f(),e,d,r.model,h);return p}},QV=async(t,e,n,r)=>{const i=KT();if(!i)throw new Error("OpenRouter API Key not set.");const o={Authorization:`Bearer ${i}`,"Content-Type":"application/json","HTTP-Referer":YT(),"X-Title":"HeavyOrc"},s=[{role:"system",content:t.persona}];if(n.length>0){const d=[{type:"text",text:e}];n.forEach(h=>{d.push({type:"image_url",image_url:{url:`data:${h.file.type};base64,${h.base64}`}})}),s.push({role:"user",content:d})}else s.push({role:"user",content:e});const a={model:t.model,messages:s,...r.settings},c=await qT("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:o,body:JSON.stringify(a)});if(!c.ok){const d=await c.json();throw new Error(`OpenRouter API Error: ${d.error?.message||c.statusText}`)}return(await c.json()).choices[0].message.content||"No content received."},Kv=async(t,e,n,r)=>{try{let i="";if(r.provider==="gemini"){const o=r;o.settings.generationStrategy==="single"?i=await jT(t,e,n,o):i=await XV(t,e,n,o)}else if(r.provider==="openai"){const o=r;o.settings.generationStrategy==="single"?i=await eS(t,e,n,o):i=await ZV(t,e,n,o)}else i=await QV(t,e,n,r);return{agentId:t.agentId,expert:t,content:i,status:"COMPLETED"}}catch(i){console.error(`Agent ${r.id} (${t.provider} - ${t.name}) failed:`,i);let o="An unknown error occurred";return i instanceof Error?o=i.message:typeof i=="string"&&(o=i),{agentId:t.agentId,expert:t,content:"This agent failed to generate a response.",status:"FAILED",error:o}}},jV=t=>new Promise(e=>setTimeout(e,t)),eU=async(t,e,n,r,i)=>{const s=t.map(m=>({expert:m,config:r.find(_=>_.id===m.agentId)})).filter(m=>m.config!==void 0),a=s.filter(m=>m.config.provider==="gemini"),c=s.filter(m=>m.config.provider==="openai"),f=s.filter(m=>m.config.provider==="openrouter"),d=[];[...a,...f].forEach(({expert:m,config:_})=>{const g=Kv(m,e,n,_).then(x=>(i(x),x));d.push(g)});let p=Promise.resolve();return c.forEach(({expert:m,config:_})=>{p=p.then(async()=>{const g=Kv(m,e,n,_).then(x=>(i(x),x));d.push(g),_.settings.generationStrategy==="single"&&await jV(250)})}),await p,Promise.all(d)},tU={none:0,low:8192,medium:24576,high:32768,dynamic:-1},nU={none:0,low:4096,medium:12288,high:24576,dynamic:-1};async function*rU(t){const e=t.getReader(),n=new TextDecoder("utf-8");try{for(;;){const{done:r,value:i}=await e.read();if(r)break;const s=n.decode(i,{stream:!0}).split(`

`);for(const a of s)if(a.startsWith("data: ")){const c=a.substring(6);if(c.trim()==="[DONE]")return;try{const d=JSON.parse(c).choices[0]?.delta?.content||"";d&&(yield{text:d})}catch(f){console.error("Error parsing OpenRouter stream chunk:",f,"Chunk:",c)}}}}finally{e.releaseLock()}}const iU=async(t,e,n,r,i)=>{const o=n.filter(p=>p.status==="COMPLETED");if(o.length===0)throw new Error("All agents failed to produce a draft. Cannot generate a final answer.");const s=`The original user question is:
"${e}"

Here are ${o.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${o.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;if(t.includes("/")){const p=KT();if(!p)throw new Error("OpenRouter API Key not set.");const m={Authorization:`Bearer ${p}`,"Content-Type":"application/json","HTTP-Referer":YT(),"X-Title":"HeavyOrc"},x=await qT("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:m,body:JSON.stringify({model:t,messages:[{role:"system",content:nc},{role:"user",content:s}],stream:!0})});if(!x.ok||!x.body){const y=await x.json().catch(()=>({}));throw new Error(`OpenRouter API Error: ${y.error?.message||x.statusText}`)}return rU(x.body)}if(t.startsWith("gpt-")){const p=xp();let m=nc;t===Pf&&(m=Mh+m+hR),m+=`
Your final synthesized response should have a verbosity level of: ${r}.`;const _=[{role:"system",content:m},{role:"user",content:s}],g=t===Yx||t===Pf?cR:t;try{const x=await JT(()=>p.chat.completions.create({model:g,messages:_,stream:!0}),"OpenAI");async function*y(){for await(const v of x){const w=v.choices[0]?.delta?.content;w&&(yield{text:w})}}return y()}catch(x){throw console.error("Error calling the OpenAI API for arbiter:",x),x}}const a=t===Nn?Nn:on,d=(a===Nn?nU:tU)[a===on&&i==="none"?"dynamic":i],h=wp();try{const p=await Sp(()=>h.models.generateContentStream({model:a,contents:{parts:[{text:s}]},config:{systemInstruction:nc,thinkingConfig:{thinkingBudget:d}}}));async function*m(){for await(const _ of p)yield{text:Cp(_)}}return m()}catch(p){return XT(p,"arbiter","arbitration")}},oU=t=>Math.ceil(t.length/4),sU=28e3,aU=async(t,e)=>{const n=t.agentConfigs.map(d=>({agentId:d.id,id:d.expert.id,name:d.expert.name,persona:d.expert.persona,provider:d.provider,model:d.model}));e.onInitialAgents(n);const r=await eU(n,t.prompt,t.images,t.agentConfigs,e.onDraftComplete);let i=t.arbiterModel,o=!1;const s=r.filter(d=>d.status==="COMPLETED"),a=i.startsWith("gpt-"),c=i.includes("/");if(s.length>0&&(a||c)){const d=`The original user question is:
"${t.prompt}"

Here are ${s.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${s.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;oU(d)>sU&&(i=on,o=!0)}const f=await iU(i,t.prompt,r,t.openAIArbiterVerbosity,t.geminiArbiterEffort);return{drafts:r,stream:f,switchedArbiter:o}},pc=["var(--accent)","var(--accent-2)","var(--success)","var(--warn)","var(--danger)"];function tS(t){return t<=0?pc[0]:pc[(t-1)%pc.length]}const gu=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M10 2.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75Zm-3.25 3.5a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3Zm7 0a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3ZM10 8a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5A.75.75 0 0 1 10 8Zm-4.12 3.12a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25Zm8.24 0a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25ZM10 13.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75ZM3.75 10a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Zm12.5 0a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Z",clipRule:"evenodd"})}),lU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M9.661 2.237a.531.531 0 0 1 .678 0 11.947 11.947 0 0 0 7.078 2.749.5.5 0 0 1 .479.425c.069.52.104 1.05.104 1.59 0 5.162-3.26 9.563-7.834 11.256a.48.48 0 0 1-.332 0C5.26 16.564 2 12.163 2 7c0-.538.035-1.069.104-1.589a.5.5 0 0 1 .48-.425 11.947 11.947 0 0 0 7.077-2.75Zm4.196 5.954a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),Ep=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",...t,children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ap=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),Os=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"})}),uU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{d:"M3 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM8.5 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM15.5 10a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),nS=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[T.jsx("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),T.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),cU=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[T.jsx("path",{fillRule:"evenodd",d:"M9.25 13.25a.75.75 0 0 0 1.5 0V4.636l2.955 3.129a.75.75 0 0 0 1.09-1.03l-4.25-4.5a.75.75 0 0 0-1.09 0l-4.25 4.5a.75.75 0 1 0 1.09 1.03L9.25 4.636V13.25Z",clipRule:"evenodd"}),T.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),rS=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),iS=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),fU=t=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.127.332-.183.582-.495.645-.87l.213-1.281z"}),T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),dU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:T.jsx("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"})}),oS=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),hU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),pU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),mU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),sS=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),Pp=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),Ip=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),gU=t=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m12 3.75a6 6 0 0 1-12 0v-1.5a6 6 0 0 1 12 0v1.5Zm-6 4.5v.75m-3-12.75a3 3 0 0 1 3-3h.008a3 3 0 0 1 3 3v1.5a3 3 0 0 1-3 3h-.008a3 3 0 0 1-3-3v-1.5Z"})}),yU=t=>{switch(t){case"RUNNING":return T.jsxs(T.Fragment,{children:[T.jsx(Ep,{className:"h-5 w-5 text-[var(--accent-2)] animate-spin"}),T.jsx("span",{className:"sr-only",children:"Running"})]});case"COMPLETED":return T.jsxs(T.Fragment,{children:[T.jsx(Ap,{className:"h-5 w-5 text-[var(--success)]"}),T.jsx("span",{className:"sr-only",children:"Completed"})]});case"FAILED":return T.jsxs(T.Fragment,{children:[T.jsx(Os,{className:"h-5 w-5 text-[var(--danger)]"}),T.jsx("span",{className:"sr-only",children:"Failed"})]});case"PENDING":default:return T.jsxs(T.Fragment,{children:[T.jsx(uU,{className:"h-5 w-5 text-[var(--text-muted)]"}),T.jsx("span",{className:"sr-only",children:"Pending"})]})}},vU=t=>{switch(t){case"RUNNING":return"border-[var(--accent-2)] animate-pulse";case"COMPLETED":return"border-[var(--success)]";case"FAILED":return"border-[var(--danger)]";case"PENDING":default:return"border-[var(--line)]"}},_U=t=>{switch(t){case"gemini":return"bg-[var(--accent)] text-[#0D1411]";case"openai":return"bg-[var(--accent-2)] text-[#0D1411]";case"openrouter":return"bg-[var(--success)] text-[#0D1411]";default:return"bg-[var(--surface-1)] text-[var(--text)]"}},wU=({agent:t,displayId:e,isCollapsed:n,onToggleCollapse:r})=>{const{persona:i,status:o,content:s,provider:a}=t,c=$.useId(),f=o==="COMPLETED"||o==="FAILED",d=vU(o),h=tS(e);return T.jsxs("div",{className:`bg-[var(--surface-2)] border ${d} rounded-lg shadow-lg transition-all duration-300 flex flex-col`,children:[T.jsxs("div",{className:"p-4 border-b border-[var(--line)] flex justify-between items-center gap-2",children:[T.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[T.jsx(gu,{className:"h-5 w-5 flex-shrink-0",style:{color:h},"aria-hidden":"true"}),T.jsxs("h3",{className:"font-bold text-sm text-[var(--text)] truncate",children:["Agent ",e]}),T.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full uppercase ${_U(a)}`,children:a})]}),T.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[yU(o),f&&T.jsxs("button",{onClick:r,className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-expanded":!n,"aria-controls":c,title:n?"Expand":"Collapse",children:[n?T.jsx(iS,{className:"h-5 w-5","aria-hidden":"true"}):T.jsx(rS,{className:"h-5 w-5","aria-hidden":"true"}),T.jsx("span",{className:"sr-only",children:n?"Expand card":"Collapse card"})]})]})]}),T.jsx("div",{id:c,className:`overflow-y-auto transition-all duration-500 ease-in-out ${n?"max-h-0":"max-h-[500px]"}`,children:T.jsxs("div",{className:"p-4",children:[T.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mb-3",children:["Persona: ",i]}),T.jsx("p",{className:"text-sm text-[var(--text)] whitespace-pre-wrap font-mono",children:s||"Awaiting task..."})]})})]})},xa=[{id:"api-keys",label:"API Keys",icon:pU,description:"Manage your API keys. They're stored in your browser and never sent to our servers."},{id:"session",label:"Session Management",icon:sS,description:"Save your current settings, API key, and query history to a file, or load a previous session."},{id:"history",label:"Query History",icon:mU,description:"Review and reuse your most recent prompts."}],xU=({currentOpenAIApiKey:t,onSaveOpenAIApiKey:e,currentGeminiApiKey:n,onSaveGeminiApiKey:r,currentOpenRouterApiKey:i,onSaveOpenRouterApiKey:o})=>{const[s,a]=$.useState(t),[c,f]=$.useState(n),[d,h]=$.useState(i);$.useEffect(()=>{a(t)},[t]),$.useEffect(()=>{f(n)},[n]),$.useEffect(()=>{h(i)},[i]);const p=()=>e(s),m=()=>r(c),_=()=>o(d);return T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"openai-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"OpenAI API Key"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{id:"openai-api-key",type:"password",value:s,onChange:g=>a(g.target.value),placeholder:"sk-...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),T.jsx("button",{onClick:p,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"gemini-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Google Gemini API Key"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{id:"gemini-api-key",type:"password",value:c,onChange:g=>f(g.target.value),placeholder:"AIza...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),T.jsx("button",{onClick:m,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]}),T.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"If left blank, the application will attempt to use the pre-configured environment variable."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"openrouter-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"OpenRouter API Key"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{id:"openrouter-api-key",type:"password",value:d,onChange:g=>h(g.target.value),placeholder:"sk-or-...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),T.jsx("button",{onClick:_,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]})]})]})},CU=({onSaveSession:t,onLoadSession:e})=>{const n=$.useRef(null),r=()=>n.current?.click(),i=o=>{const s=o.target.files?.[0];s&&e(s)};return T.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] transition-colors",children:[T.jsx(nS,{className:"w-5 h-5","aria-hidden":"true"}),"Save Session"]}),T.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] transition-colors",children:[T.jsx(cU,{className:"w-5 h-5","aria-hidden":"true"}),"Load Session"]}),T.jsx("input",{ref:n,type:"file",accept:".json",className:"hidden",onChange:i,"aria-hidden":"true"})]})},TU=({queryHistory:t,onSelectQuery:e,onClose:n})=>{const r=i=>{e(i),n()};return t.length===0?T.jsx("p",{className:"text-[var(--text-muted)] italic",children:"Your query history is empty."}):T.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((i,o)=>T.jsx("li",{children:T.jsx("button",{onClick:()=>r(i),className:"w-full text-left p-2.5 text-sm text-[var(--accent-2)] bg-[var(--surface-2)] rounded-md hover:bg-[var(--surface-active)] transition-colors truncate",title:i,children:i})},o))})},SU=t=>{const{isOpen:e,onClose:n,queryHistory:r}=t,[i,o]=$.useState("api-keys"),[s,a]=$.useState(!1),c=$.useRef(null),f=xa.find(g=>g.id===i)??xa[0];if($.useEffect(()=>{const g=x=>{x.key==="Escape"&&n()};return e&&(window.addEventListener("keydown",g),o("api-keys"),a(!1)),()=>window.removeEventListener("keydown",g)},[e,n]),$.useEffect(()=>{e&&(c.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')??c.current)?.focus()},[e]),$.useEffect(()=>{if(!e)return;const g=y=>{if(y.key!=="Tab"||!c.current)return;const v=Array.from(c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")&&A.offsetParent!==null);if(v.length===0)return;const w=v[0],E=v[v.length-1];y.shiftKey&&document.activeElement===w?(y.preventDefault(),E.focus()):!y.shiftKey&&document.activeElement===E&&(y.preventDefault(),w.focus())},x=c.current;return x?.addEventListener("keydown",g),()=>x?.removeEventListener("keydown",g)},[e]),!e)return null;const d=g=>{o(g),a(!0)},h=()=>a(!1),p=g=>{switch(g){case"api-keys":return T.jsx(xU,{...t});case"session":return T.jsx(CU,{...t});case"history":return T.jsx(TU,{...t});default:return null}},m=r.length>0?xa:xa.filter(g=>g.id!=="history"),_=T.jsx("nav",{className:"flex flex-col gap-1 p-2","aria-label":"Settings navigation",children:m.map(g=>{const x=g.icon,y=g.id===i;return T.jsxs("button",{onClick:()=>d(g.id),className:`w-full flex items-center gap-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${y?"bg-[var(--accent)] text-[#0D1411]":"text-[var(--text)] hover:bg-[var(--surface-active)]"}`,"aria-current":y?"page":void 0,children:[T.jsx(x,{className:"w-5 h-5 flex-shrink-0","aria-hidden":"true"}),T.jsx("span",{children:g.label})]},g.id)})});return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:T.jsxs("div",{ref:c,tabIndex:-1,className:"bg-[var(--surface-2)] rounded-xl shadow-2xl border border-[var(--line)] w-full max-w-4xl h-full max-h-[700px] flex flex-col",onClick:g=>g.stopPropagation(),children:[T.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[var(--line)] flex-shrink-0",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:h,className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] md:hidden","aria-label":"Back to settings sections",style:{visibility:s?"visible":"hidden"},children:T.jsx(oS,{className:"w-6 h-6","aria-hidden":"true"})}),T.jsxs("h2",{id:"settings-title",className:"text-lg font-bold text-[var(--text)]",children:[T.jsx("span",{className:"md:hidden",children:s?f.label:"Settings"}),T.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]}),T.jsx("button",{onClick:n,type:"button",className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)]","aria-label":"Close settings",children:T.jsx(Pp,{className:"w-6 h-6","aria-hidden":"true"})})]}),T.jsxs("div",{className:"flex-grow grid md:grid-cols-[240px_1fr] grid-cols-1 min-h-0",children:[T.jsx("aside",{className:"hidden md:block border-r border-[var(--line)]/50 overflow-y-auto",children:_}),T.jsxs("main",{className:"overflow-y-auto",children:[T.jsx("div",{className:"md:hidden",children:s?T.jsxs("div",{className:"p-6 space-y-4",children:[T.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:f.description}),T.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:p(i)})]}):_}),T.jsxs("div",{className:"hidden md:block p-6 space-y-4",children:[T.jsx("h3",{className:"text-xl font-semibold text-[var(--text)]",children:f.label}),T.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:f.description}),T.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:p(i)})]})]})]})]})})},Yv=({title:t,children:e,isDisabled:n=!1,defaultOpen:r=!1})=>{const[i,o]=$.useState(r),s=$.useId(),a=()=>{n||o(!i)};return T.jsxs("div",{className:`border border-[var(--line)] rounded-lg transition-opacity ${n?"opacity-50":""}`,children:[T.jsxs("button",{type:"button",onClick:a,disabled:n,className:"w-full flex justify-between items-center p-4 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-1)] rounded-t-lg","aria-expanded":i,"aria-controls":s,children:[T.jsx("h4",{className:"text-base font-medium text-[var(--text)]",children:t}),i?T.jsx(rS,{className:"w-5 h-5 text-[var(--text-muted)]","aria-hidden":"true"}):T.jsx(iS,{className:"w-5 h-5 text-[var(--text-muted)]","aria-hidden":"true"})]}),T.jsx("div",{id:s,className:`transition-all duration-300 ease-in-out ${i?"max-h-[80vh] overflow-y-auto":"max-h-0 overflow-hidden"}`,children:T.jsx("div",{className:"p-4 border-t border-[var(--line)]",children:e})})]})},Mr=({value:t,onCommit:e,parser:n=parseFloat,onCancel:r,...i})=>{const[o,s]=gc.useState(String(t));gc.useEffect(()=>{s(String(t))},[t]);const a=()=>{let c=n(o);if(Number.isNaN(c))s(String(t)),r?.();else{const f=i.min!==void 0?Number(i.min):void 0,d=i.max!==void 0?Number(i.max):void 0;f!==void 0&&(c=Math.max(c,f)),d!==void 0&&(c=Math.min(c,d)),e(c)}};return T.jsx("input",{...i,value:o,onChange:c=>s(c.target.value),onBlur:a,onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),a(),c.target.blur())}})},EU=t=>{switch(t){case"RUNNING":return T.jsx(Ep,{className:"h-5 w-5 text-[var(--accent-2)] animate-spin","aria-hidden":"true"});case"COMPLETED":return T.jsx(Ap,{className:"h-5 w-5 text-[var(--success)]","aria-hidden":"true"});case"FAILED":return T.jsx(Os,{className:"h-5 w-5 text-[var(--danger)]","aria-hidden":"true"});case"PENDING":case"QUEUED":default:return null}},AU=t=>{switch(t){case"RUNNING":return"border-[var(--accent-2)] ring-2 ring-[var(--accent-2)] ring-opacity-50";case"COMPLETED":return"border-[var(--success)]";case"FAILED":return"border-[var(--danger)]";case"PENDING":case"QUEUED":default:return"border-[var(--line)]"}},PU=({config:t,onUpdate:e,onRemove:n,onDuplicate:r,disabled:i,displayId:o})=>{const s=d=>{const h=d.target.value,p=h.startsWith("gemini"),m=h.includes("/");if(p){const _=h,g={id:t.id,expert:t.expert,status:t.status,provider:"gemini",model:_,settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,g)}else if(m){const _=h,g={id:t.id,expert:t.expert,status:t.status,provider:"openrouter",model:_,settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}};e(t.id,g)}else{const _=h,g={id:t.id,expert:t.expert,status:t.status,provider:"openai",model:_,settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,g)}},a=d=>{const h={...t,settings:{...t.settings,...d}};e(t.id,h)},c=AU(t.status),f=tS(o);return T.jsxs("div",{className:`relative group bg-[var(--surface-2)] p-4 rounded-lg border transition-all duration-300 ${c}`,children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold",style:{color:f},children:t.expert.name}),T.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-1 pr-8",children:["Persona: ",t.expert.persona]})]}),T.jsx("div",{className:"flex-shrink-0",children:EU(t.status)})]}),T.jsxs("div",{className:`absolute top-3 right-3 flex items-center gap-1.5 transition-opacity ${i?"opacity-0":"opacity-0 group-hover:opacity-100"}`,children:[T.jsxs("button",{onClick:()=>r(t.id),disabled:i,className:"p-1 text-[var(--text-muted)] hover:text-[var(--text)] disabled:opacity-50 disabled:cursor-not-allowed",title:"Duplicate Agent",children:[T.jsx(sS,{className:"w-5 h-5","aria-hidden":"true"}),T.jsx("span",{className:"sr-only",children:"Duplicate Agent"})]}),T.jsxs("button",{onClick:()=>n(t.id),disabled:i,className:"p-1 text-[var(--text-muted)] hover:text-[var(--danger)] disabled:opacity-50 disabled:cursor-not-allowed",title:"Remove Agent",children:[T.jsx(Os,{className:"w-5 h-5","aria-hidden":"true"}),T.jsx("span",{className:"sr-only",children:"Remove Agent"})]})]}),T.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`model-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Model"}),T.jsxs("select",{id:`model-${t.id}`,value:t.model,onChange:s,disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",children:[T.jsxs("optgroup",{label:"Google",children:[T.jsx("option",{value:on,children:"Gemini 2.5 Pro"}),T.jsx("option",{value:Nn,children:"Gemini 2.5 Flash"})]}),T.jsxs("optgroup",{label:"OpenAI",children:[T.jsx("option",{value:qx,children:"OpenAI GPT-5"}),T.jsx("option",{value:Rh,children:"OpenAI GPT-5 Mini"})]}),T.jsxs("optgroup",{label:"OpenRouter",children:[T.jsx("option",{value:Jx,children:"OpenAI GPT-4o"}),T.jsx("option",{value:dR,children:"Gemini Flash 1.5"}),T.jsx("option",{value:Kx,children:"Claude 3 Haiku"})]})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`strategy-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Generation Strategy"}),T.jsxs("select",{id:`strategy-${t.id}`,value:t.provider==="openrouter"?"single":t.settings.generationStrategy,onChange:d=>a({generationStrategy:d.target.value}),disabled:i||t.provider==="openrouter",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)] disabled:opacity-70",title:t.provider==="openrouter"?"DeepConf is not currently supported for OpenRouter agents.":"Select the generation strategy.",children:[T.jsx("option",{value:"single",children:"Single Draft"}),T.jsx("option",{value:"deepconf-offline",children:"DeepConf Offline"}),T.jsx("option",{value:"deepconf-online",children:"DeepConf Online"})]})]}),t.provider!=="openrouter"&&t.settings.generationStrategy!=="single"&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`traces-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Trace Count"}),T.jsx(Mr,{type:"number",id:`traces-${t.id}`,value:t.settings.traceCount,onCommit:d=>a({traceCount:d}),parser:d=>parseInt(d,10),disabled:i,min:"2",max:"32",step:"1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Number of parallel responses to generate for DeepConf."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`eta-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Confidence (Eta)"}),T.jsxs("select",{id:`eta-${t.id}`,value:t.settings.deepConfEta,onChange:d=>a({deepConfEta:parseInt(d.target.value,10)}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Confidence threshold. 90% is conservative (keeps more), 10% is aggressive (keeps few high-confidence traces).",children:[T.jsx("option",{value:"90",children:"90% (Conservative)"}),T.jsx("option",{value:"10",children:"10% (Aggressive)"})]})]}),T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{htmlFor:`confidence-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Confidence Source"}),T.jsx("select",{id:`confidence-${t.id}`,value:t.settings.confidenceSource,disabled:!0,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)] disabled:opacity-70 disabled:cursor-not-allowed",title:"Only 'Judge' is available. The underlying models (Gemini and GPT-5) do not support streaming logprobs required for token-based confidence.",children:T.jsx("option",{value:"judge",children:"Judge Verifier"})})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`tau-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Consensus (Tau)"}),T.jsx(Mr,{type:"number",id:`tau-${t.id}`,value:t.settings.tau,onCommit:d=>a({tau:d}),parser:d=>parseFloat(d),disabled:i,min:"0.5",max:"1.0",step:"0.01",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Consensus threshold for online mode. Stops when the top answer's vote share exceeds this value (e.g., 0.95)."})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`groupWindow-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Group Window"}),T.jsx(Mr,{type:"number",id:`groupWindow-${t.id}`,value:t.settings.groupWindow,onCommit:d=>a({groupWindow:d}),parser:d=>parseInt(d,10),disabled:i,min:"8",max:"4096",step:"8",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Sliding window size (in tokens) for calculating group confidence."})]})]}),t.provider==="gemini"?T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{htmlFor:`gemini-effort-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Thinking Effort"}),T.jsxs("select",{id:`gemini-effort-${t.id}`,value:t.settings.effort,onChange:d=>a({effort:d.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Controls how much 'thinking' the Gemini model performs before answering. 'Dynamic' is recommended. 'High' can improve quality for complex tasks but increases latency. 'None' is fastest but least thorough.",children:[T.jsx("option",{value:"dynamic",children:"Dynamic"}),T.jsx("option",{value:"high",children:"High"}),T.jsx("option",{value:"medium",children:"Medium"}),T.jsx("option",{value:"low",children:"Low"}),T.jsx("option",{value:"none",disabled:t.model===on,children:"None (No Thinking)"})]})]}):t.provider==="openai"?T.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`openai-effort-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Reasoning"}),T.jsxs("select",{id:`openai-effort-${t.id}`,value:t.settings.effort,onChange:d=>a({effort:d.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Controls the model's reasoning process. 'High' enables more complex, step-by-step thinking, which can improve accuracy for difficult prompts. 'Medium' is faster and suitable for general tasks.",children:[T.jsx("option",{value:"high",children:"High"}),T.jsx("option",{value:"medium",children:"Medium"})]})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`openai-verbosity-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Verbosity"}),T.jsxs("select",{id:`openai-verbosity-${t.id}`,value:t.settings.verbosity,onChange:d=>a({verbosity:d.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Adjusts the length and detail of the agent's response. 'High' provides more comprehensive answers, while 'Low' is more concise.",children:[T.jsx("option",{value:"high",children:"High"}),T.jsx("option",{value:"medium",children:"Medium"}),T.jsx("option",{value:"low",children:"Low"})]})]})]}):T.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-temp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Temperature"}),T.jsx(Mr,{type:"number",id:`or-temp-${t.id}`,value:t.settings.temperature,onCommit:d=>a({temperature:d}),parser:d=>parseFloat(d),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-topk-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Top K"}),T.jsx(Mr,{type:"number",id:`or-topk-${t.id}`,value:t.settings.topK,onCommit:d=>a({topK:d}),parser:d=>parseInt(d,10),disabled:i,min:"1",step:"1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-topp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Top P"}),T.jsx(Mr,{type:"number",id:`or-topp-${t.id}`,value:t.settings.topP,onCommit:d=>a({topP:d}),parser:d=>parseFloat(d),disabled:i,min:"0",max:"1",step:"0.05",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:`or-repp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Repetition Penalty"}),T.jsx(Mr,{type:"number",id:`or-repp-${t.id}`,value:t.settings.repetitionPenalty,onCommit:d=>a({repetitionPenalty:d}),parser:d=>parseFloat(d),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]})]})]})]})},IU=({isOpen:t,onClose:e,onAddExpert:n,availableExperts:r})=>{if($.useEffect(()=>{const o=s=>{s.key==="Escape"&&e()};return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e]),!t)return null;const i=o=>{n(o),e()};return T.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"add-expert-title",children:T.jsxs("div",{className:"bg-[var(--surface-2)] rounded-xl shadow-2xl border border-[var(--line)] w-full max-w-2xl h-full max-h-[80vh] flex flex-col",onClick:o=>o.stopPropagation(),children:[T.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[var(--line)] flex-shrink-0",children:[T.jsx("h2",{id:"add-expert-title",className:"text-lg font-bold text-[var(--text)]",children:"Add an Expert to the Ensemble"}),T.jsx("button",{onClick:e,type:"button",className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)]","aria-label":"Close modal",children:T.jsx(Pp,{className:"w-6 h-6","aria-hidden":"true"})})]}),T.jsx("main",{className:"flex-grow p-4 sm:p-6 overflow-y-auto",children:T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(o=>T.jsxs("button",{onClick:()=>i(o),className:"w-full h-full text-left p-4 bg-[var(--surface-2)] rounded-lg border border-[var(--line)] hover:bg-[var(--surface-active)] hover:border-[var(--accent)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--accent)] flex flex-col",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(gu,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0","aria-hidden":"true"}),T.jsx("h3",{className:"font-bold text-[var(--text)]",children:o.name})]}),T.jsx("p",{className:"text-sm text-[var(--text-muted)] flex-grow",children:o.persona})]},o.id))})})]})})},aS=$.forwardRef(({agentConfigs:t,setAgentConfigs:e,onDuplicateAgent:n,disabled:r},i)=>{const[o,s]=$.useState(!1);$.useImperativeHandle(i,()=>({openModal:()=>s(!0)}));const a=h=>{const p={id:crypto.randomUUID(),expert:h,model:"gemini-2.5-flash",provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(m=>[...m,p])},c=(h,p)=>{e(m=>m.map(_=>_.id===h?p:_))},f=h=>{e(p=>p.filter(m=>m.id!==h))},d=Nh.filter(h=>!t.some(p=>p.expert.id===h.id));return T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("h3",{className:"text-base font-medium text-[var(--text)]",children:"Agent Ensemble"}),d.length>0&&T.jsxs("button",{onClick:()=>s(!0),disabled:r,className:"flex items-center justify-center gap-2 px-3 py-1 bg-[var(--accent)] text-[#0D1411] text-sm font-semibold rounded-lg shadow-md hover:brightness-110 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T.jsx(Ip,{className:"w-4 h-4","aria-hidden":"true"}),"Add Expert"]})]}),T.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:t.length>0?t.map((h,p)=>T.jsx(PU,{config:h,onUpdate:c,onRemove:f,onDuplicate:n,disabled:r,displayId:p+1},h.id)):T.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-[var(--text-muted)]",children:'No experts configured. Click "Add Expert" to get started.'})}),T.jsx(IU,{isOpen:o,onClose:()=>s(!1),onAddExpert:a,availableExperts:d})]})});aS.displayName="AgentEnsemble";const ci=5,Xv=200,kU=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result?.split(",")[1];i?e(i):n(new Error("Failed to read file as base64."))},r.onerror=i=>n(i),r.readAsDataURL(t)}),RU=({prompt:t,onPromptChange:e,images:n,onImagesChange:r,onSubmit:i,isLoading:o=!1,disabled:s=!1,inputRef:a})=>{const c=$.useRef(null),f=a||$.useRef(null),d=$.useCallback(async y=>{const v=y.target.files;if(!v)return;let w=[...n];for(const E of Array.from(v)){if(w.length>=ci){alert(`You can only upload a maximum of ${ci} images.`);break}if(E.type.startsWith("image/"))try{const A=await kU(E),I={id:`${E.name}-${Date.now()}`,file:E,base64:A};w.push(I)}catch(A){console.error("Error reading file:",A),alert("There was an error processing one of the images.")}}r(w),c.current&&(c.current.value="")},[n,r]),h=$.useCallback(y=>{r(n.filter(v=>v.id!==y))},[n,r]),p=()=>{c.current?.click()},m=$.useRef({}),_=$.useMemo(()=>{const y=m.current,v=n.map(E=>{let A=y[E.id];return A||(A=URL.createObjectURL(E.file),y[E.id]=A),{...E,url:A}}),w=new Set(n.map(E=>E.id));return Object.keys(y).forEach(E=>{w.has(E)||(URL.revokeObjectURL(y[E]),delete y[E])}),v},[n]);$.useEffect(()=>()=>{Object.values(m.current).forEach(y=>URL.revokeObjectURL(y)),m.current={}},[]);const g=y=>{y.key==="Enter"&&!y.shiftKey&&!y.nativeEvent.isComposing&&(y.preventDefault(),!s&&!o&&(t.trim()||n.length>0)&&i())};$.useEffect(()=>{if(f.current){f.current.style.height="auto";const y=f.current.scrollHeight;y>Xv?(f.current.style.height=`${Xv}px`,f.current.style.overflowY="auto"):(f.current.style.height=`${y}px`,f.current.style.overflowY="hidden")}},[t]);const x=!s&&(!!t.trim()||n.length>0);return T.jsxs("div",{className:"bg-[var(--surface-2)] p-2 rounded-2xl shadow-2xl border border-[var(--line)] flex flex-col gap-2",children:[_.length>0&&T.jsx("div",{className:"flex flex-wrap gap-2 px-2 pt-1",children:_.map(y=>T.jsxs("div",{className:"relative group flex-shrink-0",children:[T.jsx("img",{src:y.url,alt:"Image preview",className:"w-20 h-20 rounded-lg object-cover border border-[var(--line)]"}),T.jsx("button",{onClick:()=>h(y.id),disabled:s||o,className:"absolute top-1 right-1 p-0.5 bg-black/60 text-[var(--text)] rounded-full hover:bg-[var(--danger)] focus:outline-none focus:ring-2 focus:ring-[var(--danger)] disabled:opacity-50","aria-label":"Remove image",children:T.jsx(Os,{className:"w-5 h-5","aria-hidden":"true"})})]},y.id))}),T.jsxs("div",{className:"flex items-end gap-2",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsxs("button",{type:"button",onClick:p,disabled:s||o||n.length>=ci,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:n.length>=ci?`Maximum ${ci} images reached`:`Add image (${n.length}/${ci})`,children:[T.jsx(Ip,{className:"w-5 h-5","aria-hidden":"true"}),T.jsx("span",{className:"sr-only",children:"Add Image"})]}),T.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:d,className:"hidden","aria-hidden":"true"}),T.jsxs("button",{type:"button",disabled:!0,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-full transition-colors disabled:opacity-50",title:"Use microphone (coming soon)",children:[T.jsx(gU,{className:"w-5 h-5","aria-hidden":"true"}),T.jsx("span",{className:"sr-only",children:"Use microphone"})]})]}),T.jsx("textarea",{ref:f,value:t,onChange:y=>e(y.target.value),onKeyDown:g,placeholder:"Ask me anything, or add up to 5 images...",className:"w-full flex-grow bg-transparent text-[var(--text)] placeholder-[var(--text-muted)] text-base resize-none focus:outline-none p-2 min-h-[44px]",rows:1,disabled:s||o}),T.jsx("button",{type:"button",onClick:i,disabled:!x||o,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold rounded-lg shadow-md transition-all duration-300 bg-[var(--accent)] text-[#0D1411] hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] disabled:cursor-not-allowed",title:"Run Orchestration",children:o?T.jsxs(T.Fragment,{children:[T.jsx(Ep,{className:"w-5 h-5 animate-spin","aria-hidden":"true"}),"Processing..."]}):T.jsxs(T.Fragment,{children:[T.jsx(gu,{className:"w-5 h-5","aria-hidden":"true"}),"Run"]})})]})]})},MU=({answer:t,title:e="Arbiter's Final Answer",isStreaming:n=!1,className:r,...i})=>{const[o,s]=$.useState(""),a=$.useRef(null);$.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),$.useEffect(()=>{if(!n){a.current&&clearInterval(a.current),a.current=null,s(t);return}if(t===""&&o!==""){a.current&&clearInterval(a.current),a.current=null,s("");return}a.current||(a.current=window.setInterval(()=>{s(d=>{if(d.length<t.length){const h=t.substring(d.length,d.length+1);return d+h}else return a.current&&clearInterval(a.current),a.current=null,d})},15))},[t,n]);const c=o||n,f=n&&(!a.current||o.length===t.length);return T.jsx("div",{className:`final-answer-glow rounded-xl shadow-2xl ${r}`,...i,children:T.jsxs("div",{className:"bg-[var(--surface-2)] p-0 rounded-xl flex flex-col w-full min-h-[200px]",children:[T.jsx("div",{className:"p-4 border-b border-[var(--line)] flex items-center justify-between gap-3 flex-shrink-0",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(gu,{className:"w-6 h-6 text-[var(--accent)]","aria-hidden":"true"}),T.jsx("h2",{className:"text-xl font-bold text-[var(--text)]",children:e})]})}),T.jsx("div",{className:"p-4 flex-grow min-h-0 overflow-y-auto max-h-[70vh]",children:c?T.jsxs("p",{className:"text-[var(--text)] whitespace-pre-wrap font-serif leading-relaxed",children:[o,f&&T.jsx("span",{className:"inline-block w-2 h-5 bg-[var(--accent)] animate-pulse ml-1"})]}):T.jsx("div",{className:"flex items-center justify-center h-full",children:T.jsx("p",{className:"text-[var(--text-muted)] italic",children:"Waiting for arbiter's response..."})})})]})})},NU=t=>{const e=new Date,n=new Date(t),r=Math.floor((e.getTime()-n.getTime())/1e3);if(r<60)return"Just now";const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const o=Math.floor(i/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`},Zv=({status:t})=>{switch(t){case"IN_PROGRESS":return T.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[var(--accent-2)] animate-pulse",title:"In Progress",children:T.jsx("span",{className:"sr-only",children:"In Progress"})});case"COMPLETED":return T.jsx("div",{title:"Completed",children:T.jsx(Ap,{className:"w-4 h-4 text-[var(--success)]","aria-hidden":"true"})});case"FAILED":return T.jsx("div",{title:"Failed",children:T.jsx(Os,{className:"w-4 h-4 text-[var(--danger)]","aria-hidden":"true"})});default:return null}},DU=({history:t,selectedRunId:e,onSelectRun:n,onNewRun:r,currentRunStatus:i})=>{const[o,s]=$.useState(!0);return T.jsxs("aside",{className:`bg-[var(--surface-2)] border-r border-[var(--line)] flex flex-col transition-all duration-300 ease-in-out ${o?"w-64":"w-16"}`,children:[T.jsxs("div",{className:"flex-shrink-0 p-2 flex items-center justify-between border-b border-[var(--line)]",children:[o&&T.jsx("h2",{className:"text-lg font-semibold ml-2",children:"History"}),T.jsx("button",{onClick:()=>s(!o),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-lg transition-colors",title:o?"Collapse Sidebar":"Expand Sidebar",children:o?T.jsx(oS,{className:"w-6 h-6","aria-hidden":"true"}):T.jsx(hU,{className:"w-6 h-6","aria-hidden":"true"})})]}),T.jsx("div",{className:"flex-shrink-0 p-2",children:T.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-semibold rounded-lg transition-colors ${e?"bg-[var(--surface-1)] hover:bg-[var(--surface-active)] text-[var(--text)]":"bg-[var(--accent)] text-[#0D1411] hover:brightness-110"}`,children:[T.jsx(Ip,{className:"w-5 h-5","aria-hidden":"true"}),o&&T.jsx("span",{children:"New Run"})]})}),T.jsx("nav",{className:"flex-grow p-2 overflow-y-auto",children:T.jsxs("ul",{className:"space-y-1",children:[i!=="IDLE"&&T.jsx("li",{children:T.jsxs("button",{onClick:()=>r(),className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${e?"hover:bg-[var(--surface-active)]":"bg-[var(--surface-1)]"}`,title:"View current run",children:[T.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center",children:T.jsx(Zv,{status:i})}),o&&T.jsxs("div",{className:"overflow-hidden",children:[T.jsx("p",{className:"text-sm font-medium text-[var(--text)] truncate",children:"Current Run"}),T.jsx("p",{className:"text-xs text-[var(--text-muted)] capitalize",children:i.replace("_"," ").toLowerCase()})]})]})}),t.length===0&&i==="IDLE"?T.jsx("li",{className:"text-center py-4 text-sm text-[var(--text-muted)]",children:"No past runs yet. Submit a prompt to create one."}):t.map(a=>T.jsx("li",{children:T.jsxs("button",{onClick:()=>n(a.id),className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${e===a.id?"bg-[var(--surface-1)]":"hover:bg-[var(--surface-active)]"}`,children:[T.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center mt-0.5",children:T.jsx(Zv,{status:a.status})}),o&&T.jsxs("div",{className:"overflow-hidden",children:[T.jsx("p",{className:"text-sm font-medium text-[var(--text)] truncate",children:a.prompt||"Image-based prompt"}),T.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:NU(a.timestamp)})]})]})},a.id))]})})]})},mc=({options:t,value:e,onChange:n,disabled:r=!1,"aria-label":i})=>T.jsx("div",{role:"tablist","aria-label":i,className:`flex w-full p-1 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg ${r?"opacity-70 cursor-not-allowed":""}`,children:t.map((o,s)=>T.jsxs("button",{onClick:()=>!r&&n(o.value),type:"button",role:"tab","aria-selected":e===o.value,disabled:r,"aria-disabled":r,title:o.tooltip,className:`relative flex-1 px-3 py-1.5 text-sm font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-1)] z-10
            ${s===0?"rounded-l-md":""}
            ${s===t.length-1?"rounded-r-md":""}
            ${e===o.value?"text-[#0D1411]":"text-[var(--text)] hover:bg-[var(--surface-active)]"}
            ${r?"cursor-not-allowed":""}
          `,children:[e===o.value&&T.jsx("span",{className:"absolute inset-0 bg-[var(--accent)] rounded-md -z-10 motion-safe:transition-transform"}),T.jsx("span",{className:"relative",children:o.label})]},o.value))}),Qv="openai_api_key",jv="gemini_api_key",e0="openrouter_api_key",bU=20,t0={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},Ca={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:12}}},LU=({message:t,type:e,onClose:n})=>{$.useEffect(()=>{const i=setTimeout(n,5e3);return()=>clearTimeout(i)},[n]);const r=e==="success"?"bg-[var(--success)] border-[var(--success)] text-[var(--text)]":"bg-[var(--danger)] border-[var(--danger)] text-[var(--text)]";return T.jsxs("div",{className:`fixed bottom-5 right-5 p-4 rounded-lg shadow-2xl border z-50 animate-fade-in-up flex items-center gap-4 ${r}`,style:{animationDuration:"0.3s"},children:[T.jsx("span",{children:t}),T.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-[var(--surface-active)]","aria-label":"Close notification",children:T.jsx(Pp,{className:"w-5 h-5","aria-hidden":"true"})})]})},n0=()=>{const t=Nh.slice(0,4);if(t.length<4)return[];const e=[];return e.push({id:crypto.randomUUID(),expert:t[0],model:Nn,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[1],model:Nn,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[2],model:Jx,provider:"openrouter",status:"PENDING",settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}}),e.push({id:crypto.randomUUID(),expert:t[3],model:qx,provider:"openai",status:"PENDING",settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e},FU=t=>({id:t.agentId,name:t.expert.name,persona:t.expert.persona,status:t.status,content:t.content,error:t.error||null,model:t.expert.model,provider:t.expert.provider}),VU=()=>{const[t,e]=$.useState(""),[n,r]=$.useState([]),[i,o]=$.useState(n0()),[s,a]=$.useState(on),[c,f]=$.useState("medium"),[d,h]=$.useState("dynamic"),[p,m]=$.useState([]),[_,g]=$.useState(""),[x,y]=$.useState(null),[v,w]=$.useState(!1),[E,A]=$.useState(null),[I,k]=$.useState(!1),[N,D]=$.useState([]),[b,H]=$.useState(null),[M,z]=$.useState(""),[S,G]=$.useState(""),[ae,q]=$.useState(""),[J,B]=$.useState(!1),[X,V]=$.useState([]),[F,oe]=$.useState(null),te=$.useRef(null),ee=$.useRef(null),[Te,Ve]=$.useState({}),ge=$.useRef(_),_e=$.useRef(p),Xe=$.useRef(x),Ue=$.useRef(E),At=$.useRef(null),yt=$.useRef(!1),C=$.useRef(void 0);$.useEffect(()=>{ge.current=_},[_]),$.useEffect(()=>{_e.current=p},[p]),$.useEffect(()=>{Xe.current=x},[x]),$.useEffect(()=>{Ue.current=E},[E]),$.useEffect(()=>{if(!v&&yt.current){yt.current=!1;const ne=Ue.current?"FAILED":"COMPLETED";if(C.current){const he={id:`${Date.now()}`,timestamp:Date.now(),...C.current,finalAnswer:ge.current,agents:_e.current,status:ne,arbiterSwitchWarning:Xe.current};D(we=>[he,...we]),C.current=void 0}}},[v]),$.useEffect(()=>{const ne=localStorage.getItem(Qv);ne&&(z(ne),Gv(ne));const he=localStorage.getItem(jv);he&&(G(he),zv(he));const we=localStorage.getItem(e0);we&&(q(we),Hv(we))},[]);const W=$.useCallback(ne=>{z(ne),Gv(ne),localStorage.setItem(Qv,ne)},[]),O=$.useCallback(ne=>{G(ne),zv(ne),localStorage.setItem(jv,ne)},[]),R=$.useCallback(ne=>{q(ne),Hv(ne),localStorage.setItem(e0,ne)},[]),P=$.useMemo(()=>i.filter(ne=>ne.provider==="openai").length,[i]),L=$.useMemo(()=>i.filter(ne=>ne.provider==="openrouter").length,[i]),K=$.useCallback(async()=>{b&&H(null);const ne=t.trim()||(n.length>0?`Analyze these ${n.length} image(s) and provide a detailed description.`:"");if(!(!ne||v||i.length===0)){if(ne&&!X.includes(ne)&&V(he=>[ne,...he].slice(0,bU)),P>0&&!M){A("Please set your OpenAI API key in the settings to use OpenAI models."),B(!0);return}if(L>0&&!ae){A("Please set your OpenRouter API key in the settings to use OpenRouter models."),B(!0);return}w(!0),A(null),g(""),k(!1),m([]),y(null),yt.current=!1,C.current={prompt:ne,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d};try{const he=lt=>{const ut=lt.map(ct=>({id:ct.agentId,name:ct.name,persona:ct.persona,status:"RUNNING",content:"",error:null,model:ct.model,provider:ct.provider}));m(ut),o(ct=>ct.map(Zn=>({...Zn,status:"RUNNING"})))},we=lt=>{m(ut=>{const ct=ut.findIndex(Zn=>Zn.id===lt.agentId);if(ct>-1){const Zn=FU(lt);return ut.map((uS,cS)=>cS===ct?Zn:uS)}return ut}),o(ut=>ut.map(ct=>ct.id===lt.agentId?{...ct,status:lt.status}:ct))},{stream:Ie,switchedArbiter:me}=await aU({prompt:ne,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d},{onInitialAgents:he,onDraftComplete:we});me&&y("The selected GPT-5 arbiter was automatically switched to Gemini 2.5 Pro due to a large input size to prevent errors. Gemini models support larger context windows."),k(!0);let Ee="",xe="";const Me=()=>{xe&&(Ee+=xe,g(Ee),xe=""),At.current=requestAnimationFrame(Me)};At.current=requestAnimationFrame(Me);for await(const lt of Ie)xe+=lt.text;At.current&&cancelAnimationFrame(At.current),xe&&(Ee+=xe,g(Ee))}catch(he){console.error(he);const we=he instanceof Error?he.message:"An unexpected error occurred.";A(we),m(Ie=>Ie.map(me=>({...me,status:"FAILED",error:we}))),o(Ie=>Ie.map(me=>({...me,status:"FAILED"})))}finally{w(!1),k(!1),yt.current=!0}}},[t,n,v,i,s,c,d,P,M,L,ae,X,b]),Y=$.useCallback(()=>{e(""),r([]),o(n0()),a(on),f("medium"),h("dynamic"),m([]),g(""),w(!1),A(null),k(!1),y(null)},[]),U=$.useCallback(()=>{H(null),Y()},[Y]),Q=$.useCallback(ne=>{N.find(we=>we.id===ne)&&H(ne)},[N]),re=$.useCallback(ne=>{o(he=>{const we=he.find(xe=>xe.id===ne);if(!we)return he;const Ie={...we,id:crypto.randomUUID(),status:"PENDING"},me=he.findIndex(xe=>xe.id===ne),Ee=[...he];return Ee.splice(me+1,0,Ie),Ee})},[]),j=$.useRef(K),ue=$.useRef(!1);$.useEffect(()=>{j.current=K},[K]),$.useEffect(()=>{const ne=he=>{if(he.isComposing||he.repeat)return;const we=he.target,Ie=we.tagName,me=Ie==="INPUT"||Ie==="TEXTAREA"||we.isContentEditable,Ee=he.key.toLowerCase(),xe=!(he.metaKey||he.ctrlKey||he.altKey);if((he.metaKey||he.ctrlKey)&&Ee==="enter"){he.preventDefault(),j.current();return}if(xe&&!me&&!ue.current)switch(Ee){case"a":he.preventDefault(),ee.current?.openModal();break;case"/":he.preventDefault(),te.current?.focus();break;default:if(Ee>="1"&&Ee<="9"){const lt=parseInt(Ee,10)-1,ut=_e.current[lt];if(!ut||!(ut.status==="COMPLETED"||ut.status==="FAILED"))return;Ve(Zn=>({...Zn,[ut.id]:!Zn[ut.id]}))}}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[]);const Pe=$.useMemo(()=>{if(!v)return{total:0,agentPercent:0,phase:"idle"};const ne=.5,he=.5,we=i.filter(Me=>Me.status==="COMPLETED"||Me.status==="FAILED").length,Ie=i.length>0?we/i.length:0;let me=I?.5:0;!v&&_&&(me=1);const Ee=(Ie*ne+me*he)*100,xe=I?"arbitrating":"drafting";return{total:Math.min(Ee,100),agentPercent:Ie*100,phase:xe}},[i,v,I,_]),ve=ne=>ne.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").slice(0,50)||"orchestration-results",Be=$.useMemo(()=>N.find(ne=>ne.id===b),[N,b]),Se=$.useMemo(()=>Be?{prompt:Be.prompt,images:Be.images,agentConfigs:Be.agentConfigs,arbiterModel:Be.arbiterModel,openAIArbiterVerbosity:Be.openAIArbiterVerbosity,geminiArbiterEffort:Be.geminiArbiterEffort,finalAnswer:Be.finalAnswer,agents:Be.agents,arbiterSwitchWarning:Be.arbiterSwitchWarning,isHistoryView:!0}:{prompt:t,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d,finalAnswer:_,agents:p,arbiterSwitchWarning:x,isHistoryView:!1},[Be,t,n,i,s,c,d,_,p,x]);$.useEffect(()=>{ue.current=Se.isHistoryView,_e.current=Se.agents},[Se]);const Yt=async()=>{const ne=Se,he=ne.agents.filter(Me=>Me.status==="COMPLETED");if(!ne.finalAnswer&&he.length===0&&ne.images.length===0)return;const we=new U1,Ie=ve(ne.prompt);if(ne.finalAnswer){const Me=`# Prompt

${ne.prompt}

---

# Arbiter's Final Answer

${ne.finalAnswer}`;we.file(`${Ie}-final-answer.md`,Me)}he.forEach((Me,lt)=>{const ut=`# Prompt

${ne.prompt}

---

# Agent ${lt+1} (${Me.provider}, ${Me.name})

${Me.content}`,ct=`${Ie}-agent-${lt+1}-${Me.name.toLowerCase().replace(/\s+/g,"-")}.md`;we.file(ct,ut)}),ne.images.length>0&&ne.images.forEach(Me=>{we.file(Me.file.name,Me.file)});const me=await we.generateAsync({type:"blob"}),Ee=URL.createObjectURL(me),xe=document.createElement("a");xe.href=Ee,xe.download=`${Ie}.zip`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(Ee)},Ir=$.useCallback(()=>{try{const ne=i.map(Me=>({expertId:Me.expert.id,model:Me.model,provider:Me.provider,settings:Me.settings})),we=JSON.stringify({version:Qg,prompt:t,agentConfigs:ne,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d,openAIApiKey:M,geminiApiKey:S,openRouterApiKey:ae,queryHistory:X},null,2),Ie=new Blob([we],{type:"application/json"}),me=URL.createObjectURL(Ie),Ee=document.createElement("a");Ee.href=me;const xe=new Date().toISOString().split("T")[0];Ee.download=`orchestrator-session-${xe}.json`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(me)}catch(ne){console.error("Failed to save session:",ne),oe({message:"An error occurred while trying to save the session.",type:"error"})}},[t,i,s,c,d,M,S,ae,X]),$e=$.useCallback(ne=>{const he=new FileReader;he.onload=we=>{try{const Ie=we.target?.result;if(!Ie)throw new Error("File is empty or could not be read.");const me=JSON.parse(Ie);if(me.version!==Qg){oe({message:`This session file is from a different version (v${me.version}) and cannot be loaded.`,type:"error"});return}if(!Array.isArray(me.agentConfigs))throw new Error("Invalid session file format: agentConfigs is missing or not an array.");const Ee=me.agentConfigs.map(xe=>{const Me=Nh.find(ut=>ut.id===xe.expertId);if(!Me)return console.warn(`Expert with ID "${xe.expertId}" not found. Skipping.`),null;const lt={id:crypto.randomUUID(),expert:Me,model:xe.model,provider:xe.provider,status:"PENDING"};return xe.provider==="gemini"?{...lt,provider:"gemini",settings:xe.settings}:xe.provider==="openrouter"?{...lt,provider:"openrouter",settings:xe.settings}:{...lt,provider:"openai",settings:xe.settings}}).filter(xe=>xe!==null);U(),e(me.prompt??""),o(Ee),a(me.arbiterModel??on),f(me.openAIArbiterVerbosity??"medium"),h(me.geminiArbiterEffort??"dynamic"),W(me.openAIApiKey??""),O(me.geminiApiKey??""),R(me.openRouterApiKey??""),V(me.queryHistory??[]),B(!1),oe({message:"Session loaded successfully!",type:"success"})}catch(Ie){console.error("Failed to load session:",Ie);const me=Ie instanceof Error?Ie.message:"An unknown error occurred.";oe({message:`Error loading session file: ${me}`,type:"error"})}},he.onerror=()=>{oe({message:"Failed to read the session file.",type:"error"})},he.readAsText(ne)},[W,O,R,U]),ri=$.useCallback(ne=>{e(ne)},[]),Xn=Se.agents.length>0||Se.finalAnswer,Mt=v||I,$s=$.useMemo(()=>Mt?"IN_PROGRESS":b?"IDLE":E?"FAILED":Xn?"COMPLETED":"IDLE",[Mt,E,Xn,b]);return T.jsxs("div",{className:"min-h-screen bg-[var(--bg)] text-[var(--text)] font-sans flex h-screen",children:[T.jsx(DU,{history:N,selectedRunId:b,onSelectRun:Q,onNewRun:U,currentRunStatus:$s}),T.jsxs("div",{className:"flex-1 flex flex-col h-screen",children:[F&&T.jsx(LU,{message:F.message,type:F.type,onClose:()=>oe(null)}),T.jsx(SU,{isOpen:J,onClose:()=>B(!1),onSaveOpenAIApiKey:W,currentOpenAIApiKey:M,onSaveGeminiApiKey:O,currentGeminiApiKey:S,onSaveOpenRouterApiKey:R,currentOpenRouterApiKey:ae,onSaveSession:Ir,onLoadSession:$e,queryHistory:X,onSelectQuery:ri}),T.jsx("div",{className:"flex-1 overflow-y-auto",children:T.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[T.jsxs("header",{className:"text-center py-8 relative",children:[T.jsx("img",{src:"/HeavyOrc/assets/banner.svg",alt:"HeavyOrc banner",className:"mx-auto mb-4 w-full max-w-2xl"}),T.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-[var(--text)] flex items-center justify-center gap-3",children:[T.jsx(lU,{className:"w-10 h-10 text-emerald-400","aria-hidden":"true"}),"HeavyOrc"]}),T.jsxs("div",{className:"absolute top-8 right-0 flex items-center gap-2",children:[T.jsxs("button",{onClick:Yt,disabled:!Xn||v,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] disabled:bg-[var(--surface-2)] disabled:text-[var(--text-muted)] disabled:cursor-not-allowed transition-colors",title:"Save final answer and all drafts to a ZIP file",children:[T.jsx(nS,{className:"w-4 h-4","aria-hidden":"true"}),"Save"]}),T.jsx("button",{onClick:()=>B(!0),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors rounded-full hover:bg-[var(--surface-active)]",title:"Settings","aria-label":"Open Settings",children:T.jsx(fU,{className:"w-6 h-6","aria-hidden":"true"})})]}),T.jsx("p",{className:"mt-4 text-lg text-[var(--text-muted)] max-w-3xl mx-auto",children:"Directly configure a 'Mixture-of-Experts' ensemble. Parallel agents generate diverse drafts, and a final arbiter synthesizes the optimal response."})]}),T.jsxs("main",{className:"max-w-4xl mx-auto space-y-8 pb-40",children:[E&&!Se.isHistoryView&&T.jsx("div",{className:"p-3 bg-[var(--danger)] bg-opacity-20 text-[var(--danger)] border border-[var(--danger)] rounded-lg text-sm text-center",children:E}),P>0&&!M||L>0&&!ae&&T.jsxs("p",{className:"text-xs text-[var(--warn)] text-center p-2 bg-[var(--warn)] bg-opacity-20 rounded-md border border-[var(--warn)]",children:["An API key is required for one or more of your agents.",T.jsx("button",{onClick:()=>B(!0),className:"ml-1 underline font-semibold hover:text-[var(--warn)] focus:outline-none focus:ring-2 focus:ring-[var(--warn)] rounded",children:"Set API Key"})]}),(Xn||Mt&&!Se.isHistoryView)&&T.jsxs(oi.div,{className:"space-y-8",initial:"hidden",animate:"visible",variants:t0,children:[Se.arbiterSwitchWarning&&T.jsx(oi.div,{className:"bg-[var(--warn)] bg-opacity-20 border border-[var(--warn)] text-[var(--warn)] px-4 py-3 rounded-lg relative",role:"alert",variants:Ca,children:T.jsxs("div",{className:"flex items-start",children:[T.jsx(dU,{className:"w-5 h-5 mr-3 mt-0.5 text-[var(--warn)] flex-shrink-0","aria-hidden":"true"}),T.jsxs("div",{children:[T.jsx("strong",{className:"font-bold",children:"Automatic Model Switch:"}),T.jsx("span",{className:"block sm:inline sm:ml-2",children:Se.arbiterSwitchWarning})]})]})}),(Se.finalAnswer||Mt&&!Se.isHistoryView)&&T.jsx(oi.section,{variants:Ca,children:T.jsx(MU,{answer:Se.finalAnswer,isStreaming:I&&!Se.isHistoryView})}),Se.agents.length>0&&T.jsx(oi.section,{variants:Ca,children:T.jsx(Yv,{title:"Contributing Agent Drafts",defaultOpen:!1,children:T.jsx(oi.div,{className:"grid-adaptive-cols gap-4 pt-4",variants:t0,children:Se.agents.map((ne,he)=>T.jsx(oi.div,{variants:Ca,children:T.jsx(wU,{agent:ne,displayId:he+1,isCollapsed:Te[ne.id]||!1,onToggleCollapse:()=>Ve(we=>({...we,[ne.id]:!we[ne.id]}))})},ne.id))})})})]}),T.jsxs("div",{className:"space-y-6 bg-[var(--surface-2)] p-6 rounded-xl shadow-2xl border border-[var(--line)]",children:[T.jsx(aS,{ref:ee,agentConfigs:Se.agentConfigs,setAgentConfigs:o,onDuplicateAgent:re,disabled:v||Se.isHistoryView}),T.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:T.jsx(Yv,{title:"Arbiter Settings",defaultOpen:!0,children:T.jsx("div",{className:"space-y-4",children:T.jsx(UU,{arbiterModel:Se.arbiterModel,setArbiterModel:a,openAIArbiterVerbosity:Se.openAIArbiterVerbosity,setOpenAIArbiterVerbosity:f,geminiArbiterEffort:Se.geminiArbiterEffort,setGeminiArbiterEffort:h,isLoading:v||Se.isHistoryView})})})})]})]})]})}),T.jsx("footer",{className:"sticky bottom-0 z-10 bg-[var(--surface-1)] bg-opacity-80 backdrop-blur-lg border-t border-[var(--line)] flex-shrink-0",children:T.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-3 space-y-3",children:[v&&T.jsxs("div",{children:[T.jsx("div",{className:"w-full bg-[var(--surface-2)] rounded-full h-2.5",children:T.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${Pe.total}%`}})}),T.jsx("p",{className:"text-center text-xs text-[var(--text-muted)] mt-1",children:Pe.phase==="arbitrating"?"Arbiter is synthesizing...":`Agents drafting... (${Math.round(Pe.agentPercent)}%)`})]}),T.jsx(RU,{prompt:Se.prompt,onPromptChange:e,images:Se.images,onImagesChange:r,onSubmit:K,isLoading:v,disabled:v||Se.isHistoryView||i.length===0,inputRef:te})]})})]})]})},UU=({arbiterModel:t,setArbiterModel:e,openAIArbiterVerbosity:n,setOpenAIArbiterVerbosity:r,geminiArbiterEffort:i,setGeminiArbiterEffort:o,isLoading:s})=>{const a=[{label:"Gemini 2.5 Flash",value:Nn,provider:"gemini",tooltip:"Google's fast and cost-effective model for general arbitration."},{label:"Gemini 2.5 Pro",value:on,provider:"gemini",tooltip:"Google's most capable model, with a large context window and strong reasoning. Recommended for complex synthesis."},{label:"GPT-5 Mini",value:Rh,provider:"openai",tooltip:"OpenAI's lightweight GPT-5 model for quick arbitration with lower latency."},{label:"GPT-5 (Med)",value:Yx,provider:"openai",tooltip:"OpenAI's powerful GPT-5 model with standard reasoning. A strong, balanced choice for arbitration."},{label:"GPT-5 (High)",value:Pf,provider:"openai",tooltip:"GPT-5 with enhanced, step-by-step reasoning. May produce higher quality synthesis for nuanced topics at a higher latency."},{label:"OR Claude Haiku",value:Kx,provider:"openrouter",tooltip:"Anthropic's fastest model via OpenRouter. Ideal for quick, responsive arbitration."}],c=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],f=[{label:"Dynamic",value:"dynamic"},{label:"High",value:"high"},{label:"Medium",value:"medium"},{label:"Low",value:"low"},{label:"None",value:"none"}],d=a.find(p=>p.value===t),h=d?.value===Nn?f:f.filter(p=>p.value!=="none");return T.jsxs(T.Fragment,{children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Arbiter Model"}),T.jsx(mc,{"aria-label":"Arbiter Model",options:a,value:t,onChange:e,disabled:s})]}),d?.provider==="openai"?T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Arbiter Verbosity"}),T.jsx(mc,{"aria-label":"Arbiter Verbosity",options:c,value:n,onChange:r,disabled:s})]}):d?.provider==="gemini"?T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Thinking Effort"}),T.jsx(mc,{"aria-label":"Arbiter Thinking Effort",options:h,value:i,onChange:o,disabled:s})]}):null]})},lS=document.getElementById("root");if(!lS)throw new Error("Could not find root element to mount to");const BU=yc.createRoot(lS);BU.render(T.jsx(gc.StrictMode,{children:T.jsx(VU,{})}));
