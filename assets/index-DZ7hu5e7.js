(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Md(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function O0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var $0={exports:{}},eu={},z0={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),iE=Symbol.for("react.portal"),oE=Symbol.for("react.fragment"),sE=Symbol.for("react.strict_mode"),aE=Symbol.for("react.profiler"),lE=Symbol.for("react.provider"),uE=Symbol.for("react.context"),cE=Symbol.for("react.forward_ref"),fE=Symbol.for("react.suspense"),dE=Symbol.for("react.memo"),hE=Symbol.for("react.lazy"),sm=Symbol.iterator;function pE(t){return t===null||typeof t!="object"?null:(t=sm&&t[sm]||t["@@iterator"],typeof t=="function"?t:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H0=Object.assign,W0={};function ao(t,e,n){this.props=t,this.context=e,this.refs=W0,this.updater=n||G0}ao.prototype.isReactComponent={};ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q0(){}q0.prototype=ao.prototype;function bd(t,e,n){this.props=t,this.context=e,this.refs=W0,this.updater=n||G0}var Nd=bd.prototype=new q0;Nd.constructor=bd;H0(Nd,ao.prototype);Nd.isPureReactComponent=!0;var am=Array.isArray,J0=Object.prototype.hasOwnProperty,Dd={current:null},K0={key:!0,ref:!0,__self:!0,__source:!0};function Y0(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)J0.call(e,r)&&!K0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ds,type:t,key:o,ref:s,props:i,_owner:Dd.current}}function mE(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function gE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lm=/\/+/g;function Bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gE(""+t.key):e.toString(36)}function Ua(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ds:case iE:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Bu(s,0):r,am(i)?(n="",t!=null&&(n=t.replace(lm,"$&/")+"/"),Ua(i,e,n,"",function(f){return f})):i!=null&&(Fd(i)&&(i=mE(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(lm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",am(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+Bu(o,a);s+=Ua(o,e,n,c,i)}else if(c=pE(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+Bu(o,a++),s+=Ua(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ra(t,e,n){if(t==null)return t;var r=[],i=0;return Ua(t,r,"","",function(o){return e.call(n,o,i++)}),r}function yE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Ba={transition:null},vE={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Ba,ReactCurrentOwner:Dd};function X0(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:ra,forEach:function(t,e,n){ra(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ra(t,function(){e++}),e},toArray:function(t){return ra(t,function(e){return e})||[]},only:function(t){if(!Fd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=ao;ye.Fragment=oE;ye.Profiler=aE;ye.PureComponent=bd;ye.StrictMode=sE;ye.Suspense=fE;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vE;ye.act=X0;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H0({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Dd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)J0.call(e,c)&&!K0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:Ds,type:t.type,key:i,ref:o,props:r,_owner:s}};ye.createContext=function(t){return t={$$typeof:uE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lE,_context:t},t.Consumer=t};ye.createElement=Y0;ye.createFactory=function(t){var e=Y0.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:cE,render:t}};ye.isValidElement=Fd;ye.lazy=function(t){return{$$typeof:hE,_payload:{_status:-1,_result:t},_init:yE}};ye.memo=function(t,e){return{$$typeof:dE,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Ba.transition;Ba.transition={};try{t()}finally{Ba.transition=e}};ye.unstable_act=X0;ye.useCallback=function(t,e){return Pt.current.useCallback(t,e)};ye.useContext=function(t){return Pt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Pt.current.useEffect(t,e)};ye.useId=function(){return Pt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Pt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};ye.useRef=function(t){return Pt.current.useRef(t)};ye.useState=function(t){return Pt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Pt.current.useTransition()};ye.version="18.3.1";z0.exports=ye;var z=z0.exports;const Oc=Md(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE=z,_E=Symbol.for("react.element"),CE=Symbol.for("react.fragment"),xE=Object.prototype.hasOwnProperty,TE=wE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SE={key:!0,ref:!0,__self:!0,__source:!0};function Z0(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)xE.call(e,r)&&!SE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_E,type:t,key:o,ref:s,props:i,_owner:TE.current}}eu.Fragment=CE;eu.jsx=Z0;eu.jsxs=Z0;$0.exports=eu;var S=$0.exports,$c={},Q0={exports:{}},Kt={},j0={exports:{}},ew={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,B){var K=H.length;H.push(B);e:for(;0<K;){var V=K-1>>>1,O=H[V];if(0<i(O,B))H[V]=B,H[K]=O,K=V;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var B=H[0],K=H.pop();if(K!==B){H[0]=K;e:for(var V=0,O=H.length,oe=O>>>1;V<oe;){var ne=2*(V+1)-1,j=H[ne],ve=ne+1,Pe=H[ve];if(0>i(j,K))ve<O&&0>i(Pe,j)?(H[V]=Pe,H[ve]=K,V=ve):(H[V]=j,H[ne]=K,V=ne);else if(ve<O&&0>i(Pe,K))H[V]=Pe,H[ve]=K,V=ve;else break e}}return B}function i(H,B){var K=H.sortIndex-B.sortIndex;return K!==0?K:H.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],f=[],d=1,h=null,p=3,m=!1,w=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var B=n(f);B!==null;){if(B.callback===null)r(f);else if(B.startTime<=H)r(f),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(f)}}function E(H){if(g=!1,_(H),!w)if(n(c)!==null)w=!0,Q(A);else{var B=n(f);B!==null&&G(E,B.startTime-H)}}function A(H,B){w=!1,g&&(g=!1,y(N),N=-1),m=!0;var K=p;try{for(_(B),h=n(c);h!==null&&(!(h.expirationTime>B)||H&&!q());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var O=V(h.expirationTime<=B);B=t.unstable_now(),typeof O=="function"?h.callback=O:h===n(c)&&r(c),_(B)}else r(c);h=n(c)}if(h!==null)var oe=!0;else{var ne=n(f);ne!==null&&G(E,ne.startTime-B),oe=!1}return oe}finally{h=null,p=K,m=!1}}var k=!1,R=null,N=-1,D=5,F=-1;function q(){return!(t.unstable_now()-F<D)}function I(){if(R!==null){var H=t.unstable_now();F=H;var B=!0;try{B=R(!0,H)}finally{B?b():(k=!1,R=null)}}else k=!1}var b;if(typeof v=="function")b=function(){v(I)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,U=x.port2;x.port1.onmessage=I,b=function(){U.postMessage(null)}}else b=function(){C(I,0)};function Q(H){R=H,k||(k=!0,b())}function G(H,B){N=C(function(){H(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,Q(A))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var K=p;p=B;try{return H()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,B){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return B()}finally{p=K}},t.unstable_scheduleCallback=function(H,B,K){var V=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?V+K:V):K=V,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=K+O,H={id:d++,callback:B,priorityLevel:H,startTime:K,expirationTime:O,sortIndex:-1},K>V?(H.sortIndex=K,e(f,H),n(c)===null&&H===n(f)&&(g?(y(N),N=-1):g=!0,G(E,K-V))):(H.sortIndex=O,e(c,H),w||m||(w=!0,Q(A))),H},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(H){var B=p;return function(){var K=p;p=B;try{return H.apply(this,arguments)}finally{p=K}}}})(ew);j0.exports=ew;var EE=j0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE=z,qt=EE;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tw=new Set,cs={};function ii(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(cs[t]=e,t=0;t<e.length;t++)tw.add(e[t])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=Object.prototype.hasOwnProperty,PE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,um={},cm={};function IE(t){return zc.call(cm,t)?!0:zc.call(um,t)?!1:PE.test(t)?cm[t]=!0:(um[t]=!0,!1)}function kE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RE(t,e,n,r){if(e===null||typeof e>"u"||kE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ld=/[\-:]([a-z])/g;function Vd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ld,Vd);pt[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ld,Vd);pt[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ld,Vd);pt[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ud(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RE(e,n,i,r)&&(n=null),r||i===null?IE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kn=AE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ia=Symbol.for("react.element"),_i=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),Bd=Symbol.for("react.strict_mode"),Gc=Symbol.for("react.profiler"),nw=Symbol.for("react.provider"),rw=Symbol.for("react.context"),Od=Symbol.for("react.forward_ref"),Hc=Symbol.for("react.suspense"),Wc=Symbol.for("react.suspense_list"),$d=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),iw=Symbol.for("react.offscreen"),fm=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=fm&&t[fm]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,Ou;function Mo(t){if(Ou===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ou=e&&e[1]||""}return`
`+Ou+t}var $u=!1;function zu(t,e){if(!t||$u)return"";$u=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{$u=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function ME(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=zu(t.type,!1),t;case 11:return t=zu(t.type.render,!1),t;case 1:return t=zu(t.type,!0),t;default:return""}}function qc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ci:return"Fragment";case _i:return"Portal";case Gc:return"Profiler";case Bd:return"StrictMode";case Hc:return"Suspense";case Wc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rw:return(t.displayName||"Context")+".Consumer";case nw:return(t._context.displayName||"Context")+".Provider";case Od:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $d:return e=t.displayName||null,e!==null?e:qc(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return qc(t(e))}catch{}}return null}function bE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qc(e);case 8:return e===Bd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ow(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NE(t){var e=ow(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oa(t){t._valueTracker||(t._valueTracker=NE(t))}function sw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ow(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ul(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jc(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aw(t,e){e=e.checked,e!=null&&Ud(t,"checked",e,!1)}function Kc(t,e){aw(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yc(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yc(t,e,n){(e!=="number"||ul(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function Bi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(bo(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function lw(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sa,cw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DE=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){DE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function fw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function dw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var FE=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qc(t,e){if(e){if(FE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function jc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function zd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tf=null,Oi=null,$i=null;function gm(t){if(t=Vs(t)){if(typeof tf!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=ou(e),tf(t.stateNode,t.type,e))}}function hw(t){Oi?$i?$i.push(t):$i=[t]:Oi=t}function pw(){if(Oi){var t=Oi,e=$i;if($i=Oi=null,gm(t),e)for(t=0;t<e.length;t++)gm(e[t])}}function mw(t,e){return t(e)}function gw(){}var Gu=!1;function yw(t,e,n){if(Gu)return t(e,n);Gu=!0;try{return mw(t,e,n)}finally{Gu=!1,(Oi!==null||$i!==null)&&(gw(),pw())}}function ds(t,e){var n=t.stateNode;if(n===null)return null;var r=ou(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var nf=!1;if(Gn)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){nf=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{nf=!1}function LE(t,e,n,r,i,o,s,a,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var Ko=!1,cl=null,fl=!1,rf=null,VE={onError:function(t){Ko=!0,cl=t}};function UE(t,e,n,r,i,o,s,a,c){Ko=!1,cl=null,LE.apply(VE,arguments)}function BE(t,e,n,r,i,o,s,a,c){if(UE.apply(this,arguments),Ko){if(Ko){var f=cl;Ko=!1,cl=null}else throw Error(Z(198));fl||(fl=!0,rf=f)}}function oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ym(t){if(oi(t)!==t)throw Error(Z(188))}function OE(t){var e=t.alternate;if(!e){if(e=oi(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ym(i),t;if(o===r)return ym(i),e;o=o.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function ww(t){return t=OE(t),t!==null?_w(t):null}function _w(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_w(t);if(e!==null)return e;t=t.sibling}return null}var Cw=qt.unstable_scheduleCallback,vm=qt.unstable_cancelCallback,$E=qt.unstable_shouldYield,zE=qt.unstable_requestPaint,Ze=qt.unstable_now,GE=qt.unstable_getCurrentPriorityLevel,Gd=qt.unstable_ImmediatePriority,xw=qt.unstable_UserBlockingPriority,dl=qt.unstable_NormalPriority,HE=qt.unstable_LowPriority,Tw=qt.unstable_IdlePriority,tu=null,kn=null;function WE(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(tu,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:KE,qE=Math.log,JE=Math.LN2;function KE(t){return t>>>=0,t===0?32:31-(qE(t)/JE|0)|0}var aa=64,la=4194304;function No(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=No(a):(o&=s,o!==0&&(r=No(o)))}else s=n&~i,s!==0?r=No(s):o!==0&&(r=No(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wn(e),i=1<<n,r|=t[n],e&=~i;return r}function YE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-wn(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=YE(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function of(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sw(){var t=aa;return aa<<=1,!(aa&4194240)&&(aa=64),t}function Hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function ZE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Hd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function Ew(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Aw,Wd,Pw,Iw,kw,sf=!1,ua=[],cr=null,fr=null,dr=null,hs=new Map,ps=new Map,or=[],QE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wm(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":hs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(e.pointerId)}}function xo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Vs(e),e!==null&&Wd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jE(t,e,n,r,i){switch(e){case"focusin":return cr=xo(cr,t,e,n,r,i),!0;case"dragenter":return fr=xo(fr,t,e,n,r,i),!0;case"mouseover":return dr=xo(dr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return hs.set(o,xo(hs.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ps.set(o,xo(ps.get(o)||null,t,e,n,r,i)),!0}return!1}function Rw(t){var e=zr(t.target);if(e!==null){var n=oi(e);if(n!==null){if(e=n.tag,e===13){if(e=vw(n),e!==null){t.blockedOn=e,kw(t.priority,function(){Pw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=af(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ef=r,n.target.dispatchEvent(r),ef=null}else return e=Vs(n),e!==null&&Wd(e),t.blockedOn=n,!1;e.shift()}return!0}function _m(t,e,n){Oa(t)&&n.delete(e)}function e1(){sf=!1,cr!==null&&Oa(cr)&&(cr=null),fr!==null&&Oa(fr)&&(fr=null),dr!==null&&Oa(dr)&&(dr=null),hs.forEach(_m),ps.forEach(_m)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,sf||(sf=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,e1)))}function ms(t){function e(i){return To(i,t)}if(0<ua.length){To(ua[0],t);for(var n=1;n<ua.length;n++){var r=ua[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&To(cr,t),fr!==null&&To(fr,t),dr!==null&&To(dr,t),hs.forEach(e),ps.forEach(e),n=0;n<or.length;n++)r=or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)Rw(n),n.blockedOn===null&&or.shift()}var zi=Kn.ReactCurrentBatchConfig,pl=!0;function t1(t,e,n,r){var i=Ae,o=zi.transition;zi.transition=null;try{Ae=1,qd(t,e,n,r)}finally{Ae=i,zi.transition=o}}function n1(t,e,n,r){var i=Ae,o=zi.transition;zi.transition=null;try{Ae=4,qd(t,e,n,r)}finally{Ae=i,zi.transition=o}}function qd(t,e,n,r){if(pl){var i=af(t,e,n,r);if(i===null)ec(t,e,r,ml,n),wm(t,r);else if(jE(i,t,e,n,r))r.stopPropagation();else if(wm(t,r),e&4&&-1<QE.indexOf(t)){for(;i!==null;){var o=Vs(i);if(o!==null&&Aw(o),o=af(t,e,n,r),o===null&&ec(t,e,r,ml,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ec(t,e,r,null,n)}}var ml=null;function af(t,e,n,r){if(ml=null,t=zd(r),t=zr(t),t!==null)if(e=oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ml=t,null}function Mw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GE()){case Gd:return 1;case xw:return 4;case dl:case HE:return 16;case Tw:return 536870912;default:return 16}default:return 16}}var lr=null,Jd=null,$a=null;function bw(){if($a)return $a;var t,e=Jd,n=e.length,r,i="value"in lr?lr.value:lr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return $a=i.slice(t,1<r?1-r:void 0)}function za(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ca(){return!0}function Cm(){return!1}function Yt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ca:Cm,this.isPropagationStopped=Cm,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),e}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kd=Yt(lo),Ls=We({},lo,{view:0,detail:0}),r1=Yt(Ls),Wu,qu,So,nu=We({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==So&&(So&&t.type==="mousemove"?(Wu=t.screenX-So.screenX,qu=t.screenY-So.screenY):qu=Wu=0,So=t),Wu)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),xm=Yt(nu),i1=We({},nu,{dataTransfer:0}),o1=Yt(i1),s1=We({},Ls,{relatedTarget:0}),Ju=Yt(s1),a1=We({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),l1=Yt(a1),u1=We({},lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),c1=Yt(u1),f1=We({},lo,{data:0}),Tm=Yt(f1),d1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p1[t])?!!e[t]:!1}function Yd(){return m1}var g1=We({},Ls,{key:function(t){if(t.key){var e=d1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=za(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?h1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(t){return t.type==="keypress"?za(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?za(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),y1=Yt(g1),v1=We({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=Yt(v1),w1=We({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),_1=Yt(w1),C1=We({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),x1=Yt(C1),T1=We({},nu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S1=Yt(T1),E1=[9,13,27,32],Xd=Gn&&"CompositionEvent"in window,Yo=null;Gn&&"documentMode"in document&&(Yo=document.documentMode);var A1=Gn&&"TextEvent"in window&&!Yo,Nw=Gn&&(!Xd||Yo&&8<Yo&&11>=Yo),Em=" ",Am=!1;function Dw(t,e){switch(t){case"keyup":return E1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xi=!1;function P1(t,e){switch(t){case"compositionend":return Fw(e);case"keypress":return e.which!==32?null:(Am=!0,Em);case"textInput":return t=e.data,t===Em&&Am?null:t;default:return null}}function I1(t,e){if(xi)return t==="compositionend"||!Xd&&Dw(t,e)?(t=bw(),$a=Jd=lr=null,xi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nw&&e.locale!=="ko"?null:e.data;default:return null}}var k1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k1[t.type]:e==="textarea"}function Lw(t,e,n,r){hw(r),e=gl(e,"onChange"),0<e.length&&(n=new Kd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,gs=null;function R1(t){Jw(t,0)}function ru(t){var e=Ei(t);if(sw(e))return t}function M1(t,e){if(t==="change")return e}var Vw=!1;if(Gn){var Ku;if(Gn){var Yu="oninput"in document;if(!Yu){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),Yu=typeof Im.oninput=="function"}Ku=Yu}else Ku=!1;Vw=Ku&&(!document.documentMode||9<document.documentMode)}function km(){Xo&&(Xo.detachEvent("onpropertychange",Uw),gs=Xo=null)}function Uw(t){if(t.propertyName==="value"&&ru(gs)){var e=[];Lw(e,gs,t,zd(t)),yw(R1,e)}}function b1(t,e,n){t==="focusin"?(km(),Xo=e,gs=n,Xo.attachEvent("onpropertychange",Uw)):t==="focusout"&&km()}function N1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ru(gs)}function D1(t,e){if(t==="click")return ru(e)}function F1(t,e){if(t==="input"||t==="change")return ru(e)}function L1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:L1;function ys(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zc.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function Rm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mm(t,e){var n=Rm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rm(n)}}function Bw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ow(){for(var t=window,e=ul();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ul(t.document)}return e}function Zd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function V1(t){var e=Ow(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bw(n.ownerDocument.documentElement,n)){if(r!==null&&Zd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Mm(n,o);var s=Mm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var U1=Gn&&"documentMode"in document&&11>=document.documentMode,Ti=null,lf=null,Zo=null,uf=!1;function bm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uf||Ti==null||Ti!==ul(r)||(r=Ti,"selectionStart"in r&&Zd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&ys(Zo,r)||(Zo=r,r=gl(lf,"onSelect"),0<r.length&&(e=new Kd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Si={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},Xu={},$w={};Gn&&($w=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function iu(t){if(Xu[t])return Xu[t];if(!Si[t])return t;var e=Si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $w)return Xu[t]=e[n];return t}var zw=iu("animationend"),Gw=iu("animationiteration"),Hw=iu("animationstart"),Ww=iu("transitionend"),qw=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,e){qw.set(t,e),ii(e,[t])}for(var Zu=0;Zu<Nm.length;Zu++){var Qu=Nm[Zu],B1=Qu.toLowerCase(),O1=Qu[0].toUpperCase()+Qu.slice(1);Tr(B1,"on"+O1)}Tr(zw,"onAnimationEnd");Tr(Gw,"onAnimationIteration");Tr(Hw,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(Ww,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BE(r,e,void 0,t),t.currentTarget=null}function Jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Dm(i,a,f),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,f=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Dm(i,a,f),o=c}}}if(fl)throw t=rf,fl=!1,rf=null,t}function De(t,e){var n=e[pf];n===void 0&&(n=e[pf]=new Set);var r=t+"__bubble";n.has(r)||(Kw(e,t,2,!1),n.add(r))}function ju(t,e,n){var r=0;e&&(r|=4),Kw(n,t,r,e)}var da="_reactListening"+Math.random().toString(36).slice(2);function vs(t){if(!t[da]){t[da]=!0,tw.forEach(function(n){n!=="selectionchange"&&($1.has(n)||ju(n,!1,t),ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[da]||(e[da]=!0,ju("selectionchange",!1,e))}}function Kw(t,e,n,r){switch(Mw(e)){case 1:var i=t1;break;case 4:i=n1;break;default:i=qd}n=i.bind(null,e,n,t),i=void 0,!nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ec(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=zr(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}yw(function(){var f=o,d=zd(n),h=[];e:{var p=qw.get(t);if(p!==void 0){var m=Kd,w=t;switch(t){case"keypress":if(za(n)===0)break e;case"keydown":case"keyup":m=y1;break;case"focusin":w="focus",m=Ju;break;case"focusout":w="blur",m=Ju;break;case"beforeblur":case"afterblur":m=Ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=o1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_1;break;case zw:case Gw:case Hw:m=l1;break;case Ww:m=x1;break;case"scroll":m=r1;break;case"wheel":m=S1;break;case"copy":case"cut":case"paste":m=c1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Sm}var g=(e&4)!==0,C=!g&&t==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var v=f,_;v!==null;){_=v;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=ds(v,y),E!=null&&g.push(ws(v,E,_)))),C)break;v=v.return}0<g.length&&(p=new m(p,w,null,n,d),h.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==ef&&(w=n.relatedTarget||n.fromElement)&&(zr(w)||w[Hn]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=f,w=w?zr(w):null,w!==null&&(C=oi(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=f),m!==w)){if(g=xm,E="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Sm,E="onPointerLeave",y="onPointerEnter",v="pointer"),C=m==null?p:Ei(m),_=w==null?p:Ei(w),p=new g(E,v+"leave",m,n,d),p.target=C,p.relatedTarget=_,E=null,zr(d)===f&&(g=new g(y,v+"enter",w,n,d),g.target=_,g.relatedTarget=C,E=g),C=E,m&&w)t:{for(g=m,y=w,v=0,_=g;_;_=fi(_))v++;for(_=0,E=y;E;E=fi(E))_++;for(;0<v-_;)g=fi(g),v--;for(;0<_-v;)y=fi(y),_--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=fi(g),y=fi(y)}g=null}else g=null;m!==null&&Fm(h,p,m,g,!1),w!==null&&C!==null&&Fm(h,C,w,g,!0)}}e:{if(p=f?Ei(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=M1;else if(Pm(p))if(Vw)A=F1;else{A=N1;var k=b1}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=D1);if(A&&(A=A(t,f))){Lw(h,A,n,d);break e}k&&k(t,p,f),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&Yc(p,"number",p.value)}switch(k=f?Ei(f):window,t){case"focusin":(Pm(k)||k.contentEditable==="true")&&(Ti=k,lf=f,Zo=null);break;case"focusout":Zo=lf=Ti=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,bm(h,n,d);break;case"selectionchange":if(U1)break;case"keydown":case"keyup":bm(h,n,d)}var R;if(Xd)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else xi?Dw(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Nw&&n.locale!=="ko"&&(xi||N!=="onCompositionStart"?N==="onCompositionEnd"&&xi&&(R=bw()):(lr=d,Jd="value"in lr?lr.value:lr.textContent,xi=!0)),k=gl(f,N),0<k.length&&(N=new Tm(N,t,null,n,d),h.push({event:N,listeners:k}),R?N.data=R:(R=Fw(n),R!==null&&(N.data=R)))),(R=A1?P1(t,n):I1(t,n))&&(f=gl(f,"onBeforeInput"),0<f.length&&(d=new Tm("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:f}),d.data=R))}Jw(h,e)})}function ws(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ds(t,n),o!=null&&r.unshift(ws(t,o,i)),o=ds(t,e),o!=null&&r.push(ws(t,o,i))),t=t.return}return r}function fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,f=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&f!==null&&(a=f,i?(c=ds(n,o),c!=null&&s.unshift(ws(n,c,a))):i||(c=ds(n,o),c!=null&&s.push(ws(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var z1=/\r\n?/g,G1=/\u0000|\uFFFD/g;function Lm(t){return(typeof t=="string"?t:""+t).replace(z1,`
`).replace(G1,"")}function ha(t,e,n){if(e=Lm(e),Lm(t)!==e&&n)throw Error(Z(425))}function yl(){}var cf=null,ff=null;function df(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hf=typeof setTimeout=="function"?setTimeout:void 0,H1=typeof clearTimeout=="function"?clearTimeout:void 0,Vm=typeof Promise=="function"?Promise:void 0,W1=typeof queueMicrotask=="function"?queueMicrotask:typeof Vm<"u"?function(t){return Vm.resolve(null).then(t).catch(q1)}:hf;function q1(t){setTimeout(function(){throw t})}function tc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ms(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ms(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Um(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),Pn="__reactFiber$"+uo,_s="__reactProps$"+uo,Hn="__reactContainer$"+uo,pf="__reactEvents$"+uo,J1="__reactListeners$"+uo,K1="__reactHandles$"+uo;function zr(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Um(t);t!==null;){if(n=t[Pn])return n;t=Um(t)}return e}t=n,n=t.parentNode}return null}function Vs(t){return t=t[Pn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function ou(t){return t[_s]||null}var mf=[],Ai=-1;function Sr(t){return{current:t}}function Le(t){0>Ai||(t.current=mf[Ai],mf[Ai]=null,Ai--)}function Ne(t,e){Ai++,mf[Ai]=t.current,t.current=e}var _r={},St=Sr(_r),Nt=Sr(!1),Xr=_r;function Zi(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(t){return t=t.childContextTypes,t!=null}function vl(){Le(Nt),Le(St)}function Bm(t,e,n){if(St.current!==_r)throw Error(Z(168));Ne(St,e),Ne(Nt,n)}function Yw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,bE(t)||"Unknown",i));return We({},n,r)}function wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Xr=St.current,Ne(St,t),Ne(Nt,Nt.current),!0}function Om(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=Yw(t,e,Xr),r.__reactInternalMemoizedMergedChildContext=t,Le(Nt),Le(St),Ne(St,t)):Le(Nt),Ne(Nt,n)}var Vn=null,su=!1,nc=!1;function Xw(t){Vn===null?Vn=[t]:Vn.push(t)}function Y1(t){su=!0,Xw(t)}function Er(){if(!nc&&Vn!==null){nc=!0;var t=0,e=Ae;try{var n=Vn;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,su=!1}catch(i){throw Vn!==null&&(Vn=Vn.slice(t+1)),Cw(Gd,Er),i}finally{Ae=e,nc=!1}}return null}var Pi=[],Ii=0,_l=null,Cl=0,jt=[],en=0,Zr=null,Un=1,Bn="";function Lr(t,e){Pi[Ii++]=Cl,Pi[Ii++]=_l,_l=t,Cl=e}function Zw(t,e,n){jt[en++]=Un,jt[en++]=Bn,jt[en++]=Zr,Zr=t;var r=Un;t=Bn;var i=32-wn(r)-1;r&=~(1<<i),n+=1;var o=32-wn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Un=1<<32-wn(e)+i|n<<i|r,Bn=o+t}else Un=1<<o|n<<i|r,Bn=t}function Qd(t){t.return!==null&&(Lr(t,1),Zw(t,1,0))}function jd(t){for(;t===_l;)_l=Pi[--Ii],Pi[Ii]=null,Cl=Pi[--Ii],Pi[Ii]=null;for(;t===Zr;)Zr=jt[--en],jt[en]=null,Bn=jt[--en],jt[en]=null,Un=jt[--en],jt[en]=null}var Ht=null,Gt=null,Ue=!1,gn=null;function Qw(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $m(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,Gt=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zr!==null?{id:Un,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,Gt=null,!0):!1;default:return!1}}function gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yf(t){if(Ue){var e=Gt;if(e){var n=e;if(!$m(t,e)){if(gf(t))throw Error(Z(418));e=hr(n.nextSibling);var r=Ht;e&&$m(t,e)?Qw(r,n):(t.flags=t.flags&-4097|2,Ue=!1,Ht=t)}}else{if(gf(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ue=!1,Ht=t}}}function zm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function pa(t){if(t!==Ht)return!1;if(!Ue)return zm(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!df(t.type,t.memoizedProps)),e&&(e=Gt)){if(gf(t))throw jw(),Error(Z(418));for(;e;)Qw(t,e),e=hr(e.nextSibling)}if(zm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Ht?hr(t.stateNode.nextSibling):null;return!0}function jw(){for(var t=Gt;t;)t=hr(t.nextSibling)}function Qi(){Gt=Ht=null,Ue=!1}function eh(t){gn===null?gn=[t]:gn.push(t)}var X1=Kn.ReactCurrentBatchConfig;function Eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ma(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gm(t){var e=t._init;return e(t._payload)}function e_(t){function e(y,v){if(t){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=yr(y,v),y.index=0,y.sibling=null,y}function o(y,v,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,E){return v===null||v.tag!==6?(v=uc(_,y.mode,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function c(y,v,_,E){var A=_.type;return A===Ci?d(y,v,_.props.children,E,_.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===rr&&Gm(A)===v.type)?(E=i(v,_.props),E.ref=Eo(y,v,_),E.return=y,E):(E=Ya(_.type,_.key,_.props,null,y.mode,E),E.ref=Eo(y,v,_),E.return=y,E)}function f(y,v,_,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=cc(_,y.mode,E),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function d(y,v,_,E,A){return v===null||v.tag!==7?(v=Kr(_,y.mode,E,A),v.return=y,v):(v=i(v,_),v.return=y,v)}function h(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=uc(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ia:return _=Ya(v.type,v.key,v.props,null,y.mode,_),_.ref=Eo(y,null,v),_.return=y,_;case _i:return v=cc(v,y.mode,_),v.return=y,v;case rr:var E=v._init;return h(y,E(v._payload),_)}if(bo(v)||_o(v))return v=Kr(v,y.mode,_,null),v.return=y,v;ma(y,v)}return null}function p(y,v,_,E){var A=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:a(y,v,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ia:return _.key===A?c(y,v,_,E):null;case _i:return _.key===A?f(y,v,_,E):null;case rr:return A=_._init,p(y,v,A(_._payload),E)}if(bo(_)||_o(_))return A!==null?null:d(y,v,_,E,null);ma(y,_)}return null}function m(y,v,_,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,a(v,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ia:return y=y.get(E.key===null?_:E.key)||null,c(v,y,E,A);case _i:return y=y.get(E.key===null?_:E.key)||null,f(v,y,E,A);case rr:var k=E._init;return m(y,v,_,k(E._payload),A)}if(bo(E)||_o(E))return y=y.get(_)||null,d(v,y,E,A,null);ma(v,E)}return null}function w(y,v,_,E){for(var A=null,k=null,R=v,N=v=0,D=null;R!==null&&N<_.length;N++){R.index>N?(D=R,R=null):D=R.sibling;var F=p(y,R,_[N],E);if(F===null){R===null&&(R=D);break}t&&R&&F.alternate===null&&e(y,R),v=o(F,v,N),k===null?A=F:k.sibling=F,k=F,R=D}if(N===_.length)return n(y,R),Ue&&Lr(y,N),A;if(R===null){for(;N<_.length;N++)R=h(y,_[N],E),R!==null&&(v=o(R,v,N),k===null?A=R:k.sibling=R,k=R);return Ue&&Lr(y,N),A}for(R=r(y,R);N<_.length;N++)D=m(R,y,N,_[N],E),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?N:D.key),v=o(D,v,N),k===null?A=D:k.sibling=D,k=D);return t&&R.forEach(function(q){return e(y,q)}),Ue&&Lr(y,N),A}function g(y,v,_,E){var A=_o(_);if(typeof A!="function")throw Error(Z(150));if(_=A.call(_),_==null)throw Error(Z(151));for(var k=A=null,R=v,N=v=0,D=null,F=_.next();R!==null&&!F.done;N++,F=_.next()){R.index>N?(D=R,R=null):D=R.sibling;var q=p(y,R,F.value,E);if(q===null){R===null&&(R=D);break}t&&R&&q.alternate===null&&e(y,R),v=o(q,v,N),k===null?A=q:k.sibling=q,k=q,R=D}if(F.done)return n(y,R),Ue&&Lr(y,N),A;if(R===null){for(;!F.done;N++,F=_.next())F=h(y,F.value,E),F!==null&&(v=o(F,v,N),k===null?A=F:k.sibling=F,k=F);return Ue&&Lr(y,N),A}for(R=r(y,R);!F.done;N++,F=_.next())F=m(R,y,N,F.value,E),F!==null&&(t&&F.alternate!==null&&R.delete(F.key===null?N:F.key),v=o(F,v,N),k===null?A=F:k.sibling=F,k=F);return t&&R.forEach(function(I){return e(y,I)}),Ue&&Lr(y,N),A}function C(y,v,_,E){if(typeof _=="object"&&_!==null&&_.type===Ci&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ia:e:{for(var A=_.key,k=v;k!==null;){if(k.key===A){if(A=_.type,A===Ci){if(k.tag===7){n(y,k.sibling),v=i(k,_.props.children),v.return=y,y=v;break e}}else if(k.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===rr&&Gm(A)===k.type){n(y,k.sibling),v=i(k,_.props),v.ref=Eo(y,k,_),v.return=y,y=v;break e}n(y,k);break}else e(y,k);k=k.sibling}_.type===Ci?(v=Kr(_.props.children,y.mode,E,_.key),v.return=y,y=v):(E=Ya(_.type,_.key,_.props,null,y.mode,E),E.ref=Eo(y,v,_),E.return=y,y=E)}return s(y);case _i:e:{for(k=_.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=cc(_,y.mode,E),v.return=y,y=v}return s(y);case rr:return k=_._init,C(y,v,k(_._payload),E)}if(bo(_))return w(y,v,_,E);if(_o(_))return g(y,v,_,E);ma(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=uc(_,y.mode,E),v.return=y,y=v),s(y)):n(y,v)}return C}var ji=e_(!0),t_=e_(!1),xl=Sr(null),Tl=null,ki=null,th=null;function nh(){th=ki=Tl=null}function rh(t){var e=xl.current;Le(xl),t._currentValue=e}function vf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){Tl=t,th=ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(th!==t)if(t={context:t,memoizedValue:e,next:null},ki===null){if(Tl===null)throw Error(Z(308));ki=t,Tl.dependencies={lanes:0,firstContext:t}}else ki=ki.next=t;return e}var Gr=null;function ih(t){Gr===null?Gr=[t]:Gr.push(t)}function n_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ih(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function On(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wn(t,n)}return i=r.interleaved,i===null?(e.next=e,ih(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wn(t,n)}function Ga(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hd(t,n)}}function Hm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sl(t,e,n,r){var i=t.updateQueue;ir=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,f=c.next;c.next=null,s===null?o=f:s.next=f,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(o!==null){var h=i.baseState;s=0,d=f=c=null,a=o;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,g=a;switch(p=e,m=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(m,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,p=typeof w=="function"?w.call(m,h,p):w,p==null)break e;h=We({},h,p);break e;case 2:ir=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=m,c=h):d=d.next=m,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);jr|=s,t.lanes=s,t.memoizedState=h}}function Wm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Us={},Rn=Sr(Us),Cs=Sr(Us),xs=Sr(Us);function Hr(t){if(t===Us)throw Error(Z(174));return t}function sh(t,e){switch(Ne(xs,e),Ne(Cs,t),Ne(Rn,Us),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zc(e,t)}Le(Rn),Ne(Rn,e)}function eo(){Le(Rn),Le(Cs),Le(xs)}function i_(t){Hr(xs.current);var e=Hr(Rn.current),n=Zc(e,t.type);e!==n&&(Ne(Cs,t),Ne(Rn,n))}function ah(t){Cs.current===t&&(Le(Rn),Le(Cs))}var ze=Sr(0);function El(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rc=[];function lh(){for(var t=0;t<rc.length;t++)rc[t]._workInProgressVersionPrimary=null;rc.length=0}var Ha=Kn.ReactCurrentDispatcher,ic=Kn.ReactCurrentBatchConfig,Qr=0,He=null,tt=null,ot=null,Al=!1,Qo=!1,Ts=0,Z1=0;function yt(){throw Error(Z(321))}function uh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function ch(t,e,n,r,i,o){if(Qr=o,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ha.current=t===null||t.memoizedState===null?tA:nA,t=n(r,i),Qo){o=0;do{if(Qo=!1,Ts=0,25<=o)throw Error(Z(301));o+=1,ot=tt=null,e.updateQueue=null,Ha.current=rA,t=n(r,i)}while(Qo)}if(Ha.current=Pl,e=tt!==null&&tt.next!==null,Qr=0,ot=tt=He=null,Al=!1,e)throw Error(Z(300));return t}function fh(){var t=Ts!==0;return Ts=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?He.memoizedState=ot=t:ot=ot.next=t,ot}function un(){if(tt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=ot===null?He.memoizedState:ot.next;if(e!==null)ot=e,tt=t;else{if(t===null)throw Error(Z(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?He.memoizedState=ot=t:ot=ot.next=t}return ot}function Ss(t,e){return typeof e=="function"?e(t):e}function oc(t){var e=un(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=tt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,f=o;do{var d=f.lane;if((Qr&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var h={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,He.lanes|=d,jr|=d}f=f.next}while(f!==null&&f!==o);c===null?s=r:c.next=a,Cn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,He.lanes|=o,jr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sc(t){var e=un(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Cn(o,e.memoizedState)||(bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function o_(){}function s_(t,e){var n=He,r=un(),i=e(),o=!Cn(r.memoizedState,i);if(o&&(r.memoizedState=i,bt=!0),r=r.queue,dh(u_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Es(9,l_.bind(null,n,r,i,e),void 0,null),st===null)throw Error(Z(349));Qr&30||a_(n,e,i)}return i}function a_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l_(t,e,n,r){e.value=n,e.getSnapshot=r,c_(e)&&f_(t)}function u_(t,e,n){return n(function(){c_(e)&&f_(t)})}function c_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function f_(t){var e=Wn(t,1);e!==null&&_n(e,t,1,-1)}function qm(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:t},e.queue=t,t=t.dispatch=eA.bind(null,He,t),[e.memoizedState,t]}function Es(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function d_(){return un().memoizedState}function Wa(t,e,n,r){var i=Sn();He.flags|=t,i.memoizedState=Es(1|e,n,void 0,r===void 0?null:r)}function au(t,e,n,r){var i=un();r=r===void 0?null:r;var o=void 0;if(tt!==null){var s=tt.memoizedState;if(o=s.destroy,r!==null&&uh(r,s.deps)){i.memoizedState=Es(e,n,o,r);return}}He.flags|=t,i.memoizedState=Es(1|e,n,o,r)}function Jm(t,e){return Wa(8390656,8,t,e)}function dh(t,e){return au(2048,8,t,e)}function h_(t,e){return au(4,2,t,e)}function p_(t,e){return au(4,4,t,e)}function m_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g_(t,e,n){return n=n!=null?n.concat([t]):null,au(4,4,m_.bind(null,e,t),n)}function hh(){}function y_(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v_(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w_(t,e,n){return Qr&21?(Cn(n,e)||(n=Sw(),He.lanes|=n,jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function Q1(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=ic.transition;ic.transition={};try{t(!1),e()}finally{Ae=n,ic.transition=r}}function __(){return un().memoizedState}function j1(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C_(t))x_(e,n);else if(n=n_(t,e,n,r),n!==null){var i=At();_n(n,t,r,i),T_(n,e,r)}}function eA(t,e,n){var r=gr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C_(t))x_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Cn(a,s)){var c=e.interleaved;c===null?(i.next=i,ih(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=n_(t,e,i,r),n!==null&&(i=At(),_n(n,t,r,i),T_(n,e,r))}}function C_(t){var e=t.alternate;return t===He||e!==null&&e===He}function x_(t,e){Qo=Al=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function T_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hd(t,n)}}var Pl={readContext:ln,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},tA={readContext:ln,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Jm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wa(4194308,4,m_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wa(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j1.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:qm,useDebugValue:hh,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=qm(!1),e=t[0];return t=Q1.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=Sn();if(Ue){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),st===null)throw Error(Z(349));Qr&30||a_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Jm(u_.bind(null,r,o,t),[t]),r.flags|=2048,Es(9,l_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Sn(),e=st.identifierPrefix;if(Ue){var n=Bn,r=Un;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ts++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Z1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nA={readContext:ln,useCallback:y_,useContext:ln,useEffect:dh,useImperativeHandle:g_,useInsertionEffect:h_,useLayoutEffect:p_,useMemo:v_,useReducer:oc,useRef:d_,useState:function(){return oc(Ss)},useDebugValue:hh,useDeferredValue:function(t){var e=un();return w_(e,tt.memoizedState,t)},useTransition:function(){var t=oc(Ss)[0],e=un().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:s_,useId:__,unstable_isNewReconciler:!1},rA={readContext:ln,useCallback:y_,useContext:ln,useEffect:dh,useImperativeHandle:g_,useInsertionEffect:h_,useLayoutEffect:p_,useMemo:v_,useReducer:sc,useRef:d_,useState:function(){return sc(Ss)},useDebugValue:hh,useDeferredValue:function(t){var e=un();return tt===null?e.memoizedState=t:w_(e,tt.memoizedState,t)},useTransition:function(){var t=sc(Ss)[0],e=un().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:s_,useId:__,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lu={isMounted:function(t){return(t=t._reactInternals)?oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),i=gr(t),o=On(r,i);o.payload=e,n!=null&&(o.callback=n),e=pr(t,o,i),e!==null&&(_n(e,t,i,r),Ga(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),i=gr(t),o=On(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=pr(t,o,i),e!==null&&(_n(e,t,i,r),Ga(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=gr(t),i=On(n,r);i.tag=2,e!=null&&(i.callback=e),e=pr(t,i,r),e!==null&&(_n(e,t,r,n),Ga(e,t,r))}};function Km(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ys(n,r)||!ys(i,o):!0}function S_(t,e,n){var r=!1,i=_r,o=e.contextType;return typeof o=="object"&&o!==null?o=ln(o):(i=Dt(e)?Xr:St.current,r=e.contextTypes,o=(r=r!=null)?Zi(t,i):_r),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ym(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lu.enqueueReplaceState(e,e.state,null)}function _f(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},oh(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ln(o):(o=Dt(e)?Xr:St.current,i.context=Zi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(wf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lu.enqueueReplaceState(i,i.state,null),Sl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",r=e;do n+=ME(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ac(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iA=typeof WeakMap=="function"?WeakMap:Map;function E_(t,e,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kl||(kl=!0,Mf=r),Cf(t,e)},n}function A_(t,e,n){n=On(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Cf(t,e),typeof r!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Xm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=vA.bind(null,t,e,n),e.then(t,t))}function Zm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=On(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var oA=Kn.ReactCurrentOwner,bt=!1;function Et(t,e,n,r){e.child=t===null?t_(e,null,n,r):ji(e,t.child,n,r)}function jm(t,e,n,r,i){n=n.render;var o=e.ref;return Gi(e,i),r=ch(t,e,n,r,o,i),n=fh(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qn(t,e,i)):(Ue&&n&&Qd(e),e.flags|=1,Et(t,e,r,i),e.child)}function eg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Ch(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,P_(t,e,o,r,i)):(t=Ya(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ys,n(s,r)&&t.ref===e.ref)return qn(t,e,i)}return e.flags|=1,t=yr(o,r),t.ref=e.ref,t.return=e,e.child=t}function P_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ys(o,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,qn(t,e,i)}return xf(t,e,n,r,i)}function I_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Mi,zt),zt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Mi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(Mi,zt),zt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ne(Mi,zt),zt|=r;return Et(t,e,i,n),e.child}function k_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xf(t,e,n,r,i){var o=Dt(n)?Xr:St.current;return o=Zi(e,o),Gi(e,i),n=ch(t,e,n,r,o,i),r=fh(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qn(t,e,i)):(Ue&&r&&Qd(e),e.flags|=1,Et(t,e,n,i),e.child)}function tg(t,e,n,r,i){if(Dt(n)){var o=!0;wl(e)}else o=!1;if(Gi(e,i),e.stateNode===null)qa(t,e),S_(e,n,r),_f(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=ln(f):(f=Dt(n)?Xr:St.current,f=Zi(e,f));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==f)&&Ym(e,s,r,f),ir=!1;var p=e.memoizedState;s.state=p,Sl(e,r,s,i),c=e.memoizedState,a!==r||p!==c||Nt.current||ir?(typeof d=="function"&&(wf(e,n,d,r),c=e.memoizedState),(a=ir||Km(e,n,a,r,p,c,f))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=f,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,r_(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:hn(e.type,a),s.props=f,h=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=ln(c):(c=Dt(n)?Xr:St.current,c=Zi(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==c)&&Ym(e,s,r,c),ir=!1,p=e.memoizedState,s.state=p,Sl(e,r,s,i);var w=e.memoizedState;a!==h||p!==w||Nt.current||ir?(typeof m=="function"&&(wf(e,n,m,r),w=e.memoizedState),(f=ir||Km(e,n,f,r,p,w,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),s.props=r,s.state=w,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Tf(t,e,n,r,o,i)}function Tf(t,e,n,r,i,o){k_(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Om(e,n,!1),qn(t,e,o);r=e.stateNode,oA.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=ji(e,t.child,null,o),e.child=ji(e,null,a,o)):Et(t,e,a,o),e.memoizedState=r.state,i&&Om(e,n,!0),e.child}function R_(t){var e=t.stateNode;e.pendingContext?Bm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bm(t,e.context,!1),sh(t,e.containerInfo)}function ng(t,e,n,r,i){return Qi(),eh(i),e.flags|=256,Et(t,e,n,r),e.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Ef(t){return{baseLanes:t,cachePool:null,transitions:null}}function M_(t,e,n){var r=e.pendingProps,i=ze.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(ze,i&1),t===null)return yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=fu(s,r,0,null),t=Kr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ef(n),e.memoizedState=Sf,t):ph(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return sA(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=yr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=yr(a,o):(o=Kr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Ef(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Sf,r}return o=t.child,t=o.sibling,r=yr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ph(t,e){return e=fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ga(t,e,n,r){return r!==null&&eh(r),ji(e,t.child,null,n),t=ph(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sA(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=ac(Error(Z(422))),ga(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=fu({mode:"visible",children:r.children},i,0,null),o=Kr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ji(e,t.child,null,s),e.child.memoizedState=Ef(s),e.memoizedState=Sf,o);if(!(e.mode&1))return ga(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Z(419)),r=ac(o,r,void 0),ga(t,e,s,r)}if(a=(s&t.childLanes)!==0,bt||a){if(r=st,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Wn(t,i),_n(r,t,i,-1))}return _h(),r=ac(Error(Z(421))),ga(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Gt=hr(i.nextSibling),Ht=e,Ue=!0,gn=null,t!==null&&(jt[en++]=Un,jt[en++]=Bn,jt[en++]=Zr,Un=t.id,Bn=t.overflow,Zr=e),e=ph(e,r.children),e.flags|=4096,e)}function rg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vf(t.return,e,n)}function lc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function b_(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Et(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rg(t,n,e);else if(t.tag===19)rg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&El(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&El(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lc(e,!0,n,null,o);break;case"together":lc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aA(t,e,n){switch(e.tag){case 3:R_(e),Qi();break;case 5:i_(e);break;case 1:Dt(e.type)&&wl(e);break;case 4:sh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(xl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?M_(t,e,n):(Ne(ze,ze.current&1),t=qn(t,e,n),t!==null?t.sibling:null);Ne(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return b_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,I_(t,e,n)}return qn(t,e,n)}var N_,Af,D_,F_;N_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Af=function(){};D_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hr(Rn.current);var o=null;switch(n){case"input":i=Jc(t,i),r=Jc(t,r),o=[];break;case"select":i=We({},i,{value:void 0}),r=We({},r,{value:void 0}),o=[];break;case"textarea":i=Xc(t,i),r=Xc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yl)}Qc(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(cs.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var c=r[f];if(a=i?.[f],r.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(cs.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&De("scroll",t),o||a===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};F_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ao(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lA(t,e,n){var r=e.pendingProps;switch(jd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Dt(e.type)&&vl(),vt(e),null;case 3:return r=e.stateNode,eo(),Le(Nt),Le(St),lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Df(gn),gn=null))),Af(t,e),vt(e),null;case 5:ah(e);var i=Hr(xs.current);if(n=e.type,t!==null&&e.stateNode!=null)D_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return vt(e),null}if(t=Hr(Rn.current),pa(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Pn]=e,r[_s]=o,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(i=0;i<Do.length;i++)De(Do[i],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":dm(r,o),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},De("invalid",r);break;case"textarea":pm(r,o),De("invalid",r)}Qc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&ha(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ha(r.textContent,a,t),i=["children",""+a]):cs.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&De("scroll",r)}switch(n){case"input":oa(r),hm(r,o,!0);break;case"textarea":oa(r),mm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=yl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Pn]=e,t[_s]=r,N_(t,e,!1,!1),e.stateNode=t;e:{switch(s=jc(n,r),n){case"dialog":De("cancel",t),De("close",t),i=r;break;case"iframe":case"object":case"embed":De("load",t),i=r;break;case"video":case"audio":for(i=0;i<Do.length;i++)De(Do[i],t);i=r;break;case"source":De("error",t),i=r;break;case"img":case"image":case"link":De("error",t),De("load",t),i=r;break;case"details":De("toggle",t),i=r;break;case"input":dm(t,r),i=Jc(t,r),De("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=We({},r,{value:void 0}),De("invalid",t);break;case"textarea":pm(t,r),i=Xc(t,r),De("invalid",t);break;default:i=r}Qc(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?dw(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cw(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fs(t,c):typeof c=="number"&&fs(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&De("scroll",t):c!=null&&Ud(t,o,c,s))}switch(n){case"input":oa(t),hm(t,r,!1);break;case"textarea":oa(t),mm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Bi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)F_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Hr(xs.current),Hr(Rn.current),pa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(o=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return vt(e),null;case 13:if(Le(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Gt!==null&&e.mode&1&&!(e.flags&128))jw(),Qi(),e.flags|=98560,o=!1;else if(o=pa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[Pn]=e}else Qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),o=!1}else gn!==null&&(Df(gn),gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?nt===0&&(nt=3):_h())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return eo(),Af(t,e),t===null&&vs(e.stateNode.containerInfo),vt(e),null;case 10:return rh(e.type._context),vt(e),null;case 17:return Dt(e.type)&&vl(),vt(e),null;case 19:if(Le(ze),o=e.memoizedState,o===null)return vt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ao(o,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=El(t),s!==null){for(e.flags|=128,Ao(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(ze,ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ze()>no&&(e.flags|=128,r=!0,Ao(o,!1),e.lanes=4194304)}else{if(!r)if(t=El(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ao(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ue)return vt(e),null}else 2*Ze()-o.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,r=!0,Ao(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ze(),e.sibling=null,n=ze.current,Ne(ze,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function uA(t,e){switch(jd(e),e.tag){case 1:return Dt(e.type)&&vl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),Le(Nt),Le(St),lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ah(e),null;case 13:if(Le(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(ze),null;case 4:return eo(),null;case 10:return rh(e.type._context),null;case 22:case 23:return wh(),null;case 24:return null;default:return null}}var ya=!1,Ct=!1,cA=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ri(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function Pf(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var ig=!1;function fA(t,e){if(cf=pl,t=Ow(),Zd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,f=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++f===i&&(a=s),p===o&&++d===r&&(c=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ff={focusedElem:t,selectionRange:n},pl=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,C=w.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:hn(e.type,g),C);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(E){Ke(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return w=ig,ig=!1,w}function jo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Pf(e,n,o)}i=i.next}while(i!==r)}}function uu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function If(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function L_(t){var e=t.alternate;e!==null&&(t.alternate=null,L_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[_s],delete e[pf],delete e[J1],delete e[K1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V_(t){return t.tag===5||t.tag===3||t.tag===4}function og(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yl));else if(r!==4&&(t=t.child,t!==null))for(kf(t,e,n),t=t.sibling;t!==null;)kf(t,e,n),t=t.sibling}function Rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}var ct=null,mn=!1;function Qn(t,e,n){for(n=n.child;n!==null;)U_(t,e,n),n=n.sibling}function U_(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(tu,n)}catch{}switch(n.tag){case 5:Ct||Ri(n,e);case 6:var r=ct,i=mn;ct=null,Qn(t,e,n),ct=r,mn=i,ct!==null&&(mn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(mn?(t=ct,n=n.stateNode,t.nodeType===8?tc(t.parentNode,n):t.nodeType===1&&tc(t,n),ms(t)):tc(ct,n.stateNode));break;case 4:r=ct,i=mn,ct=n.stateNode.containerInfo,mn=!0,Qn(t,e,n),ct=r,mn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Pf(n,e,s),i=i.next}while(i!==r)}Qn(t,e,n);break;case 1:if(!Ct&&(Ri(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Qn(t,e,n),Ct=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function sg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cA),e.forEach(function(r){var i=_A.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,mn=!1;break e;case 3:ct=a.stateNode.containerInfo,mn=!0;break e;case 4:ct=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(ct===null)throw Error(Z(160));U_(o,s,i),ct=null,mn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){Ke(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)B_(e,t),e=e.sibling}function B_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),xn(t),r&4){try{jo(3,t,t.return),uu(3,t)}catch(g){Ke(t,t.return,g)}try{jo(5,t,t.return)}catch(g){Ke(t,t.return,g)}}break;case 1:cn(e,t),xn(t),r&512&&n!==null&&Ri(n,n.return);break;case 5:if(cn(e,t),xn(t),r&512&&n!==null&&Ri(n,n.return),t.flags&32){var i=t.stateNode;try{fs(i,"")}catch(g){Ke(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&aw(i,o),jc(a,s);var f=jc(a,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];d==="style"?dw(i,h):d==="dangerouslySetInnerHTML"?cw(i,h):d==="children"?fs(i,h):Ud(i,d,h,f)}switch(a){case"input":Kc(i,o);break;case"textarea":lw(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Bi(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Bi(i,!!o.multiple,o.defaultValue,!0):Bi(i,!!o.multiple,o.multiple?[]:"",!1))}i[_s]=o}catch(g){Ke(t,t.return,g)}}break;case 6:if(cn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Ke(t,t.return,g)}}break;case 3:if(cn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ms(e.containerInfo)}catch(g){Ke(t,t.return,g)}break;case 4:cn(e,t),xn(t);break;case 13:cn(e,t),xn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(yh=Ze())),r&4&&sg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(f=Ct)||d,cn(e,t),Ct=f):cn(e,t),xn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(h=se=d;se!==null;){switch(p=se,m=p.child,p.tag){case 0:case 11:case 14:case 15:jo(4,p,p.return);break;case 1:Ri(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(g){Ke(r,n,g)}}break;case 5:Ri(p,p.return);break;case 22:if(p.memoizedState!==null){lg(h);continue}}m!==null?(m.return=p,se=m):lg(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=fw("display",s))}catch(g){Ke(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(g){Ke(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:cn(e,t),xn(t),r&4&&sg(t);break;case 21:break;default:cn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(V_(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fs(i,""),r.flags&=-33);var o=og(t);Rf(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=og(t);kf(t,a,s);break;default:throw Error(Z(161))}}catch(c){Ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dA(t,e,n){se=t,O_(t)}function O_(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ya;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Ct;a=ya;var f=Ct;if(ya=s,(Ct=c)&&!f)for(se=i;se!==null;)s=se,c=s.child,s.tag===22&&s.memoizedState!==null?ug(i):c!==null?(c.return=s,se=c):ug(i);for(;o!==null;)se=o,O_(o),o=o.sibling;se=i,ya=a,Ct=f}ag(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,se=o):ag(t)}}function ag(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||uu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Wm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wm(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ms(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ct||e.flags&512&&If(e)}catch(p){Ke(e,e.return,p)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function lg(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function ug(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uu(4,e)}catch(c){Ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ke(e,i,c)}}var o=e.return;try{If(e)}catch(c){Ke(e,o,c)}break;case 5:var s=e.return;try{If(e)}catch(c){Ke(e,s,c)}}}catch(c){Ke(e,e.return,c)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var hA=Math.ceil,Il=Kn.ReactCurrentDispatcher,mh=Kn.ReactCurrentOwner,on=Kn.ReactCurrentBatchConfig,Ce=0,st=null,Qe=null,ht=0,zt=0,Mi=Sr(0),nt=0,As=null,jr=0,cu=0,gh=0,es=null,Mt=null,yh=0,no=1/0,Ln=null,kl=!1,Mf=null,mr=null,va=!1,ur=null,Rl=0,ts=0,bf=null,Ja=-1,Ka=0;function At(){return Ce&6?Ze():Ja!==-1?Ja:Ja=Ze()}function gr(t){return t.mode&1?Ce&2&&ht!==0?ht&-ht:X1.transition!==null?(Ka===0&&(Ka=Sw()),Ka):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:Mw(t.type)),t):1}function _n(t,e,n,r){if(50<ts)throw ts=0,bf=null,Error(Z(185));Fs(t,n,r),(!(Ce&2)||t!==st)&&(t===st&&(!(Ce&2)&&(cu|=n),nt===4&&sr(t,ht)),Ft(t,r),n===1&&Ce===0&&!(e.mode&1)&&(no=Ze()+500,su&&Er()))}function Ft(t,e){var n=t.callbackNode;XE(t,e);var r=hl(t,t===st?ht:0);if(r===0)n!==null&&vm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vm(n),e===1)t.tag===0?Y1(cg.bind(null,t)):Xw(cg.bind(null,t)),W1(function(){!(Ce&6)&&Er()}),n=null;else{switch(Ew(r)){case 1:n=Gd;break;case 4:n=xw;break;case 16:n=dl;break;case 536870912:n=Tw;break;default:n=dl}n=K_(n,$_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $_(t,e){if(Ja=-1,Ka=0,Ce&6)throw Error(Z(327));var n=t.callbackNode;if(Hi()&&t.callbackNode!==n)return null;var r=hl(t,t===st?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ml(t,r);else{e=r;var i=Ce;Ce|=2;var o=G_();(st!==t||ht!==e)&&(Ln=null,no=Ze()+500,Jr(t,e));do try{gA();break}catch(a){z_(t,a)}while(!0);nh(),Il.current=o,Ce=i,Qe!==null?e=0:(st=null,ht=0,e=nt)}if(e!==0){if(e===2&&(i=of(t),i!==0&&(r=i,e=Nf(t,i))),e===1)throw n=As,Jr(t,0),sr(t,r),Ft(t,Ze()),n;if(e===6)sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!pA(i)&&(e=Ml(t,r),e===2&&(o=of(t),o!==0&&(r=o,e=Nf(t,o))),e===1))throw n=As,Jr(t,0),sr(t,r),Ft(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Vr(t,Mt,Ln);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=yh+500-Ze(),10<e)){if(hl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){At(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=hf(Vr.bind(null,t,Mt,Ln),e);break}Vr(t,Mt,Ln);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-wn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hA(r/1960))-r,10<r){t.timeoutHandle=hf(Vr.bind(null,t,Mt,Ln),r);break}Vr(t,Mt,Ln);break;case 5:Vr(t,Mt,Ln);break;default:throw Error(Z(329))}}}return Ft(t,Ze()),t.callbackNode===n?$_.bind(null,t):null}function Nf(t,e){var n=es;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=Ml(t,e),t!==2&&(e=Mt,Mt=n,e!==null&&Df(e)),t}function Df(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function pA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Cn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~gh,e&=~cu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),r=1<<n;t[n]=-1,e&=~r}}function cg(t){if(Ce&6)throw Error(Z(327));Hi();var e=hl(t,0);if(!(e&1))return Ft(t,Ze()),null;var n=Ml(t,e);if(t.tag!==0&&n===2){var r=of(t);r!==0&&(e=r,n=Nf(t,r))}if(n===1)throw n=As,Jr(t,0),sr(t,e),Ft(t,Ze()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vr(t,Mt,Ln),Ft(t,Ze()),null}function vh(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(no=Ze()+500,su&&Er())}}function ei(t){ur!==null&&ur.tag===0&&!(Ce&6)&&Hi();var e=Ce;Ce|=1;var n=on.transition,r=Ae;try{if(on.transition=null,Ae=1,t)return t()}finally{Ae=r,on.transition=n,Ce=e,!(Ce&6)&&Er()}}function wh(){zt=Mi.current,Le(Mi)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,H1(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(jd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vl();break;case 3:eo(),Le(Nt),Le(St),lh();break;case 5:ah(r);break;case 4:eo();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:rh(r.type._context);break;case 22:case 23:wh()}n=n.return}if(st=t,Qe=t=yr(t.current,null),ht=zt=e,nt=0,As=null,gh=cu=jr=0,Mt=es=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Gr=null}return t}function z_(t,e){do{var n=Qe;try{if(nh(),Ha.current=Pl,Al){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Al=!1}if(Qr=0,ot=tt=He=null,Qo=!1,Ts=0,mh.current=null,n===null||n.return===null){nt=1,As=e,Qe=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=ht,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Zm(s);if(m!==null){m.flags&=-257,Qm(m,s,a,o,e),m.mode&1&&Xm(o,f,e),e=m,c=f;var w=e.updateQueue;if(w===null){var g=new Set;g.add(c),e.updateQueue=g}else w.add(c);break e}else{if(!(e&1)){Xm(o,f,e),_h();break e}c=Error(Z(426))}}else if(Ue&&a.mode&1){var C=Zm(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Qm(C,s,a,o,e),eh(to(c,a));break e}}o=c=to(c,a),nt!==4&&(nt=2),es===null?es=[o]:es.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=E_(o,c,e);Hm(o,y);break e;case 1:a=c;var v=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(mr===null||!mr.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=A_(o,a,e);Hm(o,E);break e}}o=o.return}while(o!==null)}W_(n)}catch(A){e=A,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function G_(){var t=Il.current;return Il.current=Pl,t===null?Pl:t}function _h(){(nt===0||nt===3||nt===2)&&(nt=4),st===null||!(jr&268435455)&&!(cu&268435455)||sr(st,ht)}function Ml(t,e){var n=Ce;Ce|=2;var r=G_();(st!==t||ht!==e)&&(Ln=null,Jr(t,e));do try{mA();break}catch(i){z_(t,i)}while(!0);if(nh(),Ce=n,Il.current=r,Qe!==null)throw Error(Z(261));return st=null,ht=0,nt}function mA(){for(;Qe!==null;)H_(Qe)}function gA(){for(;Qe!==null&&!$E();)H_(Qe)}function H_(t){var e=J_(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?W_(t):Qe=e,mh.current=null}function W_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uA(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Qe=null;return}}else if(n=lA(n,e,zt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);nt===0&&(nt=5)}function Vr(t,e,n){var r=Ae,i=on.transition;try{on.transition=null,Ae=1,yA(t,e,n,r)}finally{on.transition=i,Ae=r}return null}function yA(t,e,n,r){do Hi();while(ur!==null);if(Ce&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ZE(t,o),t===st&&(Qe=st=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||va||(va=!0,K_(dl,function(){return Hi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=on.transition,on.transition=null;var s=Ae;Ae=1;var a=Ce;Ce|=4,mh.current=null,fA(t,n),B_(n,t),V1(ff),pl=!!cf,ff=cf=null,t.current=n,dA(n),zE(),Ce=a,Ae=s,on.transition=o}else t.current=n;if(va&&(va=!1,ur=t,Rl=i),o=t.pendingLanes,o===0&&(mr=null),WE(n.stateNode),Ft(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kl)throw kl=!1,t=Mf,Mf=null,t;return Rl&1&&t.tag!==0&&Hi(),o=t.pendingLanes,o&1?t===bf?ts++:(ts=0,bf=t):ts=0,Er(),null}function Hi(){if(ur!==null){var t=Ew(Rl),e=on.transition,n=Ae;try{if(on.transition=null,Ae=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,Rl=0,Ce&6)throw Error(Z(331));var i=Ce;for(Ce|=4,se=t.current;se!==null;){var o=se,s=o.child;if(se.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(se=f;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:jo(8,d,o)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var p=d.sibling,m=d.return;if(L_(d),d===f){se=null;break}if(p!==null){p.return=m,se=p;break}se=m}}}var w=o.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}se=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,se=s;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:jo(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,se=y;break e}se=o.return}}var v=t.current;for(se=v;se!==null;){s=se;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,se=_;else e:for(s=v;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uu(9,a)}}catch(A){Ke(a,a.return,A)}if(a===s){se=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,se=E;break e}se=a.return}}if(Ce=i,Er(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(tu,t)}catch{}r=!0}return r}finally{Ae=n,on.transition=e}}return!1}function fg(t,e,n){e=to(n,e),e=E_(t,e,1),t=pr(t,e,1),e=At(),t!==null&&(Fs(t,1,e),Ft(t,e))}function Ke(t,e,n){if(t.tag===3)fg(t,t,n);else for(;e!==null;){if(e.tag===3){fg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mr===null||!mr.has(r))){t=to(n,t),t=A_(e,t,1),e=pr(e,t,1),t=At(),e!==null&&(Fs(e,1,t),Ft(e,t));break}}e=e.return}}function vA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ht&n)===n&&(nt===4||nt===3&&(ht&130023424)===ht&&500>Ze()-yh?Jr(t,0):gh|=n),Ft(t,e)}function q_(t,e){e===0&&(t.mode&1?(e=la,la<<=1,!(la&130023424)&&(la=4194304)):e=1);var n=At();t=Wn(t,e),t!==null&&(Fs(t,e,n),Ft(t,n))}function wA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q_(t,n)}function _A(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),q_(t,n)}var J_;J_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,aA(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Ue&&e.flags&1048576&&Zw(e,Cl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qa(t,e),t=e.pendingProps;var i=Zi(e,St.current);Gi(e,n),i=ch(null,e,r,t,i,n);var o=fh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(o=!0,wl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oh(e),i.updater=lu,e.stateNode=i,i._reactInternals=e,_f(e,r,t,n),e=Tf(null,e,r,!0,o,n)):(e.tag=0,Ue&&o&&Qd(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xA(r),t=hn(r,t),i){case 0:e=xf(null,e,r,t,n);break e;case 1:e=tg(null,e,r,t,n);break e;case 11:e=jm(null,e,r,t,n);break e;case 14:e=eg(null,e,r,hn(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),xf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),tg(t,e,r,i,n);case 3:e:{if(R_(e),t===null)throw Error(Z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,r_(t,e),Sl(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=to(Error(Z(423)),e),e=ng(t,e,r,n,i);break e}else if(r!==i){i=to(Error(Z(424)),e),e=ng(t,e,r,n,i);break e}else for(Gt=hr(e.stateNode.containerInfo.firstChild),Ht=e,Ue=!0,gn=null,n=t_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qi(),r===i){e=qn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&yf(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,df(r,i)?s=null:o!==null&&df(r,o)&&(e.flags|=32),k_(t,e),Et(t,e,s,n),e.child;case 6:return t===null&&yf(e),null;case 13:return M_(t,e,n);case 4:return sh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ji(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),jm(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ne(xl,r._currentValue),r._currentValue=s,o!==null)if(Cn(o.value,s)){if(o.children===i.children&&!Nt.current){e=qn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=On(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),vf(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Z(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),vf(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gi(e,n),i=ln(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=hn(r,e.pendingProps),i=hn(r.type,i),eg(t,e,r,i,n);case 15:return P_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),qa(t,e),e.tag=1,Dt(r)?(t=!0,wl(e)):t=!1,Gi(e,n),S_(e,r,i),_f(e,r,i,n),Tf(null,e,r,!0,t,n);case 19:return b_(t,e,n);case 22:return I_(t,e,n)}throw Error(Z(156,e.tag))};function K_(t,e){return Cw(t,e)}function CA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new CA(t,e,n,r)}function Ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xA(t){if(typeof t=="function")return Ch(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Od)return 11;if(t===$d)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ya(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Ch(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Ci:return Kr(n.children,i,o,e);case Bd:s=8,i|=8;break;case Gc:return t=tn(12,n,e,i|2),t.elementType=Gc,t.lanes=o,t;case Hc:return t=tn(13,n,e,i),t.elementType=Hc,t.lanes=o,t;case Wc:return t=tn(19,n,e,i),t.elementType=Wc,t.lanes=o,t;case iw:return fu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nw:s=10;break e;case rw:s=9;break e;case Od:s=11;break e;case $d:s=14;break e;case rr:s=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=tn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Kr(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function fu(t,e,n,r){return t=tn(22,t,r,e),t.elementType=iw,t.lanes=n,t.stateNode={isHidden:!1},t}function uc(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function cc(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xh(t,e,n,r,i,o,s,a,c){return t=new TA(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=tn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oh(o),t}function SA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y_(t){if(!t)return _r;t=t._reactInternals;e:{if(oi(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Yw(t,n,e)}return e}function X_(t,e,n,r,i,o,s,a,c){return t=xh(n,r,!0,t,i,o,s,a,c),t.context=Y_(null),n=t.current,r=At(),i=gr(n),o=On(r,i),o.callback=e??null,pr(n,o,i),t.current.lanes=i,Fs(t,i,r),Ft(t,r),t}function du(t,e,n,r){var i=e.current,o=At(),s=gr(i);return n=Y_(n),e.context===null?e.context=n:e.pendingContext=n,e=On(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(i,e,s),t!==null&&(_n(t,i,s,o),Ga(t,i,s)),s}function bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Th(t,e){dg(t,e),(t=t.alternate)&&dg(t,e)}function EA(){return null}var Z_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sh(t){this._internalRoot=t}hu.prototype.render=Sh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));du(t,e,null,null)};hu.prototype.unmount=Sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){du(null,t,null,null)}),e[Hn]=null}};function hu(t){this._internalRoot=t}hu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Iw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&Rw(t)}};function Eh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hg(){}function AA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=bl(s);o.call(f)}}var s=X_(e,r,t,0,null,!1,!1,"",hg);return t._reactRootContainer=s,t[Hn]=s.current,vs(t.nodeType===8?t.parentNode:t),ei(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=bl(c);a.call(f)}}var c=xh(t,0,!1,null,null,!1,!1,"",hg);return t._reactRootContainer=c,t[Hn]=c.current,vs(t.nodeType===8?t.parentNode:t),ei(function(){du(e,c,n,r)}),c}function mu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=bl(s);a.call(c)}}du(e,s,t,i)}else s=AA(n,e,t,i,r);return bl(s)}Aw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=No(e.pendingLanes);n!==0&&(Hd(e,n|1),Ft(e,Ze()),!(Ce&6)&&(no=Ze()+500,Er()))}break;case 13:ei(function(){var r=Wn(t,1);if(r!==null){var i=At();_n(r,t,1,i)}}),Th(t,1)}};Wd=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=At();_n(e,t,134217728,n)}Th(t,134217728)}};Pw=function(t){if(t.tag===13){var e=gr(t),n=Wn(t,e);if(n!==null){var r=At();_n(n,t,e,r)}Th(t,e)}};Iw=function(){return Ae};kw=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};tf=function(t,e,n){switch(e){case"input":if(Kc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ou(r);if(!i)throw Error(Z(90));sw(r),Kc(r,i)}}}break;case"textarea":lw(t,n);break;case"select":e=n.value,e!=null&&Bi(t,!!n.multiple,e,!1)}};mw=vh;gw=ei;var PA={usingClientEntryPoint:!1,Events:[Vs,Ei,ou,hw,pw,vh]},Po={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IA={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ww(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||EA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wa.isDisabled&&wa.supportsFiber)try{tu=wa.inject(IA),kn=wa}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PA;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(e))throw Error(Z(200));return SA(t,e,null,n)};Kt.createRoot=function(t,e){if(!Eh(t))throw Error(Z(299));var n=!1,r="",i=Z_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xh(t,1,!1,null,null,n,!1,r,i),t[Hn]=e.current,vs(t.nodeType===8?t.parentNode:t),new Sh(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=ww(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return ei(t)};Kt.hydrate=function(t,e,n){if(!pu(e))throw Error(Z(200));return mu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Eh(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Z_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=X_(e,null,t,1,n??null,i,!1,o,s),t[Hn]=e.current,vs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hu(e)};Kt.render=function(t,e,n){if(!pu(e))throw Error(Z(200));return mu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!pu(t))throw Error(Z(40));return t._reactRootContainer?(ei(function(){mu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Kt.unstable_batchedUpdates=vh;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pu(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return mu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function Q_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q_)}catch(t){console.error(t)}}Q_(),Q0.exports=Kt;var kA=Q0.exports,pg=kA;$c.createRoot=pg.createRoot,$c.hydrateRoot=pg.hydrateRoot;function _a(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var j_={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,o){function s(f,d){if(!i[f]){if(!r[f]){var h=typeof _a=="function"&&_a;if(!d&&h)return h(f,!0);if(a)return a(f,!0);var p=new Error("Cannot find module '"+f+"'");throw p.code="MODULE_NOT_FOUND",p}var m=i[f]={exports:{}};r[f][0].call(m.exports,function(w){var g=r[f][1][w];return s(g||w)},m,m.exports,n,r,i,o)}return i[f].exports}for(var a=typeof _a=="function"&&_a,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(n,r,i){var o=n("./utils"),s=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var f,d,h,p,m,w,g,C=[],y=0,v=c.length,_=v,E=o.getTypeOf(c)!=="string";y<c.length;)_=v-y,h=E?(f=c[y++],d=y<v?c[y++]:0,y<v?c[y++]:0):(f=c.charCodeAt(y++),d=y<v?c.charCodeAt(y++):0,y<v?c.charCodeAt(y++):0),p=f>>2,m=(3&f)<<4|d>>4,w=1<_?(15&d)<<2|h>>6:64,g=2<_?63&h:64,C.push(a.charAt(p)+a.charAt(m)+a.charAt(w)+a.charAt(g));return C.join("")},i.decode=function(c){var f,d,h,p,m,w,g=0,C=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,_=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&_--,c.charAt(c.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=s.uint8array?new Uint8Array(0|_):new Array(0|_);g<c.length;)f=a.indexOf(c.charAt(g++))<<2|(p=a.indexOf(c.charAt(g++)))>>4,d=(15&p)<<4|(m=a.indexOf(c.charAt(g++)))>>2,h=(3&m)<<6|(w=a.indexOf(c.charAt(g++))),v[C++]=f,m!==64&&(v[C++]=d),w!==64&&(v[C++]=h);return v}},{"./support":30,"./utils":32}],2:[function(n,r,i){var o=n("./external"),s=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function f(d,h,p,m,w){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=m,this.compressedContent=w}f.prototype={getContentWorker:function(){var d=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(d,h,p){return d.pipe(new a).pipe(new c("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var o=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var o=n("./utils"),s=function(){for(var a,c=[],f=0;f<256;f++){a=f;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;c[f]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(f,d,h,p){var m=s,w=p+h;f^=-1;for(var g=p;g<w;g++)f=f>>>8^m[255&(f^d[g])];return-1^f}(0|c,a,a.length,0):function(f,d,h,p){var m=s,w=p+h;f^=-1;for(var g=p;g<w;g++)f=f>>>8^m[255&(f^d.charCodeAt(g))];return-1^f}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),f=o?"uint8array":"array";function d(h,p){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}i.magic="\b\0",a.inherits(d,c),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,h.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},i.compressWorker=function(h){return new d("Deflate",h)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function o(m,w){var g,C="";for(g=0;g<w;g++)C+=String.fromCharCode(255&m),m>>>=8;return C}function s(m,w,g,C,y,v){var _,E,A=m.file,k=m.compression,R=v!==f.utf8encode,N=a.transformTo("string",v(A.name)),D=a.transformTo("string",f.utf8encode(A.name)),F=A.comment,q=a.transformTo("string",v(F)),I=a.transformTo("string",f.utf8encode(F)),b=D.length!==A.name.length,x=I.length!==F.length,U="",Q="",G="",H=A.dir,B=A.date,K={crc32:0,compressedSize:0,uncompressedSize:0};w&&!g||(K.crc32=m.crc32,K.compressedSize=m.compressedSize,K.uncompressedSize=m.uncompressedSize);var V=0;w&&(V|=8),R||!b&&!x||(V|=2048);var O=0,oe=0;H&&(O|=16),y==="UNIX"?(oe=798,O|=function(j,ve){var Pe=j;return j||(Pe=ve?16893:33204),(65535&Pe)<<16}(A.unixPermissions,H)):(oe=20,O|=function(j){return 63&(j||0)}(A.dosPermissions)),_=B.getUTCHours(),_<<=6,_|=B.getUTCMinutes(),_<<=5,_|=B.getUTCSeconds()/2,E=B.getUTCFullYear()-1980,E<<=4,E|=B.getUTCMonth()+1,E<<=5,E|=B.getUTCDate(),b&&(Q=o(1,1)+o(d(N),4)+D,U+="up"+o(Q.length,2)+Q),x&&(G=o(1,1)+o(d(q),4)+I,U+="uc"+o(G.length,2)+G);var ne="";return ne+=`
\0`,ne+=o(V,2),ne+=k.magic,ne+=o(_,2),ne+=o(E,2),ne+=o(K.crc32,4),ne+=o(K.compressedSize,4),ne+=o(K.uncompressedSize,4),ne+=o(N.length,2),ne+=o(U.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ne+N+U,dirRecord:h.CENTRAL_FILE_HEADER+o(oe,2)+ne+o(q.length,2)+"\0\0\0\0"+o(O,4)+o(C,4)+N+U+q}}var a=n("../utils"),c=n("../stream/GenericWorker"),f=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(m,w,g,C){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=g,this.encodeFileName=C,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,c),p.prototype.push=function(m){var w=m.meta.percent||0,g=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(w+100*(g-C-1))/g:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var w=this.streamFiles&&!m.file.dir;if(w){var g=s(m,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var w=this.streamFiles&&!m.file.dir,g=s(m,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),w)this.push({data:function(C){return h.DATA_DESCRIPTOR+o(C.crc32,4)+o(C.compressedSize,4)+o(C.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var g=this.bytesWritten-m,C=function(y,v,_,E,A){var k=a.transformTo("string",A(E));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(y,2)+o(y,2)+o(v,4)+o(_,4)+o(k.length,2)+k}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var w=this;return m.on("data",function(g){w.processChunk(g)}),m.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),m.on("error",function(g){w.error(g)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var w=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var g=0;g<w.length;g++)try{w[g].error(m)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,w=0;w<m.length;w++)m[w].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var o=n("../compressions"),s=n("./ZipFileWorker");i.generateWorker=function(a,c,f){var d=new s(c.streamFiles,f,c.platform,c.encodeFileName),h=0;try{a.forEach(function(p,m){h++;var w=function(v,_){var E=v||_,A=o[E];if(!A)throw new Error(E+" is not a valid compression method !");return A}(m.options.compression,c.compression),g=m.options.compressionOptions||c.compressionOptions||{},C=m.dir,y=m.date;m._compressWorker(w,g).withStreamInfo("file",{name:p,dir:C,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var o=n("./utils"),s=n("./external"),a=n("./utf8"),c=n("./zipEntries"),f=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new s.Promise(function(m,w){var g=p.decompressed.getContentWorker().pipe(new f);g.on("error",function(C){w(C)}).on("end",function(){g.streamInfo.crc32!==p.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(p,m){var w=this;return m=o.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(p)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(g){var C=new c(m);return C.load(g),C}).then(function(g){var C=[s.Promise.resolve(g)],y=g.files;if(m.checkCRC32)for(var v=0;v<y.length;v++)C.push(h(y[v]));return s.Promise.all(C)}).then(function(g){for(var C=g.shift(),y=C.files,v=0;v<y.length;v++){var _=y[v],E=_.fileNameStr,A=o.resolve(_.fileNameStr);w.file(A,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(w.file(A).unsafeOriginalName=E)}return C.zipComment.length&&(w.comment=C.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var o=n("../utils"),s=n("../stream/GenericWorker");function a(c,f){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(a,s),a.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(d){f.push({data:d,meta:{percent:0}})}).on("error",function(d){f.isPaused?this.generatedError=d:f.error(d)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var o=n("readable-stream").Readable;function s(a,c,f){o.call(this,c),this._helper=a;var d=this;a.on("data",function(h,p){d.push(h)||d._helper.pause(),f&&f(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,i){function o(A,k,R){var N,D=a.getTypeOf(k),F=a.extend(R||{},d);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(A=y(A)),F.createFolders&&(N=C(A))&&v.call(this,N,!0);var q=D==="string"&&F.binary===!1&&F.base64===!1;R&&R.binary!==void 0||(F.binary=!q),(k instanceof h&&k.uncompressedSize===0||F.dir||!k||k.length===0)&&(F.base64=!1,F.binary=!0,k="",F.compression="STORE",D="string");var I=null;I=k instanceof h||k instanceof c?k:w.isNode&&w.isStream(k)?new g(A,k):a.prepareContent(A,k,F.binary,F.optimizedBinaryString,F.base64);var b=new p(A,I,F);this.files[A]=b}var s=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),w=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),C=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var k=A.lastIndexOf("/");return 0<k?A.substring(0,k):""},y=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},v=function(A,k){return k=k!==void 0?k:d.createFolders,A=y(A),this.files[A]||o.call(this,A,null,{dir:!0,createFolders:k}),this.files[A]};function _(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var k,R,N;for(k in this.files)N=this.files[k],(R=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&A(R,N)},filter:function(A){var k=[];return this.forEach(function(R,N){A(R,N)&&k.push(N)}),k},file:function(A,k,R){if(arguments.length!==1)return A=this.root+A,o.call(this,A,k,R),this;if(_(A)){var N=A;return this.filter(function(F,q){return!q.dir&&N.test(F)})}var D=this.files[this.root+A];return D&&!D.dir?D:null},folder:function(A){if(!A)return this;if(_(A))return this.filter(function(D,F){return F.dir&&A.test(D)});var k=this.root+A,R=v.call(this,k),N=this.clone();return N.root=R.name,N},remove:function(A){A=this.root+A;var k=this.files[A];if(k||(A.slice(-1)!=="/"&&(A+="/"),k=this.files[A]),k&&!k.dir)delete this.files[A];else for(var R=this.filter(function(D,F){return F.name.slice(0,A.length)===A}),N=0;N<R.length;N++)delete this.files[R[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var k,R={};try{if((R=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var N=R.comment||this.comment||"";k=m.generateWorker(this,R,N)}catch(D){(k=new c("error")).error(D)}return new f(k,R.type||"string",R.mimeType)},generateAsync:function(A,k){return this.generateInternalStream(A).accumulate(k)},generateNodeStream:function(A,k){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(k)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var o=n("./DataReader");function s(a){o.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),f=a.charCodeAt(1),d=a.charCodeAt(2),h=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===f&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),f=a.charCodeAt(1),d=a.charCodeAt(2),h=a.charCodeAt(3),p=this.readData(4);return c===p[0]&&f===p[1]&&d===p[2]&&h===p[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var o=n("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,f=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=a,f},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,i){var o=n("./Uint8ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var o=n("./DataReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var o=n("./ArrayReader");function s(a){o.call(this,a)}n("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var o=n("../utils"),s=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),f=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=o.getTypeOf(h);return o.checkSupport(p),p!=="string"||s.uint8array?p==="nodebuffer"?new f(h):s.uint8array?new d(o.transformTo("uint8array",h)):new a(o.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var o=n("./GenericWorker"),s=n("../utils");function a(c){o.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(a,o),a.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var o=n("./GenericWorker"),s=n("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,o),a.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var o=n("../utils"),s=n("./GenericWorker");function a(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(a,s),a.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}s.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var o=n("../utils"),s=n("./GenericWorker");function a(c){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){f.dataIsReady=!0,f.data=d,f.max=d&&d.length||0,f.type=o.getTypeOf(d),f.isPaused||f._tickAndRepeat()},function(d){f.error(d)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(c){a.processChunk(c)}),s.on("end",function(){a.end()}),s.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=o},{}],29:[function(n,r,i){var o=n("../utils"),s=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),f=n("../support"),d=n("../external"),h=null;if(f.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(w,g){return new d.Promise(function(C,y){var v=[],_=w._internalType,E=w._outputType,A=w._mimeType;w.on("data",function(k,R){v.push(k),g&&g(R)}).on("error",function(k){v=[],y(k)}).on("end",function(){try{var k=function(R,N,D){switch(R){case"blob":return o.newBlob(o.transformTo("arraybuffer",N),D);case"base64":return c.encode(N);default:return o.transformTo(R,N)}}(E,function(R,N){var D,F=0,q=null,I=0;for(D=0;D<N.length;D++)I+=N[D].length;switch(R){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(q=new Uint8Array(I),D=0;D<N.length;D++)q.set(N[D],F),F+=N[D].length;return q;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+R+"'")}}(_,v),A);C(k)}catch(R){y(R)}v=[]}).resume()})}function m(w,g,C){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=C,o.checkSupport(y),this._worker=w.pipe(new s(y)),w.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}m.prototype={accumulate:function(w){return p(this,w)},on:function(w,g){var C=this;return w==="data"?this._worker.on(w,function(y){g.call(C,y.data,y.meta)}):this._worker.on(w,function(){o.delay(g,arguments,C)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var o=n("./utils"),s=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),f=new Array(256),d=0;d<256;d++)f[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;f[254]=f[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}i.utf8encode=function(m){return s.nodebuffer?a.newBufferFrom(m,"utf-8"):function(w){var g,C,y,v,_,E=w.length,A=0;for(v=0;v<E;v++)(64512&(C=w.charCodeAt(v)))==55296&&v+1<E&&(64512&(y=w.charCodeAt(v+1)))==56320&&(C=65536+(C-55296<<10)+(y-56320),v++),A+=C<128?1:C<2048?2:C<65536?3:4;for(g=s.uint8array?new Uint8Array(A):new Array(A),v=_=0;_<A;v++)(64512&(C=w.charCodeAt(v)))==55296&&v+1<E&&(64512&(y=w.charCodeAt(v+1)))==56320&&(C=65536+(C-55296<<10)+(y-56320),v++),C<128?g[_++]=C:(C<2048?g[_++]=192|C>>>6:(C<65536?g[_++]=224|C>>>12:(g[_++]=240|C>>>18,g[_++]=128|C>>>12&63),g[_++]=128|C>>>6&63),g[_++]=128|63&C);return g}(m)},i.utf8decode=function(m){return s.nodebuffer?o.transformTo("nodebuffer",m).toString("utf-8"):function(w){var g,C,y,v,_=w.length,E=new Array(2*_);for(g=C=0;g<_;)if((y=w[g++])<128)E[C++]=y;else if(4<(v=f[y]))E[C++]=65533,g+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&g<_;)y=y<<6|63&w[g++],v--;1<v?E[C++]=65533:y<65536?E[C++]=y:(y-=65536,E[C++]=55296|y>>10&1023,E[C++]=56320|1023&y)}return E.length!==C&&(E.subarray?E=E.subarray(0,C):E.length=C),o.applyFromCharCode(E)}(m=o.transformTo(s.uint8array?"uint8array":"array",m))},o.inherits(h,c),h.prototype.processChunk=function(m){var w=o.transformTo(s.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=w;(w=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),w.set(g,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var C=function(v,_){var E;for((_=_||v.length)>v.length&&(_=v.length),E=_-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?_:E+f[v[E]]>_?E:_}(w),y=w;C!==w.length&&(s.uint8array?(y=w.subarray(0,C),this.leftOver=w.subarray(C,w.length)):(y=w.slice(0,C),this.leftOver=w.slice(C,w.length))),this.push({data:i.utf8decode(y),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,o.inherits(p,c),p.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var o=n("./support"),s=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function f(g){return g}function d(g,C){for(var y=0;y<g.length;++y)C[y]=255&g.charCodeAt(y);return C}n("setimmediate"),i.newBlob=function(g,C){i.checkSupport("blob");try{return new Blob([g],{type:C})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,C,y){var v=[],_=0,E=g.length;if(E<=y)return String.fromCharCode.apply(null,g);for(;_<E;)C==="array"||C==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(_,Math.min(_+y,E)))):v.push(String.fromCharCode.apply(null,g.subarray(_,Math.min(_+y,E)))),_+=y;return v.join("")},stringifyByChar:function(g){for(var C="",y=0;y<g.length;y++)C+=String.fromCharCode(g[y]);return C},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(g){var C=65536,y=i.getTypeOf(g),v=!0;if(y==="uint8array"?v=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=h.applyCanBeUsed.nodebuffer),v)for(;1<C;)try{return h.stringifyByChunk(g,y,C)}catch{C=Math.floor(C/2)}return h.stringifyByChar(g)}function m(g,C){for(var y=0;y<g.length;y++)C[y]=g[y];return C}i.applyFromCharCode=p;var w={};w.string={string:f,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return w.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,a.allocBuffer(g.length))}},w.array={string:p,array:f,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},w.arraybuffer={string:function(g){return p(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:f,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},w.uint8array={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:f,nodebuffer:function(g){return a.newBufferFrom(g)}},w.nodebuffer={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return w.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:f},i.transformTo=function(g,C){if(C=C||"",!g)return C;i.checkSupport(g);var y=i.getTypeOf(C);return w[y][g](C)},i.resolve=function(g){for(var C=g.split("/"),y=[],v=0;v<C.length;v++){var _=C[v];_==="."||_===""&&v!==0&&v!==C.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var C,y,v="";for(y=0;y<(g||"").length;y++)v+="\\x"+((C=g.charCodeAt(y))<16?"0":"")+C.toString(16).toUpperCase();return v},i.delay=function(g,C,y){setImmediate(function(){g.apply(y||null,C||[])})},i.inherits=function(g,C){function y(){}y.prototype=C.prototype,g.prototype=new y},i.extend=function(){var g,C,y={};for(g=0;g<arguments.length;g++)for(C in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],C)&&y[C]===void 0&&(y[C]=arguments[g][C]);return y},i.prepareContent=function(g,C,y,v,_){return c.Promise.resolve(C).then(function(E){return o.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,k){var R=new FileReader;R.onload=function(N){A(N.target.result)},R.onerror=function(N){k(N.target.error)},R.readAsArrayBuffer(E)}):E}).then(function(E){var A=i.getTypeOf(E);return A?(A==="arraybuffer"?E=i.transformTo("uint8array",E):A==="string"&&(_?E=s.decode(E):y&&v!==!0&&(E=function(k){return d(k,o.uint8array?new Uint8Array(k.length):new Array(k.length))}(E))),E):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./signature"),c=n("./zipEntry"),f=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(p)+", expected "+s.pretty(h)+")")}},isSignature:function(h,p){var m=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===p;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=f.uint8array?"uint8array":"array",m=s.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,m,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var w=p-m;if(0<w)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=o(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var o=n("./reader/readerFor"),s=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),f=n("./utf8"),d=n("./compressions"),h=n("./support");function p(m,w){this.options=m,this.loadOptions=w}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var w,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(C){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===C)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var w=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(w),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var w,g,C,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)w=m.readInt(2),g=m.readInt(2),C=m.readData(g),this.extraFields[w]={id:w,length:g,value:C};m.setIndex(y)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var g=s.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var y=s.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var w=o(m.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var w=o(m.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(m.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function o(w,g,C){this.name=w,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=g,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var s=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),f=n("./compressedObject"),d=n("./stream/GenericWorker");o.prototype={internalStream:function(w){var g=null,C="string";try{if(!w)throw new Error("No output type specified.");var y=(C=w.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(g=g.pipe(new c.Utf8EncodeWorker)),!v&&y&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(_){(g=new d("error")).error(_)}return new s(g,C,"")},async:function(w,g){return this.internalStream(w).accumulate(g)},nodeStream:function(w,g){return this.internalStream(w||"nodebuffer").toNodejsStream(g)},_compressWorker:function(w,g){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(C,w,g)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)o.prototype[h[m]]=p;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(o){var s,a,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var f=0,d=new c(w),h=o.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){w(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(w,0)};else{var p=new o.MessageChannel;p.port1.onmessage=w,s=function(){p.port2.postMessage(0)}}var m=[];function w(){var g,C;a=!0;for(var y=m.length;y;){for(C=m,m=[],g=-1;++g<y;)C[g]();y=m.length}a=!1}r.exports=function(g){m.push(g)!==1||a||s()}}).call(this,typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var o=n("immediate");function s(){}var a={},c=["REJECTED"],f=["FULFILLED"],d=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==s&&g(this,y)}function p(y,v,_){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(y,v,_){o(function(){var E;try{E=v(_)}catch(A){return a.reject(y,A)}E===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,E)})}function w(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function g(y,v){var _=!1;function E(R){_||(_=!0,a.reject(y,R))}function A(R){_||(_=!0,a.resolve(y,R))}var k=C(function(){v(A,E)});k.status==="error"&&E(k.value)}function C(y,v){var _={};try{_.value=y(v),_.status="success"}catch(E){_.status="error",_.value=E}return _}(r.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(_){return v.resolve(y()).then(function(){return _})},function(_){return v.resolve(y()).then(function(){throw _})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,v){if(typeof y!="function"&&this.state===f||typeof v!="function"&&this.state===c)return this;var _=new this.constructor(s);return this.state!==d?m(_,this.state===f?y:v,this.outcome):this.queue.push(new p(_,y,v)),_},p.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},p.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},p.prototype.callRejected=function(y){a.reject(this.promise,y)},p.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},a.resolve=function(y,v){var _=C(w,v);if(_.status==="error")return a.reject(y,_.value);var E=_.value;if(E)g(y,E);else{y.state=f,y.outcome=v;for(var A=-1,k=y.queue.length;++A<k;)y.queue[A].callFulfilled(v)}return y},a.reject=function(y,v){y.state=c,y.outcome=v;for(var _=-1,E=y.queue.length;++_<E;)y.queue[_].callRejected(v);return y},h.resolve=function(y){return y instanceof this?y:a.resolve(new this(s),y)},h.reject=function(y){var v=new this(s);return a.reject(v,y)},h.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,E=!1;if(!_)return this.resolve([]);for(var A=new Array(_),k=0,R=-1,N=new this(s);++R<_;)D(y[R],R);return N;function D(F,q){v.resolve(F).then(function(I){A[q]=I,++k!==_||E||(E=!0,a.resolve(N,A))},function(I){E||(E=!0,a.reject(N,I))})}},h.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,E=!1;if(!_)return this.resolve([]);for(var A=-1,k=new this(s);++A<_;)R=y[A],v.resolve(R).then(function(N){E||(E=!0,a.resolve(k,N))},function(N){E||(E=!0,a.reject(k,N))});var R;return k}},{immediate:36}],38:[function(n,r,i){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var o=n("./zlib/deflate"),s=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),f=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,m=0,w=8;function g(y){if(!(this instanceof g))return new g(y);this.options=s.assign({level:p,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var _=o.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(_!==h)throw new Error(c[_]);if(v.header&&o.deflateSetHeader(this.strm,v.header),v.dictionary){var E;if(E=typeof v.dictionary=="string"?a.string2buf(v.dictionary):d.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(_=o.deflateSetDictionary(this.strm,E))!==h)throw new Error(c[_]);this._dict_set=!0}}function C(y,v){var _=new g(v);if(_.push(y,!0),_.err)throw _.msg||c[_.err];return _.result}g.prototype.push=function(y,v){var _,E,A=this.strm,k=this.options.chunkSize;if(this.ended)return!1;E=v===~~v?v:v===!0?4:0,typeof y=="string"?A.input=a.string2buf(y):d.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new s.Buf8(k),A.next_out=0,A.avail_out=k),(_=o.deflate(A,E))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(A.output,A.next_out))):this.onData(s.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&_!==1);return E===4?(_=o.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):E!==2||(this.onEnd(h),!(A.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=g,i.deflate=C,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,C(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,C(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var o=n("./zlib/inflate"),s=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),f=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||g&&g.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=o.inflateInit2(this.strm,C.windowBits);if(y!==c.Z_OK)throw new Error(f[y]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function w(g,C){var y=new m(C);if(y.push(g,!0),y.err)throw y.msg||f[y.err];return y.result}m.prototype.push=function(g,C){var y,v,_,E,A,k,R=this.strm,N=this.options.chunkSize,D=this.options.dictionary,F=!1;if(this.ended)return!1;v=C===~~C?C:C===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?R.input=a.binstring2buf(g):p.call(g)==="[object ArrayBuffer]"?R.input=new Uint8Array(g):R.input=g,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new s.Buf8(N),R.next_out=0,R.avail_out=N),(y=o.inflate(R,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&D&&(k=typeof D=="string"?a.string2buf(D):p.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,y=o.inflateSetDictionary(this.strm,k)),y===c.Z_BUF_ERROR&&F===!0&&(y=c.Z_OK,F=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&y!==c.Z_STREAM_END&&(R.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(R.output,R.next_out),E=R.next_out-_,A=a.buf2string(R.output,_),R.next_out=E,R.avail_out=N-E,E&&s.arraySet(R.output,R.output,_,E,0),this.onData(A)):this.onData(s.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(F=!0)}while((0<R.avail_in||R.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(y=o.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=m,i.inflate=w,i.inflateRaw=function(g,C){return(C=C||{}).raw=!0,w(g,C)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var d=f.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])}}return c},i.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var s={arraySet:function(c,f,d,h,p){if(f.subarray&&c.subarray)c.set(f.subarray(d,d+h),p);else for(var m=0;m<h;m++)c[p+m]=f[d+m]},flattenChunks:function(c){var f,d,h,p,m,w;for(f=h=0,d=c.length;f<d;f++)h+=c[f].length;for(w=new Uint8Array(h),f=p=0,d=c.length;f<d;f++)m=c[f],w.set(m,p),p+=m.length;return w}},a={arraySet:function(c,f,d,h,p){for(var m=0;m<h;m++)c[p+m]=f[d+m]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(o)},{}],42:[function(n,r,i){var o=n("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new o.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function d(h,p){if(p<65537&&(h.subarray&&a||!h.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(h,p));for(var m="",w=0;w<p;w++)m+=String.fromCharCode(h[w]);return m}c[254]=c[254]=1,i.string2buf=function(h){var p,m,w,g,C,y=h.length,v=0;for(g=0;g<y;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(w=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),g++),v+=m<128?1:m<2048?2:m<65536?3:4;for(p=new o.Buf8(v),g=C=0;C<v;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<y&&(64512&(w=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),g++),m<128?p[C++]=m:(m<2048?p[C++]=192|m>>>6:(m<65536?p[C++]=224|m>>>12:(p[C++]=240|m>>>18,p[C++]=128|m>>>12&63),p[C++]=128|m>>>6&63),p[C++]=128|63&m);return p},i.buf2binstring=function(h){return d(h,h.length)},i.binstring2buf=function(h){for(var p=new o.Buf8(h.length),m=0,w=p.length;m<w;m++)p[m]=h.charCodeAt(m);return p},i.buf2string=function(h,p){var m,w,g,C,y=p||h.length,v=new Array(2*y);for(m=w=0;m<y;)if((g=h[m++])<128)v[w++]=g;else if(4<(C=c[g]))v[w++]=65533,m+=C-1;else{for(g&=C===2?31:C===3?15:7;1<C&&m<y;)g=g<<6|63&h[m++],C--;1<C?v[w++]=65533:g<65536?v[w++]=g:(g-=65536,v[w++]=55296|g>>10&1023,v[w++]=56320|1023&g)}return d(v,w)},i.utf8border=function(h,p){var m;for((p=p||h.length)>h.length&&(p=h.length),m=p-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?p:m+c[h[m]]>p?m:p}},{"./common":41}],43:[function(n,r,i){r.exports=function(o,s,a,c){for(var f=65535&o|0,d=o>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;d=d+(f=f+s[c++]|0)|0,--h;);f%=65521,d%=65521}return f|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var o=function(){for(var s,a=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;a[c]=s}return a}();r.exports=function(s,a,c,f){var d=o,h=f+c;s^=-1;for(var p=f;p<h;p++)s=s>>>8^d[255&(s^a[p])];return-1^s}},{}],46:[function(n,r,i){var o,s=n("../utils/common"),a=n("./trees"),c=n("./adler32"),f=n("./crc32"),d=n("./messages"),h=0,p=4,m=0,w=-2,g=-1,C=4,y=2,v=8,_=9,E=286,A=30,k=19,R=2*E+1,N=15,D=3,F=258,q=F+D+1,I=42,b=113,x=1,U=2,Q=3,G=4;function H(T,J){return T.msg=d[J],J}function B(T){return(T<<1)-(4<T?9:0)}function K(T){for(var J=T.length;0<=--J;)T[J]=0}function V(T){var J=T.state,W=J.pending;W>T.avail_out&&(W=T.avail_out),W!==0&&(s.arraySet(T.output,J.pending_buf,J.pending_out,W,T.next_out),T.next_out+=W,J.pending_out+=W,T.total_out+=W,T.avail_out-=W,J.pending-=W,J.pending===0&&(J.pending_out=0))}function O(T,J){a._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,J),T.block_start=T.strstart,V(T.strm)}function oe(T,J){T.pending_buf[T.pending++]=J}function ne(T,J){T.pending_buf[T.pending++]=J>>>8&255,T.pending_buf[T.pending++]=255&J}function j(T,J){var W,M,P=T.max_chain_length,L=T.strstart,Y=T.prev_length,X=T.nice_match,$=T.strstart>T.w_size-q?T.strstart-(T.w_size-q):0,ee=T.window,re=T.w_mask,te=T.prev,ue=T.strstart+F,xe=ee[L+Y-1],ge=ee[L+Y];T.prev_length>=T.good_match&&(P>>=2),X>T.lookahead&&(X=T.lookahead);do if(ee[(W=J)+Y]===ge&&ee[W+Y-1]===xe&&ee[W]===ee[L]&&ee[++W]===ee[L+1]){L+=2,W++;do;while(ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&ee[++L]===ee[++W]&&L<ue);if(M=F-(ue-L),L=ue-F,Y<M){if(T.match_start=J,X<=(Y=M))break;xe=ee[L+Y-1],ge=ee[L+Y]}}while((J=te[J&re])>$&&--P!=0);return Y<=T.lookahead?Y:T.lookahead}function ve(T){var J,W,M,P,L,Y,X,$,ee,re,te=T.w_size;do{if(P=T.window_size-T.lookahead-T.strstart,T.strstart>=te+(te-q)){for(s.arraySet(T.window,T.window,te,te,0),T.match_start-=te,T.strstart-=te,T.block_start-=te,J=W=T.hash_size;M=T.head[--J],T.head[J]=te<=M?M-te:0,--W;);for(J=W=te;M=T.prev[--J],T.prev[J]=te<=M?M-te:0,--W;);P+=te}if(T.strm.avail_in===0)break;if(Y=T.strm,X=T.window,$=T.strstart+T.lookahead,ee=P,re=void 0,re=Y.avail_in,ee<re&&(re=ee),W=re===0?0:(Y.avail_in-=re,s.arraySet(X,Y.input,Y.next_in,re,$),Y.state.wrap===1?Y.adler=c(Y.adler,X,re,$):Y.state.wrap===2&&(Y.adler=f(Y.adler,X,re,$)),Y.next_in+=re,Y.total_in+=re,re),T.lookahead+=W,T.lookahead+T.insert>=D)for(L=T.strstart-T.insert,T.ins_h=T.window[L],T.ins_h=(T.ins_h<<T.hash_shift^T.window[L+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[L+D-1])&T.hash_mask,T.prev[L&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=L,L++,T.insert--,!(T.lookahead+T.insert<D)););}while(T.lookahead<q&&T.strm.avail_in!==0)}function Pe(T,J){for(var W,M;;){if(T.lookahead<q){if(ve(T),T.lookahead<q&&J===h)return x;if(T.lookahead===0)break}if(W=0,T.lookahead>=D&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),W!==0&&T.strstart-W<=T.w_size-q&&(T.match_length=j(T,W)),T.match_length>=D)if(M=a._tr_tally(T,T.strstart-T.match_start,T.match_length-D),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=D){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else M=a._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(M&&(O(T,!1),T.strm.avail_out===0))return x}return T.insert=T.strstart<D-1?T.strstart:D-1,J===p?(O(T,!0),T.strm.avail_out===0?Q:G):T.last_lit&&(O(T,!1),T.strm.avail_out===0)?x:U}function he(T,J){for(var W,M,P;;){if(T.lookahead<q){if(ve(T),T.lookahead<q&&J===h)return x;if(T.lookahead===0)break}if(W=0,T.lookahead>=D&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=D-1,W!==0&&T.prev_length<T.max_lazy_match&&T.strstart-W<=T.w_size-q&&(T.match_length=j(T,W),T.match_length<=5&&(T.strategy===1||T.match_length===D&&4096<T.strstart-T.match_start)&&(T.match_length=D-1)),T.prev_length>=D&&T.match_length<=T.prev_length){for(P=T.strstart+T.lookahead-D,M=a._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-D),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=P&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+D-1])&T.hash_mask,W=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=D-1,T.strstart++,M&&(O(T,!1),T.strm.avail_out===0))return x}else if(T.match_available){if((M=a._tr_tally(T,0,T.window[T.strstart-1]))&&O(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return x}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(M=a._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<D-1?T.strstart:D-1,J===p?(O(T,!0),T.strm.avail_out===0?Q:G):T.last_lit&&(O(T,!1),T.strm.avail_out===0)?x:U}function _e(T,J,W,M,P){this.good_length=T,this.max_lazy=J,this.nice_length=W,this.max_chain=M,this.func=P}function Ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*R),this.dyn_dtree=new s.Buf16(2*(2*A+1)),this.bl_tree=new s.Buf16(2*(2*k+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*E+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Be(T){var J;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=y,(J=T.state).pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?I:b,T.adler=J.wrap===2?0:1,J.last_flush=h,a._tr_init(J),m):H(T,w)}function Lt(T){var J=Be(T);return J===m&&function(W){W.window_size=2*W.w_size,K(W.head),W.max_lazy_match=o[W.level].max_lazy,W.good_match=o[W.level].good_length,W.nice_match=o[W.level].nice_length,W.max_chain_length=o[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=D-1,W.match_available=0,W.ins_h=0}(T.state),J}function kt(T,J,W,M,P,L){if(!T)return w;var Y=1;if(J===g&&(J=6),M<0?(Y=0,M=-M):15<M&&(Y=2,M-=16),P<1||_<P||W!==v||M<8||15<M||J<0||9<J||L<0||C<L)return H(T,w);M===8&&(M=9);var X=new Ye;return(T.state=X).strm=T,X.wrap=Y,X.gzhead=null,X.w_bits=M,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=P+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+D-1)/D),X.window=new s.Buf8(2*X.w_size),X.head=new s.Buf16(X.hash_size),X.prev=new s.Buf16(X.w_size),X.lit_bufsize=1<<P+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new s.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=J,X.strategy=L,X.method=W,Lt(T)}o=[new _e(0,0,0,0,function(T,J){var W=65535;for(W>T.pending_buf_size-5&&(W=T.pending_buf_size-5);;){if(T.lookahead<=1){if(ve(T),T.lookahead===0&&J===h)return x;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var M=T.block_start+W;if((T.strstart===0||T.strstart>=M)&&(T.lookahead=T.strstart-M,T.strstart=M,O(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-q&&(O(T,!1),T.strm.avail_out===0))return x}return T.insert=0,J===p?(O(T,!0),T.strm.avail_out===0?Q:G):(T.strstart>T.block_start&&(O(T,!1),T.strm.avail_out),x)}),new _e(4,4,8,4,Pe),new _e(4,5,16,8,Pe),new _e(4,6,32,32,Pe),new _e(4,4,16,16,he),new _e(8,16,32,32,he),new _e(8,16,128,128,he),new _e(8,32,128,256,he),new _e(32,128,258,1024,he),new _e(32,258,258,4096,he)],i.deflateInit=function(T,J){return kt(T,J,v,15,8,0)},i.deflateInit2=kt,i.deflateReset=Lt,i.deflateResetKeep=Be,i.deflateSetHeader=function(T,J){return T&&T.state?T.state.wrap!==2?w:(T.state.gzhead=J,m):w},i.deflate=function(T,J){var W,M,P,L;if(!T||!T.state||5<J||J<0)return T?H(T,w):w;if(M=T.state,!T.output||!T.input&&T.avail_in!==0||M.status===666&&J!==p)return H(T,T.avail_out===0?-5:w);if(M.strm=T,W=M.last_flush,M.last_flush=J,M.status===I)if(M.wrap===2)T.adler=0,oe(M,31),oe(M,139),oe(M,8),M.gzhead?(oe(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),oe(M,255&M.gzhead.time),oe(M,M.gzhead.time>>8&255),oe(M,M.gzhead.time>>16&255),oe(M,M.gzhead.time>>24&255),oe(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),oe(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(oe(M,255&M.gzhead.extra.length),oe(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(T.adler=f(T.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(oe(M,0),oe(M,0),oe(M,0),oe(M,0),oe(M,0),oe(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),oe(M,3),M.status=b);else{var Y=v+(M.w_bits-8<<4)<<8;Y|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(Y|=32),Y+=31-Y%31,M.status=b,ne(M,Y),M.strstart!==0&&(ne(M,T.adler>>>16),ne(M,65535&T.adler)),T.adler=1}if(M.status===69)if(M.gzhead.extra){for(P=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>P&&(T.adler=f(T.adler,M.pending_buf,M.pending-P,P)),V(T),P=M.pending,M.pending!==M.pending_buf_size));)oe(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>P&&(T.adler=f(T.adler,M.pending_buf,M.pending-P,P)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){P=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>P&&(T.adler=f(T.adler,M.pending_buf,M.pending-P,P)),V(T),P=M.pending,M.pending===M.pending_buf_size)){L=1;break}L=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,oe(M,L)}while(L!==0);M.gzhead.hcrc&&M.pending>P&&(T.adler=f(T.adler,M.pending_buf,M.pending-P,P)),L===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){P=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>P&&(T.adler=f(T.adler,M.pending_buf,M.pending-P,P)),V(T),P=M.pending,M.pending===M.pending_buf_size)){L=1;break}L=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,oe(M,L)}while(L!==0);M.gzhead.hcrc&&M.pending>P&&(T.adler=f(T.adler,M.pending_buf,M.pending-P,P)),L===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&V(T),M.pending+2<=M.pending_buf_size&&(oe(M,255&T.adler),oe(M,T.adler>>8&255),T.adler=0,M.status=b)):M.status=b),M.pending!==0){if(V(T),T.avail_out===0)return M.last_flush=-1,m}else if(T.avail_in===0&&B(J)<=B(W)&&J!==p)return H(T,-5);if(M.status===666&&T.avail_in!==0)return H(T,-5);if(T.avail_in!==0||M.lookahead!==0||J!==h&&M.status!==666){var X=M.strategy===2?function($,ee){for(var re;;){if($.lookahead===0&&(ve($),$.lookahead===0)){if(ee===h)return x;break}if($.match_length=0,re=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,re&&(O($,!1),$.strm.avail_out===0))return x}return $.insert=0,ee===p?(O($,!0),$.strm.avail_out===0?Q:G):$.last_lit&&(O($,!1),$.strm.avail_out===0)?x:U}(M,J):M.strategy===3?function($,ee){for(var re,te,ue,xe,ge=$.window;;){if($.lookahead<=F){if(ve($),$.lookahead<=F&&ee===h)return x;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=D&&0<$.strstart&&(te=ge[ue=$.strstart-1])===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]){xe=$.strstart+F;do;while(te===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]&&te===ge[++ue]&&ue<xe);$.match_length=F-(xe-ue),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=D?(re=a._tr_tally($,1,$.match_length-D),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(re=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),re&&(O($,!1),$.strm.avail_out===0))return x}return $.insert=0,ee===p?(O($,!0),$.strm.avail_out===0?Q:G):$.last_lit&&(O($,!1),$.strm.avail_out===0)?x:U}(M,J):o[M.level].func(M,J);if(X!==Q&&X!==G||(M.status=666),X===x||X===Q)return T.avail_out===0&&(M.last_flush=-1),m;if(X===U&&(J===1?a._tr_align(M):J!==5&&(a._tr_stored_block(M,0,0,!1),J===3&&(K(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),V(T),T.avail_out===0))return M.last_flush=-1,m}return J!==p?m:M.wrap<=0?1:(M.wrap===2?(oe(M,255&T.adler),oe(M,T.adler>>8&255),oe(M,T.adler>>16&255),oe(M,T.adler>>24&255),oe(M,255&T.total_in),oe(M,T.total_in>>8&255),oe(M,T.total_in>>16&255),oe(M,T.total_in>>24&255)):(ne(M,T.adler>>>16),ne(M,65535&T.adler)),V(T),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?m:1)},i.deflateEnd=function(T){var J;return T&&T.state?(J=T.state.status)!==I&&J!==69&&J!==73&&J!==91&&J!==103&&J!==b&&J!==666?H(T,w):(T.state=null,J===b?H(T,-3):m):w},i.deflateSetDictionary=function(T,J){var W,M,P,L,Y,X,$,ee,re=J.length;if(!T||!T.state||(L=(W=T.state).wrap)===2||L===1&&W.status!==I||W.lookahead)return w;for(L===1&&(T.adler=c(T.adler,J,re,0)),W.wrap=0,re>=W.w_size&&(L===0&&(K(W.head),W.strstart=0,W.block_start=0,W.insert=0),ee=new s.Buf8(W.w_size),s.arraySet(ee,J,re-W.w_size,W.w_size,0),J=ee,re=W.w_size),Y=T.avail_in,X=T.next_in,$=T.input,T.avail_in=re,T.next_in=0,T.input=J,ve(W);W.lookahead>=D;){for(M=W.strstart,P=W.lookahead-(D-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[M+D-1])&W.hash_mask,W.prev[M&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=M,M++,--P;);W.strstart=M,W.lookahead=D-1,ve(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=D-1,W.match_available=0,T.next_in=X,T.input=$,T.avail_in=Y,W.wrap=L,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(o,s){var a,c,f,d,h,p,m,w,g,C,y,v,_,E,A,k,R,N,D,F,q,I,b,x,U;a=o.state,c=o.next_in,x=o.input,f=c+(o.avail_in-5),d=o.next_out,U=o.output,h=d-(s-o.avail_out),p=d+(o.avail_out-257),m=a.dmax,w=a.wsize,g=a.whave,C=a.wnext,y=a.window,v=a.hold,_=a.bits,E=a.lencode,A=a.distcode,k=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;e:do{_<15&&(v+=x[c++]<<_,_+=8,v+=x[c++]<<_,_+=8),N=E[v&k];t:for(;;){if(v>>>=D=N>>>24,_-=D,(D=N>>>16&255)===0)U[d++]=65535&N;else{if(!(16&D)){if(!(64&D)){N=E[(65535&N)+(v&(1<<D)-1)];continue t}if(32&D){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}F=65535&N,(D&=15)&&(_<D&&(v+=x[c++]<<_,_+=8),F+=v&(1<<D)-1,v>>>=D,_-=D),_<15&&(v+=x[c++]<<_,_+=8,v+=x[c++]<<_,_+=8),N=A[v&R];n:for(;;){if(v>>>=D=N>>>24,_-=D,!(16&(D=N>>>16&255))){if(!(64&D)){N=A[(65535&N)+(v&(1<<D)-1)];continue n}o.msg="invalid distance code",a.mode=30;break e}if(q=65535&N,_<(D&=15)&&(v+=x[c++]<<_,(_+=8)<D&&(v+=x[c++]<<_,_+=8)),m<(q+=v&(1<<D)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=D,_-=D,(D=d-h)<q){if(g<(D=q-D)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(b=y,(I=0)===C){if(I+=w-D,D<F){for(F-=D;U[d++]=y[I++],--D;);I=d-q,b=U}}else if(C<D){if(I+=w+C-D,(D-=C)<F){for(F-=D;U[d++]=y[I++],--D;);if(I=0,C<F){for(F-=D=C;U[d++]=y[I++],--D;);I=d-q,b=U}}}else if(I+=C-D,D<F){for(F-=D;U[d++]=y[I++],--D;);I=d-q,b=U}for(;2<F;)U[d++]=b[I++],U[d++]=b[I++],U[d++]=b[I++],F-=3;F&&(U[d++]=b[I++],1<F&&(U[d++]=b[I++]))}else{for(I=d-q;U[d++]=U[I++],U[d++]=U[I++],U[d++]=U[I++],2<(F-=3););F&&(U[d++]=U[I++],1<F&&(U[d++]=U[I++]))}break}}break}}while(c<f&&d<p);c-=F=_>>3,v&=(1<<(_-=F<<3))-1,o.next_in=c,o.next_out=d,o.avail_in=c<f?f-c+5:5-(c-f),o.avail_out=d<p?p-d+257:257-(d-p),a.hold=v,a.bits=_}},{}],49:[function(n,r,i){var o=n("../utils/common"),s=n("./adler32"),a=n("./crc32"),c=n("./inffast"),f=n("./inftrees"),d=1,h=2,p=0,m=-2,w=1,g=852,C=592;function y(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(I){var b;return I&&I.state?(b=I.state,I.total_in=I.total_out=b.total=0,I.msg="",b.wrap&&(I.adler=1&b.wrap),b.mode=w,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new o.Buf32(g),b.distcode=b.distdyn=new o.Buf32(C),b.sane=1,b.back=-1,p):m}function E(I){var b;return I&&I.state?((b=I.state).wsize=0,b.whave=0,b.wnext=0,_(I)):m}function A(I,b){var x,U;return I&&I.state?(U=I.state,b<0?(x=0,b=-b):(x=1+(b>>4),b<48&&(b&=15)),b&&(b<8||15<b)?m:(U.window!==null&&U.wbits!==b&&(U.window=null),U.wrap=x,U.wbits=b,E(I))):m}function k(I,b){var x,U;return I?(U=new v,(I.state=U).window=null,(x=A(I,b))!==p&&(I.state=null),x):m}var R,N,D=!0;function F(I){if(D){var b;for(R=new o.Buf32(512),N=new o.Buf32(32),b=0;b<144;)I.lens[b++]=8;for(;b<256;)I.lens[b++]=9;for(;b<280;)I.lens[b++]=7;for(;b<288;)I.lens[b++]=8;for(f(d,I.lens,0,288,R,0,I.work,{bits:9}),b=0;b<32;)I.lens[b++]=5;f(h,I.lens,0,32,N,0,I.work,{bits:5}),D=!1}I.lencode=R,I.lenbits=9,I.distcode=N,I.distbits=5}function q(I,b,x,U){var Q,G=I.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new o.Buf8(G.wsize)),U>=G.wsize?(o.arraySet(G.window,b,x-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(U<(Q=G.wsize-G.wnext)&&(Q=U),o.arraySet(G.window,b,x-U,Q,G.wnext),(U-=Q)?(o.arraySet(G.window,b,x-U,U,0),G.wnext=U,G.whave=G.wsize):(G.wnext+=Q,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=Q))),0}i.inflateReset=E,i.inflateReset2=A,i.inflateResetKeep=_,i.inflateInit=function(I){return k(I,15)},i.inflateInit2=k,i.inflate=function(I,b){var x,U,Q,G,H,B,K,V,O,oe,ne,j,ve,Pe,he,_e,Ye,Be,Lt,kt,T,J,W,M,P=0,L=new o.Buf8(4),Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return m;(x=I.state).mode===12&&(x.mode=13),H=I.next_out,Q=I.output,K=I.avail_out,G=I.next_in,U=I.input,B=I.avail_in,V=x.hold,O=x.bits,oe=B,ne=K,J=p;e:for(;;)switch(x.mode){case w:if(x.wrap===0){x.mode=13;break}for(;O<16;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(2&x.wrap&&V===35615){L[x.check=0]=255&V,L[1]=V>>>8&255,x.check=a(x.check,L,2,0),O=V=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&V)<<8)+(V>>8))%31){I.msg="incorrect header check",x.mode=30;break}if((15&V)!=8){I.msg="unknown compression method",x.mode=30;break}if(O-=4,T=8+(15&(V>>>=4)),x.wbits===0)x.wbits=T;else if(T>x.wbits){I.msg="invalid window size",x.mode=30;break}x.dmax=1<<T,I.adler=x.check=1,x.mode=512&V?10:12,O=V=0;break;case 2:for(;O<16;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(x.flags=V,(255&x.flags)!=8){I.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){I.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=V>>8&1),512&x.flags&&(L[0]=255&V,L[1]=V>>>8&255,x.check=a(x.check,L,2,0)),O=V=0,x.mode=3;case 3:for(;O<32;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}x.head&&(x.head.time=V),512&x.flags&&(L[0]=255&V,L[1]=V>>>8&255,L[2]=V>>>16&255,L[3]=V>>>24&255,x.check=a(x.check,L,4,0)),O=V=0,x.mode=4;case 4:for(;O<16;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}x.head&&(x.head.xflags=255&V,x.head.os=V>>8),512&x.flags&&(L[0]=255&V,L[1]=V>>>8&255,x.check=a(x.check,L,2,0)),O=V=0,x.mode=5;case 5:if(1024&x.flags){for(;O<16;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}x.length=V,x.head&&(x.head.extra_len=V),512&x.flags&&(L[0]=255&V,L[1]=V>>>8&255,x.check=a(x.check,L,2,0)),O=V=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(B<(j=x.length)&&(j=B),j&&(x.head&&(T=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),o.arraySet(x.head.extra,U,G,j,T)),512&x.flags&&(x.check=a(x.check,U,j,G)),B-=j,G+=j,x.length-=j),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(B===0)break e;for(j=0;T=U[G+j++],x.head&&T&&x.length<65536&&(x.head.name+=String.fromCharCode(T)),T&&j<B;);if(512&x.flags&&(x.check=a(x.check,U,j,G)),B-=j,G+=j,T)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(B===0)break e;for(j=0;T=U[G+j++],x.head&&T&&x.length<65536&&(x.head.comment+=String.fromCharCode(T)),T&&j<B;);if(512&x.flags&&(x.check=a(x.check,U,j,G)),B-=j,G+=j,T)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;O<16;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(V!==(65535&x.check)){I.msg="header crc mismatch",x.mode=30;break}O=V=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),I.adler=x.check=0,x.mode=12;break;case 10:for(;O<32;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}I.adler=x.check=y(V),O=V=0,x.mode=11;case 11:if(x.havedict===0)return I.next_out=H,I.avail_out=K,I.next_in=G,I.avail_in=B,x.hold=V,x.bits=O,2;I.adler=x.check=1,x.mode=12;case 12:if(b===5||b===6)break e;case 13:if(x.last){V>>>=7&O,O-=7&O,x.mode=27;break}for(;O<3;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}switch(x.last=1&V,O-=1,3&(V>>>=1)){case 0:x.mode=14;break;case 1:if(F(x),x.mode=20,b!==6)break;V>>>=2,O-=2;break e;case 2:x.mode=17;break;case 3:I.msg="invalid block type",x.mode=30}V>>>=2,O-=2;break;case 14:for(V>>>=7&O,O-=7&O;O<32;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if((65535&V)!=(V>>>16^65535)){I.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&V,O=V=0,x.mode=15,b===6)break e;case 15:x.mode=16;case 16:if(j=x.length){if(B<j&&(j=B),K<j&&(j=K),j===0)break e;o.arraySet(Q,U,G,j,H),B-=j,G+=j,K-=j,H+=j,x.length-=j;break}x.mode=12;break;case 17:for(;O<14;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(x.nlen=257+(31&V),V>>>=5,O-=5,x.ndist=1+(31&V),V>>>=5,O-=5,x.ncode=4+(15&V),V>>>=4,O-=4,286<x.nlen||30<x.ndist){I.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;O<3;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}x.lens[Y[x.have++]]=7&V,V>>>=3,O-=3}for(;x.have<19;)x.lens[Y[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,W={bits:x.lenbits},J=f(0,x.lens,0,19,x.lencode,0,x.work,W),x.lenbits=W.bits,J){I.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;_e=(P=x.lencode[V&(1<<x.lenbits)-1])>>>16&255,Ye=65535&P,!((he=P>>>24)<=O);){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(Ye<16)V>>>=he,O-=he,x.lens[x.have++]=Ye;else{if(Ye===16){for(M=he+2;O<M;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(V>>>=he,O-=he,x.have===0){I.msg="invalid bit length repeat",x.mode=30;break}T=x.lens[x.have-1],j=3+(3&V),V>>>=2,O-=2}else if(Ye===17){for(M=he+3;O<M;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}O-=he,T=0,j=3+(7&(V>>>=he)),V>>>=3,O-=3}else{for(M=he+7;O<M;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}O-=he,T=0,j=11+(127&(V>>>=he)),V>>>=7,O-=7}if(x.have+j>x.nlen+x.ndist){I.msg="invalid bit length repeat",x.mode=30;break}for(;j--;)x.lens[x.have++]=T}}if(x.mode===30)break;if(x.lens[256]===0){I.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,W={bits:x.lenbits},J=f(d,x.lens,0,x.nlen,x.lencode,0,x.work,W),x.lenbits=W.bits,J){I.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,W={bits:x.distbits},J=f(h,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,W),x.distbits=W.bits,J){I.msg="invalid distances set",x.mode=30;break}if(x.mode=20,b===6)break e;case 20:x.mode=21;case 21:if(6<=B&&258<=K){I.next_out=H,I.avail_out=K,I.next_in=G,I.avail_in=B,x.hold=V,x.bits=O,c(I,ne),H=I.next_out,Q=I.output,K=I.avail_out,G=I.next_in,U=I.input,B=I.avail_in,V=x.hold,O=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;_e=(P=x.lencode[V&(1<<x.lenbits)-1])>>>16&255,Ye=65535&P,!((he=P>>>24)<=O);){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(_e&&!(240&_e)){for(Be=he,Lt=_e,kt=Ye;_e=(P=x.lencode[kt+((V&(1<<Be+Lt)-1)>>Be)])>>>16&255,Ye=65535&P,!(Be+(he=P>>>24)<=O);){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}V>>>=Be,O-=Be,x.back+=Be}if(V>>>=he,O-=he,x.back+=he,x.length=Ye,_e===0){x.mode=26;break}if(32&_e){x.back=-1,x.mode=12;break}if(64&_e){I.msg="invalid literal/length code",x.mode=30;break}x.extra=15&_e,x.mode=22;case 22:if(x.extra){for(M=x.extra;O<M;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}x.length+=V&(1<<x.extra)-1,V>>>=x.extra,O-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;_e=(P=x.distcode[V&(1<<x.distbits)-1])>>>16&255,Ye=65535&P,!((he=P>>>24)<=O);){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(!(240&_e)){for(Be=he,Lt=_e,kt=Ye;_e=(P=x.distcode[kt+((V&(1<<Be+Lt)-1)>>Be)])>>>16&255,Ye=65535&P,!(Be+(he=P>>>24)<=O);){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}V>>>=Be,O-=Be,x.back+=Be}if(V>>>=he,O-=he,x.back+=he,64&_e){I.msg="invalid distance code",x.mode=30;break}x.offset=Ye,x.extra=15&_e,x.mode=24;case 24:if(x.extra){for(M=x.extra;O<M;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}x.offset+=V&(1<<x.extra)-1,V>>>=x.extra,O-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){I.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(K===0)break e;if(j=ne-K,x.offset>j){if((j=x.offset-j)>x.whave&&x.sane){I.msg="invalid distance too far back",x.mode=30;break}ve=j>x.wnext?(j-=x.wnext,x.wsize-j):x.wnext-j,j>x.length&&(j=x.length),Pe=x.window}else Pe=Q,ve=H-x.offset,j=x.length;for(K<j&&(j=K),K-=j,x.length-=j;Q[H++]=Pe[ve++],--j;);x.length===0&&(x.mode=21);break;case 26:if(K===0)break e;Q[H++]=x.length,K--,x.mode=21;break;case 27:if(x.wrap){for(;O<32;){if(B===0)break e;B--,V|=U[G++]<<O,O+=8}if(ne-=K,I.total_out+=ne,x.total+=ne,ne&&(I.adler=x.check=x.flags?a(x.check,Q,ne,H-ne):s(x.check,Q,ne,H-ne)),ne=K,(x.flags?V:y(V))!==x.check){I.msg="incorrect data check",x.mode=30;break}O=V=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;O<32;){if(B===0)break e;B--,V+=U[G++]<<O,O+=8}if(V!==(4294967295&x.total)){I.msg="incorrect length check",x.mode=30;break}O=V=0}x.mode=29;case 29:J=1;break e;case 30:J=-3;break e;case 31:return-4;case 32:default:return m}return I.next_out=H,I.avail_out=K,I.next_in=G,I.avail_in=B,x.hold=V,x.bits=O,(x.wsize||ne!==I.avail_out&&x.mode<30&&(x.mode<27||b!==4))&&q(I,I.output,I.next_out,ne-I.avail_out)?(x.mode=31,-4):(oe-=I.avail_in,ne-=I.avail_out,I.total_in+=oe,I.total_out+=ne,x.total+=ne,x.wrap&&ne&&(I.adler=x.check=x.flags?a(x.check,Q,ne,I.next_out-ne):s(x.check,Q,ne,I.next_out-ne)),I.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(oe==0&&ne===0||b===4)&&J===p&&(J=-5),J)},i.inflateEnd=function(I){if(!I||!I.state)return m;var b=I.state;return b.window&&(b.window=null),I.state=null,p},i.inflateGetHeader=function(I,b){var x;return I&&I.state&&2&(x=I.state).wrap?((x.head=b).done=!1,p):m},i.inflateSetDictionary=function(I,b){var x,U=b.length;return I&&I.state?(x=I.state).wrap!==0&&x.mode!==11?m:x.mode===11&&s(1,b,U,0)!==x.check?-3:q(I,b,U,U)?(x.mode=31,-4):(x.havedict=1,p):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var o=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,m,w,g,C,y){var v,_,E,A,k,R,N,D,F,q=y.bits,I=0,b=0,x=0,U=0,Q=0,G=0,H=0,B=0,K=0,V=0,O=null,oe=0,ne=new o.Buf16(16),j=new o.Buf16(16),ve=null,Pe=0;for(I=0;I<=15;I++)ne[I]=0;for(b=0;b<m;b++)ne[h[p+b]]++;for(Q=q,U=15;1<=U&&ne[U]===0;U--);if(U<Q&&(Q=U),U===0)return w[g++]=20971520,w[g++]=20971520,y.bits=1,0;for(x=1;x<U&&ne[x]===0;x++);for(Q<x&&(Q=x),I=B=1;I<=15;I++)if(B<<=1,(B-=ne[I])<0)return-1;if(0<B&&(d===0||U!==1))return-1;for(j[1]=0,I=1;I<15;I++)j[I+1]=j[I]+ne[I];for(b=0;b<m;b++)h[p+b]!==0&&(C[j[h[p+b]]++]=b);if(R=d===0?(O=ve=C,19):d===1?(O=s,oe-=257,ve=a,Pe-=257,256):(O=c,ve=f,-1),I=x,k=g,H=b=V=0,E=-1,A=(K=1<<(G=Q))-1,d===1&&852<K||d===2&&592<K)return 1;for(;;){for(N=I-H,F=C[b]<R?(D=0,C[b]):C[b]>R?(D=ve[Pe+C[b]],O[oe+C[b]]):(D=96,0),v=1<<I-H,x=_=1<<G;w[k+(V>>H)+(_-=v)]=N<<24|D<<16|F|0,_!==0;);for(v=1<<I-1;V&v;)v>>=1;if(v!==0?(V&=v-1,V+=v):V=0,b++,--ne[I]==0){if(I===U)break;I=h[p+C[b]]}if(Q<I&&(V&A)!==E){for(H===0&&(H=Q),k+=x,B=1<<(G=I-H);G+H<U&&!((B-=ne[G+H])<=0);)G++,B<<=1;if(K+=1<<G,d===1&&852<K||d===2&&592<K)return 1;w[E=V&A]=Q<<24|G<<16|k-g|0}}return V!==0&&(w[k+V]=I-H<<24|64<<16|0),y.bits=Q,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var o=n("../utils/common"),s=0,a=1;function c(P){for(var L=P.length;0<=--L;)P[L]=0}var f=0,d=29,h=256,p=h+1+d,m=30,w=19,g=2*p+1,C=15,y=16,v=7,_=256,E=16,A=17,k=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(p+2));c(q);var I=new Array(2*m);c(I);var b=new Array(512);c(b);var x=new Array(256);c(x);var U=new Array(d);c(U);var Q,G,H,B=new Array(m);function K(P,L,Y,X,$){this.static_tree=P,this.extra_bits=L,this.extra_base=Y,this.elems=X,this.max_length=$,this.has_stree=P&&P.length}function V(P,L){this.dyn_tree=P,this.max_code=0,this.stat_desc=L}function O(P){return P<256?b[P]:b[256+(P>>>7)]}function oe(P,L){P.pending_buf[P.pending++]=255&L,P.pending_buf[P.pending++]=L>>>8&255}function ne(P,L,Y){P.bi_valid>y-Y?(P.bi_buf|=L<<P.bi_valid&65535,oe(P,P.bi_buf),P.bi_buf=L>>y-P.bi_valid,P.bi_valid+=Y-y):(P.bi_buf|=L<<P.bi_valid&65535,P.bi_valid+=Y)}function j(P,L,Y){ne(P,Y[2*L],Y[2*L+1])}function ve(P,L){for(var Y=0;Y|=1&P,P>>>=1,Y<<=1,0<--L;);return Y>>>1}function Pe(P,L,Y){var X,$,ee=new Array(C+1),re=0;for(X=1;X<=C;X++)ee[X]=re=re+Y[X-1]<<1;for($=0;$<=L;$++){var te=P[2*$+1];te!==0&&(P[2*$]=ve(ee[te]++,te))}}function he(P){var L;for(L=0;L<p;L++)P.dyn_ltree[2*L]=0;for(L=0;L<m;L++)P.dyn_dtree[2*L]=0;for(L=0;L<w;L++)P.bl_tree[2*L]=0;P.dyn_ltree[2*_]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function _e(P){8<P.bi_valid?oe(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function Ye(P,L,Y,X){var $=2*L,ee=2*Y;return P[$]<P[ee]||P[$]===P[ee]&&X[L]<=X[Y]}function Be(P,L,Y){for(var X=P.heap[Y],$=Y<<1;$<=P.heap_len&&($<P.heap_len&&Ye(L,P.heap[$+1],P.heap[$],P.depth)&&$++,!Ye(L,X,P.heap[$],P.depth));)P.heap[Y]=P.heap[$],Y=$,$<<=1;P.heap[Y]=X}function Lt(P,L,Y){var X,$,ee,re,te=0;if(P.last_lit!==0)for(;X=P.pending_buf[P.d_buf+2*te]<<8|P.pending_buf[P.d_buf+2*te+1],$=P.pending_buf[P.l_buf+te],te++,X===0?j(P,$,L):(j(P,(ee=x[$])+h+1,L),(re=R[ee])!==0&&ne(P,$-=U[ee],re),j(P,ee=O(--X),Y),(re=N[ee])!==0&&ne(P,X-=B[ee],re)),te<P.last_lit;);j(P,_,L)}function kt(P,L){var Y,X,$,ee=L.dyn_tree,re=L.stat_desc.static_tree,te=L.stat_desc.has_stree,ue=L.stat_desc.elems,xe=-1;for(P.heap_len=0,P.heap_max=g,Y=0;Y<ue;Y++)ee[2*Y]!==0?(P.heap[++P.heap_len]=xe=Y,P.depth[Y]=0):ee[2*Y+1]=0;for(;P.heap_len<2;)ee[2*($=P.heap[++P.heap_len]=xe<2?++xe:0)]=1,P.depth[$]=0,P.opt_len--,te&&(P.static_len-=re[2*$+1]);for(L.max_code=xe,Y=P.heap_len>>1;1<=Y;Y--)Be(P,ee,Y);for($=ue;Y=P.heap[1],P.heap[1]=P.heap[P.heap_len--],Be(P,ee,1),X=P.heap[1],P.heap[--P.heap_max]=Y,P.heap[--P.heap_max]=X,ee[2*$]=ee[2*Y]+ee[2*X],P.depth[$]=(P.depth[Y]>=P.depth[X]?P.depth[Y]:P.depth[X])+1,ee[2*Y+1]=ee[2*X+1]=$,P.heap[1]=$++,Be(P,ee,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],function(ge,gt){var kr,Xt,Rr,Oe,Mr,ui,Vt=gt.dyn_tree,Qs=gt.max_code,Ut=gt.stat_desc.static_tree,ke=gt.stat_desc.has_stree,Uu=gt.stat_desc.extra_bits,js=gt.stat_desc.extra_base,br=gt.stat_desc.max_length,ci=0;for(Oe=0;Oe<=C;Oe++)ge.bl_count[Oe]=0;for(Vt[2*ge.heap[ge.heap_max]+1]=0,kr=ge.heap_max+1;kr<g;kr++)br<(Oe=Vt[2*Vt[2*(Xt=ge.heap[kr])+1]+1]+1)&&(Oe=br,ci++),Vt[2*Xt+1]=Oe,Qs<Xt||(ge.bl_count[Oe]++,Mr=0,js<=Xt&&(Mr=Uu[Xt-js]),ui=Vt[2*Xt],ge.opt_len+=ui*(Oe+Mr),ke&&(ge.static_len+=ui*(Ut[2*Xt+1]+Mr)));if(ci!==0){do{for(Oe=br-1;ge.bl_count[Oe]===0;)Oe--;ge.bl_count[Oe]--,ge.bl_count[Oe+1]+=2,ge.bl_count[br]--,ci-=2}while(0<ci);for(Oe=br;Oe!==0;Oe--)for(Xt=ge.bl_count[Oe];Xt!==0;)Qs<(Rr=ge.heap[--kr])||(Vt[2*Rr+1]!==Oe&&(ge.opt_len+=(Oe-Vt[2*Rr+1])*Vt[2*Rr],Vt[2*Rr+1]=Oe),Xt--)}}(P,L),Pe(ee,xe,P.bl_count)}function T(P,L,Y){var X,$,ee=-1,re=L[1],te=0,ue=7,xe=4;for(re===0&&(ue=138,xe=3),L[2*(Y+1)+1]=65535,X=0;X<=Y;X++)$=re,re=L[2*(X+1)+1],++te<ue&&$===re||(te<xe?P.bl_tree[2*$]+=te:$!==0?($!==ee&&P.bl_tree[2*$]++,P.bl_tree[2*E]++):te<=10?P.bl_tree[2*A]++:P.bl_tree[2*k]++,ee=$,xe=(te=0)===re?(ue=138,3):$===re?(ue=6,3):(ue=7,4))}function J(P,L,Y){var X,$,ee=-1,re=L[1],te=0,ue=7,xe=4;for(re===0&&(ue=138,xe=3),X=0;X<=Y;X++)if($=re,re=L[2*(X+1)+1],!(++te<ue&&$===re)){if(te<xe)for(;j(P,$,P.bl_tree),--te!=0;);else $!==0?($!==ee&&(j(P,$,P.bl_tree),te--),j(P,E,P.bl_tree),ne(P,te-3,2)):te<=10?(j(P,A,P.bl_tree),ne(P,te-3,3)):(j(P,k,P.bl_tree),ne(P,te-11,7));ee=$,xe=(te=0)===re?(ue=138,3):$===re?(ue=6,3):(ue=7,4)}}c(B);var W=!1;function M(P,L,Y,X){ne(P,(f<<1)+(X?1:0),3),function($,ee,re,te){_e($),oe($,re),oe($,~re),o.arraySet($.pending_buf,$.window,ee,re,$.pending),$.pending+=re}(P,L,Y)}i._tr_init=function(P){W||(function(){var L,Y,X,$,ee,re=new Array(C+1);for($=X=0;$<d-1;$++)for(U[$]=X,L=0;L<1<<R[$];L++)x[X++]=$;for(x[X-1]=$,$=ee=0;$<16;$++)for(B[$]=ee,L=0;L<1<<N[$];L++)b[ee++]=$;for(ee>>=7;$<m;$++)for(B[$]=ee<<7,L=0;L<1<<N[$]-7;L++)b[256+ee++]=$;for(Y=0;Y<=C;Y++)re[Y]=0;for(L=0;L<=143;)q[2*L+1]=8,L++,re[8]++;for(;L<=255;)q[2*L+1]=9,L++,re[9]++;for(;L<=279;)q[2*L+1]=7,L++,re[7]++;for(;L<=287;)q[2*L+1]=8,L++,re[8]++;for(Pe(q,p+1,re),L=0;L<m;L++)I[2*L+1]=5,I[2*L]=ve(L,5);Q=new K(q,R,h+1,p,C),G=new K(I,N,0,m,C),H=new K(new Array(0),D,0,w,v)}(),W=!0),P.l_desc=new V(P.dyn_ltree,Q),P.d_desc=new V(P.dyn_dtree,G),P.bl_desc=new V(P.bl_tree,H),P.bi_buf=0,P.bi_valid=0,he(P)},i._tr_stored_block=M,i._tr_flush_block=function(P,L,Y,X){var $,ee,re=0;0<P.level?(P.strm.data_type===2&&(P.strm.data_type=function(te){var ue,xe=4093624447;for(ue=0;ue<=31;ue++,xe>>>=1)if(1&xe&&te.dyn_ltree[2*ue]!==0)return s;if(te.dyn_ltree[18]!==0||te.dyn_ltree[20]!==0||te.dyn_ltree[26]!==0)return a;for(ue=32;ue<h;ue++)if(te.dyn_ltree[2*ue]!==0)return a;return s}(P)),kt(P,P.l_desc),kt(P,P.d_desc),re=function(te){var ue;for(T(te,te.dyn_ltree,te.l_desc.max_code),T(te,te.dyn_dtree,te.d_desc.max_code),kt(te,te.bl_desc),ue=w-1;3<=ue&&te.bl_tree[2*F[ue]+1]===0;ue--);return te.opt_len+=3*(ue+1)+5+5+4,ue}(P),$=P.opt_len+3+7>>>3,(ee=P.static_len+3+7>>>3)<=$&&($=ee)):$=ee=Y+5,Y+4<=$&&L!==-1?M(P,L,Y,X):P.strategy===4||ee===$?(ne(P,2+(X?1:0),3),Lt(P,q,I)):(ne(P,4+(X?1:0),3),function(te,ue,xe,ge){var gt;for(ne(te,ue-257,5),ne(te,xe-1,5),ne(te,ge-4,4),gt=0;gt<ge;gt++)ne(te,te.bl_tree[2*F[gt]+1],3);J(te,te.dyn_ltree,ue-1),J(te,te.dyn_dtree,xe-1)}(P,P.l_desc.max_code+1,P.d_desc.max_code+1,re+1),Lt(P,P.dyn_ltree,P.dyn_dtree)),he(P),X&&_e(P)},i._tr_tally=function(P,L,Y){return P.pending_buf[P.d_buf+2*P.last_lit]=L>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&L,P.pending_buf[P.l_buf+P.last_lit]=255&Y,P.last_lit++,L===0?P.dyn_ltree[2*Y]++:(P.matches++,L--,P.dyn_ltree[2*(x[Y]+h+1)]++,P.dyn_dtree[2*O(L)]++),P.last_lit===P.lit_bufsize-1},i._tr_align=function(P){ne(P,2,3),j(P,_,q),function(L){L.bi_valid===16?(oe(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(P)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(o){(function(s,a){if(!s.setImmediate){var c,f,d,h,p=1,m={},w=!1,g=s.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(s);C=C&&C.setTimeout?C:s,c={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){v(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,A=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=A,E}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",_,!1):s.attachEvent("onmessage",_),function(E){s.postMessage(h+E,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(E){v(E.data)},function(E){d.port2.postMessage(E)}):g&&"onreadystatechange"in g.createElement("script")?(f=g.documentElement,function(E){var A=g.createElement("script");A.onreadystatechange=function(){v(E),A.onreadystatechange=null,f.removeChild(A),A=null},f.appendChild(A)}):function(E){setTimeout(v,0,E)},C.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var A=new Array(arguments.length-1),k=0;k<A.length;k++)A[k]=arguments[k+1];var R={callback:E,args:A};return m[p]=R,c(p),p++},C.clearImmediate=y}function y(E){delete m[E]}function v(E){if(w)setTimeout(v,0,E);else{var A=m[E];if(A){w=!0;try{(function(k){var R=k.callback,N=k.args;switch(N.length){case 0:R();break;case 1:R(N[0]);break;case 2:R(N[0],N[1]);break;case 3:R(N[0],N[1],N[2]);break;default:R.apply(a,N)}})(A)}finally{y(E),w=!1}}}}function _(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(h)===0&&v(+E.data.slice(h.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(j_);var RA=j_.exports;const MA=Md(RA),eC=z.createContext({});function bA(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ah=z.createContext(null),tC=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function NA(t=!0){const e=z.useContext(Ah);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=z.useId();z.useEffect(()=>{t&&i(o)},[t]);const s=z.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,s]:[!0]}const Ph=typeof window<"u",DA=Ph?z.useLayoutEffect:z.useEffect,Wt=t=>t;let nC=Wt;function Ih(t){let e;return()=>(e===void 0&&(e=t()),e)}const ro=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},$n=t=>t*1e3,zn=t=>t/1e3,FA={useManualTiming:!1};function LA(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(f){o.has(f)&&(c.schedule(f),t()),f(s)}const c={schedule:(f,d=!1,h=!1)=>{const m=h&&r?e:n;return d&&o.add(f),m.has(f)||m.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(s=f,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,c.process(f))}};return c}const Ca=["read","resolveKeyframes","update","preRender","render","postRender"],VA=40;function rC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=Ca.reduce((y,v)=>(y[v]=LA(o),y),{}),{read:a,resolveKeyframes:c,update:f,preRender:d,render:h,postRender:p}=s,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,VA),1),i.timestamp=y,i.isProcessing=!0,a.process(i),c.process(i),f.process(i),d.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},w=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:Ca.reduce((y,v)=>{const _=s[v];return y[v]=(E,A=!1,k=!1)=>(n||w(),_.schedule(E,A,k)),y},{}),cancel:y=>{for(let v=0;v<Ca.length;v++)s[Ca[v]].cancel(y)},state:i,steps:s}}const{schedule:Ve,cancel:Cr,state:ft,steps:fc}=rC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wt,!0),iC=z.createContext({strict:!1}),mg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},io={};for(const t in mg)io[t]={isEnabled:e=>mg[t].some(n=>!!e[n])};function UA(t){for(const e in t)io[e]={...io[e],...t[e]}}const BA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BA.has(t)}let oC=t=>!Nl(t);function OA(t){t&&(oC=e=>e.startsWith("on")?!Nl(e):t(e))}try{OA(require("@emotion/is-prop-valid").default)}catch{}function $A(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(oC(i)||n===!0&&Nl(i)||!e&&!Nl(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function zA(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const gu=z.createContext({});function Ps(t){return typeof t=="string"||Array.isArray(t)}function yu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const kh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rh=["initial",...kh];function vu(t){return yu(t.animate)||Rh.some(e=>Ps(t[e]))}function sC(t){return!!(vu(t)||t.variants)}function GA(t,e){if(vu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ps(n)?n:void 0,animate:Ps(r)?r:void 0}}return t.inherit!==!1?e:{}}function HA(t){const{initial:e,animate:n}=GA(t,z.useContext(gu));return z.useMemo(()=>({initial:e,animate:n}),[gg(e),gg(n)])}function gg(t){return Array.isArray(t)?t.join(" "):t}const WA=Symbol.for("motionComponentSymbol");function bi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qA(t,e,n){return z.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):bi(n)&&(n.current=r))},[e])}const Mh=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JA="framerAppearId",aC="data-"+Mh(JA),{schedule:bh}=rC(queueMicrotask,!1),lC=z.createContext({});function KA(t,e,n,r,i){var o,s;const{visualElement:a}=z.useContext(gu),c=z.useContext(iC),f=z.useContext(Ah),d=z.useContext(tC).reducedMotion,h=z.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:d}));const p=h.current,m=z.useContext(lC);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&YA(h.current,n,i,m);const w=z.useRef(!1);z.useInsertionEffect(()=>{p&&w.current&&p.update(n,f)});const g=n[aC],C=z.useRef(!!g&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,g))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,g)));return DA(()=>{p&&(w.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),bh.render(p.render),C.current&&p.animationState&&p.animationState.animateChanges())}),z.useEffect(()=>{p&&(!C.current&&p.animationState&&p.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),C.current=!1))}),p}function YA(t,e,n,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:c,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:uC(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||a&&bi(a),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:f})}function uC(t){if(t)return t.options.allowProjection!==!1?t.projection:uC(t.parent)}function XA({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var o,s;t&&UA(t);function a(f,d){let h;const p={...z.useContext(tC),...f,layoutId:ZA(f)},{isStatic:m}=p,w=HA(f),g=r(f,m);if(!m&&Ph){QA();const C=jA(p);h=C.MeasureLayout,w.visualElement=KA(i,g,p,e,C.ProjectionNode)}return S.jsxs(gu.Provider,{value:w,children:[h&&w.visualElement?S.jsx(h,{visualElement:w.visualElement,...p}):null,n(i,f,qA(g,w.visualElement,d),g,m,w.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(s=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&s!==void 0?s:""})`}`;const c=z.forwardRef(a);return c[WA]=i,c}function ZA({layoutId:t}){const e=z.useContext(eC).id;return e&&t!==void 0?e+"-"+t:t}function QA(t,e){z.useContext(iC).strict}function jA(t){const{drag:e,layout:n}=io;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const eP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Nh(t){return typeof t!="string"||t.includes("-")?!1:!!(eP.indexOf(t)>-1||/[A-Z]/u.test(t))}function yg(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Dh(t,e,n,r){if(typeof e=="function"){const[i,o]=yg(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=yg(r);e=e(n!==void 0?n:t.custom,i,o)}return e}const Ff=t=>Array.isArray(t),tP=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),nP=t=>Ff(t)?t[t.length-1]||0:t,xt=t=>!!(t&&t.getVelocity);function Xa(t){const e=xt(t)?t.get():t;return tP(e)?e.toValue():e}function rP({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,o){const s={latestValues:iP(r,i,o,t),renderState:e()};return n&&(s.onMount=a=>n({props:r,current:a,...s}),s.onUpdate=a=>n(a)),s}const cC=t=>(e,n)=>{const r=z.useContext(gu),i=z.useContext(Ah),o=()=>rP(t,e,r,i);return n?o():bA(o)};function iP(t,e,n,r){const i={},o=r(t,{});for(const p in o)i[p]=Xa(o[p]);let{initial:s,animate:a}=t;const c=vu(t),f=sC(t);e&&f&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?a:s;if(h&&typeof h!="boolean"&&!yu(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const w=Dh(t,p[m]);if(w){const{transitionEnd:g,transition:C,...y}=w;for(const v in y){let _=y[v];if(Array.isArray(_)){const E=d?_.length-1:0;_=_[E]}_!==null&&(i[v]=_)}for(const v in g)i[v]=g[v]}}}return i}const co=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],si=new Set(co),fC=t=>e=>typeof e=="string"&&e.startsWith(t),dC=fC("--"),oP=fC("var(--"),Fh=t=>oP(t)?sP.test(t.split("/*")[0].trim()):!1,sP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Jn=(t,e,n)=>n>e?e:n<t?t:n,fo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Is={...fo,transform:t=>Jn(0,1,t)},xa={...fo,default:1},Bs=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),nr=Bs("deg"),Mn=Bs("%"),ce=Bs("px"),aP=Bs("vh"),lP=Bs("vw"),vg={...Mn,parse:t=>Mn.parse(t)/100,transform:t=>Mn.transform(t*100)},uP={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce},cP={rotate:nr,rotateX:nr,rotateY:nr,rotateZ:nr,scale:xa,scaleX:xa,scaleY:xa,scaleZ:xa,skew:nr,skewX:nr,skewY:nr,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:Is,originX:vg,originY:vg,originZ:ce},wg={...fo,transform:Math.round},Lh={...uP,...cP,zIndex:wg,size:ce,fillOpacity:Is,strokeOpacity:Is,numOctaves:wg},fP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dP=co.length;function hP(t,e,n){let r="",i=!0;for(let o=0;o<dP;o++){const s=co[o],a=t[s];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(s.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const f=hC(a,Lh[s]);if(!c){i=!1;const d=fP[s]||s;r+=`${d}(${f}) `}n&&(e[s]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Vh(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let s=!1,a=!1;for(const c in e){const f=e[c];if(si.has(c)){s=!0;continue}else if(dC(c)){i[c]=f;continue}else{const d=hC(f,Lh[c]);c.startsWith("origin")?(a=!0,o[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=hP(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:f="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${f} ${d}`}}const pP={offset:"stroke-dashoffset",array:"stroke-dasharray"},mP={offset:"strokeDashoffset",array:"strokeDasharray"};function gP(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?pP:mP;t[o.offset]=ce.transform(-r);const s=ce.transform(e),a=ce.transform(n);t[o.array]=`${s} ${a}`}function _g(t,e,n){return typeof t=="string"?t:ce.transform(e+n*t)}function yP(t,e,n){const r=_g(e,t.x,t.width),i=_g(n,t.y,t.height);return`${r} ${i}`}function Uh(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...f},d,h){if(Vh(t,f,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:w}=t;p.transform&&(w&&(m.transform=p.transform),delete p.transform),w&&(i!==void 0||o!==void 0||m.transform)&&(m.transformOrigin=yP(w,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&gP(p,s,a,c,!1)}const Bh=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),pC=()=>({...Bh(),attrs:{}}),Oh=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mC(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const gC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yC(t,e,n,r){mC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(gC.has(i)?i:Mh(i),e.attrs[i])}const Dl={};function vP(t){Object.assign(Dl,t)}function vC(t,{layout:e,layoutId:n}){return si.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Dl[t]||t==="opacity")}function $h(t,e,n){var r;const{style:i}=t,o={};for(const s in i)(xt(i[s])||e.style&&xt(e.style[s])||vC(s,t)||((r=n?.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[s]=i[s]);return o}function wC(t,e,n){const r=$h(t,e,n);for(const i in t)if(xt(t[i])||xt(e[i])){const o=co.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function wP(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Cg=["x","y","width","height","cx","cy","r"],_P={useVisualState:cC({scrapeMotionValuesFromProps:wC,createRenderState:pC,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let o=!!t.drag;if(!o){for(const a in i)if(si.has(a)){o=!0;break}}if(!o)return;let s=!e;if(e)for(let a=0;a<Cg.length;a++){const c=Cg[a];t[c]!==e[c]&&(s=!0)}s&&Ve.read(()=>{wP(n,r),Ve.render(()=>{Uh(r,i,Oh(n.tagName),t.transformTemplate),yC(n,r)})})}})},CP={useVisualState:cC({scrapeMotionValuesFromProps:$h,createRenderState:Bh})};function _C(t,e,n){for(const r in e)!xt(e[r])&&!vC(r,n)&&(t[r]=e[r])}function xP({transformTemplate:t},e){return z.useMemo(()=>{const n=Bh();return Vh(n,e,t),Object.assign({},n.vars,n.style)},[e])}function TP(t,e){const n=t.style||{},r={};return _C(r,n,t),Object.assign(r,xP(t,e)),r}function SP(t,e){const n={},r=TP(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function EP(t,e,n,r){const i=z.useMemo(()=>{const o=pC();return Uh(o,e,Oh(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};_C(o,t.style,t),i.style={...o,...i.style}}return i}function AP(t=!1){return(n,r,i,{latestValues:o},s)=>{const c=(Nh(n)?EP:SP)(r,o,s,n),f=$A(r,typeof n=="string",t),d=n!==z.Fragment?{...f,...c,ref:i}:{},{children:h}=r,p=z.useMemo(()=>xt(h)?h.get():h,[h]);return z.createElement(n,{...d,children:p})}}function PP(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...Nh(r)?_P:CP,preloadedFeatures:t,useRender:AP(i),createVisualElement:e,Component:r};return XA(s)}}function CC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function wu(t,e,n){const r=t.getProps();return Dh(r,e,n!==void 0?n:r.custom,t)}const IP=Ih(()=>window.ScrollTimeline!==void 0);class kP{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(IP()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class RP extends kP{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function zh(t,e){return t?t[e]||t.default||t:void 0}const Lf=2e4;function xC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Lf;)e+=n,r=t.next(e);return e>=Lf?1/0:e}function Gh(t){return typeof t=="function"}function xg(t,e){t.timeline=e,t.onfinish=null}const Hh=t=>Array.isArray(t)&&typeof t[0]=="number",MP={linearEasing:void 0};function bP(t,e){const n=Ih(t);return()=>{var r;return(r=MP[e])!==null&&r!==void 0?r:n()}}const Fl=bP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),TC=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(ro(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function SC(t){return!!(typeof t=="function"&&Fl()||!t||typeof t=="string"&&(t in Vf||Fl())||Hh(t)||Array.isArray(t)&&t.every(SC))}const Fo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Vf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fo([0,.65,.55,1]),circOut:Fo([.55,0,1,.45]),backIn:Fo([.31,.01,.66,-.59]),backOut:Fo([.33,1.53,.69,.99])};function EC(t,e){if(t)return typeof t=="function"&&Fl()?TC(t,e):Hh(t)?Fo(t):Array.isArray(t)?t.map(n=>EC(n,e)||Vf.easeOut):Vf[t]}const fn={x:!1,y:!1};function AC(){return fn.x||fn.y}function NP(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function PC(t,e){const n=NP(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Tg(t){return e=>{e.pointerType==="touch"||AC()||t(e)}}function DP(t,e,n={}){const[r,i,o]=PC(t,n),s=Tg(a=>{const{target:c}=a,f=e(a);if(typeof f!="function"||!c)return;const d=Tg(h=>{f(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return r.forEach(a=>{a.addEventListener("pointerenter",s,i)}),o}const IC=(t,e)=>e?t===e?!0:IC(t,e.parentElement):!1,Wh=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function LP(t){return FP.has(t.tagName)||t.tabIndex!==-1}const Lo=new WeakSet;function Sg(t){return e=>{e.key==="Enter"&&t(e)}}function dc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const VP=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Sg(()=>{if(Lo.has(n))return;dc(n,"down");const i=Sg(()=>{dc(n,"up")}),o=()=>dc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Eg(t){return Wh(t)&&!AC()}function UP(t,e,n={}){const[r,i,o]=PC(t,n),s=a=>{const c=a.currentTarget;if(!Eg(a)||Lo.has(c))return;Lo.add(c);const f=e(a),d=(m,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!Eg(m)||!Lo.has(c))&&(Lo.delete(c),typeof f=="function"&&f(m,{success:w}))},h=m=>{d(m,n.useGlobalTarget||IC(c,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!LP(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),a.addEventListener("focus",f=>VP(f,i),i)}),o}function BP(t){return t==="x"||t==="y"?fn[t]?null:(fn[t]=!0,()=>{fn[t]=!1}):fn.x||fn.y?null:(fn.x=fn.y=!0,()=>{fn.x=fn.y=!1})}const kC=new Set(["width","height","top","left","right","bottom",...co]);let Za;function OP(){Za=void 0}const bn={now:()=>(Za===void 0&&bn.set(ft.isProcessing||FA.useManualTiming?ft.timestamp:performance.now()),Za),set:t=>{Za=t,queueMicrotask(OP)}};function qh(t,e){t.indexOf(e)===-1&&t.push(e)}function Jh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Kh{constructor(){this.subscriptions=[]}add(e){return qh(this.subscriptions,e),()=>Jh(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function RC(t,e){return e?t*(1e3/e):0}const Ag=30,$P=t=>!isNaN(parseFloat(t));class zP{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=bn.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$P(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Kh);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ve.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ag)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ag);return RC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ks(t,e){return new zP(t,e)}function GP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ks(n))}function HP(t,e){const n=wu(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const s in o){const a=nP(o[s]);GP(t,s,a)}}function WP(t){return!!(xt(t)&&t.add)}function Uf(t,e){const n=t.getValue("willChange");if(WP(n))return n.add(e)}function MC(t){return t.props[aC]}const bC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,qP=1e-7,JP=12;function KP(t,e,n,r,i){let o,s,a=0;do s=e+(n-e)/2,o=bC(s,r,i)-t,o>0?n=s:e=s;while(Math.abs(o)>qP&&++a<JP);return s}function Os(t,e,n,r){if(t===e&&n===r)return Wt;const i=o=>KP(o,0,1,t,n);return o=>o===0||o===1?o:bC(i(o),e,r)}const NC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DC=t=>e=>1-t(1-e),FC=Os(.33,1.53,.69,.99),Yh=DC(FC),LC=NC(Yh),VC=t=>(t*=2)<1?.5*Yh(t):.5*(2-Math.pow(2,-10*(t-1))),Xh=t=>1-Math.sin(Math.acos(t)),UC=DC(Xh),BC=NC(Xh),OC=t=>/^0[^.\s]+$/u.test(t);function YP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||OC(t):!0}const ns=t=>Math.round(t*1e5)/1e5,Zh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XP(t){return t==null}const ZP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qh=(t,e)=>n=>!!(typeof n=="string"&&ZP.test(n)&&n.startsWith(t)||e&&!XP(n)&&Object.prototype.hasOwnProperty.call(n,e)),$C=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,s,a]=r.match(Zh);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},QP=t=>Jn(0,255,t),hc={...fo,transform:t=>Math.round(QP(t))},Wr={test:Qh("rgb","red"),parse:$C("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+hc.transform(t)+", "+hc.transform(e)+", "+hc.transform(n)+", "+ns(Is.transform(r))+")"};function jP(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Bf={test:Qh("#"),parse:jP,transform:Wr.transform},Ni={test:Qh("hsl","hue"),parse:$C("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mn.transform(ns(e))+", "+Mn.transform(ns(n))+", "+ns(Is.transform(r))+")"},_t={test:t=>Wr.test(t)||Bf.test(t)||Ni.test(t),parse:t=>Wr.test(t)?Wr.parse(t):Ni.test(t)?Ni.parse(t):Bf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Wr.transform(t):Ni.transform(t)},eI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tI(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Zh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(eI))===null||n===void 0?void 0:n.length)||0)>0}const zC="number",GC="color",nI="var",rI="var(",Pg="${}",iI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rs(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=e.replace(iI,c=>(_t.test(c)?(r.color.push(o),i.push(GC),n.push(_t.parse(c))):c.startsWith(rI)?(r.var.push(o),i.push(nI),n.push(c)):(r.number.push(o),i.push(zC),n.push(parseFloat(c))),++o,Pg)).split(Pg);return{values:n,split:a,indexes:r,types:i}}function HC(t){return Rs(t).values}function WC(t){const{split:e,types:n}=Rs(t),r=e.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=e[s],i[s]!==void 0){const a=n[s];a===zC?o+=ns(i[s]):a===GC?o+=_t.transform(i[s]):o+=i[s]}return o}}const oI=t=>typeof t=="number"?0:t;function sI(t){const e=HC(t);return WC(t)(e.map(oI))}const xr={test:tI,parse:HC,createTransformer:WC,getAnimatableNone:sI},aI=new Set(["brightness","contrast","saturate","opacity"]);function lI(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Zh)||[];if(!r)return t;const i=n.replace(r,"");let o=aI.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const uI=/\b([a-z-]*)\(.*?\)/gu,Of={...xr,getAnimatableNone:t=>{const e=t.match(uI);return e?e.map(lI).join(" "):t}},cI={...Lh,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:Of,WebkitFilter:Of},jh=t=>cI[t];function qC(t,e){let n=jh(t);return n!==Of&&(n=xr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fI=new Set(["auto","none","0"]);function dI(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!fI.has(o)&&Rs(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=qC(n,i)}const Ig=t=>t===fo||t===ce,kg=(t,e)=>parseFloat(t.split(", ")[e]),Rg=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return kg(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?kg(o[1],t):0}},hI=new Set(["x","y","z"]),pI=co.filter(t=>!hI.has(t));function mI(t){const e=[];return pI.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const oo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Rg(4,13),y:Rg(5,14)};oo.translateX=oo.x;oo.translateY=oo.y;const Yr=new Set;let $f=!1,zf=!1;function JC(){if(zf){const t=Array.from(Yr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=mI(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,s])=>{var a;(a=r.getValue(o))===null||a===void 0||a.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}zf=!1,$f=!1,Yr.forEach(t=>t.complete()),Yr.clear()}function KC(){Yr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(zf=!0)})}function gI(){KC(),JC()}class ep{constructor(e,n,r,i,o,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Yr.add(this),$f||($f=!0,Ve.read(KC),Ve.resolveKeyframes(JC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Yr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Yr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const YC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),yI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vI(t){const e=yI.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function XC(t,e,n=1){const[r,i]=vI(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const s=o.trim();return YC(s)?parseFloat(s):s}return Fh(i)?XC(i,e,n+1):i}const ZC=t=>e=>e.test(t),wI={test:t=>t==="auto",parse:t=>t},QC=[fo,ce,Mn,nr,lP,aP,wI],Mg=t=>QC.find(ZC(t));class jC extends ep{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),Fh(f))){const d=XC(f,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!kC.has(r)||e.length!==2)return;const[i,o]=e,s=Mg(i),a=Mg(o);if(s!==a)if(Ig(s)&&Ig(a))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)YP(e[i])&&r.push(i);r.length&&dI(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=oo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,f])=>{n.getValue(c).set(f)}),this.resolveNoneKeyframes()}}const bg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xr.test(t)||t==="0")&&!t.startsWith("url("));function _I(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function CI(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],s=bg(i,e),a=bg(o,e);return!s||!a?!1:_I(t)||(n==="spring"||Gh(n))&&r}const xI=t=>t!==null;function _u(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(xI),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const TI=40;class ex{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>TI?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&gI(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=bn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:s,onComplete:a,onUpdate:c,isGenerator:f}=this.options;if(!f&&!CI(e,r,i,o))if(s)this.options.duration=0;else{c&&c(_u(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ge=(t,e,n)=>t+(e-t)*n;function pc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function SI({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,s=0;if(!e)i=o=s=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=pc(c,a,t+1/3),o=pc(c,a,t),s=pc(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function Ll(t,e){return n=>n>0?e:t}const mc=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},EI=[Bf,Wr,Ni],AI=t=>EI.find(e=>e.test(t));function Ng(t){const e=AI(t);if(!e)return!1;let n=e.parse(t);return e===Ni&&(n=SI(n)),n}const Dg=(t,e)=>{const n=Ng(t),r=Ng(e);if(!n||!r)return Ll(t,e);const i={...n};return o=>(i.red=mc(n.red,r.red,o),i.green=mc(n.green,r.green,o),i.blue=mc(n.blue,r.blue,o),i.alpha=Ge(n.alpha,r.alpha,o),Wr.transform(i))},PI=(t,e)=>n=>e(t(n)),$s=(...t)=>t.reduce(PI),Gf=new Set(["none","hidden"]);function II(t,e){return Gf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function kI(t,e){return n=>Ge(t,e,n)}function tp(t){return typeof t=="number"?kI:typeof t=="string"?Fh(t)?Ll:_t.test(t)?Dg:bI:Array.isArray(t)?tx:typeof t=="object"?_t.test(t)?Dg:RI:Ll}function tx(t,e){const n=[...t],r=n.length,i=t.map((o,s)=>tp(o)(o,e[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}}function RI(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=tp(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function MI(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],a=t.indexes[s][i[s]],c=(n=t.values[a])!==null&&n!==void 0?n:0;r[o]=c,i[s]++}return r}const bI=(t,e)=>{const n=xr.createTransformer(e),r=Rs(t),i=Rs(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Gf.has(t)&&!i.values.length||Gf.has(e)&&!r.values.length?II(t,e):$s(tx(MI(r,i),i.values),n):Ll(t,e)};function nx(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ge(t,e,n):tp(t)(t,e)}const NI=5;function rx(t,e,n){const r=Math.max(e-NI,0);return RC(n-t(r),e-r)}const Je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gc=.001;function DI({duration:t=Je.duration,bounce:e=Je.bounce,velocity:n=Je.velocity,mass:r=Je.mass}){let i,o,s=1-e;s=Jn(Je.minDamping,Je.maxDamping,s),t=Jn(Je.minDuration,Je.maxDuration,zn(t)),s<1?(i=f=>{const d=f*s,h=d*t,p=d-n,m=Hf(f,s),w=Math.exp(-h);return gc-p/m*w},o=f=>{const h=f*s*t,p=h*n+n,m=Math.pow(s,2)*Math.pow(f,2)*t,w=Math.exp(-h),g=Hf(Math.pow(f,2),s);return(-i(f)+gc>0?-1:1)*((p-m)*w)/g}):(i=f=>{const d=Math.exp(-f*t),h=(f-n)*t+1;return-gc+d*h},o=f=>{const d=Math.exp(-f*t),h=(n-f)*(t*t);return d*h});const a=5/t,c=LI(i,o,a);if(t=$n(t),isNaN(c))return{stiffness:Je.stiffness,damping:Je.damping,duration:t};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:s*2*Math.sqrt(r*f),duration:t}}}const FI=12;function LI(t,e,n){let r=n;for(let i=1;i<FI;i++)r=r-t(r)/e(r);return r}function Hf(t,e){return t*Math.sqrt(1-e*e)}const VI=["duration","bounce"],UI=["stiffness","damping","mass"];function Fg(t,e){return e.some(n=>t[n]!==void 0)}function BI(t){let e={velocity:Je.velocity,stiffness:Je.stiffness,damping:Je.damping,mass:Je.mass,isResolvedFromDuration:!1,...t};if(!Fg(t,UI)&&Fg(t,VI))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*Jn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Je.mass,stiffness:i,damping:o}}else{const n=DI(t);e={...e,...n,mass:Je.mass},e.isResolvedFromDuration=!0}return e}function ix(t=Je.visualDuration,e=Je.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:c,damping:f,mass:d,duration:h,velocity:p,isResolvedFromDuration:m}=BI({...n,velocity:-zn(n.velocity||0)}),w=p||0,g=f/(2*Math.sqrt(c*d)),C=s-o,y=zn(Math.sqrt(c/d)),v=Math.abs(C)<5;r||(r=v?Je.restSpeed.granular:Je.restSpeed.default),i||(i=v?Je.restDelta.granular:Je.restDelta.default);let _;if(g<1){const A=Hf(y,g);_=k=>{const R=Math.exp(-g*y*k);return s-R*((w+g*y*C)/A*Math.sin(A*k)+C*Math.cos(A*k))}}else if(g===1)_=A=>s-Math.exp(-y*A)*(C+(w+y*C)*A);else{const A=y*Math.sqrt(g*g-1);_=k=>{const R=Math.exp(-g*y*k),N=Math.min(A*k,300);return s-R*((w+g*y*C)*Math.sinh(N)+A*C*Math.cosh(N))/A}}const E={calculatedDuration:m&&h||null,next:A=>{const k=_(A);if(m)a.done=A>=h;else{let R=0;g<1&&(R=A===0?$n(w):rx(_,A,k));const N=Math.abs(R)<=r,D=Math.abs(s-k)<=i;a.done=N&&D}return a.value=a.done?s:k,a},toString:()=>{const A=Math.min(xC(E),Lf),k=TC(R=>E.next(A*R).value,A,30);return A+"ms "+k}};return E}function Lg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:c,restDelta:f=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=N=>a!==void 0&&N<a||c!==void 0&&N>c,w=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let g=n*e;const C=h+g,y=s===void 0?C:s(C);y!==C&&(g=y-h);const v=N=>-g*Math.exp(-N/r),_=N=>y+v(N),E=N=>{const D=v(N),F=_(N);p.done=Math.abs(D)<=f,p.value=p.done?y:F};let A,k;const R=N=>{m(p.value)&&(A=N,k=ix({keyframes:[p.value,w(p.value)],velocity:rx(_,N,p.value),damping:i,stiffness:o,restDelta:f,restSpeed:d}))};return R(0),{calculatedDuration:null,next:N=>{let D=!1;return!k&&A===void 0&&(D=!0,E(N),R(N)),A!==void 0&&N>=A?k.next(N-A):(!D&&E(N),p)}}}const OI=Os(.42,0,1,1),$I=Os(0,0,.58,1),ox=Os(.42,0,.58,1),zI=t=>Array.isArray(t)&&typeof t[0]!="number",GI={linear:Wt,easeIn:OI,easeInOut:ox,easeOut:$I,circIn:Xh,circInOut:BC,circOut:UC,backIn:Yh,backInOut:LC,backOut:FC,anticipate:VC},Vg=t=>{if(Hh(t)){nC(t.length===4);const[e,n,r,i]=t;return Os(e,n,r,i)}else if(typeof t=="string")return GI[t];return t};function HI(t,e,n){const r=[],i=n||nx,o=t.length-1;for(let s=0;s<o;s++){let a=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Wt:e;a=$s(c,a)}r.push(a)}return r}function WI(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(nC(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=HI(e,r,i),c=a.length,f=d=>{if(s&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=ro(t[h],t[h+1],d);return a[h](p)};return n?d=>f(Jn(t[0],t[o-1],d)):f}function qI(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ro(0,e,r);t.push(Ge(n,1,i))}}function JI(t){const e=[0];return qI(e,t.length-1),e}function KI(t,e){return t.map(n=>n*e)}function YI(t,e){return t.map(()=>e||ox).splice(0,t.length-1)}function Vl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=zI(r)?r.map(Vg):Vg(r),o={done:!1,value:e[0]},s=KI(n&&n.length===e.length?n:JI(e),t),a=WI(s,e,{ease:Array.isArray(i)?i:YI(e,i)});return{calculatedDuration:t,next:c=>(o.value=a(c),o.done=c>=t,o)}}const XI=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ve.update(e,!0),stop:()=>Cr(e),now:()=>ft.isProcessing?ft.timestamp:bn.now()}},ZI={decay:Lg,inertia:Lg,tween:Vl,keyframes:Vl,spring:ix},QI=t=>t/100;class np extends ex{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,s=i?.KeyframeResolver||ep,a=(c,f)=>this.onKeyframesResolved(c,f);this.resolver=new s(o,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=this.options,a=Gh(n)?n:ZI[n]||Vl;let c,f;a!==Vl&&typeof e[0]!="number"&&(c=$s(QI,nx(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});o==="mirror"&&(f=a({...this.options,keyframes:[...e].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=xC(d));const{calculatedDuration:h}=d,p=h+i,m=p*(r+1)-i;return{generator:d,mirroredGenerator:f,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:f,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return o.next(0);const{delay:p,repeat:m,repeatType:w,repeatDelay:g,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let _=this.currentTime,E=o;if(m){const N=Math.min(this.currentTime,d)/h;let D=Math.floor(N),F=N%1;!F&&N>=1&&(F=1),F===1&&D--,D=Math.min(D,m+1),!!(D%2)&&(w==="reverse"?(F=1-F,g&&(F-=g/h)):w==="mirror"&&(E=s)),_=Jn(0,1,F)*h}const A=v?{done:!1,value:c[0]}:E.next(_);a&&(A.value=a(A.value));let{done:k}=A;!v&&f!==null&&(k=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return R&&i!==void 0&&(A.value=_u(c,this.options,i)),C&&C(A.value),R&&this.finish(),A}get duration(){const{resolved:e}=this;return e?zn(e.calculatedDuration):0}get time(){return zn(this.currentTime)}set time(e){e=$n(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=XI,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const jI=new Set(["opacity","clipPath","filter","transform"]);function ek(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:c}={}){const f={[e]:n};c&&(f.offset=c);const d=EC(a,i);return Array.isArray(d)&&(f.easing=d),t.animate(f,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}const tk=Ih(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ul=10,nk=2e4;function rk(t){return Gh(t.type)||t.type==="spring"||!SC(t.ease)}function ik(t,e){const n=new np({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<nk;)r=n.sample(o),i.push(r.value),o+=Ul;return{times:void 0,keyframes:i,duration:o-Ul,ease:"linear"}}const sx={anticipate:VC,backInOut:LC,circInOut:BC};function ok(t){return t in sx}class Ug extends ex{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new jC(o,(s,a)=>this.onKeyframesResolved(s,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:o,type:s,motionValue:a,name:c,startTime:f}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof o=="string"&&Fl()&&ok(o)&&(o=sx[o]),rk(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:w,...g}=this.options,C=ik(e,g);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,i=C.times,o=C.ease,s="keyframes"}const d=ek(a.owner.current,c,e,{...this.options,duration:r,times:i,ease:o});return d.startTime=f??this.calcStartTime(),this.pendingTimeline?(xg(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(_u(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:s,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return zn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return zn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=$n(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Wt;const{animation:r}=n;xg(r,e)}return Wt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:s,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:d,onComplete:h,element:p,...m}=this.options,w=new np({...m,keyframes:r,duration:i,type:o,ease:s,times:a,isGenerator:!0}),g=$n(this.time);f.setWithVelocity(w.sample(g-Ul).value,w.sample(g).value,Ul)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:s,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=n.owner.getProps();return tk()&&r&&jI.has(r)&&!c&&!f&&!i&&o!=="mirror"&&s!==0&&a!=="inertia"}}const sk={type:"spring",stiffness:500,damping:25,restSpeed:10},ak=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lk={type:"keyframes",duration:.8},uk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ck=(t,{keyframes:e})=>e.length>2?lk:si.has(t)?t.startsWith("scale")?ak(e[1]):sk:uk;function fk({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:c,elapsed:f,...d}){return!!Object.keys(d).length}const rp=(t,e,n,r={},i,o)=>s=>{const a=zh(r,t)||{},c=a.delay||r.delay||0;let{elapsed:f=0}=r;f=f-$n(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-f,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:i};fk(a)||(d={...d,...ck(t,d)}),d.duration&&(d.duration=$n(d.duration)),d.repeatDelay&&(d.repeatDelay=$n(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const p=_u(d.keyframes,a);if(p!==void 0)return Ve.update(()=>{d.onUpdate(p),d.onComplete()}),new RP([])}return!o&&Ug.supports(d)?new Ug(d):new np(d)};function dk({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ax(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:s=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(s=r);const f=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const p=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),m=c[h];if(m===void 0||d&&dk(d,h))continue;const w={delay:n,...zh(s||{},h)};let g=!1;if(window.MotionHandoffAnimation){const y=MC(t);if(y){const v=window.MotionHandoffAnimation(y,h,Ve);v!==null&&(w.startTime=v,g=!0)}}Uf(t,h),p.start(rp(h,p,m,t.shouldReduceMotion&&kC.has(h)?{type:!1}:w,t,g));const C=p.animation;C&&f.push(C)}return a&&Promise.all(f).then(()=>{Ve.update(()=>{a&&HP(t,a)})}),f}function Wf(t,e,n={}){var r;const i=wu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const s=i?()=>Promise.all(ax(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=o;return hk(t,e,d+f,h,p,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[f,d]=c==="beforeChildren"?[s,a]:[a,s];return f().then(()=>d())}else return Promise.all([s(),a(n.delay)])}function hk(t,e,n=0,r=0,i=1,o){const s=[],a=(t.variantChildren.size-1)*r,c=i===1?(f=0)=>f*r:(f=0)=>a-f*r;return Array.from(t.variantChildren).sort(pk).forEach((f,d)=>{f.notify("AnimationStart",e),s.push(Wf(f,e,{...o,delay:n+c(d)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(s)}function pk(t,e){return t.sortNodePosition(e)}function mk(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Wf(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=Wf(t,e,n);else{const i=typeof e=="function"?wu(t,e,n.custom):e;r=Promise.all(ax(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const gk=Rh.length;function lx(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lx(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<gk;n++){const r=Rh[n],i=t.props[r];(Ps(i)||i===!1)&&(e[r]=i)}return e}const yk=[...kh].reverse(),vk=kh.length;function wk(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mk(t,n,r)))}function _k(t){let e=wk(t),n=Bg(),r=!0;const i=c=>(f,d)=>{var h;const p=wu(t,d,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:w,...g}=p;f={...f,...g,...w}}return f};function o(c){e=c(t)}function s(c){const{props:f}=t,d=lx(t.parent)||{},h=[],p=new Set;let m={},w=1/0;for(let C=0;C<vk;C++){const y=yk[C],v=n[y],_=f[y]!==void 0?f[y]:d[y],E=Ps(_),A=y===c?v.isActive:null;A===!1&&(w=C);let k=_===d[y]&&_!==f[y]&&E;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),v.protectedKeys={...m},!v.isActive&&A===null||!_&&!v.prevProp||yu(_)||typeof _=="boolean")continue;const R=Ck(v.prevProp,_);let N=R||y===c&&v.isActive&&!k&&E||C>w&&E,D=!1;const F=Array.isArray(_)?_:[_];let q=F.reduce(i(y),{});A===!1&&(q={});const{prevResolvedValues:I={}}=v,b={...I,...q},x=G=>{N=!0,p.has(G)&&(D=!0,p.delete(G)),v.needsAnimating[G]=!0;const H=t.getValue(G);H&&(H.liveStyle=!1)};for(const G in b){const H=q[G],B=I[G];if(m.hasOwnProperty(G))continue;let K=!1;Ff(H)&&Ff(B)?K=!CC(H,B):K=H!==B,K?H!=null?x(G):p.add(G):H!==void 0&&p.has(G)?x(G):v.protectedKeys[G]=!0}v.prevProp=_,v.prevResolvedValues=q,v.isActive&&(m={...m,...q}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(k&&R)||D)&&h.push(...F.map(G=>({animation:G,options:{type:y}})))}if(p.size){const C={};p.forEach(y=>{const v=t.getBaseTarget(y),_=t.getValue(y);_&&(_.liveStyle=!0),C[y]=v??null}),h.push({animation:C})}let g=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(c,f){var d;if(n[c].isActive===f)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(c,f)}),n[c].isActive=f;const h=s(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Bg(),r=!0}}}function Ck(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!CC(e,t):!1}function Nr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bg(){return{animate:Nr(!0),whileInView:Nr(),whileHover:Nr(),whileTap:Nr(),whileDrag:Nr(),whileFocus:Nr(),exit:Nr()}}class Ar{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xk extends Ar{constructor(e){super(e),e.animationState||(e.animationState=_k(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Tk=0;class Sk extends Ar{constructor(){super(...arguments),this.id=Tk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Ek={animation:{Feature:xk},exit:{Feature:Sk}};function Ms(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function zs(t){return{point:{x:t.pageX,y:t.pageY}}}const Ak=t=>e=>Wh(e)&&t(e,zs(e));function rs(t,e,n,r){return Ms(t,e,Ak(n),r)}const Og=(t,e)=>Math.abs(t-e);function Pk(t,e){const n=Og(t.x,e.x),r=Og(t.y,e.y);return Math.sqrt(n**2+r**2)}class ux{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=vc(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=Pk(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:w}=h,{timestamp:g}=ft;this.history.push({...w,timestamp:g});const{onStart:C,onMove:y}=this.handlers;p||(C&&C(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=yc(p,this.transformPagePoint),Ve.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:w,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=vc(h.type==="pointercancel"?this.lastMoveEventInfo:yc(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,C),w&&w(h,C)},!Wh(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=zs(e),a=yc(s,this.transformPagePoint),{point:c}=a,{timestamp:f}=ft;this.history=[{...c,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,vc(a,this.history)),this.removeListeners=$s(rs(this.contextWindow,"pointermove",this.handlePointerMove),rs(this.contextWindow,"pointerup",this.handlePointerUp),rs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cr(this.updatePoint)}}function yc(t,e){return e?{point:e(t.point)}:t}function $g(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vc({point:t},e){return{point:t,delta:$g(t,cx(e)),offset:$g(t,Ik(e)),velocity:kk(e,.1)}}function Ik(t){return t[0]}function cx(t){return t[t.length-1]}function kk(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=cx(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>$n(e)));)n--;if(!r)return{x:0,y:0};const o=zn(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const fx=1e-4,Rk=1-fx,Mk=1+fx,dx=.01,bk=0-dx,Nk=0+dx;function Jt(t){return t.max-t.min}function Dk(t,e,n){return Math.abs(t-e)<=n}function zg(t,e,n,r=.5){t.origin=r,t.originPoint=Ge(e.min,e.max,t.origin),t.scale=Jt(n)/Jt(e),t.translate=Ge(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Rk&&t.scale<=Mk||isNaN(t.scale))&&(t.scale=1),(t.translate>=bk&&t.translate<=Nk||isNaN(t.translate))&&(t.translate=0)}function is(t,e,n,r){zg(t.x,e.x,n.x,r?r.originX:void 0),zg(t.y,e.y,n.y,r?r.originY:void 0)}function Gg(t,e,n){t.min=n.min+e.min,t.max=t.min+Jt(e)}function Fk(t,e,n){Gg(t.x,e.x,n.x),Gg(t.y,e.y,n.y)}function Hg(t,e,n){t.min=e.min-n.min,t.max=t.min+Jt(e)}function os(t,e,n){Hg(t.x,e.x,n.x),Hg(t.y,e.y,n.y)}function Lk(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ge(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ge(n,t,r.max):Math.min(t,n)),t}function Wg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Vk(t,{top:e,left:n,bottom:r,right:i}){return{x:Wg(t.x,n,i),y:Wg(t.y,e,r)}}function qg(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Uk(t,e){return{x:qg(t.x,e.x),y:qg(t.y,e.y)}}function Bk(t,e){let n=.5;const r=Jt(t),i=Jt(e);return i>r?n=ro(e.min,e.max-r,t.min):r>i&&(n=ro(t.min,t.max-i,e.min)),Jn(0,1,n)}function Ok(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qf=.35;function $k(t=qf){return t===!1?t=0:t===!0&&(t=qf),{x:Jg(t,"left","right"),y:Jg(t,"top","bottom")}}function Jg(t,e,n){return{min:Kg(t,e),max:Kg(t,n)}}function Kg(t,e){return typeof t=="number"?t:t[e]||0}const Yg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Di=()=>({x:Yg(),y:Yg()}),Xg=()=>({min:0,max:0}),Xe=()=>({x:Xg(),y:Xg()});function Qt(t){return[t("x"),t("y")]}function hx({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zk({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Gk(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function wc(t){return t===void 0||t===1}function Jf({scale:t,scaleX:e,scaleY:n}){return!wc(t)||!wc(e)||!wc(n)}function Ur(t){return Jf(t)||px(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function px(t){return Zg(t.x)||Zg(t.y)}function Zg(t){return t&&t!=="0%"}function Bl(t,e,n){const r=t-n,i=e*r;return n+i}function Qg(t,e,n,r,i){return i!==void 0&&(t=Bl(t,i,r)),Bl(t,n,r)+e}function Kf(t,e=0,n=1,r,i){t.min=Qg(t.min,e,n,r,i),t.max=Qg(t.max,e,n,r,i)}function mx(t,{x:e,y:n}){Kf(t.x,e.translate,e.scale,e.originPoint),Kf(t.y,n.translate,n.scale,n.originPoint)}const jg=.999999999999,ey=1.0000000000001;function Hk(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Li(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,mx(t,s)),r&&Ur(o.latestValues)&&Li(t,o.latestValues))}e.x<ey&&e.x>jg&&(e.x=1),e.y<ey&&e.y>jg&&(e.y=1)}function Fi(t,e){t.min=t.min+e,t.max=t.max+e}function ty(t,e,n,r,i=.5){const o=Ge(t.min,t.max,i);Kf(t,e,n,o,r)}function Li(t,e){ty(t.x,e.x,e.scaleX,e.scale,e.originX),ty(t.y,e.y,e.scaleY,e.scale,e.originY)}function gx(t,e){return hx(Gk(t.getBoundingClientRect(),e))}function Wk(t,e,n){const r=gx(t,n),{scroll:i}=e;return i&&(Fi(r.x,i.offset.x),Fi(r.y,i.offset.y)),r}const yx=({current:t})=>t?t.ownerDocument.defaultView:null,qk=new WeakMap;class Jk{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zs(d).point)},o=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:w}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=BP(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qt(C=>{let y=this.getAxisMotionValue(C).get()||0;if(Mn.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[C];_&&(y=Jt(_)*(parseFloat(y)/100))}}this.originPoint[C]=y}),w&&Ve.postRender(()=>w(d,h)),Uf(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:w,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:C}=h;if(m&&this.currentDirection===null){this.currentDirection=Kk(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",h.point,C),this.updateAxis("y",h.point,C),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),c=()=>Qt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new ux(e,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:yx(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ve.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ta(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Lk(s,this.constraints[e],this.elastic[e])),o.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&bi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Vk(i.layoutBox,n):this.constraints=!1,this.elastic=$k(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Ok(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!bi(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Wk(r,i.root,this.visualElement.getTransformPagePoint());let s=Uk(i.layout.layoutBox,o);if(n){const a=n(zk(s));this.hasMutatedConstraints=!!a,a&&(s=hx(a))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},f=Qt(d=>{if(!Ta(d,n,this.currentDirection))return;let h=c&&c[d]||{};s&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(f).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Uf(this.visualElement,e),r.start(rp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qt(n=>{const{drag:r}=this.getProps();if(!Ta(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(e[n]-Ge(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!bi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Qt(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const c=a.get();i[s]=Bk({min:c,max:c},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qt(s=>{if(!Ta(s,e,null))return;const a=this.getAxisMotionValue(s),{min:c,max:f}=this.constraints[s];a.set(Ge(c,f,i[s]))})}addListeners(){if(!this.visualElement.current)return;qk.set(this.visualElement,this);const e=this.visualElement.current,n=rs(e,"pointerdown",c=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();bi(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ve.read(r);const s=Ms(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Qt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=qf,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Ta(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Kk(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Yk extends Ar{constructor(e){super(e),this.removeGroupControls=Wt,this.removeListeners=Wt,this.controls=new Jk(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ny=t=>(e,n)=>{t&&Ve.postRender(()=>t(e,n))};class Xk extends Ar{constructor(){super(...arguments),this.removePointerDownListener=Wt}onPointerDown(e){this.session=new ux(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ny(e),onStart:ny(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&Ve.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=rs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qa={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ry(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Io={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const n=ry(t,e.target.x),r=ry(t,e.target.y);return`${n}% ${r}%`}},Zk={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=xr.parse(t);if(i.length>5)return r;const o=xr.createTransformer(t),s=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=a,i[1+s]/=c;const f=Ge(a,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=f),typeof i[3+s]=="number"&&(i[3+s]/=f),o(i)}};class Qk extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;vP(jk),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Qa.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||Ve.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bh.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vx(t){const[e,n]=NA(),r=z.useContext(eC);return S.jsx(Qk,{...t,layoutGroup:r,switchLayoutGroup:z.useContext(lC),isPresent:e,safeToRemove:n})}const jk={borderRadius:{...Io,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Io,borderTopRightRadius:Io,borderBottomLeftRadius:Io,borderBottomRightRadius:Io,boxShadow:Zk};function eR(t,e,n){const r=xt(t)?t:ks(t);return r.start(rp("",r,e,n)),r.animation}function tR(t){return t instanceof SVGElement&&t.tagName!=="svg"}const nR=(t,e)=>t.depth-e.depth;class rR{constructor(){this.children=[],this.isDirty=!1}add(e){qh(this.children,e),this.isDirty=!0}remove(e){Jh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nR),this.isDirty=!1,this.children.forEach(e)}}function iR(t,e){const n=bn.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Cr(r),t(o-e))};return Ve.read(r,!0),()=>Cr(r)}const wx=["TopLeft","TopRight","BottomLeft","BottomRight"],oR=wx.length,iy=t=>typeof t=="string"?parseFloat(t):t,oy=t=>typeof t=="number"||ce.test(t);function sR(t,e,n,r,i,o){i?(t.opacity=Ge(0,n.opacity!==void 0?n.opacity:1,aR(r)),t.opacityExit=Ge(e.opacity!==void 0?e.opacity:1,0,lR(r))):o&&(t.opacity=Ge(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<oR;s++){const a=`border${wx[s]}Radius`;let c=sy(e,a),f=sy(n,a);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||oy(c)===oy(f)?(t[a]=Math.max(Ge(iy(c),iy(f),r),0),(Mn.test(f)||Mn.test(c))&&(t[a]+="%")):t[a]=f}(e.rotate||n.rotate)&&(t.rotate=Ge(e.rotate||0,n.rotate||0,r))}function sy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aR=_x(0,.5,UC),lR=_x(.5,.95,Wt);function _x(t,e,n){return r=>r<t?0:r>e?1:n(ro(t,e,r))}function ay(t,e){t.min=e.min,t.max=e.max}function Zt(t,e){ay(t.x,e.x),ay(t.y,e.y)}function ly(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uy(t,e,n,r,i){return t-=e,t=Bl(t,1/n,r),i!==void 0&&(t=Bl(t,1/i,r)),t}function uR(t,e=0,n=1,r=.5,i,o=t,s=t){if(Mn.test(e)&&(e=parseFloat(e),e=Ge(s.min,s.max,e/100)-s.min),typeof e!="number")return;let a=Ge(o.min,o.max,r);t===o&&(a-=e),t.min=uy(t.min,e,n,a,i),t.max=uy(t.max,e,n,a,i)}function cy(t,e,[n,r,i],o,s){uR(t,e[n],e[r],e[i],e.scale,o,s)}const cR=["x","scaleX","originX"],fR=["y","scaleY","originY"];function fy(t,e,n,r){cy(t.x,e,cR,n?n.x:void 0,r?r.x:void 0),cy(t.y,e,fR,n?n.y:void 0,r?r.y:void 0)}function dy(t){return t.translate===0&&t.scale===1}function Cx(t){return dy(t.x)&&dy(t.y)}function hy(t,e){return t.min===e.min&&t.max===e.max}function dR(t,e){return hy(t.x,e.x)&&hy(t.y,e.y)}function py(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function xx(t,e){return py(t.x,e.x)&&py(t.y,e.y)}function my(t){return Jt(t.x)/Jt(t.y)}function gy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hR{constructor(){this.members=[]}add(e){qh(this.members,e),e.scheduleRender()}remove(e){if(Jh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pR(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,s=n?.z||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:d,rotateX:h,rotateY:p,skewX:m,skewY:w}=n;f&&(r=`perspective(${f}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),w&&(r+=`skewY(${w}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const Br={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vo=typeof window<"u"&&window.MotionDebug!==void 0,_c=["","X","Y","Z"],mR={visibility:"hidden"},yy=1e3;let gR=0;function Cc(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Tx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=MC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ve,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Tx(r)}function Sx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=e?.()){this.id=gR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vo&&(Br.totalNodes=Br.resolvedTargetDeltas=Br.recalculatedProjection=0),this.nodes.forEach(wR),this.nodes.forEach(SR),this.nodes.forEach(ER),this.nodes.forEach(_R),Vo&&window.MotionDebug.record(Br)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new rR)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Kh),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const c=this.eventHandlers.get(s);c&&c.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tR(s),this.instance=s;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(f||c)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=iR(p,250),Qa.hasAnimatedSinceResize&&(Qa.hasAnimatedSinceResize=!1,this.nodes.forEach(wy))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||RR,{onLayoutAnimationStart:C,onLayoutAnimationComplete:y}=d.getProps(),v=!this.targetLayout||!xx(this.targetLayout,w)||m,_=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const E={...zh(g,"layout"),onPlay:C,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||wy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AR),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Tx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vy);return}this.isUpdating||this.nodes.forEach(xR),this.isUpdating=!1,this.nodes.forEach(TR),this.nodes.forEach(yR),this.nodes.forEach(vR),this.clearAllSnapshots();const a=bn.now();ft.delta=Jn(0,1e3/60,a-ft.timestamp),ft.timestamp=a,ft.isProcessing=!0,fc.update.process(ft),fc.preRender.process(ft),fc.render.process(ft),ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CR),this.sharedNodes.forEach(PR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Cx(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;s&&(a||Ur(this.latestValues)||d)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return s&&(c=this.removeTransform(c)),MR(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:a}=this.options;if(!a)return Xe();const c=a.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(bR))){const{scroll:d}=this.root;d&&(Fi(c.x,d.offset.x),Fi(c.y,d.offset.y))}return c}removeElementScroll(s){var a;const c=Xe();if(Zt(c,s),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Zt(c,s),Fi(c.x,h.offset.x),Fi(c.y,h.offset.y))}return c}applyTransform(s,a=!1){const c=Xe();Zt(c,s);for(let f=0;f<this.path.length;f++){const d=this.path[f];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Li(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ur(d.latestValues)&&Li(c,d.latestValues)}return Ur(this.latestValues)&&Li(c,this.latestValues),c}removeTransform(s){const a=Xe();Zt(a,s);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!Ur(f.latestValues))continue;Jf(f.latestValues)&&f.updateSnapshot();const d=Xe(),h=f.measurePageBox();Zt(d,h),fy(a,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return Ur(this.latestValues)&&fy(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(s||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=ft.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),os(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xe(),this.targetWithTransforms=Xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Fk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zt(this.target,this.layout.layoutBox),mx(this.target,this.targetDelta)):Zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),os(this.relativeTargetOrigin,this.target,m.target),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vo&&Br.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Jf(this.parent.latestValues)||px(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let f=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ft.timestamp&&(f=!1),f)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Zt(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;Hk(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Xe());const{target:w}=a;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ly(this.prevProjectionDelta.x,this.projectionDelta.x),ly(this.prevProjectionDelta.y,this.projectionDelta.y)),is(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!gy(this.projectionDelta.x,this.prevProjectionDelta.x)||!gy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Vo&&Br.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Di(),this.projectionDelta=Di(),this.projectionDeltaWithTransform=Di()}setAnimationOrigin(s,a=!1){const c=this.snapshot,f=c?c.latestValues:{},d={...this.latestValues},h=Di();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Xe(),m=c?c.source:void 0,w=this.layout?this.layout.source:void 0,g=m!==w,C=this.getStack(),y=!C||C.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(kR));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const A=E/1e3;_y(h.x,s.x,A),_y(h.y,s.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(os(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IR(this.relativeTarget,this.relativeTargetOrigin,p,A),_&&dR(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Xe()),Zt(_,this.relativeTarget)),g&&(this.animationValues=d,sR(d,f,this.latestValues,A,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ve.update(()=>{Qa.hasAnimatedSinceResize=!0,this.currentAnimation=eR(0,yy,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:c,layout:f,latestValues:d}=s;if(!(!a||!c||!f)){if(this!==s&&this.layout&&f&&Ex(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||Xe();const h=Jt(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const p=Jt(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+p}Zt(a,c),Li(a,d),is(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new hR),this.sharedNodes.get(s).add(a);const f=a.options.initialPromotionConfig;a.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const f={};c.z&&Cc("z",s,f,this.animationValues);for(let d=0;d<_c.length;d++)Cc(`rotate${_c[d]}`,s,f,this.animationValues),Cc(`skew${_c[d]}`,s,f,this.animationValues);s.render();for(const d in f)s.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);s.scheduleRender()}getProjectionStyles(s){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return mR;const f={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Xa(s?.pointerEvents)||"",f.transform=d?d(this.latestValues,""):"none",f;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Xa(s?.pointerEvents)||""),this.hasProjected&&!Ur(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),f.transform=pR(this.projectionDeltaWithTransform,this.treeScale,p),d&&(f.transform=d(p,f.transform));const{x:m,y:w}=this.projectionDelta;f.transformOrigin=`${m.origin*100}% ${w.origin*100}% 0`,h.animationValues?f.opacity=h===this?(c=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:f.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in Dl){if(p[g]===void 0)continue;const{correct:C,applyTo:y}=Dl[g],v=f.transform==="none"?p[g]:C(p[g],h);if(y){const _=y.length;for(let E=0;E<_;E++)f[y[E]]=v}else f[g]=v}return this.options.layoutId&&(f.pointerEvents=h===this?Xa(s?.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(vy),this.root.sharedNodes.clear()}}}function yR(t){t.updateLayout()}function vR(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,s=n.source!==t.layout.source;o==="size"?Qt(h=>{const p=s?n.measuredBox[h]:n.layoutBox[h],m=Jt(p);p.min=r[h].min,p.max=p.min+m}):Ex(o,n.layoutBox,r)&&Qt(h=>{const p=s?n.measuredBox[h]:n.layoutBox[h],m=Jt(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=Di();is(a,r,n.layoutBox);const c=Di();s?is(c,t.applyTransform(i,!0),n.measuredBox):is(c,r,n.layoutBox);const f=!Cx(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const w=Xe();os(w,n.layoutBox,p.layoutBox);const g=Xe();os(g,r,m.layoutBox),xx(w,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=w,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:f,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function wR(t){Vo&&Br.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _R(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function CR(t){t.clearSnapshot()}function vy(t){t.clearMeasurements()}function xR(t){t.isLayoutDirty=!1}function TR(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function wy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function SR(t){t.resolveTargetDelta()}function ER(t){t.calcProjection()}function AR(t){t.resetSkewAndRotation()}function PR(t){t.removeLeadSnapshot()}function _y(t,e,n){t.translate=Ge(e.translate,0,n),t.scale=Ge(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Cy(t,e,n,r){t.min=Ge(e.min,n.min,r),t.max=Ge(e.max,n.max,r)}function IR(t,e,n,r){Cy(t.x,e.x,n.x,r),Cy(t.y,e.y,n.y,r)}function kR(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const RR={duration:.45,ease:[.4,0,.1,1]},xy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Ty=xy("applewebkit/")&&!xy("chrome/")?Math.round:Wt;function Sy(t){t.min=Ty(t.min),t.max=Ty(t.max)}function MR(t){Sy(t.x),Sy(t.y)}function Ex(t,e,n){return t==="position"||t==="preserve-aspect"&&!Dk(my(e),my(n),.2)}function bR(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const NR=Sx({attachResizeListener:(t,e)=>Ms(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xc={current:void 0},Ax=Sx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xc.current){const t=new NR({});t.mount(window),t.setOptions({layoutScroll:!0}),xc.current=t}return xc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),DR={pan:{Feature:Xk},drag:{Feature:Yk,ProjectionNode:Ax,MeasureLayout:vx}};function Ey(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Ve.postRender(()=>o(e,zs(e)))}class FR extends Ar{mount(){const{current:e}=this.node;e&&(this.unmount=DP(e,n=>(Ey(this.node,n,"Start"),r=>Ey(this.node,r,"End"))))}unmount(){}}class LR extends Ar{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$s(Ms(this.node.current,"focus",()=>this.onFocus()),Ms(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ay(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Ve.postRender(()=>o(e,zs(e)))}class VR extends Ar{mount(){const{current:e}=this.node;e&&(this.unmount=UP(e,n=>(Ay(this.node,n,"Start"),(r,{success:i})=>Ay(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yf=new WeakMap,Tc=new WeakMap,UR=t=>{const e=Yf.get(t.target);e&&e(t)},BR=t=>{t.forEach(UR)};function OR({root:t,...e}){const n=t||document;Tc.has(n)||Tc.set(n,{});const r=Tc.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(BR,{root:t,...e})),r[i]}function $R(t,e,n){const r=OR(e);return Yf.set(t,n),r.observe(t),()=>{Yf.delete(t),r.unobserve(t)}}const zR={some:0,all:1};class GR extends Ar{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:zR[i]},a=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=f?d:h;p&&p(c)};return $R(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(HR(e,n))&&this.startObserver()}unmount(){}}function HR({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const WR={inView:{Feature:GR},tap:{Feature:VR},focus:{Feature:LR},hover:{Feature:FR}},qR={layout:{ProjectionNode:Ax,MeasureLayout:vx}},Xf={current:null},Px={current:!1};function JR(){if(Px.current=!0,!!Ph)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Xf.current=t.matches;t.addListener(e),e()}else Xf.current=!1}const KR=[...QC,_t,xr],YR=t=>KR.find(ZC(t)),Py=new WeakMap;function XR(t,e,n){for(const r in e){const i=e[r],o=n[r];if(xt(i))t.addValue(r,i);else if(xt(o))t.addValue(r,ks(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,ks(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Iy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZR{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ep,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=bn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ve.render(this.render,!1,!0))};const{latestValues:c,renderState:f,onUpdate:d}=s;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=vu(n),this.isVariantNode=sC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const w=p[m];c[m]!==void 0&&xt(w)&&w.set(c[m],!1)}}mount(e){this.current=e,Py.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Px.current||JR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Py.delete(this.current),this.projection&&this.projection.unmount(),Cr(this.notifyUpdate),Cr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=si.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ve.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in io){const n=io[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Iy.length;r++){const i=Iy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=e[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=XR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ks(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(YC(i)||OC(i))?i=parseFloat(i):!YR(i)&&xr.test(n)&&(i=qC(e,n)),this.setBaseTarget(e,xt(i)?i.get():i)),xt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=Dh(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!xt(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Kh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Ix extends ZR{constructor(){super(...arguments),this.KeyframeResolver=jC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function QR(t){return window.getComputedStyle(t)}class jR extends Ix{constructor(){super(...arguments),this.type="html",this.renderInstance=mC}readValueFromInstance(e,n){if(si.has(n)){const r=jh(n);return r&&r.default||0}else{const r=QR(e),i=(dC(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gx(e,n)}build(e,n,r){Vh(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return $h(e,n,r)}}class eM extends Ix{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(si.has(n)){const r=jh(n);return r&&r.default||0}return n=gC.has(n)?n:Mh(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return wC(e,n,r)}build(e,n,r){Uh(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){yC(e,n,r,i)}mount(e){this.isSVGTag=Oh(e.tagName),super.mount(e)}}const tM=(t,e)=>Nh(t)?new eM(e):new jR(e,{allowProjection:t!==z.Fragment}),nM=PP({...Ek,...WR,...DR,...qR},tM),di=zA(nM),ky=1,Sc=`You are a world-class arbiter and editor. Your task is to synthesize multiple expert drafts into a single, coherent, and comprehensive answer that is superior to any individual draft.

Instructions:
1.  Read the original user question carefully.
2.  Review all the provided candidate answers, labeled A, B, C, etc.
3.  Identify the strengths, weaknesses, and unique insights from each draft.
4.  Synthesize the best elements from all drafts into a single, well-structured, and easy-to-read response.
5.  Do NOT simply list the drafts. Create a new, unified answer.
6.  If drafts contradict, use your judgment to determine the most likely correct information or acknowledge the controversy.
7.  Ensure your final answer directly and thoroughly addresses the original user's question.
8.  Do not include headings like "Final Answer" or "Synthesized Response". Begin the response directly.`,Nn="gemini-2.5-flash",sn="gemini-2.5-pro",kx="gpt-5",ip="gpt-5-mini",rM="gpt-5",iM=ip,Rx="openai/gpt-4o",oM="google/gemini-flash-1.5",Mx="anthropic/claude-3-haiku-20240307",bx="gpt-5-medium-reasoning",Zf="gpt-5-high-reasoning",op="You are a world-class expert. Reason step-by-step before providing your answer. ",sM=`
Your reasoning and synthesis abilities are paramount. Before writing the final answer, explicitly outline the key points from each draft, identify convergences and divergences, and then construct a synthesis that resolves contradictions and builds upon the strongest arguments. Your final output should only be the synthesized answer itself.`;function aM(t){if(typeof t!="object"||t===null)return null;const e=t,n=e.id??e.key??e.slug??e.uuid??(typeof e.name=="string"?e.name.toLowerCase().replace(/\s+/g,"-"):null)??null,r=e.name??e.title??e.label??(typeof e.id=="string"?e.id:null)??null,i=e.persona;return typeof n!="string"||typeof r!="string"||typeof i!="string"||!i?null:{id:n,name:r,persona:i}}async function lM(){const e=await fetch("/HeavyOrc/config/experts.json");if(!e.ok)throw new Error(`Failed to fetch experts.json: ${e.status} ${e.statusText}`);const n=await e.json(),r=Array.isArray(n)?n:n&&Array.isArray(n.experts)?n.experts:[],i=[];for(const o of r){const s=aM(o);s?i.push(s):console.warn("Skipping expert missing id, name, or persona:",o)}return i}let Qf;try{Qf=await lM()}catch(t){console.error("Fatal: Could not load experts configuration. The application will run with no agents.",t),Qf=[]}const sp=Qf;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uM,cM;function fM(){return{geminiUrl:uM,vertexUrl:cM}}function dM(t,e,n,r){var i,o;if(!t?.baseUrl){const s=fM();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ai{}function ae(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function u(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let f=0;f<c.length;f++){const d=c[f];u(d,e.slice(o+1),n[f])}else for(const f of c)u(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>l(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ry;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ry||(Ry={}));var My;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(My||(My={}));var nn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(nn||(nn={}));var by;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(by||(by={}));var Ny;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ny||(Ny={}));var Dy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Dy||(Dy={}));var Fy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Fy||(Fy={}));var Ly;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ly||(Ly={}));var Vy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Vy||(Vy={}));var Uy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Uy||(Uy={}));var By;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(By||(By={}));var Oy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Oy||(Oy={}));var $y;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($y||($y={}));var zy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(zy||(zy={}));var Gy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Gy||(Gy={}));var Ol;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ol||(Ol={}));var Hy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Hy||(Hy={}));var ed;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ed||(ed={}));var Wy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Wy||(Wy={}));var qy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qy||(qy={}));var Jy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Jy||(Jy={}));var Ky;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ky||(Ky={}));var Yy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yy||(Yy={}));var Xy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Xy||(Xy={}));var Zy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Zy||(Zy={}));var Qy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Qy||(Qy={}));var jy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(jy||(jy={}));var ev;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ev||(ev={}));var tv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tv||(tv={}));var nv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nv||(nv={}));var rv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rv||(rv={}));var iv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(iv||(iv={}));var ov;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ov||(ov={}));var sv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(sv||(sv={}));var av;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(av||(av={}));var lv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(lv||(lv={}));var uv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(uv||(uv={}));var cv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cv||(cv={}));var fv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(fv||(fv={}));var dv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(dv||(dv={}));var hv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hv||(hv={}));var pv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(pv||(pv={}));var mv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(mv||(mv={}));var gv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(gv||(gv={}));var Vi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Vi||(Vi={}));class td{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ko{get text(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1;const h=[];for(const p of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,w]of Object.entries(p))m!=="text"&&m!=="thought"&&(w!==null||w!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;d=!0,f+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const d=[];for(const h of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&d.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(f+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,r,i,o,s,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,a,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.output}}class yv{}class vv{}class hM{}class pM{}class mM{}class gM{}class wv{}class _v{}class Cv{}class yM{}class xv{}class Tv{}class Sv{}class Ev{}class vM{}class wM{}class _M{}class Av{}class CM{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(a))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class $l{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new $l;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new xv,s=i.videos;o.generatedVideos=s?.map(a=>({video:{uri:a.gcsUri,videoBytes:a.bytesBase64Encoded?jf(a.bytesBase64Encoded):void 0,mimeType:a.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new xv,s=i.generateVideoResponse,a=s?.generatedSamples;o.generatedVideos=a?.map(c=>{const f=c.video;return{video:{uri:f?.uri,videoBytes:f?.encodedVideo?jf(f?.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s?.raiMediaFilteredCount,o.raiMediaFilteredReasons=s?.raiMediaFilteredReasons,r.response=o}}return r}}class xM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ee(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Nx(t,e){const n=Ee(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Dx(t){return Array.isArray(t)?t.map(e=>zl(e)):[zl(t)]}function zl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Fx(t){const e=zl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lx(t){const e=zl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Vx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Pv(e)):[Pv(t)]}function nd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Iv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function kv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Tt(t){if(t==null)throw new Error("ContentUnion is required");return nd(t)?t:{role:"user",parts:Vx(t)}}function Ux(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Tt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Tt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Tt(n)):[Tt(e)]}function an(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Iv(t)||kv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tt(t)]}const e=[],n=[],r=nd(t[0]);for(const i of t){const o=nd(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Iv(i)||kv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Vx(n)}),e}function TM(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(nn).includes(n[0].toUpperCase())?n[0].toUpperCase():nn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(nn).includes(r.toUpperCase())?r.toUpperCase():nn.TYPE_UNSPECIFIED})}}function Wi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&TM(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(nn).includes(a.toUpperCase())?a.toUpperCase():nn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Wi(a);else if(r.includes(s)){const c=[];for(const f of a){if(f.type=="null"){e.nullable=!0;continue}c.push(Wi(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,d]of Object.entries(a))c[f]=Wi(d);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function ap(t){return Wi(t)}function lp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function up(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ho(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wi(e.response));return t}function po(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function SM(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Yn(t,e){if(typeof e!="string")throw new Error("name must be a string");return SM(t,e,"cachedContents")}function Bx(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function li(t){return jf(t)}function EM(t){return t!=null&&typeof t=="object"&&"name"in t}function AM(t){return t!=null&&typeof t=="object"&&"video"in t}function PM(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ox(t){var e;let n;if(EM(t)&&(n=t.name),!(PM(t)&&(n=t.uri,n===void 0))&&!(AM(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $x(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function zx(t){for(const e of["models","tunedModels","publisherModels"])if(IM(t,e))return t[e];return[]}function IM(t,e){return t!==null&&typeof t=="object"&&e in t}function kM(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function RM(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=kM(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Gx(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function MM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function mo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Hx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bM(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function NM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function DM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function FM(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],bM(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],NM(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],DM(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Wx(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>FM(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function LM(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const w=l(t,["minLength"]);w!=null&&u(e,["minLength"],w);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const C=l(t,["minimum"]);C!=null&&u(e,["minimum"],C);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const _=l(t,["properties"]);_!=null&&u(e,["properties"],_);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const k=l(t,["title"]);k!=null&&u(e,["title"],k);const R=l(t,["type"]);return R!=null&&u(e,["type"],R),e}function VM(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function UM(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function BM(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function OM(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],BM(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function $M(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function zM(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],$M(n)),e}function GM(){return{}}function HM(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function WM(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>UM(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],OM(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],zM(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],GM());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],HM(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function qM(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function JM(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function KM(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],JM(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function YM(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],qM(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],KM(r)),e}function XM(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function qx(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],XM(n)),e}function ZM(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],qx(r)),e}function QM(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ZM(i))),u(e,["speakerVoiceConfigs"],r)}return e}function jM(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],qx(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],QM(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function eb(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function tb(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],Wx(Tt(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const w=l(e,["frequencyPenalty"]);w!=null&&u(r,["frequencyPenalty"],w);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],LM(ap(y)));const v=l(e,["responseJsonSchema"]);if(v!=null&&u(r,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=l(e,["safetySettings"]);if(n!==void 0&&_!=null){let q=_;Array.isArray(q)&&(q=q.map(I=>VM(I))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=po(E);Array.isArray(q)&&(q=q.map(I=>WM(ho(I)))),u(n,["tools"],q)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],YM(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&u(n,["cachedContent"],Yn(t,k));const R=l(e,["responseModalities"]);R!=null&&u(r,["responseModalities"],R);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],jM(lp(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=l(e,["thinkingConfig"]);return F!=null&&u(r,["thinkingConfig"],eb(F)),r}function nb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],Ee(t,r));const i=l(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>Wx(a))),u(n,["request","contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["request","generationConfig"],tb(t,o,n)),n}function rb(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>nb(t,s))),u(n,["requests","requests"],o)}return n}function ib(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Rv(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["src"]);i!=null&&u(n,["batch","inputConfig"],rb(t,Gx(t,i)));const o=l(e,["config"]);return o!=null&&u(n,["config"],ib(o,n)),n}function ob(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],mo(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function sb(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],mo(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function ab(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function lb(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],ab(n,e)),e}function ub(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],mo(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function cb(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function fb(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function db(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&u(e,["outputConfig"],fb(MM(i))),n}function hb(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Ee(t,r));const i=l(e,["src"]);i!=null&&u(n,["inputConfig"],cb(Gx(t,i)));const o=l(e,["config"]);return o!=null&&u(n,["config"],db(o,n)),n}function pb(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],mo(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function mb(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],mo(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function gb(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function yb(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],gb(n,e)),e}function vb(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],mo(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function wb(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function _b(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Cb(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function xb(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],wb(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],_b(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],Cb(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Tb(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xb(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Sb(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function Eb(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function Ab(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Eb(i))),u(e,["urlMetadata"],r)}return e}function Pb(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],Tb(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],Sb(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],Ab(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function Ib(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>Pb(f))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function Jx(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function kb(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],Ib(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],Jx(r)),e}function Rb(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>kb(o))),u(e,["inlinedResponses"],i)}return e}function ja(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&u(e,["state"],Hx(i));const o=l(t,["metadata","createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const f=l(t,["metadata","output"]);return f!=null&&u(e,["dest"],Rb(f)),e}function Mb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ja(s))),u(e,["batchJobs"],o)}return e}function bb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],Jx(o)),e}function Kx(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["code"]);r!=null&&u(e,["code"],r);const i=l(t,["message"]);return i!=null&&u(e,["message"],i),e}function Nb(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function Db(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function rd(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],Hx(i));const o=l(t,["error"]);o!=null&&u(e,["error"],Kx(o));const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const f=l(t,["updateTime"]);f!=null&&u(e,["updateTime"],f);const d=l(t,["model"]);d!=null&&u(e,["model"],d);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],Nb(h));const p=l(t,["outputConfig"]);return p!=null&&u(e,["dest"],Db(p)),e}function Fb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>rd(s))),u(e,["batchJobs"],o)}return e}function Lb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],Kx(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ti;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ti||(ti={}));class Gs{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vb=class extends ai{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const a=Rv(this.apiClient,n);o=ae("{model}:batchGenerateContent",a._url),s=a._query;const d=a.batch.inputConfig.requests,h=d.requests,p=[];for(const w of h){const g=w;if(g.systemInstruction){const C=g.systemInstruction;delete g.systemInstruction;const y=g.request;y.systemInstruction=C,g.request=y}p.push(g)}return d.requests=p,delete a.config,delete a._url,delete a._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(w=>w.json()).then(w=>ja(w))}return await this.createInternal(n)},this.list=async(n={})=>new Gs(ti.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=hb(this.apiClient,e);return a=ae("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>rd(d))}else{const f=Rv(this.apiClient,e);return a=ae("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ja(d))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=pb(this.apiClient,e);return a=ae("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>rd(d))}else{const f=ob(this.apiClient,e);return a=ae("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ja(d))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const c=mb(this.apiClient,e);s=ae("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=sb(this.apiClient,e);s=ae("batches/{name}:cancel",c._url),a=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=yb(e);return a=ae("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=Fb(d),p=new Av;return Object.assign(p,h),p})}else{const f=lb(e);return a=ae("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=Mb(d),p=new Av;return Object.assign(p,h),p})}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=vb(this.apiClient,e);return a=ae("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>Lb(d))}else{const f=ub(this.apiClient,e);return a=ae("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>bb(d))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ub(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function Bb(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Ob(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function $b(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],Ub(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],Bb(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],Ob(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function Mv(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>$b(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function zb(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function Gb(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function Hb(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],Gb(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Wb(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function qb(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],Wb(n)),e}function Jb(){return{}}function Kb(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function Yb(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>zb(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],Hb(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],qb(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],Jb());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],Kb(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function Xb(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function Zb(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function Qb(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],Zb(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function jb(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],Xb(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],Qb(r)),e}function e2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let d=an(s);Array.isArray(d)&&(d=d.map(h=>Mv(h))),u(e,["contents"],d)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Mv(Tt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>Yb(h))),u(e,["tools"],d)}const f=l(t,["toolConfig"]);if(e!==void 0&&f!=null&&u(e,["toolConfig"],jb(f)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function t2(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Nx(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],e2(i,n)),n}function n2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Yn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function r2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Yn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function i2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function o2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Yn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i2(i,n)),n}function s2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function a2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],s2(n,e)),e}function l2(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function u2(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function c2(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function f2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],l2(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],u2(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],c2(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function bv(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>f2(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function d2(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function h2(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function p2(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],h2(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function m2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function g2(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],m2(n)),e}function y2(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function v2(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function w2(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],v2(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function _2(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],w2(n)),e}function C2(){return{}}function x2(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function T2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>d2(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],p2(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],g2(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],y2(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],_2(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],C2());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],x2(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function S2(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function E2(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function A2(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],E2(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function P2(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],S2(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],A2(r)),e}function I2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=an(s);Array.isArray(h)&&(h=h.map(p=>bv(p))),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],bv(Tt(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>T2(p))),u(e,["tools"],h)}const f=l(t,["toolConfig"]);e!==void 0&&f!=null&&u(e,["toolConfig"],P2(f));const d=l(t,["kmsKeyName"]);return e!==void 0&&d!=null&&u(e,["encryption_spec","kmsKeyName"],d),n}function k2(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Nx(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],I2(i,n)),n}function R2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Yn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function M2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Yn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function b2(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function N2(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Yn(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],b2(i,n)),n}function D2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function F2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],D2(n,e)),e}function el(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&u(e,["updateTime"],s);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function L2(){return{}}function V2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>el(s))),u(e,["cachedContents"],o)}return e}function tl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["model"]);i!=null&&u(e,["model"],i);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&u(e,["updateTime"],s);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function U2(){return{}}function B2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>tl(s))),u(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O2 extends ai{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gs(ti.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=k2(this.apiClient,e);return a=ae("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>tl(d))}else{const f=t2(this.apiClient,e);return a=ae("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>el(d))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=R2(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>tl(d))}else{const f=n2(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>el(d))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=M2(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(()=>{const d=U2(),h=new Sv;return Object.assign(h,d),h})}else{const f=r2(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=L2(),h=new Sv;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=N2(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>tl(d))}else{const f=o2(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>el(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=F2(e);return a=ae("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=B2(d),p=new Ev;return Object.assign(p,h),p})}else{const f=a2(e);return a=ae("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=V2(d),p=new Ev;return Object.assign(p,h),p})}}}function Nv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function qi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(w){return Promise.resolve(w).then(m,h)}}function a(m,w){r[m]&&(i[m]=function(g){return new Promise(function(C,y){o.push([m,g,C,y])>1||c(m,g)})},w&&(i[m]=w(i[m])))}function c(m,w){try{f(r[m](w))}catch(g){p(o[0][3],g)}}function f(m){m.value instanceof Fe?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function p(m,w){m(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ss(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Nv=="function"?Nv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(f){o({value:f,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $2(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Yx(n)}function Yx(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function z2(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Dv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Yx(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class G2{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new H2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let H2=class{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),z2(o)}async sendMessage(e){var n;await this.sendPromise;const r=Tt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,d=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];d!=null&&(p=(a=d.slice(h))!==null&&a!==void 0?a:[]);const m=f?[f]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Tt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Dv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return qi(this,arguments,function*(){var s,a,c,f;const d=[];try{for(var h=!0,p=ss(e),m;m=yield Fe(p.next()),s=m.done,!s;h=!0){f=m.value,h=!1;const w=f;if($2(w)){const g=(i=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;g!==void 0&&d.push(g)}yield yield Fe(w)}}catch(w){a={error:w}}finally{try{!h&&!s&&(c=p.return)&&(yield Fe(c.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Dv(r)):this.history.push(e),this.history.push(...i)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function q2(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],W2(n,e)),e}function J2(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function K2(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&u(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const w=l(t,["videoMetadata"]);w!=null&&u(e,["videoMetadata"],w);const g=l(t,["error"]);return g!=null&&u(e,["error"],J2(g)),e}function Y2(t){const e={},n=l(t,["file"]);n!=null&&u(e,["file"],K2(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function X2(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],Ox(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function Z2(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","file"],Ox(n));const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function Q2(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const r=l(t,["message"]);r!=null&&u(e,["message"],r);const i=l(t,["code"]);return i!=null&&u(e,["code"],i),e}function id(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&u(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["sha256Hash"]);f!=null&&u(e,["sha256Hash"],f);const d=l(t,["uri"]);d!=null&&u(e,["uri"],d);const h=l(t,["downloadUri"]);h!=null&&u(e,["downloadUri"],h);const p=l(t,["state"]);p!=null&&u(e,["state"],p);const m=l(t,["source"]);m!=null&&u(e,["source"],m);const w=l(t,["videoMetadata"]);w!=null&&u(e,["videoMetadata"],w);const g=l(t,["error"]);return g!=null&&u(e,["error"],Q2(g)),e}function j2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>id(s))),u(e,["files"],o)}return e}function eN(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function tN(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nN=class extends ai{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Gs(ti.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>id(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=q2(e);return o=ae("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=j2(c),d=new vM;return Object.assign(d,f),d})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Y2(e);return o=ae("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=eN(c),d=new wM;return Object.assign(d,f),d})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=X2(e);return o=ae("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>id(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Z2(e);return o=ae("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{const c=tN(),f=new _M;return Object.assign(f,c),f})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rN(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function Xx(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],rN(n)),e}function iN(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],Xx(r)),e}function oN(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iN(i))),u(e,["speakerVoiceConfigs"],r)}return e}function sN(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],Xx(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],oN(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function aN(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function lN(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function uN(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function cN(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],aN(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],lN(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],uN(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function fN(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cN(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function dN(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function hN(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function pN(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],hN(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function mN(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function gN(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],mN(n)),e}function yN(){return{}}function vN(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function wN(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>dN(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],pN(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],gN(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],yN());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],vN(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function _N(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fv(){return{}}function CN(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function xN(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],CN(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function TN(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function SN(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],TN(r)),e}function EN(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function AN(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],sN(up(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],fN(Tt(m)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let A=po(w);Array.isArray(A)&&(A=A.map(k=>wN(ho(k)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],_N(g));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&u(e,["setup","inputAudioTranscription"],Fv());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],Fv());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],xN(v));const _=l(t,["contextWindowCompression"]);e!==void 0&&_!=null&&u(e,["setup","contextWindowCompression"],SN(_));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],EN(E)),n}function PN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],AN(i,n)),n}function IN(){return{}}function kN(){return{}}function RN(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],Dx(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],Lx(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],Fx(o));const s=l(t,["text"]);return s!=null&&u(e,["text"],s),l(t,["activityStart"])!=null&&u(e,["activityStart"],IN()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],kN()),e}function Zx(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function MN(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Zx(i))),u(e,["weightedPrompts"],r)}return e}function Qx(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&u(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&u(e,["bpm"],s);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function bN(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],Qx(n)),e}function jx(t){const e={},n=l(t,["model"]);return n!=null&&u(e,["model"],n),e}function eT(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Zx(i))),u(e,["weightedPrompts"],r)}return e}function od(t){const e={},n=l(t,["setup"]);n!=null&&u(e,["setup"],jx(n));const r=l(t,["clientContent"]);r!=null&&u(e,["clientContent"],eT(r));const i=l(t,["musicGenerationConfig"]);i!=null&&u(e,["musicGenerationConfig"],Qx(i));const o=l(t,["playbackControl"]);return o!=null&&u(e,["playbackControl"],o),e}function NN(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function DN(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],NN(n)),e}function FN(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],DN(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function LN(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function VN(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function UN(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function BN(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],LN(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],VN(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],UN(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function ON(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>BN(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function $N(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function zN(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function GN(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],zN(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function HN(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function WN(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],HN(n)),e}function qN(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function JN(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function KN(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],JN(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function YN(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],KN(n)),e}function XN(){return{}}function ZN(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function QN(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>$N(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],GN(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],WN(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],qN(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],YN(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],XN());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],ZN(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function jN(t){const e={},n=l(t,["handle"]);n!=null&&u(e,["handle"],n);const r=l(t,["transparent"]);return r!=null&&u(e,["transparent"],r),e}function Lv(){return{}}function eD(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function tD(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],eD(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function nD(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function rD(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],nD(r)),e}function iD(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function oD(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],FN(up(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],ON(Tt(m)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let A=po(w);Array.isArray(A)&&(A=A.map(k=>QN(ho(k)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],jN(g));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&u(e,["setup","inputAudioTranscription"],Lv());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],Lv());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],tD(v));const _=l(t,["contextWindowCompression"]);e!==void 0&&_!=null&&u(e,["setup","contextWindowCompression"],rD(_));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],iD(E)),n}function sD(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],oD(i,n)),n}function aD(){return{}}function lD(){return{}}function uD(t){const e={},n=l(t,["media"]);n!=null&&u(e,["mediaChunks"],Dx(n));const r=l(t,["audio"]);r!=null&&u(e,["audio"],Lx(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],Fx(o));const s=l(t,["text"]);return s!=null&&u(e,["text"],s),l(t,["activityStart"])!=null&&u(e,["activityStart"],aD()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],lD()),e}function cD(){return{}}function fD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function dD(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function hD(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function pD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],fD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],dD(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],hD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function mD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Vv(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function gD(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function yD(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gD(i))),u(e,["urlMetadata"],r)}return e}function vD(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],mD(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&u(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&u(e,["generationComplete"],s);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],Vv(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],Vv(c));const f=l(t,["urlContextMetadata"]);return f!=null&&u(e,["urlContextMetadata"],yD(f)),e}function wD(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);return i!=null&&u(e,["name"],i),e}function _D(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wD(i))),u(e,["functionCalls"],r)}return e}function CD(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function Sa(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function xD(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["responseTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Sa(m))),u(e,["promptTokensDetails"],p)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>Sa(m))),u(e,["cacheTokensDetails"],p)}const d=l(t,["responseTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Sa(m))),u(e,["responseTokensDetails"],p)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>Sa(m))),u(e,["toolUsePromptTokensDetails"],p)}return e}function TD(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function SD(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function ED(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],cD());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],vD(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],_D(i));const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],CD(o));const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],xD(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],TD(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],SD(c)),e}function AD(){return{}}function PD(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["weight"]);return r!=null&&u(e,["weight"],r),e}function ID(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>PD(i))),u(e,["weightedPrompts"],r)}return e}function kD(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&u(e,["topK"],r);const i=l(t,["seed"]);i!=null&&u(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&u(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&u(e,["bpm"],s);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const f=l(t,["scale"]);f!=null&&u(e,["scale"],f);const d=l(t,["muteBass"]);d!=null&&u(e,["muteBass"],d);const h=l(t,["muteDrums"]);h!=null&&u(e,["muteDrums"],h);const p=l(t,["onlyBassAndDrums"]);p!=null&&u(e,["onlyBassAndDrums"],p);const m=l(t,["musicGenerationMode"]);return m!=null&&u(e,["musicGenerationMode"],m),e}function RD(t){const e={},n=l(t,["clientContent"]);n!=null&&u(e,["clientContent"],ID(n));const r=l(t,["musicGenerationConfig"]);return r!=null&&u(e,["musicGenerationConfig"],kD(r)),e}function MD(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);r!=null&&u(e,["mimeType"],r);const i=l(t,["sourceMetadata"]);return i!=null&&u(e,["sourceMetadata"],RD(i)),e}function bD(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MD(i))),u(e,["audioChunks"],r)}return e}function ND(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["filteredReason"]);return r!=null&&u(e,["filteredReason"],r),e}function DD(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],AD());const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],bD(r));const i=l(t,["filteredPrompt"]);return i!=null&&u(e,["filteredPrompt"],ND(i)),e}function FD(t){const e={},n=l(t,["sessionId"]);return n!=null&&u(e,["sessionId"],n),e}function LD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function VD(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function UD(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function BD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],LD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],VD(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],UD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function OD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>BD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Uv(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const r=l(t,["finished"]);return r!=null&&u(e,["finished"],r),e}function $D(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],OD(n));const r=l(t,["turnComplete"]);r!=null&&u(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&u(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&u(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&u(e,["generationComplete"],s);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],Uv(a));const c=l(t,["outputTranscription"]);return c!=null&&u(e,["outputTranscription"],Uv(c)),e}function zD(t){const e={},n=l(t,["args"]);n!=null&&u(e,["args"],n);const r=l(t,["name"]);return r!=null&&u(e,["name"],r),e}function GD(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>zD(i))),u(e,["functionCalls"],r)}return e}function HD(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function Ea(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&u(e,["tokenCount"],r),e}function WD(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(w=>Ea(w))),u(e,["promptTokensDetails"],m)}const f=l(t,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(w=>Ea(w))),u(e,["cacheTokensDetails"],m)}const d=l(t,["candidatesTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(w=>Ea(w))),u(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(w=>Ea(w))),u(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}function qD(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function JD(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&u(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&u(e,["lastConsumedClientMessageIndex"],i),e}function KD(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],FD(n));const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],$D(r));const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],GD(i));const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],HD(o));const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],WD(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],qD(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],JD(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YD(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function XD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ZD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function QD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],YD(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],XD(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],ZD(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function xu(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>QD(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function jD(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const w=l(t,["minLength"]);w!=null&&u(e,["minLength"],w);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const C=l(t,["minimum"]);C!=null&&u(e,["minimum"],C);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const _=l(t,["properties"]);_!=null&&u(e,["properties"],_);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const k=l(t,["title"]);k!=null&&u(e,["title"],k);const R=l(t,["type"]);return R!=null&&u(e,["type"],R),e}function e5(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function t5(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function n5(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function r5(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],n5(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function i5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function o5(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],i5(n)),e}function s5(){return{}}function a5(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function l5(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>t5(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],r5(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],o5(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],s5());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],a5(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function u5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function c5(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function f5(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],c5(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function d5(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],u5(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],f5(r)),e}function h5(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function tT(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],h5(n)),e}function p5(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],tT(r)),e}function m5(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>p5(i))),u(e,["speakerVoiceConfigs"],r)}return e}function g5(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],tT(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],m5(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function y5(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function v5(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],xu(Tt(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const w=l(e,["frequencyPenalty"]);w!=null&&u(r,["frequencyPenalty"],w);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],jD(ap(y)));const v=l(e,["responseJsonSchema"]);if(v!=null&&u(r,["responseJsonSchema"],v),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=l(e,["safetySettings"]);if(n!==void 0&&_!=null){let q=_;Array.isArray(q)&&(q=q.map(I=>e5(I))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=po(E);Array.isArray(q)&&(q=q.map(I=>l5(ho(I)))),u(n,["tools"],q)}const A=l(e,["toolConfig"]);if(n!==void 0&&A!=null&&u(n,["toolConfig"],d5(A)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&u(n,["cachedContent"],Yn(t,k));const R=l(e,["responseModalities"]);R!=null&&u(r,["responseModalities"],R);const N=l(e,["mediaResolution"]);N!=null&&u(r,["mediaResolution"],N);const D=l(e,["speechConfig"]);if(D!=null&&u(r,["speechConfig"],g5(lp(D))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=l(e,["thinkingConfig"]);return F!=null&&u(r,["thinkingConfig"],y5(F)),r}function Bv(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>xu(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],v5(t,o,n)),n}function w5(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&u(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);i!=null&&u(n,["requests[]","content"],Ux(t,i));const o=l(e,["config"]);o!=null&&u(n,["config"],w5(o,n));const s=l(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],Ee(t,s)),n}function C5(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&u(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const f=l(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const d=l(t,["language"]);e!==void 0&&d!=null&&u(e,["parameters","language"],d);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const m=l(t,["imageSize"]);if(e!==void 0&&m!=null&&u(e,["parameters","sampleImageSize"],m),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function x5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&u(n,["config"],C5(o,n)),n}function T5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function S5(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],$x(t,a)),r}function E5(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],S5(t,r,n)),n}function A5(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function P5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],A5(i,n)),n}function I5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function k5(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function R5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>xu(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],k5(o)),n}function M5(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],li(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function b5(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);if(e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=l(t,["personGeneration"]);if(e!==void 0&&s!=null&&u(e,["parameters","personGeneration"],s),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=l(t,["negativePrompt"]);e!==void 0&&a!=null&&u(e,["parameters","negativePrompt"],a);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&u(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function N5(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);if(o!=null&&u(n,["instances[0]","image"],M5(o)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=l(e,["config"]);return s!=null&&u(n,["config"],b5(s,n)),n}function D5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function F5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function L5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function V5(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],D5(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],F5(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],L5(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function go(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>V5(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function U5(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&u(e,["default"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["enum"]);o!=null&&u(e,["enum"],o);const s=l(t,["example"]);s!=null&&u(e,["example"],s);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const f=l(t,["maxItems"]);f!=null&&u(e,["maxItems"],f);const d=l(t,["maxLength"]);d!=null&&u(e,["maxLength"],d);const h=l(t,["maxProperties"]);h!=null&&u(e,["maxProperties"],h);const p=l(t,["maximum"]);p!=null&&u(e,["maximum"],p);const m=l(t,["minItems"]);m!=null&&u(e,["minItems"],m);const w=l(t,["minLength"]);w!=null&&u(e,["minLength"],w);const g=l(t,["minProperties"]);g!=null&&u(e,["minProperties"],g);const C=l(t,["minimum"]);C!=null&&u(e,["minimum"],C);const y=l(t,["nullable"]);y!=null&&u(e,["nullable"],y);const v=l(t,["pattern"]);v!=null&&u(e,["pattern"],v);const _=l(t,["properties"]);_!=null&&u(e,["properties"],_);const E=l(t,["propertyOrdering"]);E!=null&&u(e,["propertyOrdering"],E);const A=l(t,["required"]);A!=null&&u(e,["required"],A);const k=l(t,["title"]);k!=null&&u(e,["title"],k);const R=l(t,["type"]);return R!=null&&u(e,["type"],R),e}function B5(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&u(e,["featureSelectionPreference"],n),e}function O5(t){const e={},n=l(t,["method"]);n!=null&&u(e,["method"],n);const r=l(t,["category"]);r!=null&&u(e,["category"],r);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function $5(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function z5(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function G5(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],z5(n));const r=l(t,["excludeDomains"]);return r!=null&&u(e,["excludeDomains"],r),e}function H5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function W5(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],H5(n)),e}function q5(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function J5(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function K5(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],J5(n));const r=l(t,["authType"]);r!=null&&u(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&u(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&u(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&u(e,["oauthConfig"],s);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function Y5(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],K5(n)),e}function X5(){return{}}function Z5(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function nT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>$5(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],G5(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],W5(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&u(e,["enterpriseWebSearch"],q5(s));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],Y5(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],X5());const f=l(t,["computerUse"]);f!=null&&u(e,["computerUse"],Z5(f));const d=l(t,["codeExecution"]);return d!=null&&u(e,["codeExecution"],d),e}function Q5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&u(e,["allowedFunctionNames"],r),e}function j5(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&u(e,["longitude"],r),e}function eF(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],j5(n));const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function tF(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],Q5(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],eF(r)),e}function nF(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function rF(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],nF(n)),e}function iF(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],rF(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&u(e,["languageCode"],r),e}function oF(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&u(e,["thinkingBudget"],r),e}function sF(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],go(Tt(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=l(e,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const d=l(e,["stopSequences"]);d!=null&&u(r,["stopSequences"],d);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const w=l(e,["frequencyPenalty"]);w!=null&&u(r,["frequencyPenalty"],w);const g=l(e,["seed"]);g!=null&&u(r,["seed"],g);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],U5(ap(y)));const v=l(e,["responseJsonSchema"]);v!=null&&u(r,["responseJsonSchema"],v);const _=l(e,["routingConfig"]);_!=null&&u(r,["routingConfig"],_);const E=l(e,["modelSelectionConfig"]);E!=null&&u(r,["modelConfig"],B5(E));const A=l(e,["safetySettings"]);if(n!==void 0&&A!=null){let U=A;Array.isArray(U)&&(U=U.map(Q=>O5(Q))),u(n,["safetySettings"],U)}const k=l(e,["tools"]);if(n!==void 0&&k!=null){let U=po(k);Array.isArray(U)&&(U=U.map(Q=>nT(ho(Q)))),u(n,["tools"],U)}const R=l(e,["toolConfig"]);n!==void 0&&R!=null&&u(n,["toolConfig"],tF(R));const N=l(e,["labels"]);n!==void 0&&N!=null&&u(n,["labels"],N);const D=l(e,["cachedContent"]);n!==void 0&&D!=null&&u(n,["cachedContent"],Yn(t,D));const F=l(e,["responseModalities"]);F!=null&&u(r,["responseModalities"],F);const q=l(e,["mediaResolution"]);q!=null&&u(r,["mediaResolution"],q);const I=l(e,["speechConfig"]);I!=null&&u(r,["speechConfig"],iF(lp(I)));const b=l(e,["audioTimestamp"]);b!=null&&u(r,["audioTimestamp"],b);const x=l(e,["thinkingConfig"]);return x!=null&&u(r,["thinkingConfig"],oF(x)),r}function Ov(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>go(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],sF(t,o,n)),n}function aF(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&u(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function lF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);i!=null&&u(n,["instances[]","content"],Ux(t,i));const o=l(e,["config"]);return o!=null&&u(n,["config"],aF(o,n)),n}function uF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const w=l(t,["outputMimeType"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","mimeType"],w);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v),n}function cF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&u(n,["config"],uF(o,n)),n}function Xn(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],li(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function fF(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&u(e,["dilation"],i),e}function dF(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function hF(t){const e={},n=l(t,["styleDescription"]);return n!=null&&u(e,["styleDescription"],n),e}function pF(t){const e={},n=l(t,["subjectType"]);n!=null&&u(e,["subjectType"],n);const r=l(t,["subjectDescription"]);return r!=null&&u(e,["subjectDescription"],r),e}function mF(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Xn(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&u(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&u(e,["maskImageConfig"],fF(o));const s=l(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],dF(s));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],hF(a));const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],pF(c)),e}function gF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const f=l(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const w=l(t,["outputMimeType"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","mimeType"],w);const g=l(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&u(e,["parameters","editConfig","baseSteps"],v),n}function yF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>mF(c))),u(n,["instances[0]","referenceImages"],a)}const s=l(e,["config"]);return s!=null&&u(n,["config"],gF(s,n)),n}function vF(t,e){const n={},r=l(t,["includeRaiReason"]);e!==void 0&&r!=null&&u(e,["parameters","includeRaiReason"],r);const i=l(t,["outputMimeType"]);e!==void 0&&i!=null&&u(e,["parameters","outputOptions","mimeType"],i);const o=l(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&u(e,["parameters","outputOptions","compressionQuality"],o);const s=l(t,["enhanceInputImage"]);e!==void 0&&s!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],s);const a=l(t,["imagePreservationFactor"]);e!==void 0&&a!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const c=l(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=l(t,["mode"]);return e!==void 0&&f!=null&&u(e,["parameters","mode"],f),n}function wF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],Xn(i));const o=l(e,["upscaleFactor"]);o!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&u(n,["config"],vF(s,n)),n}function _F(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],Xn(n)),e}function CF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&u(e,["instances[0]","personImage","image"],Xn(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>_F(a))),u(e,["instances[0]","productImages"],s)}return n}function xF(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&u(e,["parameters","editConfig","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const d=l(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&u(e,["parameters","outputOptions","compressionQuality"],d);const h=l(t,["enhancePrompt"]);return e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h),n}function TF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],CF(i,n));const o=l(e,["config"]);return o!=null&&u(n,["config"],xF(o,n)),n}function SF(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],Xn(n)),e}function EF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],Xn(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&u(e,["instances[0]","scribble"],SF(o)),n}function AF(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&u(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&u(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const a=l(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a),n}function PF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["source"]);i!=null&&u(n,["config"],EF(i,n));const o=l(e,["config"]);return o!=null&&u(n,["config"],AF(o,n)),n}function IF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function kF(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],$x(t,a)),r}function RF(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],kF(t,r,n)),n}function MF(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function bF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],MF(i,n)),n}function NF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],i),n}function DF(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],go(Tt(r)));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>nT(a))),u(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&u(e,["generationConfig"],o),n}function FF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>go(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],DF(o,n)),n}function LF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>go(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["config"],o),n}function VF(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],li(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function UF(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Xn(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function BF(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&u(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=l(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const d=l(t,["personGeneration"]);e!==void 0&&d!=null&&u(e,["parameters","personGeneration"],d);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const w=l(t,["generateAudio"]);e!==void 0&&w!=null&&u(e,["parameters","generateAudio"],w);const g=l(t,["lastFrame"]);e!==void 0&&g!=null&&u(e,["instances[0]","lastFrame"],Xn(g));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let v=C;Array.isArray(v)&&(v=v.map(_=>UF(_))),u(e,["instances[0]","referenceImages"],v)}const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),n}function OF(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],Ee(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],Xn(o));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],VF(s));const a=l(e,["config"]);return a!=null&&u(n,["config"],BF(a,n)),n}function $F(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function zF(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function GF(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function HF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],$F(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],zF(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],GF(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function WF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>HF(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function qF(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function JF(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function KF(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>JF(i))),u(e,["urlMetadata"],r)}return e}function YF(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],WF(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],qF(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],KF(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function $v(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>YF(f))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function XF(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function ZF(){return{}}function QF(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>XF(s))),u(e,["embeddings"],o)}return l(t,["metadata"])!=null&&u(e,["metadata"],ZF()),e}function jF(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],li(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function rT(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function eL(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],jF(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&u(e,["safetyAttributes"],rT(i)),e}function tL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>eL(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],rT(i)),e}function nL(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function sd(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["version"]);o!=null&&u(e,["version"],o);const s=l(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],nL(s));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const f=l(t,["supportedGenerationMethods"]);return f!=null&&u(e,["supportedActions"],f),e}function rL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=zx(i);Array.isArray(o)&&(o=o.map(s=>sd(s))),u(e,["models"],o)}return e}function iL(){return{}}function oL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(e,["cachedContentTokenCount"],i),e}function sL(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["video","encodedVideo"]);r!=null&&u(e,["videoBytes"],li(r));const i=l(t,["encoding"]);return i!=null&&u(e,["mimeType"],i),e}function aL(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],sL(n)),e}function lL(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>aL(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function uL(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],lL(s)),e}function cL(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function fL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["data"]);r!=null&&u(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function dL(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&u(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function hL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],cL(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],fL(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],dL(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function pL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>hL(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function mL(t){const e={},n=l(t,["citations"]);return n!=null&&u(e,["citations"],n),e}function gL(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&u(e,["urlRetrievalStatus"],r),e}function yL(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gL(i))),u(e,["urlMetadata"],r)}return e}function vL(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],pL(n));const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],mL(r));const i=l(t,["finishMessage"]);i!=null&&u(e,["finishMessage"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&u(e,["urlContextMetadata"],yL(s));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const f=l(t,["index"]);f!=null&&u(e,["index"],f);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const h=l(t,["safetyRatings"]);return h!=null&&u(e,["safetyRatings"],h),e}function zv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>vL(d))),u(e,["candidates"],f)}const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function wL(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function _L(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],wL(r)),e}function CL(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&u(e,["billableCharacterCount"],n),e}function xL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>_L(s))),u(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],CL(i)),e}function iT(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],li(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function oT(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function Tu(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],iT(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&u(e,["safetyAttributes"],oT(i));const o=l(t,["prompt"]);return o!=null&&u(e,["enhancedPrompt"],o),e}function TL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Tu(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],oT(i)),e}function SL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Tu(o))),u(e,["generatedImages"],i)}return e}function EL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Tu(o))),u(e,["generatedImages"],i)}return e}function AL(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Tu(i))),u(e,["generatedImages"],r)}return e}function PL(t){const e={},n=l(t,["label"]);n!=null&&u(e,["label"],n);const r=l(t,["score"]);return r!=null&&u(e,["score"],r),e}function IL(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],iT(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>PL(o))),u(e,["labels"],i)}return e}function kL(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>IL(i))),u(e,["generatedMasks"],r)}return e}function RL(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function ML(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function bL(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);return i!=null&&u(e,["step"],i),e}function ad(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["versionId"]);o!=null&&u(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>RL(p))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],ML(c));const f=l(t,["defaultCheckpointId"]);f!=null&&u(e,["defaultCheckpointId"],f);const d=l(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>bL(p))),u(e,["checkpoints"],h)}return e}function NL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=zx(i);Array.isArray(o)&&(o=o.map(s=>ad(s))),u(e,["models"],o)}return e}function DL(){return{}}function FL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function LL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);return r!=null&&u(e,["tokensInfo"],r),e}function VL(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],li(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function UL(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],VL(n)),e}function BL(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>UL(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function OL(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],BL(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $L="Content-Type",zL="X-Server-Timeout",GL="User-Agent",ld="x-goog-api-client",HL="1.15.0",WL=`google-genai-sdk/${HL}`,qL="v1beta1",JL="v1beta",Gv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class KL{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:qL,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:JL,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&n?.timeout>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&YL(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Hv(i),new td(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Hv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return qi(this,arguments,function*(){const i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:c}=yield Fe(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const h=JSON.parse(f);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,w=p.code,g=`got status: ${m}. ${JSON.stringify(h)}`;if(w>=400&&w<600)throw new Cu({message:g,status:w})}}catch(h){if(h.name==="ApiError")throw h}s+=f;let d=s.match(Gv);for(;d;){const h=d[1];try{const p=new Response(h,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Fe(new td(p)),s=s.slice(d[0].length),d=s.match(Gv)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=WL+" "+this.clientOptions.userAgentExtra;return e[GL]=n,e[ld]=n,e[$L]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(zL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n?.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:ae("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!s?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=s?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function Hv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Cu({message:i,status:n}):new Error(i)}}function YL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],d=a[c];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?a[c]=r(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),a[c]=f)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XL="mcp_used/unknown";let ZL=!1;function sT(t){for(const e of t)if(QL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ZL}function aT(t){var e;const n=(e=t[ld])!==null&&e!==void 0?e:"";t[ld]=(n+` ${XL}`).trimStart()}function QL(t){return t!==null&&typeof t=="object"&&t instanceof cp}function jL(t,e=100){return qi(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Fe(t.listTools({cursor:r}));for(const s of o.tools)yield yield Fe(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class cp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new cp(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const d of this.mcpClients)try{for(var a=!0,c=(n=void 0,ss(jL(d))),f;f=await c.next(),e=f.done,!e;a=!0){i=f.value,a=!1;const h=i;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),RM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e3(t,e,n){const r=new xM;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=DD(i);Object.assign(r,o),e(r)}class t3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=i3(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let f=()=>{};const d=new Promise(_=>{f=_}),h=e.callbacks,p=function(){f({})},m=this.apiClient,w={onopen:p,onmessage:_=>{e3(m,h.onmessage,_)},onerror:(n=h?.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=h?.onclose)!==null&&r!==void 0?r:function(_){}},g=this.webSocketFactory.create(c,r3(s),w);g.connect(),await d;const C=Ee(this.apiClient,e.model),y=jx({model:C}),v=od({setup:y});return g.send(JSON.stringify(v)),new n3(g,this.apiClient)}}class n3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=MN(e),r=eT(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=bN(e),r=od(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=od({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Vi.PLAY)}pause(){this.sendPlaybackControl(Vi.PAUSE)}stop(){this.sendPlaybackControl(Vi.STOP)}resetContext(){this.sendPlaybackControl(Vi.RESET_CONTEXT)}close(){this.conn.close()}}function r3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function i3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function s3(t,e,n){const r=new CM;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=KD(o);Object.assign(r,s)}else{const s=ED(o);Object.assign(r,s)}e(r)}class a3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new t3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&sT(e.config.tools)&&aT(h);const p=f3(h);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const D=this.apiClient.getApiKey();let F="BidiGenerateContent",q="key";D?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",q="access_token"),d=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${F}?${q}=${D}`}let m=()=>{};const w=new Promise(D=>{m=D}),g=e.callbacks,C=function(){var D;(D=g?.onopen)===null||D===void 0||D.call(g),m({})},y=this.apiClient,v={onopen:C,onmessage:D=>{s3(y,g.onmessage,D)},onerror:(n=g?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=g?.onclose)!==null&&r!==void 0?r:function(D){}},_=this.webSocketFactory.create(d,c3(p),v);_.connect(),await w;let E=Ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const D=this.apiClient.getProject(),F=this.apiClient.getLocation();E=`projects/${D}/locations/${F}/`+E}let A={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ol.AUDIO]}:e.config.responseModalities=[Ol.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],R=[];for(const D of k)if(this.isCallableTool(D)){const F=D;R.push(await F.tool())}else R.push(D);R.length>0&&(e.config.tools=R);const N={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=sD(this.apiClient,N):A=PN(this.apiClient,N),delete A.config,_.send(JSON.stringify(A)),new u3(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l3={turnComplete:!0};class u3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=an(n.turns),e.isVertexAI()?r=r.map(i=>go(i)):r=r.map(i=>xu(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(o3)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},l3),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:uD(e)}:n={realtimeInput:RN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function c3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function f3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wv=10;function qv(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Ji(s)){i=!0;break}if(!i)return!0;const o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ji(t){return"callTool"in t&&typeof t.callTool=="function"}function d3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ji(i)))!==null&&r!==void 0?r:!1}function h3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Ji(i)))!==null&&r!==void 0?r:!1}function Jv(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p3=class extends ai{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!d3(n)||qv(n.config))return await this.generateContentInternal(c);if(h3(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,d;const h=an(c.contents),p=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Wv;let m=0;for(;m<p&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,g=[];for(const C of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Ji(C)){const v=await C.callTool(f.functionCalls);g.push(...v)}m++,d={role:"user",parts:g},c.contents=an(c.contents),c.contents.push(w),c.contents.push(d),Jv(c.config)&&(h.push(w),h.push(d))}return Jv(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),qv(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c?.safetyAttributes:s.push(c);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Gs(ti.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Ji(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&sT(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),aT(f),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ji(s)){const a=s,c=await a.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Wv;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(f,d,h){var p,m;return qi(this,arguments,function*(){for(var w,g,C,y;a<o;){s&&(a++,s=!1);const A=yield Fe(f.processParamsMaybeAddMcpUsage(h)),k=yield Fe(f.generateContentStreamInternal(A)),R=[],N=[];try{for(var v=!0,_=(g=void 0,ss(k)),E;E=yield Fe(_.next()),w=E.done,!w;v=!0){y=E.value,v=!1;const D=y;if(yield yield Fe(D),D.candidates&&(!((p=D.candidates[0])===null||p===void 0)&&p.content)){N.push(D.candidates[0].content);for(const F of(m=D.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(a<o&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(F.functionCall.name)){const q=yield Fe(d.get(F.functionCall.name).callTool([F.functionCall]));R.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(D){g={error:D}}finally{try{!v&&!w&&(C=_.return)&&(yield Fe(C.call(_)))}finally{if(g)throw g.error}}if(R.length>0){s=!0;const D=new ko;D.candidates=[{content:{role:"user",parts:R}}],yield yield Fe(D);const F=[];F.push(...N),F.push({role:"user",parts:R});const q=an(h.contents).concat(F);h.contents=q}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=Ov(this.apiClient,e);return a=ae("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=zv(d),p=new ko;return Object.assign(p,h),p})}else{const f=Bv(this.apiClient,e);return a=ae("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=$v(d),p=new ko;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=Ov(this.apiClient,e);return a=ae("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return qi(this,arguments,function*(){var p,m,w,g;try{for(var C=!0,y=ss(h),v;v=yield Fe(y.next()),p=v.done,!p;C=!0){g=v.value,C=!1;const _=g,E=zv(yield Fe(_.json()));E.sdkHttpResponse={headers:_.headers};const A=new ko;Object.assign(A,E),yield yield Fe(A)}}catch(_){m={error:_}}finally{try{!C&&!p&&(w=y.return)&&(yield Fe(w.call(y)))}finally{if(m)throw m.error}}})})}else{const f=Bv(this.apiClient,e);return a=ae("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return qi(this,arguments,function*(){var p,m,w,g;try{for(var C=!0,y=ss(h),v;v=yield Fe(y.next()),p=v.done,!p;C=!0){g=v.value,C=!1;const _=g,E=$v(yield Fe(_.json()));E.sdkHttpResponse={headers:_.headers};const A=new ko;Object.assign(A,E),yield yield Fe(A)}}catch(_){m={error:_}}finally{try{!C&&!p&&(w=y.return)&&(yield Fe(w.call(y)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=lF(this.apiClient,e);return a=ae("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=xL(d),p=new yv;return Object.assign(p,h),p})}else{const f=_5(this.apiClient,e);return a=ae("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=QF(d),p=new yv;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=cF(this.apiClient,e);return a=ae("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=TL(d),p=new vv;return Object.assign(p,h),p})}else{const f=x5(this.apiClient,e);return a=ae("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=tL(d),p=new vv;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=yF(this.apiClient,e);return o=ae("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=SL(c),d=new hM;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=wF(this.apiClient,e);return o=ae("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=EL(c),d=new pM;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=TF(this.apiClient,e);return o=ae("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=AL(c),d=new mM;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=PF(this.apiClient,e);return o=ae("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=kL(c),d=new gM;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=IF(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>ad(d))}else{const f=T5(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>sd(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=RF(this.apiClient,e);return a=ae("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=NL(d),p=new wv;return Object.assign(p,h),p})}else{const f=E5(this.apiClient,e);return a=ae("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=rL(d),p=new wv;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=bF(this.apiClient,e);return a=ae("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>ad(d))}else{const f=P5(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>sd(d))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=NF(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(()=>{const d=DL(),h=new _v;return Object.assign(h,d),h})}else{const f=I5(this.apiClient,e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=iL(),h=new _v;return Object.assign(h,d),h})}}async countTokens(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=FF(this.apiClient,e);return a=ae("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=FL(d),p=new Cv;return Object.assign(p,h),p})}else{const f=R5(this.apiClient,e);return a=ae("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=oL(d),p=new Cv;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=LF(this.apiClient,e);return o=ae("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>{const f=LL(c),d=new yM;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=OF(this.apiClient,e);return a=ae("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{const h=OL(d),p=new $l;return Object.assign(p,h),p})}else{const f=N5(this.apiClient,e);return a=ae("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const h=uL(d),p=new $l;return Object.assign(p,h),p})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m3(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function g3(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function y3(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);r!=null&&u(e,["_url","resourceName"],r);const i=l(t,["config"]);return i!=null&&u(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v3 extends ai{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=g3(e);return a=ae("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}else{const f=m3(e);return a=ae("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=y3(e);return o=ae("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w3(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function lT(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],w3(n)),e}function _3(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&u(e,["voiceConfig"],lT(r)),e}function C3(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_3(i))),u(e,["speakerVoiceConfigs"],r)}return e}function x3(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],lT(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&u(e,["multiSpeakerVoiceConfig"],C3(r));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function T3(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&u(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&u(e,["startOffset"],i),e}function S3(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function E3(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function A3(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],T3(n));const r=l(t,["thought"]);r!=null&&u(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&u(e,["inlineData"],S3(i));const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],E3(o));const s=l(t,["thoughtSignature"]);s!=null&&u(e,["thoughtSignature"],s);const a=l(t,["codeExecutionResult"]);a!=null&&u(e,["codeExecutionResult"],a);const c=l(t,["executableCode"]);c!=null&&u(e,["executableCode"],c);const f=l(t,["functionCall"]);f!=null&&u(e,["functionCall"],f);const d=l(t,["functionResponse"]);d!=null&&u(e,["functionResponse"],d);const h=l(t,["text"]);return h!=null&&u(e,["text"],h),e}function P3(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>A3(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function I3(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const r=l(t,["description"]);r!=null&&u(e,["description"],r);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function k3(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&u(e,["endTime"],r),e}function R3(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],k3(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function M3(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&u(e,["dynamicThreshold"],r),e}function b3(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],M3(n)),e}function N3(){return{}}function D3(t){const e={},n=l(t,["environment"]);return n!=null&&u(e,["environment"],n),e}function F3(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>I3(f))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&u(e,["googleSearch"],R3(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&u(e,["googleSearchRetrieval"],b3(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],N3());const s=l(t,["computerUse"]);s!=null&&u(e,["computerUse"],D3(s));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function L3(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Kv(){return{}}function V3(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&u(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&u(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&u(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&u(e,["silenceDurationMs"],s),e}function U3(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],V3(n));const r=l(t,["activityHandling"]);r!=null&&u(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&u(e,["turnCoverage"],i),e}function B3(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function O3(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&u(e,["slidingWindow"],B3(r)),e}function $3(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function z3(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const f=l(t,["mediaResolution"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","mediaResolution"],f);const d=l(t,["seed"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","seed"],d);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],x3(up(h)));const p=l(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=l(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],P3(Tt(m)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let A=po(w);Array.isArray(A)&&(A=A.map(k=>F3(ho(k)))),u(e,["setup","tools"],A)}const g=l(t,["sessionResumption"]);e!==void 0&&g!=null&&u(e,["setup","sessionResumption"],L3(g));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&u(e,["setup","inputAudioTranscription"],Kv());const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],Kv());const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],U3(v));const _=l(t,["contextWindowCompression"]);e!==void 0&&_!=null&&u(e,["setup","contextWindowCompression"],O3(_));const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&u(e,["setup","proactivity"],$3(E)),n}function G3(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],Ee(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],z3(i,n)),n}function H3(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&u(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&u(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],G3(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function W3(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],H3(t,r,n)),n}function q3(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function K3(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=J3(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Y3 extends ai{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=W3(this.apiClient,e);o=ae("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=K3(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>q3(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X3(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function Z3(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function Q3(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],Z3(n,e)),e}function j3(t){const e={},n=l(t,["textInput"]);n!=null&&u(e,["textInput"],n);const r=l(t,["output"]);return r!=null&&u(e,["output"],r),e}function eV(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>j3(i))),u(e,["examples","examples"],r)}return e}function tV(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const o=l(t,["learningRateMultiplier"]);if(o!=null&&u(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(t,["batchSize"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","batchSize"],s);const a=l(t,["learningRate"]);return e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","learningRate"],a),n}function nV(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["tuningTask","trainingData"],eV(i));const o=l(t,["config"]);return o!=null&&u(e,["config"],tV(o,e)),e}function rV(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&u(e,["config"],r),e}function iV(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function oV(t){const e={},n=l(t,["config"]);return n!=null&&u(e,["config"],iV(n,e)),e}function sV(t,e){const n={},r=l(t,["gcsUri"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function aV(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function lV(t,e){const n={},r=l(t,["validationDataset"]);e!==void 0&&r!=null&&u(e,["supervisedTuningSpec"],aV(r,n));const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const s=l(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=l(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=l(t,["preTunedModelCheckpointId"]);f!=null&&u(n,["preTunedModel","checkpointId"],f);const d=l(t,["adapterSize"]);if(e!==void 0&&d!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function uV(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&u(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],sV(i,e));const o=l(t,["config"]);return o!=null&&u(e,["config"],lV(o,e)),e}function cV(t){const e={},n=l(t,["name"]);n!=null&&u(e,["model"],n);const r=l(t,["name"]);return r!=null&&u(e,["endpoint"],r),e}function uT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],Bx(i));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["tuningTask","startTime"]);s!=null&&u(e,["startTime"],s);const a=l(t,["tuningTask","completeTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["description"]);f!=null&&u(e,["description"],f);const d=l(t,["baseModel"]);d!=null&&u(e,["baseModel"],d);const h=l(t,["_self"]);h!=null&&u(e,["tunedModel"],cV(h));const p=l(t,["customBaseModel"]);p!=null&&u(e,["customBaseModel"],p);const m=l(t,["experiment"]);m!=null&&u(e,["experiment"],m);const w=l(t,["labels"]);w!=null&&u(e,["labels"],w);const g=l(t,["outputUri"]);g!=null&&u(e,["outputUri"],g);const C=l(t,["pipelineJob"]);C!=null&&u(e,["pipelineJob"],C);const y=l(t,["serviceAccount"]);y!=null&&u(e,["serviceAccount"],y);const v=l(t,["tunedModelDisplayName"]);return v!=null&&u(e,["tunedModelDisplayName"],v),e}function fV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>uT(s))),u(e,["tuningJobs"],o)}return e}function dV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);return s!=null&&u(e,["error"],s),e}function hV(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&u(e,["epoch"],r);const i=l(t,["step"]);i!=null&&u(e,["step"],i);const o=l(t,["endpoint"]);return o!=null&&u(e,["endpoint"],o),e}function pV(t){const e={},n=l(t,["model"]);n!=null&&u(e,["model"],n);const r=l(t,["endpoint"]);r!=null&&u(e,["endpoint"],r);const i=l(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>hV(s))),u(e,["checkpoints"],o)}return e}function ud(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],Bx(i));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["startTime"]);s!=null&&u(e,["startTime"],s);const a=l(t,["endTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const f=l(t,["error"]);f!=null&&u(e,["error"],f);const d=l(t,["description"]);d!=null&&u(e,["description"],d);const h=l(t,["baseModel"]);h!=null&&u(e,["baseModel"],h);const p=l(t,["tunedModel"]);p!=null&&u(e,["tunedModel"],pV(p));const m=l(t,["preTunedModel"]);m!=null&&u(e,["preTunedModel"],m);const w=l(t,["supervisedTuningSpec"]);w!=null&&u(e,["supervisedTuningSpec"],w);const g=l(t,["tuningDataStats"]);g!=null&&u(e,["tuningDataStats"],g);const C=l(t,["encryptionSpec"]);C!=null&&u(e,["encryptionSpec"],C);const y=l(t,["partnerModelTuningSpec"]);y!=null&&u(e,["partnerModelTuningSpec"],y);const v=l(t,["customBaseModel"]);v!=null&&u(e,["customBaseModel"],v);const _=l(t,["experiment"]);_!=null&&u(e,["experiment"],_);const E=l(t,["labels"]);E!=null&&u(e,["labels"],E);const A=l(t,["outputUri"]);A!=null&&u(e,["outputUri"],A);const k=l(t,["pipelineJob"]);k!=null&&u(e,["pipelineJob"],k);const R=l(t,["serviceAccount"]);R!=null&&u(e,["serviceAccount"],R);const N=l(t,["tunedModelDisplayName"]);return N!=null&&u(e,["tunedModelDisplayName"],N),e}function mV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ud(s))),u(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gV extends ai{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Gs(ti.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:ed.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=rV(e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>ud(d))}else{const f=X3(e);return a=ae("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>uT(d))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const f=oV(e);return a=ae("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=mV(d),p=new Tv;return Object.assign(p,h),p})}else{const f=Q3(e);return a=ae("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const h=fV(d),p=new Tv;return Object.assign(p,h),p})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=uV(e);return o=ae("tuningJobs",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>ud(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nV(e);return o=ae("tunedModels",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),i.then(c=>dV(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yV{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const vV=1024*1024*8,wV=3,_V=1e3,CV=2,Ec="x-goog-upload-status";async function xV(t,e,n){var r,i,o;let s=0,a=0,c=new td(new Response),f="upload";for(s=t.size;a<s;){const h=Math.min(vV,s-a),p=t.slice(a,a+h);a+h>=s&&(f+=", finalize");let m=0,w=_V;for(;m<wV&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[Ec]));)m++,await SV(w),w=w*CV;if(a+=h,((i=c?.headers)===null||i===void 0?void 0:i[Ec])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[Ec])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function TV(t){return{size:t.size,type:t.type}}function SV(t){return new Promise(e=>setTimeout(e,t))}class EV{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xV(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TV(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AV{create(e,n,r){return new PV(e,n,r)}}class PV{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yv="x-goog-api-key";class IV{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Yv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Yv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kV="gl-node/";class RV{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=dM(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new IV(this.apiKey);this.apiClient=new KL({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:kV+"web",uploader:new EV,downloader:new yV}),this.models=new p3(this.apiClient),this.live=new a3(this.apiClient,i,new AV),this.batches=new Vb(this.apiClient),this.chats=new G2(this.models,this.apiClient),this.caches=new O2(this.apiClient),this.files=new nN(this.apiClient),this.operations=new v3(this.apiClient),this.authTokens=new Y3(this.apiClient),this.tunings=new gV(this.apiClient)}}const cd="RFC3986",fd={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},MV="RFC1738",bV=Array.isArray,Tn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Ac=1024,NV=(t,e,n,r,i)=>{if(t.length===0)return t;let o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<o.length;a+=Ac){const c=o.length>=Ac?o.slice(a,a+Ac):o,f=[];for(let d=0;d<c.length;++d){let h=c.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===MV&&(h===40||h===41)){f[f.length]=c.charAt(d);continue}if(h<128){f[f.length]=Tn[h];continue}if(h<2048){f[f.length]=Tn[192|h>>6]+Tn[128|h&63];continue}if(h<55296||h>=57344){f[f.length]=Tn[224|h>>12]+Tn[128|h>>6&63]+Tn[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|c.charCodeAt(d)&1023),f[f.length]=Tn[240|h>>18]+Tn[128|h>>12&63]+Tn[128|h>>6&63]+Tn[128|h&63]}s+=f.join("")}return s};function DV(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Xv(t,e){if(bV(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const FV=Object.prototype.hasOwnProperty,cT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},En=Array.isArray,LV=Array.prototype.push,fT=function(t,e){LV.apply(t,En(e)?e:[e])},VV=Date.prototype.toISOString,et={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:NV,encodeValuesOnly:!1,format:cd,formatter:fd[cd],indices:!1,serializeDate(t){return VV.call(t)},skipNulls:!1,strictNullHandling:!1};function UV(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Pc={};function dT(t,e,n,r,i,o,s,a,c,f,d,h,p,m,w,g,C,y){let v=t,_=y,E=0,A=!1;for(;(_=_.get(Pc))!==void 0&&!A;){const F=_.get(t);if(E+=1,typeof F<"u"){if(F===E)throw new RangeError("Cyclic object value");A=!0}typeof _.get(Pc)>"u"&&(E=0)}if(typeof f=="function"?v=f(e,v):v instanceof Date?v=p?.(v):n==="comma"&&En(v)&&(v=Xv(v,function(F){return F instanceof Date?p?.(F):F})),v===null){if(o)return c&&!g?c(e,et.encoder,C,"key",m):e;v=""}if(UV(v)||DV(v)){if(c){const F=g?e:c(e,et.encoder,C,"key",m);return[w?.(F)+"="+w?.(c(v,et.encoder,C,"value",m))]}return[w?.(e)+"="+w?.(String(v))]}const k=[];if(typeof v>"u")return k;let R;if(n==="comma"&&En(v))g&&c&&(v=Xv(v,c)),R=[{value:v.length>0?v.join(",")||null:void 0}];else if(En(f))R=f;else{const F=Object.keys(v);R=d?F.sort(d):F}const N=a?String(e).replace(/\./g,"%2E"):String(e),D=r&&En(v)&&v.length===1?N+"[]":N;if(i&&En(v)&&v.length===0)return D+"[]";for(let F=0;F<R.length;++F){const q=R[F],I=typeof q=="object"&&typeof q.value<"u"?q.value:v[q];if(s&&I===null)continue;const b=h&&a?q.replace(/\./g,"%2E"):q,x=En(v)?typeof n=="function"?n(D,b):D:D+(h?"."+b:"["+b+"]");y.set(t,E);const U=new WeakMap;U.set(Pc,y),fT(k,dT(I,x,n,r,i,o,s,a,n==="comma"&&g&&En(v)?null:c,f,d,h,p,m,w,g,C,U))}return k}function BV(t=et){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||et.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=cd;if(typeof t.format<"u"){if(!FV.call(fd,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=fd[n];let i=et.filter;(typeof t.filter=="function"||En(t.filter))&&(i=t.filter);let o;if(t.arrayFormat&&t.arrayFormat in cT?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=et.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:et.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:et.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:et.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:et.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?et.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:et.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:et.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:et.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:et.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:et.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:et.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:et.strictNullHandling}}function OV(t,e={}){let n=t;const r=BV(e);let i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):En(r.filter)&&(o=r.filter,i=o);const s=[];if(typeof n!="object"||n===null)return"";const a=cT[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const f=new WeakMap;for(let p=0;p<i.length;++p){const m=i[p];r.skipNulls&&n[m]===null||fT(s,dT(n[m],m,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}const d=s.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}const vi="4.104.0";let Zv=!1,as,hT,pT,dd,mT,gT,yT,vT,wT;function $V(t,e={auto:!1}){if(Zv)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(as)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${as}'\``);Zv=e.auto,as=t.kind,hT=t.fetch,pT=t.FormData,dd=t.File,mT=t.ReadableStream,gT=t.getMultipartRequestOptions,yT=t.getDefaultAgent,vT=t.fileFromPath,wT=t.isFsReadStream}class zV{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function GV({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,o;try{n=fetch,r=Request,i=Response,o=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(s,a)=>({...a,body:new zV(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}const _T=()=>{as||$V(GV(),{auto:!0})};_T();class fe extends Error{}class mt extends fe{constructor(e,n,r,i){super(`${mt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i?.["x-request-id"],this.error=n;const o=n;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Su({message:r,cause:pd(n)});const o=n?.error;return e===400?new CT(e,o,r,i):e===401?new xT(e,o,r,i):e===403?new TT(e,o,r,i):e===404?new ST(e,o,r,i):e===409?new ET(e,o,r,i):e===422?new AT(e,o,r,i):e===429?new PT(e,o,r,i):e>=500?new IT(e,o,r,i):new mt(e,o,r,i)}}class rn extends mt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Su extends mt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class fp extends Su{constructor({message:e}={}){super({message:e??"Request timed out."})}}class CT extends mt{}class xT extends mt{}class TT extends mt{}class ST extends mt{}class ET extends mt{}class AT extends mt{}class PT extends mt{}class IT extends mt{}class kT extends fe{constructor(){super("Could not parse response content as the length limit was reached")}}class RT extends fe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Aa=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Dr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ot;class Eu{constructor(){Ot.set(this,void 0),this.buffer=new Uint8Array,Aa(this,Ot,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let o;for(;(o=HV(this.buffer,Dr(this,Ot,"f")))!=null;){if(o.carriage&&Dr(this,Ot,"f")==null){Aa(this,Ot,o.index,"f");continue}if(Dr(this,Ot,"f")!=null&&(o.index!==Dr(this,Ot,"f")+1||o.carriage)){i.push(this.decodeText(this.buffer.slice(0,Dr(this,Ot,"f")-1))),this.buffer=this.buffer.slice(Dr(this,Ot,"f")),Aa(this,Ot,null,"f");continue}const s=Dr(this,Ot,"f")!==null?o.preceding-1:o.preceding,a=this.decodeText(this.buffer.slice(0,s));i.push(a),this.buffer=this.buffer.slice(o.index),Aa(this,Ot,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new fe(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new fe(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new fe("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ot=new WeakMap;Eu.NEWLINE_CHARS=new Set([`
`,"\r"]);Eu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function HV(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function WV(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function MT(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class In{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const s of qV(e,n))if(!o){if(s.data.startsWith("[DONE]")){o=!0;continue}if(s.event===null||s.event.startsWith("response.")||s.event.startsWith("transcript.")){let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(a&&a.error)throw new mt(void 0,a.error,void 0,BT(e.headers));yield a}else{let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(s.event=="error")throw new mt(void 0,a.error,a.message,void 0);yield{event:s.event,data:a}}}o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||n.abort()}}return new In(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const s=new Eu,a=MT(e);for await(const c of a)for(const f of s.decode(c))yield f;for(const c of s.flush())yield c}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of i())s||a&&(yield JSON.parse(a));s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new In(o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new In(()=>i(e),this.controller),new In(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new mT({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const a=r.encode(JSON.stringify(o)+`
`);i.enqueue(a)}catch(o){i.error(o)}},async cancel(){await n.return?.()}})}}async function*qV(t,e){if(!t.body)throw e.abort(),new fe("Attempted to iterate over a response with no body");const n=new KV,r=new Eu,i=MT(t.body);for await(const o of JV(i))for(const s of r.decode(o)){const a=n.decode(s);a&&(yield a)}for(const o of r.flush()){const s=n.decode(o);s&&(yield s)}}async function*JV(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let o;for(;(o=WV(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class KV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=YV(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function YV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const bT=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",NT=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Au(t),Au=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",XV=t=>NT(t)||bT(t)||wT(t);async function DT(t,e,n){if(t=await t,NT(t))return t;if(bT(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Au(i)?[await i.arrayBuffer()]:[i];return new dd(o,e,n)}const r=await ZV(t);if(e||(e=jV(t)??"unknown_file"),!n?.type){const i=r[0]?.type;typeof i=="string"&&(n={...n,type:i})}return new dd(r,e,n)}async function ZV(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Au(t))e.push(await t.arrayBuffer());else if(eU(t))for await(const n of t)e.push(n);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${QV(t)}`);return e}function QV(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function jV(t){return Ic(t.name)||Ic(t.filename)||Ic(t.path)?.split(/[\\/]/).pop()}const Ic=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},eU=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Qv=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",ni=async t=>{const e=await tU(t.body);return gT(e,t)},tU=async t=>{const e=new pT;return await Promise.all(Object.entries(t||{}).map(([n,r])=>hd(e,n,r))),e},hd=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(XV(n)){const r=await DT(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>hd(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>hd(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var FT={},nU=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},rU=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Pa;_T();async function LT(t){const{response:e}=t;if(t.options.stream)return vr("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):In.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const r=e.headers.get("content-type")?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const s=await e.json();return vr("response",e.status,e.url,e.headers,s),VT(s,e)}const o=await e.text();return vr("response",e.status,e.url,e.headers,o),o}function VT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Pu extends Promise{constructor(e,n=LT){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Pu(this.responsePromise,async n=>VT(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class iU{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:o}){this.baseURL=e,this.maxRetries=kc("maxRetries",n),this.timeout=kc("timeout",r),this.httpAgent=i,this.fetch=o??hT}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...uU(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${hU()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const o=i&&Au(i?.body)?new DataView(await i.body.arrayBuffer()):i?.body instanceof DataView?i.body:i?.body instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i?.body)?new DataView(i.body.buffer):i?.body;return{method:e,path:n,...i,body:o}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:o,query:s,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Qv(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,f=this.calculateContentLength(c),d=this.buildURL(o,s);"timeout"in r&&kc("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??yT(d),p=r.timeout+1e3;typeof h?.options?.timeout=="number"&&p>(h.options.timeout??0)&&(h.options.timeout=p),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:r,headers:a,contentLength:f,retryCount:n});return{req:{method:i,...c&&{body:c},headers:m,...h&&{agent:h},signal:r.signal??null},url:d,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const o={};r&&(o["content-length"]=r);const s=this.defaultHeaders(e);return n0(o,s),n0(o,n),Qv(e.body)&&as!=="node"&&delete o["content-type"],ka(s,"x-stainless-retry-count")===void 0&&ka(n,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(i)),ka(s,"x-stainless-timeout")===void 0&&ka(n,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,n),o}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return mt.generate(e,n,r,i)}request(e,n=null){return new Pu(this.makeRequest(e,n))}async makeRequest(e,n){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:o,url:s,timeout:a}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(o,{url:s,options:r}),vr("request",s,r,o.headers),r.signal?.aborted)throw new rn;const c=new AbortController,f=await this.fetchWithTimeout(s,o,a,c).catch(pd);if(f instanceof Error){if(r.signal?.aborted)throw new rn;if(n)return this.retryRequest(r,n);throw f.name==="AbortError"?new fp:new Su({cause:f})}const d=BT(f.headers);if(!f.ok){if(n&&this.shouldRetry(f)){const C=`retrying, ${n} attempts remaining`;return vr(`response (error; ${C})`,f.status,s,d),this.retryRequest(r,n,d)}const h=await f.text().catch(C=>pd(C).message),p=cU(h),m=p?void 0:h;throw vr(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,f.status,s,d,m),this.makeStatusError(f.status,p,m,d)}return{response:f,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new oU(this,r,e)}buildURL(e,n){const r=dU(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return OT(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new fe(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:o,...s}=n||{};o&&o.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),r),c={signal:i.signal,...s};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const o=r?.["retry-after-ms"];if(o){const a=parseFloat(o);Number.isNaN(a)||(i=a)}const s=r?.["retry-after"];if(s&&!i){const a=parseFloat(s);Number.isNaN(a)?i=Date.parse(s)-Date.now():i=a*1e3}if(!(i&&0<=i&&i<60*1e3)){const a=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,a)}return await Hs(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${vi}`}}class UT{constructor(e,n,r,i){Pa.set(this,void 0),nU(this,Pa,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new fe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,o]of r)e.url.searchParams.set(i,o);n.query=void 0,n.path=e.url.toString()}return await rU(this,Pa,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Pa=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class oU extends Pu{constructor(e,n,r){super(n,async i=>new r(e,i.response,await LT(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const BT=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),sU={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},qe=t=>typeof t=="object"&&t!==null&&!OT(t)&&Object.keys(t).every(e=>$T(sU,e)),aU=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":e0(Deno.build.os),"X-Stainless-Arch":jv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":e0(process.platform),"X-Stainless-Arch":jv(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=lU();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function lU(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const jv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",e0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let t0;const uU=()=>t0??(t0=aU()),cU=t=>{try{return JSON.parse(t)}catch{return}},fU=/^[a-z][a-z0-9+.-]*:/i,dU=t=>fU.test(t),Hs=t=>new Promise(e=>setTimeout(e,t)),kc=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fe(`${t} must be an integer`);if(e<0)throw new fe(`${t} must be a positive integer`);return e},pd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},Ia=t=>{if(typeof process<"u")return FT?.[t]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(t)?.trim()};function OT(t){if(!t)return!0;for(const e in t)return!1;return!0}function $T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n0(t,e){for(const n in e){if(!$T(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const r0=new Set(["authorization","api-key"]);function vr(t,...e){if(typeof process<"u"&&FT?.DEBUG==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const o={...r,headers:{...r.headers}};for(const s in r.headers)r0.has(s.toLowerCase())&&(o.headers[s]="REDACTED");return o}let i=null;for(const o in r)r0.has(o.toLowerCase())&&(i??(i={...r}),i[o]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const hU=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),pU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",mU=t=>typeof t?.get=="function",ka=(t,e)=>{const n=e.toLowerCase();if(mU(t)){const r=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(i,o,s)=>o+s.toUpperCase());for(const i of[e,n,e.toUpperCase(),r]){const o=t.get(i);if(o)return o}}for(const[r,i]of Object.entries(t))if(r.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},gU=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function Rc(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class Iu extends UT{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class rt extends UT{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const n=e[e.length-1]?.id;return n?{params:{after:n}}:null}}class de{constructor(e){this._client=e}}let zT=class extends de{list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,yU,{query:n,...r})}},ku=class extends de{constructor(){super(...arguments),this.messages=new zT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/chat/completions",Ru,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class Ru extends rt{}class yU extends rt{}ku.ChatCompletionsPage=Ru;ku.Messages=zT;let Mu=class extends de{constructor(){super(...arguments),this.completions=new ku(this._client)}};Mu.Completions=ku;Mu.ChatCompletionsPage=Ru;class GT extends de{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n?.headers},__binaryResponse:!0})}}class HT extends de{create(e,n){return this._client.post("/audio/transcriptions",ni({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class WT extends de{create(e,n){return this._client.post("/audio/translations",ni({body:e,...n,__metadata:{model:e.model}}))}}class Ws extends de{constructor(){super(...arguments),this.transcriptions=new HT(this._client),this.translations=new WT(this._client),this.speech=new GT(this._client)}}Ws.Transcriptions=HT;Ws.Translations=WT;Ws.Speech=GT;class dp extends de{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/batches",hp,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class hp extends rt{}dp.BatchesPage=hp;var dn=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},$e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},md,nl,rl,Uo,Bo,il,Oo,Fn,$o,Gl,Hl,wi,qT;class pp{constructor(){md.add(this),this.controller=new AbortController,nl.set(this,void 0),rl.set(this,()=>{}),Uo.set(this,()=>{}),Bo.set(this,void 0),il.set(this,()=>{}),Oo.set(this,()=>{}),Fn.set(this,{}),$o.set(this,!1),Gl.set(this,!1),Hl.set(this,!1),wi.set(this,!1),dn(this,nl,new Promise((e,n)=>{dn(this,rl,e,"f"),dn(this,Uo,n,"f")}),"f"),dn(this,Bo,new Promise((e,n)=>{dn(this,il,e,"f"),dn(this,Oo,n,"f")}),"f"),$e(this,nl,"f").catch(()=>{}),$e(this,Bo,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},$e(this,md,"m",qT).bind(this))},0)}_connected(){this.ended||($e(this,rl,"f").call(this),this._emit("connect"))}get ended(){return $e(this,$o,"f")}get errored(){return $e(this,Gl,"f")}get aborted(){return $e(this,Hl,"f")}abort(){this.controller.abort()}on(e,n){return($e(this,Fn,"f")[e]||($e(this,Fn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=$e(this,Fn,"f")[e];if(!r)return this;const i=r.findIndex(o=>o.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return($e(this,Fn,"f")[e]||($e(this,Fn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{dn(this,wi,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){dn(this,wi,!0,"f"),await $e(this,Bo,"f")}_emit(e,...n){if($e(this,$o,"f"))return;e==="end"&&(dn(this,$o,!0,"f"),$e(this,il,"f").call(this));const r=$e(this,Fn,"f")[e];if(r&&($e(this,Fn,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!$e(this,wi,"f")&&!r?.length&&Promise.reject(i),$e(this,Uo,"f").call(this,i),$e(this,Oo,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!$e(this,wi,"f")&&!r?.length&&Promise.reject(i),$e(this,Uo,"f").call(this,i),$e(this,Oo,"f").call(this,i),this._emit("end")}}_emitFinal(){}}nl=new WeakMap,rl=new WeakMap,Uo=new WeakMap,Bo=new WeakMap,il=new WeakMap,Oo=new WeakMap,Fn=new WeakMap,$o=new WeakMap,Gl=new WeakMap,Hl=new WeakMap,wi=new WeakMap,md=new WeakSet,qT=function(e){if(dn(this,Gl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new rn),e instanceof rn)return dn(this,Hl,!0,"f"),this._emit("abort",e);if(e instanceof fe)return this._emit("error",e);if(e instanceof Error){const n=new fe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new fe(String(e)))};var le=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Bt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},dt,gd,An,ol,pn,qr,Ui,$r,Wl,$t,sl,al,ls,zo,Go,i0,o0,s0,a0,l0,u0,c0;class vn extends pp{constructor(){super(...arguments),dt.add(this),gd.set(this,[]),An.set(this,{}),ol.set(this,{}),pn.set(this,void 0),qr.set(this,void 0),Ui.set(this,void 0),$r.set(this,void 0),Wl.set(this,void 0),$t.set(this,void 0),sl.set(this,void 0),al.set(this,void 0),ls.set(this,void 0)}[(gd=new WeakMap,An=new WeakMap,ol=new WeakMap,pn=new WeakMap,qr=new WeakMap,Ui=new WeakMap,$r=new WeakMap,Wl=new WeakMap,$t=new WeakMap,sl=new WeakMap,al=new WeakMap,ls=new WeakMap,dt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new vn;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=In.fromReadableStream(e,this.controller);for await(const o of i)le(this,dt,"m",zo).call(this,o);if(i.controller.signal?.aborted)throw new rn;return this._addRun(le(this,dt,"m",Go).call(this))}toReadableStream(){return new In(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,o){const s=new vn;return s._run(()=>s._runToolAssistantStream(e,n,r,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i,o){const s=o?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...i,stream:!0},c=await e.submitToolOutputs(n,r,a,{...o,signal:this.controller.signal});this._connected();for await(const f of c)le(this,dt,"m",zo).call(this,f);if(c.controller.signal?.aborted)throw new rn;return this._addRun(le(this,dt,"m",Go).call(this))}static createThreadAssistantStream(e,n,r){const i=new vn;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const o=new vn;return o._run(()=>o._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return le(this,sl,"f")}currentRun(){return le(this,al,"f")}currentMessageSnapshot(){return le(this,pn,"f")}currentRunStepSnapshot(){return le(this,ls,"f")}async finalRunSteps(){return await this.done(),Object.values(le(this,An,"f"))}async finalMessages(){return await this.done(),Object.values(le(this,ol,"f"))}async finalRun(){if(await this.done(),!le(this,qr,"f"))throw Error("Final run was not received.");return le(this,qr,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},s=await e.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const a of s)le(this,dt,"m",zo).call(this,a);if(s.controller.signal?.aborted)throw new rn;return this._addRun(le(this,dt,"m",Go).call(this))}async _createAssistantStream(e,n,r,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await e.create(n,s,{...i,signal:this.controller.signal});this._connected();for await(const c of a)le(this,dt,"m",zo).call(this,c);if(a.controller.signal?.aborted)throw new rn;return this._addRun(le(this,dt,"m",Go).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let o=e[r];if(o==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(Rc(o)&&Rc(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(s=>typeof s=="string"||typeof s=="number")){o.push(...i);continue}for(const s of i){if(!Rc(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=o[a];c==null?o.push(s):o[a]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);e[r]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,o){return await this._createToolAssistantStream(r,e,n,i,o)}}zo=function(e){if(!this.ended)switch(Bt(this,sl,e,"f"),le(this,dt,"m",s0).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":le(this,dt,"m",c0).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":le(this,dt,"m",o0).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":le(this,dt,"m",i0).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Go=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");if(!le(this,qr,"f"))throw Error("Final run has not been received");return le(this,qr,"f")},i0=function(e){const[n,r]=le(this,dt,"m",l0).call(this,e,le(this,pn,"f"));Bt(this,pn,n,"f"),le(this,ol,"f")[n.id]=n;for(const i of r){const o=n.content[i.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,s=n.content[i.index];if(s&&s.type=="text")this._emit("textDelta",o,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=le(this,Ui,"f")){if(le(this,$r,"f"))switch(le(this,$r,"f").type){case"text":this._emit("textDone",le(this,$r,"f").text,le(this,pn,"f"));break;case"image_file":this._emit("imageFileDone",le(this,$r,"f").image_file,le(this,pn,"f"));break}Bt(this,Ui,i.index,"f")}Bt(this,$r,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(le(this,Ui,"f")!==void 0){const i=e.data.content[le(this,Ui,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,le(this,pn,"f"));break;case"text":this._emit("textDone",i.text,le(this,pn,"f"));break}}le(this,pn,"f")&&this._emit("messageDone",e.data),Bt(this,pn,void 0,"f")}},o0=function(e){const n=le(this,dt,"m",a0).call(this,e);switch(Bt(this,ls,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==le(this,Wl,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(le(this,$t,"f")&&this._emit("toolCallDone",le(this,$t,"f")),Bt(this,Wl,o.index,"f"),Bt(this,$t,n.step_details.tool_calls[o.index],"f"),le(this,$t,"f")&&this._emit("toolCallCreated",le(this,$t,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Bt(this,ls,void 0,"f"),e.data.step_details.type=="tool_calls"&&le(this,$t,"f")&&(this._emit("toolCallDone",le(this,$t,"f")),Bt(this,$t,void 0,"f")),this._emit("runStepDone",e.data,n);break}},s0=function(e){le(this,gd,"f").push(e),this._emit("event",e)},a0=function(e){switch(e.event){case"thread.run.step.created":return le(this,An,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=le(this,An,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=vn.accumulateDelta(n,r.delta);le(this,An,"f")[e.data.id]=i}return le(this,An,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":le(this,An,"f")[e.data.id]=e.data;break}if(le(this,An,"f")[e.data.id])return le(this,An,"f")[e.data.id];throw new Error("No snapshot available")},l0=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in n.content){let s=n.content[o.index];n.content[o.index]=le(this,dt,"m",u0).call(this,o,s)}else n.content[o.index]=o,r.push(o);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},u0=function(e,n){return vn.accumulateDelta(n,e)},c0=function(e){switch(Bt(this,al,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Bt(this,qr,e.data,"f"),le(this,$t,"f")&&(this._emit("toolCallDone",le(this,$t,"f")),Bt(this,$t,void 0,"f"));break}};class mp extends de{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/assistants",gp,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class gp extends rt{}mp.AssistantsPage=gp;function f0(t){return typeof t.parse=="function"}const Ki=t=>t?.role==="assistant",JT=t=>t?.role==="function",KT=t=>t?.role==="tool";function yp(t){return t?.$brand==="auto-parseable-response-format"}function qs(t){return t?.$brand==="auto-parseable-tool"}function vU(t,e){return!e||!YT(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:vp(t,e)}function vp(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new kT;if(r.finish_reason==="content_filter")throw new RT;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>_U(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?wU(e,r.message.content):null}}});return{...t,choices:n}}function wU(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function _U(t,e){const n=t.tools?.find(r=>r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:qs(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function CU(t,e){if(!t)return!1;const n=t.tools?.find(r=>r.function?.name===e.function.name);return qs(n)||n?.function.strict||!1}function YT(t){return yp(t.response_format)?!0:t.tools?.some(e=>qs(e)||e.type==="function"&&e.function.strict===!0)??!1}function xU(t){for(const e of t??[]){if(e.type!=="function")throw new fe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new fe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Rt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},wt,yd,ql,vd,wd,_d,XT,Cd;const d0=10;class ZT extends pp{constructor(){super(...arguments),wt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(JT(e)||KT(e))&&e.content)this._emit("functionCallResult",e.content);else if(Ki(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Ki(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Rt(this,wt,"m",yd).call(this)}async finalMessage(){return await this.done(),Rt(this,wt,"m",ql).call(this)}async finalFunctionCall(){return await this.done(),Rt(this,wt,"m",vd).call(this)}async finalFunctionCallResult(){return await this.done(),Rt(this,wt,"m",wd).call(this)}async totalUsage(){return await this.done(),Rt(this,wt,"m",_d).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Rt(this,wt,"m",ql).call(this);n&&this._emit("finalMessage",n);const r=Rt(this,wt,"m",yd).call(this);r&&this._emit("finalContent",r);const i=Rt(this,wt,"m",vd).call(this);i&&this._emit("finalFunctionCall",i);const o=Rt(this,wt,"m",wd).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",Rt(this,wt,"m",_d).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Rt(this,wt,"m",XT).call(this,n);const o=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(vp(o,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const i="function",{function_call:o="auto",stream:s,...a}=n,c=typeof o!="string"&&o?.name,{maxChatCompletions:f=d0}=r||{},d={};for(const p of n.functions)d[p.name||p.function.name]=p;const h=n.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<f;++p){const w=(await this._createChatCompletion(e,{...a,function_call:o,functions:h,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new fe("missing message in ChatCompletion response");if(!w.function_call)return;const{name:g,arguments:C}=w.function_call,y=d[g];if(y){if(c&&c!==g){const A=`Invalid function_call: ${JSON.stringify(g)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,name:g,content:A});continue}}else{const A=`Invalid function_call: ${JSON.stringify(g)}. Available options are: ${h.map(k=>JSON.stringify(k.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:g,content:A});continue}let v;try{v=f0(y)?await y.parse(C):C}catch(A){this._addMessage({role:i,name:g,content:A instanceof Error?A.message:String(A)});continue}const _=await y.function(v,this),E=Rt(this,wt,"m",Cd).call(this,_);if(this._addMessage({role:i,name:g,content:E}),c)return}}async _runTools(e,n,r){const i="tool",{tool_choice:o="auto",stream:s,...a}=n,c=typeof o!="string"&&o?.function?.name,{maxChatCompletions:f=d0}=r||{},d=n.tools.map(m=>{if(qs(m)){if(!m.$callback)throw new fe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),h={};for(const m of d)m.type==="function"&&(h[m.function.name||m.function.function.name]=m.function);const p="tools"in n?d.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<f;++m){const g=(await this._createChatCompletion(e,{...a,tool_choice:o,tools:p,messages:[...this.messages]},r)).choices[0]?.message;if(!g)throw new fe("missing message in ChatCompletion response");if(!g.tool_calls?.length)return;for(const C of g.tool_calls){if(C.type!=="function")continue;const y=C.id,{name:v,arguments:_}=C.function,E=h[v];if(E){if(c&&c!==v){const N=`Invalid tool_call: ${JSON.stringify(v)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:y,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(v)}. Available options are: ${Object.keys(h).map(D=>JSON.stringify(D)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:y,content:N});continue}let A;try{A=f0(E)?await E.parse(_):_}catch(N){const D=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:y,content:D});continue}const k=await E.function(A,this),R=Rt(this,wt,"m",Cd).call(this,k);if(this._addMessage({role:i,tool_call_id:y,content:R}),c)return}}}}wt=new WeakSet,yd=function(){return Rt(this,wt,"m",ql).call(this).content??null},ql=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Ki(n)){const{function_call:r,...i}=n,o={...i,content:n.content??null,refusal:n.refusal??null};return r&&(o.function_call=r),o}}throw new fe("stream ended without producing a ChatCompletionMessage with role=assistant")},vd=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Ki(n)&&n?.function_call)return n.function_call;if(Ki(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},wd=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(JT(n)&&n.content!=null||KT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},_d=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},XT=function(e){if(e.n!=null&&e.n>1)throw new fe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Cd=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class bs extends ZT{static runFunctions(e,n,r){const i=new bs,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,o)),i}static runTools(e,n,r){const i=new bs,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,o)),i}_addMessage(e,n=!0){super._addMessage(e,n),Ki(e)&&e.content&&this._emit("content",e.content)}}const QT=1,jT=2,eS=4,tS=8,nS=16,rS=32,iS=64,oS=128,sS=256,aS=oS|sS,lS=nS|rS|aS|iS,uS=QT|jT|lS,cS=eS|tS,TU=uS|cS,it={STR:QT,NUM:jT,ARR:eS,OBJ:tS,NULL:nS,BOOL:rS,NAN:iS,INFINITY:oS,MINUS_INFINITY:sS,INF:aS,SPECIAL:lS,ATOM:uS,COLLECTION:cS,ALL:TU};class SU extends Error{}class EU extends Error{}function AU(t,e=it.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return PU(t.trim(),e)}const PU=(t,e)=>{const n=t.length;let r=0;const i=p=>{throw new SU(`${p} at position ${r}`)},o=p=>{throw new EU(`${p} at position ${r}`)},s=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?f():t.substring(r,r+4)==="null"||it.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||it.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||it.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||it.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||it.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||it.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):d()),a=()=>{const p=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(m)))}catch(w){o(String(w))}else if(it.STR&e)try{return JSON.parse(t.substring(p,r-Number(m))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,h();const p={};try{for(;t[r]!=="}";){if(h(),r>=n&&it.OBJ&e)return p;const m=a();h(),r++;try{const w=s();Object.defineProperty(p,m,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(it.OBJ&e)return p;throw w}h(),t[r]===","&&r++}}catch{if(it.OBJ&e)return p;i("Expected '}' at end of object")}return r++,p},f=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(s()),h(),t[r]===","&&r++}catch{if(it.ARR&e)return p;i("Expected ']' at end of array")}return r++,p},d=()=>{if(r===0){t==="-"&&it.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(it.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}o(String(m))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(it.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&it.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(w){o(String(w))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},h0=t=>AU(t,it.ALL^it.NUM);var hi=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Ie=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},je,Dn,pi,jn,Mc,Ra,bc,Nc,Dc,Ma,Fc,p0;class Ns extends ZT{constructor(e){super(),je.add(this),Dn.set(this,void 0),pi.set(this,void 0),jn.set(this,void 0),hi(this,Dn,e,"f"),hi(this,pi,[],"f")}get currentChatCompletionSnapshot(){return Ie(this,jn,"f")}static fromReadableStream(e){const n=new Ns(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Ns(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ie(this,je,"m",Mc).call(this);const o=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of o)Ie(this,je,"m",bc).call(this,s);if(o.controller.signal?.aborted)throw new rn;return this._addChatCompletion(Ie(this,je,"m",Ma).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ie(this,je,"m",Mc).call(this),this._connected();const i=In.fromReadableStream(e,this.controller);let o;for await(const s of i)o&&o!==s.id&&this._addChatCompletion(Ie(this,je,"m",Ma).call(this)),Ie(this,je,"m",bc).call(this,s),o=s.id;if(i.controller.signal?.aborted)throw new rn;return this._addChatCompletion(Ie(this,je,"m",Ma).call(this))}[(Dn=new WeakMap,pi=new WeakMap,jn=new WeakMap,je=new WeakSet,Mc=function(){this.ended||hi(this,jn,void 0,"f")},Ra=function(n){let r=Ie(this,pi,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ie(this,pi,"f")[n.index]=r,r)},bc=function(n){if(this.ended)return;const r=Ie(this,je,"m",p0).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const o=r.choices[i.index];i.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",i.delta.content,o.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),i.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:o.message.refusal}),i.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:o.logprobs?.content??[]}),i.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});const s=Ie(this,je,"m",Ra).call(this,o);o.finish_reason&&(Ie(this,je,"m",Dc).call(this,o),s.current_tool_call_index!=null&&Ie(this,je,"m",Nc).call(this,o,s.current_tool_call_index));for(const a of i.delta.tool_calls??[])s.current_tool_call_index!==a.index&&(Ie(this,je,"m",Dc).call(this,o),s.current_tool_call_index!=null&&Ie(this,je,"m",Nc).call(this,o,s.current_tool_call_index)),s.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const c=o.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},Nc=function(n,r){if(Ie(this,je,"m",Ra).call(this,n).done_tool_calls.has(r))return;const o=n.message.tool_calls?.[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const s=Ie(this,Dn,"f")?.tools?.find(a=>a.type==="function"&&a.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:qs(s)?s.$parseRaw(o.function.arguments):s?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},Dc=function(n){const r=Ie(this,je,"m",Ra).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=Ie(this,je,"m",Fc).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ma=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const n=Ie(this,jn,"f");if(!n)throw new fe("request ended without sending any chunks");return hi(this,jn,void 0,"f"),hi(this,pi,[],"f"),IU(n,Ie(this,Dn,"f"))},Fc=function(){const n=Ie(this,Dn,"f")?.response_format;return yp(n)?n:null},p0=function(n){var r,i,o,s;let a=Ie(this,jn,"f");const{choices:c,...f}=n;a?Object.assign(a,f):a=hi(this,jn,{...f,choices:[]},"f");for(const{delta:d,finish_reason:h,index:p,logprobs:m=null,...w}of n.choices){let g=a.choices[p];if(g||(g=a.choices[p]={finish_reason:h,index:p,message:{},logprobs:m,...w}),m)if(!g.logprobs)g.logprobs=Object.assign({},m);else{const{content:k,refusal:R,...N}=m;Object.assign(g.logprobs,N),k&&((r=g.logprobs).content??(r.content=[]),g.logprobs.content.push(...k)),R&&((i=g.logprobs).refusal??(i.refusal=[]),g.logprobs.refusal.push(...R))}if(h&&(g.finish_reason=h,Ie(this,Dn,"f")&&YT(Ie(this,Dn,"f")))){if(h==="length")throw new kT;if(h==="content_filter")throw new RT}if(Object.assign(g,w),!d)continue;const{content:C,refusal:y,function_call:v,role:_,tool_calls:E,...A}=d;if(Object.assign(g.message,A),y&&(g.message.refusal=(g.message.refusal||"")+y),_&&(g.message.role=_),v&&(g.message.function_call?(v.name&&(g.message.function_call.name=v.name),v.arguments&&((o=g.message.function_call).arguments??(o.arguments=""),g.message.function_call.arguments+=v.arguments)):g.message.function_call=v),C&&(g.message.content=(g.message.content||"")+C,!g.message.refusal&&Ie(this,je,"m",Fc).call(this)&&(g.message.parsed=h0(g.message.content))),E){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:k,id:R,type:N,function:D,...F}of E){const q=(s=g.message.tool_calls)[k]??(s[k]={});Object.assign(q,F),R&&(q.id=R),N&&(q.type=N),D&&(q.function??(q.function={name:D.name??"",arguments:""})),D?.name&&(q.function.name=D.name),D?.arguments&&(q.function.arguments+=D.arguments,CU(Ie(this,Dn,"f"),q)&&(q.function.parsed_arguments=h0(q.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new In(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function IU(t,e){const{id:n,choices:r,created:i,model:o,system_fingerprint:s,...a}=t,c={...a,id:n,choices:r.map(({message:f,finish_reason:d,index:h,logprobs:p,...m})=>{if(!d)throw new fe(`missing finish_reason for choice ${h}`);const{content:w=null,function_call:g,tool_calls:C,...y}=f,v=f.role;if(!v)throw new fe(`missing role for choice ${h}`);if(g){const{arguments:_,name:E}=g;if(_==null)throw new fe(`missing function_call.arguments for choice ${h}`);if(!E)throw new fe(`missing function_call.name for choice ${h}`);return{...m,message:{content:w,function_call:{arguments:_,name:E},role:v,refusal:f.refusal??null},finish_reason:d,index:h,logprobs:p}}return C?{...m,index:h,finish_reason:d,logprobs:p,message:{...y,role:v,content:w,refusal:f.refusal??null,tool_calls:C.map((_,E)=>{const{function:A,type:k,id:R,...N}=_,{arguments:D,name:F,...q}=A||{};if(R==null)throw new fe(`missing choices[${h}].tool_calls[${E}].id
${ba(t)}`);if(k==null)throw new fe(`missing choices[${h}].tool_calls[${E}].type
${ba(t)}`);if(F==null)throw new fe(`missing choices[${h}].tool_calls[${E}].function.name
${ba(t)}`);if(D==null)throw new fe(`missing choices[${h}].tool_calls[${E}].function.arguments
${ba(t)}`);return{...N,id:R,type:k,function:{...q,name:F,arguments:D}}})}}:{...m,message:{...y,content:w,role:v,refusal:f.refusal??null},finish_reason:d,index:h,logprobs:p}}),created:i,model:o,object:"chat.completion",...s?{system_fingerprint:s}:{}};return vU(c,e)}function ba(t){return JSON.stringify(t)}class Yi extends Ns{static fromReadableStream(e){const n=new Yi(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Yi(null),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,o)),i}static runTools(e,n,r){const i=new Yi(n),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,o)),i}}let fS=class extends de{parse(e,n){return xU(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>vp(r,e))}runFunctions(e,n){return e.stream?Yi.runFunctions(this._client,e,n):bs.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Yi.runTools(this._client,e,n):bs.runTools(this._client,e,n)}stream(e,n){return Ns.createChatCompletion(this._client,e,n)}};class xd extends de{constructor(){super(...arguments),this.completions=new fS(this._client)}}(function(t){t.Completions=fS})(xd||(xd={}));class dS extends de{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class hS extends de{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class bu extends de{constructor(){super(...arguments),this.sessions=new dS(this._client),this.transcriptionSessions=new hS(this._client)}}bu.Sessions=dS;bu.TranscriptionSessions=hS;class wp extends de{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,_p,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class _p extends rt{}wp.MessagesPage=_p;class Cp extends de{retrieve(e,n,r,i={},o){return qe(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,n,r={},i){return qe(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,xp,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}}class xp extends rt{}Cp.RunStepsPage=xp;let Js=class extends de{constructor(){super(...arguments),this.steps=new Cp(this._client)}create(e,n,r){const{include:i,...o}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:o,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Tp,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return vn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:s}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Hs(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return vn.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const o=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,o.id,i)}submitToolOutputsStream(e,n,r,i){return vn.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class Tp extends rt{}Js.RunsPage=Tp;Js.Steps=Cp;Js.RunStepsPage=xp;class yo extends de{constructor(){super(...arguments),this.runs=new Js(this._client),this.messages=new wp(this._client)}create(e={},n){return qe(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return vn.createThreadAssistantStream(e,this._client.beta.threads,n)}}yo.Runs=Js;yo.RunsPage=Tp;yo.Messages=wp;yo.MessagesPage=_p;class vo extends de{constructor(){super(...arguments),this.realtime=new bu(this._client),this.chat=new xd(this._client),this.assistants=new mp(this._client),this.threads=new yo(this._client)}}vo.Realtime=bu;vo.Assistants=mp;vo.AssistantsPage=gp;vo.Threads=yo;class pS extends de{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class mS extends de{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}}let Nu=class extends de{constructor(){super(...arguments),this.content=new mS(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,ni({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,Sp,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};class Sp extends rt{}Nu.FileListResponsesPage=Sp;Nu.Content=mS;class Ks extends de{constructor(){super(...arguments),this.files=new Nu(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/containers",Ep,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Ep extends rt{}Ks.ContainerListResponsesPage=Ep;Ks.Files=Nu;Ks.FileListResponsesPage=Sp;class gS extends de{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&vr("Request","User defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?o:(vr("response","Decoding base64 embeddings to float32 array"),o._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{const c=a.embedding;a.embedding=gU(c)}),s)))}}class Ap extends de{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return qe(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,Pp,{query:r,...i})}}class Pp extends rt{}Ap.OutputItemListResponsesPage=Pp;class Ys extends de{constructor(){super(...arguments),this.outputItems=new Ap(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,Ip,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class Ip extends rt{}Ys.RunListResponsesPage=Ip;Ys.OutputItems=Ap;Ys.OutputItemListResponsesPage=Pp;class Xs extends de{constructor(){super(...arguments),this.runs=new Ys(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/evals",kp,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class kp extends rt{}Xs.EvalListResponsesPage=kp;Xs.Runs=Ys;Xs.RunListResponsesPage=Ip;let Rp=class extends de{create(e,n){return this._client.post("/files",ni({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/files",Mp,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let s=await this.retrieve(e);for(;!s.status||!i.has(s.status);)if(await Hs(n),s=await this.retrieve(e),Date.now()-o>r)throw new fp({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class Mp extends rt{}Rp.FileObjectsPage=Mp;class yS extends de{}let vS=class extends de{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class bp extends de{constructor(){super(...arguments),this.graders=new vS(this._client)}}bp.Graders=vS;class Np extends de{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Dp,{body:n,method:"post",...r})}retrieve(e,n={},r){return qe(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class Dp extends Iu{}Np.PermissionCreateResponsesPage=Dp;let Du=class extends de{constructor(){super(...arguments),this.permissions=new Np(this._client)}};Du.Permissions=Np;Du.PermissionCreateResponsesPage=Dp;class Fp extends de{list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Lp,{query:n,...r})}}class Lp extends rt{}Fp.FineTuningJobCheckpointsPage=Lp;class wo extends de{constructor(){super(...arguments),this.checkpoints=new Fp(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Vp,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return qe(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Up,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class Vp extends rt{}class Up extends rt{}wo.FineTuningJobsPage=Vp;wo.FineTuningJobEventsPage=Up;wo.Checkpoints=Fp;wo.FineTuningJobCheckpointsPage=Lp;class Pr extends de{constructor(){super(...arguments),this.methods=new yS(this._client),this.jobs=new wo(this._client),this.checkpoints=new Du(this._client),this.alpha=new bp(this._client)}}Pr.Methods=yS;Pr.Jobs=wo;Pr.FineTuningJobsPage=Vp;Pr.FineTuningJobEventsPage=Up;Pr.Checkpoints=Du;Pr.Alpha=bp;class wS extends de{}class Bp extends de{constructor(){super(...arguments),this.graderModels=new wS(this._client)}}Bp.GraderModels=wS;class _S extends de{createVariation(e,n){return this._client.post("/images/variations",ni({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",ni({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Op extends de{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",$p,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class $p extends Iu{}Op.ModelsPage=$p;class CS extends de{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function kU(t,e){return!e||!MU(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:xS(t,e)}function xS(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:DU(e,i)};if(i.type==="message"){const o=i.content.map(s=>s.type==="output_text"?{...s,parsed:RU(e,s.text)}:s);return{...i,content:o}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||TS(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function RU(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function MU(t){return!!yp(t.text?.format)}function bU(t){return t?.$brand==="auto-parseable-tool"}function NU(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function DU(t,e){const n=NU(t.tools??[],e.name);return{...e,...e,parsed_arguments:bU(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function TS(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class SS extends de{list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,LU,{query:n,...r})}}var mi=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},er=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},gi,Na,tr,Da,m0,g0,y0,v0;class zp extends pp{constructor(e){super(),gi.add(this),Na.set(this,void 0),tr.set(this,void 0),Da.set(this,void 0),mi(this,Na,e,"f")}static createResponse(e,n,r){const i=new zp(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),er(this,gi,"m",m0).call(this);let o,s=null;"response_id"in n?(o=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):o=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of o)er(this,gi,"m",g0).call(this,a,s);if(o.controller.signal?.aborted)throw new rn;return er(this,gi,"m",y0).call(this)}[(Na=new WeakMap,tr=new WeakMap,Da=new WeakMap,gi=new WeakSet,m0=function(){this.ended||mi(this,tr,void 0,"f")},g0=function(n,r){if(this.ended)return;const i=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},o=er(this,gi,"m",v0).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const s=o.output[n.output_index];if(!s)throw new fe(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new fe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=o.output[n.output_index];if(!s)throw new fe(`missing output at index ${n.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:i(n.type,n);break}},y0=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const n=er(this,tr,"f");if(!n)throw new fe("request ended without sending any events");mi(this,tr,void 0,"f");const r=FU(n,er(this,Na,"f"));return mi(this,Da,r,"f"),r},v0=function(n){let r=er(this,tr,"f");if(!r){if(n.type!=="response.created")throw new fe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=mi(this,tr,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new fe(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new fe(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new fe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new fe(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{mi(this,tr,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>n.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=er(this,Da,"f");if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}}function FU(t,e){return kU(t,e)}class Gp extends de{constructor(){super(...arguments),this.inputItems=new SS(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&TS(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n?.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>xS(r,e))}stream(e,n){return zp.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class LU extends rt{}Gp.InputItems=SS;class ES extends de{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,ni({body:n,...r}))}}class Hp extends de{constructor(){super(...arguments),this.parts=new ES(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}Hp.Parts=ES;const VU=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class Fu extends de{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,n={},r){return qe(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Lu,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const o=await this.retrieve(e,n,{...r,headers:i}).withResponse(),s=o.data;switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.response.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Hs(a);break;case"failed":case"completed":return s}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,Wp,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Lu extends rt{}class Wp extends Iu{}Fu.VectorStoreFilesPage=Lu;Fu.FileContentResponsesPage=Wp;class AS extends de{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return qe(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Lu,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}async poll(e,n,r){const i={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:s}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const f=parseInt(c);isNaN(f)||(a=f)}}await Hs(a);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=i?.maxConcurrency??5,s=Math.min(o,n.length),a=this._client,c=n.values(),f=[...r];async function d(p){for(let m of p){const w=await a.files.create({file:m,purpose:"assistants"},i);f.push(w.id)}}const h=Array(s).fill(c).map(d);return await VU(h),await this.createAndPoll(e,{file_ids:f})}}class Ir extends de{constructor(){super(...arguments),this.files=new Fu(this._client),this.fileBatches=new AS(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},n){return qe(e)?this.list({},e):this._client.getAPIList("/vector_stores",qp,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Jp,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class qp extends rt{}class Jp extends Iu{}Ir.VectorStoresPage=qp;Ir.VectorStoreSearchResponsesPage=Jp;Ir.Files=Fu;Ir.VectorStoreFilesPage=Lu;Ir.FileContentResponsesPage=Wp;Ir.FileBatches=AS;var PS;class me extends iU{constructor({baseURL:e=Ia("OPENAI_BASE_URL"),apiKey:n=Ia("OPENAI_API_KEY"),organization:r=Ia("OPENAI_ORG_ID")??null,project:i=Ia("OPENAI_PROJECT_ID")??null,...o}={}){if(n===void 0)throw new fe("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:n,organization:r,project:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&pU())throw new fe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new pS(this),this.chat=new Mu(this),this.embeddings=new gS(this),this.files=new Rp(this),this.images=new _S(this),this.audio=new Ws(this),this.moderations=new CS(this),this.models=new Op(this),this.fineTuning=new Pr(this),this.graders=new Bp(this),this.vectorStores=new Ir(this),this.beta=new vo(this),this.batches=new dp(this),this.uploads=new Hp(this),this.responses=new Gp(this),this.evals=new Xs(this),this.containers=new Ks(this),this._options=s,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return OV(e,{arrayFormat:"brackets"})}}PS=me;me.OpenAI=PS;me.DEFAULT_TIMEOUT=6e5;me.OpenAIError=fe;me.APIError=mt;me.APIConnectionError=Su;me.APIConnectionTimeoutError=fp;me.APIUserAbortError=rn;me.NotFoundError=ST;me.ConflictError=ET;me.RateLimitError=PT;me.BadRequestError=CT;me.AuthenticationError=xT;me.InternalServerError=IT;me.PermissionDeniedError=TT;me.UnprocessableEntityError=AT;me.toFile=DT;me.fileFromPath=vT;me.Completions=pS;me.Chat=Mu;me.ChatCompletionsPage=Ru;me.Embeddings=gS;me.Files=Rp;me.FileObjectsPage=Mp;me.Images=_S;me.Audio=Ws;me.Moderations=CS;me.Models=Op;me.ModelsPage=$p;me.FineTuning=Pr;me.Graders=Bp;me.VectorStores=Ir;me.VectorStoresPage=qp;me.VectorStoreSearchResponsesPage=Jp;me.Beta=vo;me.Batches=dp;me.BatchesPage=hp;me.Uploads=Hp;me.Responses=Gp;me.Evals=Xs;me.EvalListResponsesPage=kp;me.Containers=Ks;me.ContainerListResponsesPage=Ep;var UU={};const IS=t=>new Promise(e=>setTimeout(e,t)),kS=async(t,e,n=3,r=500)=>{if(n<0)throw new Error("retries must be non-negative");for(let i=0;i<=n;i++){try{const o=await fetch(t,e);if(!(o.status>=500&&o.status<600))return o;if(i===n){const a=new URL(t.toString()).hostname;throw new Error(`${a} service is temporarily unavailable. Please try again later.`)}}catch(o){if(i===n)throw o}await IS(r*Math.pow(2,i))}throw new Error("fetchWithRetry exhausted all retries without success.")},RS=async(t,e,n=3,r=500)=>{if(n<0)throw new Error("retries must be non-negative");for(let i=0;i<=n;i++){try{return await t()}catch(o){if(o.name==="AbortError")throw o;const s=o,a=s.status??s.response?.status,c=!a||a>=500&&a<600;if(!c||i===n)throw c?new Error(`${e} service is temporarily unavailable. Please try again later.`):o}await IS(r*Math.pow(2,i))}throw new Error("callWithRetry exhausted all retries without success.")};let Ho,Td;const w0=t=>{t&&t!==Td&&(Td=t,Ho=void 0)},Kp=()=>{if(Ho)return Ho;const t=Td||UU.API_KEY;if(!t)throw new Error("Gemini API key is missing. Please add it via the settings menu or ensure the API_KEY environment variable is set.");return Ho=new RV({apiKey:t}),Ho};let Wo,Jl;const _0=t=>{t&&t!==Jl&&(Jl=t,Wo=void 0)},Yp=()=>{if(Wo)return Wo;if(!Jl)throw new Error("OpenAI API key is missing. Please add it via the settings menu to use OpenAI models.");return Wo=new me({apiKey:Jl,dangerouslyAllowBrowser:!0}),Wo};let Sd;const C0=t=>{t&&t!==Sd&&(Sd=t)},MS=()=>Sd,bS=()=>typeof window<"u"&&window.location?window.location.origin:"http://localhost",Xp=t=>{if(!t)return"";const e=Reflect.get(t,"text");return typeof e=="function"?e.call(t)??"":e??""},Zp="Gemini quota exceeded, please wait before retrying.",BU=t=>new Promise(e=>setTimeout(e,t)),Kl=t=>{if(typeof t!="object"||t===null)return!1;const e=t,n=e.status??e.response?.status,r=e.message,i=typeof r=="string"?r.toLowerCase():"";return n===429||i.includes("rate limit")||i.includes("quota")},x0=t=>{if(typeof t!="object"||t===null)return!1;const e=t,n=e.status??e.response?.status;return typeof n=="number"&&n>=500},Qp=async(t,e=2,n=1e3)=>{for(let r=0;;r++)try{return await t()}catch(i){if((Kl(i)||x0(i))&&r<e){await BU(n*Math.pow(2,r));continue}throw Kl(i)?new Error(Zp):x0(i)?new Error("Gemini service is temporarily unavailable. Please try again later."):i}},OU=t=>t.charAt(0).toUpperCase()+t.slice(1),NS=(t,e,n)=>{throw console.error(`Error calling the Gemini API for ${e}:`,t),Kl(t)?new Error(Zp):t instanceof Error?new Error(`An error occurred with the Gemini ${OU(e)}: ${t.message}`):new Error(`An unknown error occurred while communicating with the Gemini model for ${n??e}.`)},yn={kTop:5,groupWindow:2048,tailWindow:2048,etaPercent:90,tau:.95,warmupTraces:8,maxBudget:16,minTokensBeforeStop:32},T0='You are a strict verifier. Return ONLY JSON with fields: {"score": number, "reasons": string[]}. Score in [0,1].',S0=(t,e)=>`
Task:
- Question/prompt:
"""${t}"""
- Model answer:
"""${e}"""

Rubric (each ~0.2 points):
1) Directly answers the asked question.
2) Uses only information entailed by the prompt/context.
3) Final answer format matches spec (e.g., number/string/code).
4) No contradictions or hedging.
5) Concise and unambiguous.

Return JSON only.`,Ed=async(t,e,n)=>{if(n.startsWith("gpt-")||n.includes("/"))try{const r=Yp(),i=op+T0,o=S0(t,e),a=(await r.chat.completions.create({model:iM,messages:[{role:"system",content:i},{role:"user",content:o}],temperature:0})).choices[0].message.content;if(!a)return{score:0,reasons:["Judge model returned an empty response."]};const c=a.trim().match(/\{[\s\S]*\}/)?.[0]??"{}",f=JSON.parse(c);return typeof f.score=="number"&&Array.isArray(f.reasons)?{score:Math.max(0,Math.min(1,f.score)),reasons:f.reasons}:(console.warn("OpenAI Judge model returned invalid JSON shape:",f),{score:0,reasons:["Invalid JSON response from OpenAI judge model."]})}catch(r){console.error("Error during OpenAI answer judging:",r);const i=r instanceof Error?r.message:"An unknown error occurred.";return r instanceof SyntaxError?{score:0,reasons:[`Failed to parse JSON response from OpenAI judge: ${i}`]}:{score:0,reasons:[`An error occurred while judging the answer with OpenAI: ${i}`]}}try{const r=n===sn?sn:Nn,i=Kp(),o=await Qp(()=>i.models.generateContent({model:r,contents:{parts:[{text:S0(t,e)}]},config:{systemInstruction:T0,responseMimeType:"application/json",responseSchema:{type:nn.OBJECT,properties:{score:{type:nn.NUMBER},reasons:{type:nn.ARRAY,items:{type:nn.STRING}}},propertyOrdering:["score","reasons"]},temperature:0}})),s=Xp(o).trim();if(!s)return console.warn("Judge model returned empty response"),{score:0,reasons:["Empty response from judge model."]};let a;try{a=JSON.parse(s)}catch(f){return console.error("Failed to parse JSON from Gemini judge:",f),{score:0,reasons:[`Failed to parse JSON response from judge model: ${f instanceof Error?f.message:String(f)}`]}}return(f=>{if(typeof f!="object"||f===null)return!1;const d=f;return typeof d.score=="number"&&Array.isArray(d.reasons)&&d.reasons.every(h=>typeof h=="string")})(a)?{score:Math.max(0,Math.min(1,a.score)),reasons:a.reasons}:(console.warn("Judge model returned invalid JSON shape:",a),{score:0,reasons:["Invalid JSON response from judge model."]})}catch(r){return console.error("Error during answer judging:",r),Kl(r)?{score:0,reasons:[Zp]}:{score:0,reasons:["An error occurred while judging the answer."]}}};function Ad(t,e){const n=new Map;t.forEach((s,a)=>n.set(s,(n.get(s)??0)+(e[a]??0)));let r="",i=-1/0,o=0;for(const[s,a]of n)o+=a,a>i&&(i=a,r=s);return{answer:r,weights:n,consensus:i<=0||o<=0?0:i/o}}function Pd(t,e,n){if(t.length===0)return{items:[],keptScores:[]};const r=[...t.keys()];r.sort((s,a)=>e[a]-e[s]);const i=Math.max(1,Math.floor(n/100*t.length)),o=r.slice(0,i);return{items:o.map(s=>t[s]),keptScores:o.map(s=>e[s])}}async function DS(t,e,n,r,i={}){const o={...yn,...i},s=[],a=o.maxBudget??yn.maxBudget;for(let C=0;C<a;C++)s.push(t.generate(e,new AbortController().signal));const c=await Promise.all(s),f=c.map(n),d=c.map(C=>Ed(e,C.text,r)),h=(await Promise.all(d)).map(C=>C.score),{items:p,keptScores:m}=Pd(f,h,o.etaPercent??yn.etaPercent),{answer:w}=Ad(p,m),g=c.find(C=>n(C)===w);return{answer:w,content:g?.text??"Could not determine winning trace."}}async function FS(t,e,n,r,i={}){const o={...yn,...i},s=[],a=[],c=o.warmupTraces??yn.warmupTraces,f=[];for(let _=0;_<c;_++)f.push(t.generate(e,new AbortController().signal));const d=await Promise.all(f),h=d.map(_=>Ed(e,_.text,r)),p=(await Promise.all(h)).map(_=>_.score);s.push(...d),a.push(...p);let m=s.map(n);const w=Pd(m,a,o.etaPercent??yn.etaPercent);let{answer:g,consensus:C}=Ad(w.items,w.keptScores);const y=o.maxBudget??yn.maxBudget;for(;C<(o.tau??yn.tau)&&s.length<y;){const _=await t.generate(e,new AbortController().signal),{score:E}=await Ed(e,_.text,r);s.push(_),a.push(E);const A=s.map(n),k=Pd(A,a,o.etaPercent??yn.etaPercent),R=Ad(k.items,k.keptScores);g=R.answer,C=R.consensus}const v=s.find(_=>n(_)===g);return{answer:g,content:v?.text??"Could not determine winning trace."}}const $U={low:8192,medium:24576,high:32768,dynamic:-1},zU={none:0,low:4096,medium:12288,high:24576,dynamic:-1},LS=async(t,e,n,r,i)=>{const o=[{text:e}];n.forEach(c=>{o.push({inlineData:{mimeType:c.file.type,data:c.base64}})});const s={model:t.model,contents:{parts:o},config:{systemInstruction:t.persona,temperature:.5+Math.random()*.2}};if(r.model===Nn){const c=zU[r.settings.effort];s.config&&(s.config.thinkingConfig={thinkingBudget:c})}else if(r.model===sn){const c=r.settings.effort==="none"?"dynamic":r.settings.effort,f=$U[c];s.config&&(s.config.thinkingConfig={thinkingBudget:f})}i&&s.config&&(s.config.abortSignal=i);const a=Kp();try{const c=await Qp(()=>a.models.generateContent(s));return Xp(c)}catch(c){return NS(c,"dispatcher","dispatch")}},GU=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:o,deepConfEta:s,tau:a,groupWindow:c}=r.settings,f=()=>({generate:async(p,m)=>{const w=await LS(t,p,n,r,m);return{text:w,steps:w.split("").map(C=>({token:C,topK:[]}))}}}),d=p=>p.text.trim(),h={etaPercent:s,maxBudget:o,warmupTraces:Math.min(o,yn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await FS(f(),e,d,r.model,h);return p}else{const{content:p}=await DS(f(),e,d,r.model,h);return p}},VS=async(t,e,n,r,i)=>{const o=Yp();let s=t.persona;s+=`
Your response verbosity should be ${r.settings.verbosity}.`,r.settings.effort==="high"&&(s=op+s);const a=[{role:"system",content:s}];if(n.length>0){const f=[{type:"text",text:e}];n.forEach(d=>{f.push({type:"image_url",image_url:{url:`data:${d.file.type};base64,${d.base64}`}})}),a.push({role:"user",content:f})}else a.push({role:"user",content:e});return(await RS(()=>o.chat.completions.create({model:t.model,messages:a},{signal:i}),"OpenAI")).choices[0].message.content||"No content received."},HU=async(t,e,n,r)=>{const{generationStrategy:i,traceCount:o,deepConfEta:s,tau:a,groupWindow:c}=r.settings,f=()=>({generate:async(p,m)=>{const w=await VS(t,p,n,r,m);return{text:w,steps:w.split("").map(C=>({token:C,topK:[]}))}}}),d=p=>p.text.trim(),h={etaPercent:s,maxBudget:o,warmupTraces:Math.min(o,yn.warmupTraces),tau:a,groupWindow:c};if(i==="deepconf-online"){const{content:p}=await FS(f(),e,d,r.model,h);return p}else{const{content:p}=await DS(f(),e,d,r.model,h);return p}},WU=async(t,e,n,r)=>{const i=MS();if(!i)throw new Error("OpenRouter API Key not set.");const o={Authorization:`Bearer ${i}`,"Content-Type":"application/json","HTTP-Referer":bS(),"X-Title":"HeavyOrc"},s=[{role:"system",content:t.persona}];if(n.length>0){const d=[{type:"text",text:e}];n.forEach(h=>{d.push({type:"image_url",image_url:{url:`data:${h.file.type};base64,${h.base64}`}})}),s.push({role:"user",content:d})}else s.push({role:"user",content:e});const a={model:t.model,messages:s,...r.settings},c=await kS("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:o,body:JSON.stringify(a)});if(!c.ok){const d=await c.json();throw new Error(`OpenRouter API Error: ${d.error?.message||c.statusText}`)}return(await c.json()).choices[0].message.content||"No content received."},E0=async(t,e,n,r)=>{try{let i="";if(r.provider==="gemini"){const o=r;o.settings.generationStrategy==="single"?i=await LS(t,e,n,o):i=await GU(t,e,n,o)}else if(r.provider==="openai"){const o=r;o.settings.generationStrategy==="single"?i=await VS(t,e,n,o):i=await HU(t,e,n,o)}else i=await WU(t,e,n,r);return{agentId:t.agentId,expert:t,content:i,status:"COMPLETED"}}catch(i){console.error(`Agent ${r.id} (${t.provider} - ${t.name}) failed:`,i);let o="An unknown error occurred";return i instanceof Error?o=i.message:typeof i=="string"&&(o=i),{agentId:t.agentId,expert:t,content:"This agent failed to generate a response.",status:"FAILED",error:o}}},qU=t=>new Promise(e=>setTimeout(e,t)),JU=async(t,e,n,r,i)=>{const s=t.map(m=>({expert:m,config:r.find(w=>w.id===m.agentId)})).filter(m=>m.config!==void 0),a=s.filter(m=>m.config.provider==="gemini"),c=s.filter(m=>m.config.provider==="openai"),f=s.filter(m=>m.config.provider==="openrouter"),d=[];[...a,...f].forEach(({expert:m,config:w})=>{const g=E0(m,e,n,w).then(C=>(i(C),C));d.push(g)});let p=Promise.resolve();return c.forEach(({expert:m,config:w})=>{p=p.then(async()=>{const g=E0(m,e,n,w).then(C=>(i(C),C));d.push(g),w.settings.generationStrategy==="single"&&await qU(250)})}),await p,Promise.all(d)},KU={none:0,low:8192,medium:24576,high:32768,dynamic:-1},YU={none:0,low:4096,medium:12288,high:24576,dynamic:-1};async function*XU(t){const e=t.getReader(),n=new TextDecoder("utf-8");try{for(;;){const{done:r,value:i}=await e.read();if(r)break;const s=n.decode(i,{stream:!0}).split(`

`);for(const a of s)if(a.startsWith("data: ")){const c=a.substring(6);if(c.trim()==="[DONE]")return;try{const d=JSON.parse(c).choices[0]?.delta?.content||"";d&&(yield{text:d})}catch(f){console.error("Error parsing OpenRouter stream chunk:",f,"Chunk:",c)}}}}finally{e.releaseLock()}}const ZU=async(t,e,n,r,i)=>{const o=n.filter(p=>p.status==="COMPLETED");if(o.length===0)throw new Error("All agents failed to produce a draft. Cannot generate a final answer.");const s=`The original user question is:
"${e}"

Here are ${o.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${o.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;if(t.includes("/")){const p=MS();if(!p)throw new Error("OpenRouter API Key not set.");const m={Authorization:`Bearer ${p}`,"Content-Type":"application/json","HTTP-Referer":bS(),"X-Title":"HeavyOrc"},C=await kS("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:m,body:JSON.stringify({model:t,messages:[{role:"system",content:Sc},{role:"user",content:s}],stream:!0})});if(!C.ok||!C.body){const y=await C.json().catch(()=>({}));throw new Error(`OpenRouter API Error: ${y.error?.message||C.statusText}`)}return XU(C.body)}if(t.startsWith("gpt-")){const p=Yp();let m=Sc;t===Zf&&(m=op+m+sM),m+=`
Your final synthesized response should have a verbosity level of: ${r}.`;const w=[{role:"system",content:m},{role:"user",content:s}],g=t===bx||t===Zf?rM:t;try{const C=await RS(()=>p.chat.completions.create({model:g,messages:w,stream:!0}),"OpenAI");async function*y(){for await(const v of C){const _=v.choices[0]?.delta?.content;_&&(yield{text:_})}}return y()}catch(C){throw console.error("Error calling the OpenAI API for arbiter:",C),C}}const a=t===Nn?Nn:sn,d=(a===Nn?YU:KU)[a===sn&&i==="none"?"dynamic":i],h=Kp();try{const p=await Qp(()=>h.models.generateContentStream({model:a,contents:{parts:[{text:s}]},config:{systemInstruction:Sc,thinkingConfig:{thinkingBudget:d}}}));async function*m(){for await(const w of p)yield{text:Xp(w)}}return m()}catch(p){return NS(p,"arbiter","arbitration")}},QU=t=>Math.ceil(t.length/4),jU=28e3,e4=async(t,e)=>{const n=t.agentConfigs.map(d=>({agentId:d.id,id:d.expert.id,name:d.expert.name,persona:d.expert.persona,provider:d.provider,model:d.model}));e.onInitialAgents(n);const r=await JU(n,t.prompt,t.images,t.agentConfigs,e.onDraftComplete);let i=t.arbiterModel,o=!1;const s=r.filter(d=>d.status==="COMPLETED"),a=i.startsWith("gpt-"),c=i.includes("/");if(s.length>0&&(a||c)){const d=`The original user question is:
"${t.prompt}"

Here are ${s.length} candidate answers from different expert agents. Please synthesize them into the best possible single answer.

${s.map((p,m)=>`### Draft from Agent ${m+1} (Provider: ${p.expert.provider}, Persona: ${p.expert.name})
${p.content}`).join(`

---

`)}`;QU(d)>jU&&(i=sn,o=!0)}const f=await ZU(i,t.prompt,r,t.openAIArbiterVerbosity,t.geminiArbiterEffort);return{drafts:r,stream:f,switchedArbiter:o}},Lc=["var(--accent)","var(--accent-2)","var(--success)","var(--warn)","var(--danger)"];function US(t){return t<=0?Lc[0]:Lc[(t-1)%Lc.length]}const Vu=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M10 2.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75Zm-3.25 3.5a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3Zm7 0a.75.75 0 0 0-.5 1.3l.25.14a.75.75 0 0 0 1-1.3l-.25-.14a.75.75 0 0 0-.5-1.3ZM10 8a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5A.75.75 0 0 1 10 8Zm-4.12 3.12a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25Zm8.24 0a.75.75 0 0 0-1.06 0l-.25.25a.75.75 0 0 0 0 1.06l.25.25a.75.75 0 0 0 1.06 0l.25-.25a.75.75 0 0 0 0-1.06l-.25-.25ZM10 13.5a.75.75 0 0 1 .75.75v.5a.75.75 0 0 1-1.5 0v-.5a.75.75 0 0 1 .75-.75ZM3.75 10a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Zm12.5 0a.75.75 0 0 0-1.5 0v.5a.75.75 0 0 0 1.5 0v-.5Z",clipRule:"evenodd"})}),t4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M9.661 2.237a.531.531 0 0 1 .678 0 11.947 11.947 0 0 0 7.078 2.749.5.5 0 0 1 .479.425c.069.52.104 1.05.104 1.59 0 5.162-3.26 9.563-7.834 11.256a.48.48 0 0 1-.332 0C5.26 16.564 2 12.163 2 7c0-.538.035-1.069.104-1.589a.5.5 0 0 1 .48-.425 11.947 11.947 0 0 0 7.077-2.75Zm4.196 5.954a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),jp=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",...t,children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),em=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"})}),Zs=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"})}),n4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{d:"M3 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM8.5 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM15.5 10a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),r4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75Zm0 5A.75.75 0 0 1 2.75 9h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75Zm0 5a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75Z"})}),BS=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[S.jsx("path",{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"}),S.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),i4=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:[S.jsx("path",{fillRule:"evenodd",d:"M9.25 13.25a.75.75 0 0 0 1.5 0V4.636l2.955 3.129a.75.75 0 0 0 1.09-1.03l-4.25-4.5a.75.75 0 0 0-1.09 0l-4.25 4.5a.75.75 0 1 0 1.09 1.03L9.25 4.636V13.25Z",clipRule:"evenodd"}),S.jsx("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"})]}),OS=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}),$S=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),o4=t=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.127.332-.183.582-.495.645-.87l.213-1.281z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",...t,children:S.jsx("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"})}),zS=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),a4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),l4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})}),u4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),GS=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),tm=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),nm=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),c4=t=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m12 3.75a6 6 0 0 1-12 0v-1.5a6 6 0 0 1 12 0v1.5Zm-6 4.5v.75m-3-12.75a3 3 0 0 1 3-3h.008a3 3 0 0 1 3 3v1.5a3 3 0 0 1-3 3h-.008a3 3 0 0 1-3-3v-1.5Z"})}),f4=t=>{switch(t){case"RUNNING":return S.jsxs(S.Fragment,{children:[S.jsx(jp,{className:"h-5 w-5 text-[var(--accent-2)] animate-spin"}),S.jsx("span",{className:"sr-only",children:"Running"})]});case"COMPLETED":return S.jsxs(S.Fragment,{children:[S.jsx(em,{className:"h-5 w-5 text-[var(--success)]"}),S.jsx("span",{className:"sr-only",children:"Completed"})]});case"FAILED":return S.jsxs(S.Fragment,{children:[S.jsx(Zs,{className:"h-5 w-5 text-[var(--danger)]"}),S.jsx("span",{className:"sr-only",children:"Failed"})]});case"PENDING":default:return S.jsxs(S.Fragment,{children:[S.jsx(n4,{className:"h-5 w-5 text-[var(--text-muted)]"}),S.jsx("span",{className:"sr-only",children:"Pending"})]})}},d4=t=>{switch(t){case"RUNNING":return"border-[var(--accent-2)] animate-pulse";case"COMPLETED":return"border-[var(--success)]";case"FAILED":return"border-[var(--danger)]";case"PENDING":default:return"border-[var(--line)]"}},h4=t=>{switch(t){case"gemini":return"bg-[var(--accent)] text-[#0D1411]";case"openai":return"bg-[var(--accent-2)] text-[#0D1411]";case"openrouter":return"bg-[var(--success)] text-[#0D1411]";default:return"bg-[var(--surface-1)] text-[var(--text)]"}},p4=({agent:t,displayId:e,isCollapsed:n,onToggleCollapse:r})=>{const{persona:i,status:o,content:s,provider:a}=t,c=z.useId(),f=o==="COMPLETED"||o==="FAILED",d=d4(o),h=US(e);return S.jsxs("div",{className:`bg-[var(--surface-2)] border ${d} rounded-lg shadow-lg transition-all duration-300 flex flex-col`,children:[S.jsxs("div",{className:"p-4 border-b border-[var(--line)] flex justify-between items-center gap-2",children:[S.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[S.jsx(Vu,{className:"h-5 w-5 flex-shrink-0",style:{color:h},"aria-hidden":"true"}),S.jsxs("h3",{className:"font-bold text-sm text-[var(--text)] truncate",children:["Agent ",e]}),S.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full uppercase ${h4(a)}`,children:a})]}),S.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[f4(o),f&&S.jsxs("button",{onClick:r,className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-expanded":!n,"aria-controls":c,title:n?"Expand":"Collapse",children:[n?S.jsx($S,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(OS,{className:"h-5 w-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:n?"Expand card":"Collapse card"})]})]})]}),S.jsx("div",{id:c,className:`overflow-y-auto transition-all duration-500 ease-in-out ${n?"max-h-0":"max-h-[500px]"}`,children:S.jsxs("div",{className:"p-4",children:[S.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mb-3",children:["Persona: ",i]}),S.jsx("p",{className:"text-sm text-[var(--text)] whitespace-pre-wrap font-mono",children:s||"Awaiting task..."})]})})]})},Fa=[{id:"api-keys",label:"API Keys",icon:l4,description:"Manage your API keys. They're stored in your browser and never sent to our servers."},{id:"session",label:"Session Management",icon:GS,description:"Save your current settings, API key, and query history to a file, or load a previous session."},{id:"history",label:"Query History",icon:u4,description:"Review and reuse your most recent prompts."}],m4=({currentOpenAIApiKey:t,onSaveOpenAIApiKey:e,currentGeminiApiKey:n,onSaveGeminiApiKey:r,currentOpenRouterApiKey:i,onSaveOpenRouterApiKey:o})=>{const[s,a]=z.useState(t),[c,f]=z.useState(n),[d,h]=z.useState(i);z.useEffect(()=>{a(t)},[t]),z.useEffect(()=>{f(n)},[n]),z.useEffect(()=>{h(i)},[i]);const p=()=>e(s),m=()=>r(c),w=()=>o(d);return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"openai-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"OpenAI API Key"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{id:"openai-api-key",type:"password",value:s,onChange:g=>a(g.target.value),placeholder:"sk-...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),S.jsx("button",{onClick:p,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"gemini-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Google Gemini API Key"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{id:"gemini-api-key",type:"password",value:c,onChange:g=>f(g.target.value),placeholder:"AIza...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),S.jsx("button",{onClick:m,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]}),S.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:"If left blank, the application will attempt to use the pre-configured environment variable."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"openrouter-api-key",className:"block text-sm font-medium text-[var(--text)] mb-2",children:"OpenRouter API Key"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{id:"openrouter-api-key",type:"password",value:d,onChange:g=>h(g.target.value),placeholder:"sk-or-...",className:"flex-grow p-2 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg focus:ring-2 focus:ring-[var(--accent)] focus:border-[var(--accent)] transition"}),S.jsx("button",{onClick:w,type:"button",className:"px-4 py-2 bg-[var(--accent)] text-[#0D1411] font-semibold rounded-lg shadow-md hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] transition-colors",children:"Save"})]})]})]})},g4=({onSaveSession:t,onLoadSession:e})=>{const n=z.useRef(null),r=()=>n.current?.click(),i=o=>{const s=o.target.files?.[0];s&&e(s)};return S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[S.jsxs("button",{onClick:t,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] transition-colors",children:[S.jsx(BS,{className:"w-5 h-5","aria-hidden":"true"}),"Save Session"]}),S.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] transition-colors",children:[S.jsx(i4,{className:"w-5 h-5","aria-hidden":"true"}),"Load Session"]}),S.jsx("input",{ref:n,type:"file",accept:".json",className:"hidden",onChange:i,"aria-hidden":"true"})]})},y4=({queryHistory:t,onSelectQuery:e,onClose:n})=>{const r=i=>{e(i),n()};return t.length===0?S.jsx("p",{className:"text-[var(--text-muted)] italic",children:"Your query history is empty."}):S.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((i,o)=>S.jsx("li",{children:S.jsx("button",{onClick:()=>r(i),className:"w-full text-left p-2.5 text-sm text-[var(--accent-2)] bg-[var(--surface-2)] rounded-md hover:bg-[var(--surface-active)] transition-colors truncate",title:i,children:i})},o))})},v4=t=>{const{isOpen:e,onClose:n,queryHistory:r}=t,[i,o]=z.useState("api-keys"),[s,a]=z.useState(!1),c=z.useRef(null),f=Fa.find(g=>g.id===i)??Fa[0];if(z.useEffect(()=>{const g=C=>{C.key==="Escape"&&n()};return e&&(window.addEventListener("keydown",g),o("api-keys"),a(!1)),()=>window.removeEventListener("keydown",g)},[e,n]),z.useEffect(()=>{e&&(c.current?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')??c.current)?.focus()},[e]),z.useEffect(()=>{if(!e)return;const g=y=>{if(y.key!=="Tab"||!c.current)return;const v=Array.from(c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(A=>!A.hasAttribute("disabled")&&A.offsetParent!==null);if(v.length===0)return;const _=v[0],E=v[v.length-1];y.shiftKey&&document.activeElement===_?(y.preventDefault(),E.focus()):!y.shiftKey&&document.activeElement===E&&(y.preventDefault(),_.focus())},C=c.current;return C?.addEventListener("keydown",g),()=>C?.removeEventListener("keydown",g)},[e]),!e)return null;const d=g=>{o(g),a(!0)},h=()=>a(!1),p=g=>{switch(g){case"api-keys":return S.jsx(m4,{...t});case"session":return S.jsx(g4,{...t});case"history":return S.jsx(y4,{...t});default:return null}},m=r.length>0?Fa:Fa.filter(g=>g.id!=="history"),w=S.jsx("nav",{className:"flex flex-col gap-1 p-2","aria-label":"Settings navigation",children:m.map(g=>{const C=g.icon,y=g.id===i;return S.jsxs("button",{onClick:()=>d(g.id),className:`w-full flex items-center gap-3 text-left px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${y?"bg-[var(--accent)] text-[#0D1411]":"text-[var(--text)] hover:bg-[var(--surface-active)]"}`,"aria-current":y?"page":void 0,children:[S.jsx(C,{className:"w-5 h-5 flex-shrink-0","aria-hidden":"true"}),S.jsx("span",{children:g.label})]},g.id)})});return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:S.jsxs("div",{ref:c,tabIndex:-1,className:"bg-[var(--surface-2)] rounded-xl shadow-2xl border border-[var(--line)] w-full max-w-4xl h-full max-h-[700px] flex flex-col",onClick:g=>g.stopPropagation(),children:[S.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[var(--line)] flex-shrink-0",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:h,className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] md:hidden","aria-label":"Back to settings sections",style:{visibility:s?"visible":"hidden"},children:S.jsx(zS,{className:"w-6 h-6","aria-hidden":"true"})}),S.jsxs("h2",{id:"settings-title",className:"text-lg font-bold text-[var(--text)]",children:[S.jsx("span",{className:"md:hidden",children:s?f.label:"Settings"}),S.jsx("span",{className:"hidden md:inline",children:"Settings"})]})]}),S.jsx("button",{onClick:n,type:"button",className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)]","aria-label":"Close settings",children:S.jsx(tm,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsxs("div",{className:"flex-grow grid md:grid-cols-[240px_1fr] grid-cols-1 min-h-0",children:[S.jsx("aside",{className:"hidden md:block border-r border-[var(--line)]/50 overflow-y-auto",children:w}),S.jsxs("main",{className:"overflow-y-auto",children:[S.jsx("div",{className:"md:hidden",children:s?S.jsxs("div",{className:"p-6 space-y-4",children:[S.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:f.description}),S.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:p(i)})]}):w}),S.jsxs("div",{className:"hidden md:block p-6 space-y-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-[var(--text)]",children:f.label}),S.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:f.description}),S.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:p(i)})]})]})]})]})})},A0=({title:t,children:e,isDisabled:n=!1,defaultOpen:r=!1})=>{const[i,o]=z.useState(r),s=z.useId(),a=()=>{n||o(!i)};return S.jsxs("div",{className:`border border-[var(--line)] rounded-lg transition-opacity ${n?"opacity-50":""}`,children:[S.jsxs("button",{type:"button",onClick:a,disabled:n,className:"w-full flex justify-between items-center p-4 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-1)] rounded-t-lg","aria-expanded":i,"aria-controls":s,children:[S.jsx("h4",{className:"text-base font-medium text-[var(--text)]",children:t}),i?S.jsx(OS,{className:"w-5 h-5 text-[var(--text-muted)]","aria-hidden":"true"}):S.jsx($S,{className:"w-5 h-5 text-[var(--text-muted)]","aria-hidden":"true"})]}),S.jsx("div",{id:s,className:`transition-all duration-300 ease-in-out ${i?"max-h-[80vh] overflow-y-auto":"max-h-0 overflow-hidden"}`,children:S.jsx("div",{className:"p-4 border-t border-[var(--line)]",children:e})})]})},Fr=({value:t,onCommit:e,parser:n=parseFloat,onCancel:r,...i})=>{const[o,s]=Oc.useState(String(t));Oc.useEffect(()=>{s(String(t))},[t]);const a=()=>{let c=n(o);if(Number.isNaN(c))s(String(t)),r?.();else{const f=i.min!==void 0?Number(i.min):void 0,d=i.max!==void 0?Number(i.max):void 0;f!==void 0&&(c=Math.max(c,f)),d!==void 0&&(c=Math.min(c,d)),e(c)}};return S.jsx("input",{...i,value:o,onChange:c=>s(c.target.value),onBlur:a,onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),a(),c.target.blur())}})},w4=t=>{switch(t){case"RUNNING":return S.jsx(jp,{className:"h-5 w-5 text-[var(--accent-2)] animate-spin","aria-hidden":"true"});case"COMPLETED":return S.jsx(em,{className:"h-5 w-5 text-[var(--success)]","aria-hidden":"true"});case"FAILED":return S.jsx(Zs,{className:"h-5 w-5 text-[var(--danger)]","aria-hidden":"true"});case"PENDING":case"QUEUED":default:return null}},_4=t=>{switch(t){case"RUNNING":return"border-[var(--accent-2)] ring-2 ring-[var(--accent-2)] ring-opacity-50";case"COMPLETED":return"border-[var(--success)]";case"FAILED":return"border-[var(--danger)]";case"PENDING":case"QUEUED":default:return"border-[var(--line)]"}},C4=({config:t,onUpdate:e,onRemove:n,onDuplicate:r,disabled:i,displayId:o})=>{const s=d=>{const h=d.target.value,p=h.startsWith("gemini"),m=h.includes("/");if(p){const w=h,g={id:t.id,expert:t.expert,status:t.status,provider:"gemini",model:w,settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,g)}else if(m){const w=h,g={id:t.id,expert:t.expert,status:t.status,provider:"openrouter",model:w,settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}};e(t.id,g)}else{const w=h,g={id:t.id,expert:t.expert,status:t.status,provider:"openai",model:w,settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(t.id,g)}},a=d=>{const h={...t,settings:{...t.settings,...d}};e(t.id,h)},c=_4(t.status),f=US(o);return S.jsxs("div",{className:`relative group bg-[var(--surface-2)] p-4 rounded-lg border transition-all duration-300 ${c}`,children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold",style:{color:f},children:t.expert.name}),S.jsxs("p",{className:"text-xs text-[var(--text-muted)] italic mt-1 pr-8",children:["Persona: ",t.expert.persona]})]}),S.jsx("div",{className:"flex-shrink-0",children:w4(t.status)})]}),S.jsxs("div",{className:`absolute top-3 right-3 flex items-center gap-1.5 transition-opacity ${i?"opacity-0":"opacity-0 group-hover:opacity-100"}`,children:[S.jsxs("button",{onClick:()=>r(t.id),disabled:i,className:"p-1 text-[var(--text-muted)] hover:text-[var(--text)] disabled:opacity-50 disabled:cursor-not-allowed",title:"Duplicate Agent",children:[S.jsx(GS,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Duplicate Agent"})]}),S.jsxs("button",{onClick:()=>n(t.id),disabled:i,className:"p-1 text-[var(--text-muted)] hover:text-[var(--danger)] disabled:opacity-50 disabled:cursor-not-allowed",title:"Remove Agent",children:[S.jsx(Zs,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Remove Agent"})]})]}),S.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`model-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Model"}),S.jsxs("select",{id:`model-${t.id}`,value:t.model,onChange:s,disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",children:[S.jsxs("optgroup",{label:"Google",children:[S.jsx("option",{value:sn,children:"Gemini 2.5 Pro"}),S.jsx("option",{value:Nn,children:"Gemini 2.5 Flash"})]}),S.jsxs("optgroup",{label:"OpenAI",children:[S.jsx("option",{value:kx,children:"OpenAI GPT-5"}),S.jsx("option",{value:ip,children:"OpenAI GPT-5 Mini"})]}),S.jsxs("optgroup",{label:"OpenRouter",children:[S.jsx("option",{value:Rx,children:"OpenAI GPT-4o"}),S.jsx("option",{value:oM,children:"Gemini Flash 1.5"}),S.jsx("option",{value:Mx,children:"Claude 3 Haiku"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`strategy-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Generation Strategy"}),S.jsxs("select",{id:`strategy-${t.id}`,value:t.provider==="openrouter"?"single":t.settings.generationStrategy,onChange:d=>a({generationStrategy:d.target.value}),disabled:i||t.provider==="openrouter",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)] disabled:opacity-70",title:t.provider==="openrouter"?"DeepConf is not currently supported for OpenRouter agents.":"Select the generation strategy.",children:[S.jsx("option",{value:"single",children:"Single Draft"}),S.jsx("option",{value:"deepconf-offline",children:"DeepConf Offline"}),S.jsx("option",{value:"deepconf-online",children:"DeepConf Online"})]})]}),t.provider!=="openrouter"&&t.settings.generationStrategy!=="single"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`traces-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Trace Count"}),S.jsx(Fr,{type:"number",id:`traces-${t.id}`,value:t.settings.traceCount,onCommit:d=>a({traceCount:d}),parser:d=>parseInt(d,10),disabled:i,min:"2",max:"32",step:"1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Number of parallel responses to generate for DeepConf."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`eta-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Confidence (Eta)"}),S.jsxs("select",{id:`eta-${t.id}`,value:t.settings.deepConfEta,onChange:d=>a({deepConfEta:parseInt(d.target.value,10)}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Confidence threshold. 90% is conservative (keeps more), 10% is aggressive (keeps few high-confidence traces).",children:[S.jsx("option",{value:"90",children:"90% (Conservative)"}),S.jsx("option",{value:"10",children:"10% (Aggressive)"})]})]}),S.jsxs("div",{className:"col-span-2",children:[S.jsx("label",{htmlFor:`confidence-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Confidence Source"}),S.jsx("select",{id:`confidence-${t.id}`,value:t.settings.confidenceSource,disabled:!0,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)] disabled:opacity-70 disabled:cursor-not-allowed",title:"Only 'Judge' is available. The underlying models (Gemini and GPT-5) do not support streaming logprobs required for token-based confidence.",children:S.jsx("option",{value:"judge",children:"Judge Verifier"})})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`tau-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Consensus (Tau)"}),S.jsx(Fr,{type:"number",id:`tau-${t.id}`,value:t.settings.tau,onCommit:d=>a({tau:d}),parser:d=>parseFloat(d),disabled:i,min:"0.5",max:"1.0",step:"0.01",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Consensus threshold for online mode. Stops when the top answer's vote share exceeds this value (e.g., 0.95)."})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`groupWindow-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Group Window"}),S.jsx(Fr,{type:"number",id:`groupWindow-${t.id}`,value:t.settings.groupWindow,onCommit:d=>a({groupWindow:d}),parser:d=>parseInt(d,10),disabled:i,min:"8",max:"4096",step:"8",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Sliding window size (in tokens) for calculating group confidence."})]})]}),t.provider==="gemini"?S.jsxs("div",{className:"col-span-2",children:[S.jsx("label",{htmlFor:`gemini-effort-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Thinking Effort"}),S.jsxs("select",{id:`gemini-effort-${t.id}`,value:t.settings.effort,onChange:d=>a({effort:d.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Controls how much 'thinking' the Gemini model performs before answering. 'Dynamic' is recommended. 'High' can improve quality for complex tasks but increases latency. 'None' is fastest but least thorough.",children:[S.jsx("option",{value:"dynamic",children:"Dynamic"}),S.jsx("option",{value:"high",children:"High"}),S.jsx("option",{value:"medium",children:"Medium"}),S.jsx("option",{value:"low",children:"Low"}),S.jsx("option",{value:"none",disabled:t.model===sn,children:"None (No Thinking)"})]})]}):t.provider==="openai"?S.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`openai-effort-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Reasoning"}),S.jsxs("select",{id:`openai-effort-${t.id}`,value:t.settings.effort,onChange:d=>a({effort:d.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Controls the model's reasoning process. 'High' enables more complex, step-by-step thinking, which can improve accuracy for difficult prompts. 'Medium' is faster and suitable for general tasks.",children:[S.jsx("option",{value:"high",children:"High"}),S.jsx("option",{value:"medium",children:"Medium"})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`openai-verbosity-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Verbosity"}),S.jsxs("select",{id:`openai-verbosity-${t.id}`,value:t.settings.verbosity,onChange:d=>a({verbosity:d.target.value}),disabled:i,className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]",title:"Adjusts the length and detail of the agent's response. 'High' provides more comprehensive answers, while 'Low' is more concise.",children:[S.jsx("option",{value:"high",children:"High"}),S.jsx("option",{value:"medium",children:"Medium"}),S.jsx("option",{value:"low",children:"Low"})]})]})]}):S.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-temp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Temperature"}),S.jsx(Fr,{type:"number",id:`or-temp-${t.id}`,value:t.settings.temperature,onCommit:d=>a({temperature:d}),parser:d=>parseFloat(d),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-topk-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Top K"}),S.jsx(Fr,{type:"number",id:`or-topk-${t.id}`,value:t.settings.topK,onCommit:d=>a({topK:d}),parser:d=>parseInt(d,10),disabled:i,min:"1",step:"1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-topp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Top P"}),S.jsx(Fr,{type:"number",id:`or-topp-${t.id}`,value:t.settings.topP,onCommit:d=>a({topP:d}),parser:d=>parseFloat(d),disabled:i,min:"0",max:"1",step:"0.05",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:`or-repp-${t.id}`,className:"block text-sm font-medium text-[var(--text-muted)] mb-1",children:"Repetition Penalty"}),S.jsx(Fr,{type:"number",id:`or-repp-${t.id}`,value:t.settings.repetitionPenalty,onCommit:d=>a({repetitionPenalty:d}),parser:d=>parseFloat(d),disabled:i,min:"0",max:"2",step:"0.1",className:"w-full p-1.5 text-sm bg-[var(--surface-1)] border border-[var(--line)] rounded-md focus:ring-2 focus:ring-[var(--accent)]"})]})]})]})]})},x4=({isOpen:t,onClose:e,onAddExpert:n,availableExperts:r})=>{if(z.useEffect(()=>{const o=s=>{s.key==="Escape"&&e()};return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,e]),!t)return null;const i=o=>{n(o),e()};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 animate-fade-in-up p-4",style:{animationDuration:"0.3s"},onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"add-expert-title",children:S.jsxs("div",{className:"bg-[var(--surface-2)] rounded-xl shadow-2xl border border-[var(--line)] w-full max-w-2xl h-full max-h-[80vh] flex flex-col",onClick:o=>o.stopPropagation(),children:[S.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[var(--line)] flex-shrink-0",children:[S.jsx("h2",{id:"add-expert-title",className:"text-lg font-bold text-[var(--text)]",children:"Add an Expert to the Ensemble"}),S.jsx("button",{onClick:e,type:"button",className:"p-1 rounded-full text-[var(--text-muted)] hover:bg-[var(--surface-active)] hover:text-[var(--text)]","aria-label":"Close modal",children:S.jsx(tm,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsx("main",{className:"flex-grow p-4 sm:p-6 overflow-y-auto",children:S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(o=>S.jsxs("button",{onClick:()=>i(o),className:"w-full h-full text-left p-4 bg-[var(--surface-2)] rounded-lg border border-[var(--line)] hover:bg-[var(--surface-active)] hover:border-[var(--accent)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--accent)] flex flex-col",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx(Vu,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0","aria-hidden":"true"}),S.jsx("h3",{className:"font-bold text-[var(--text)]",children:o.name})]}),S.jsx("p",{className:"text-sm text-[var(--text-muted)] flex-grow",children:o.persona})]},o.id))})})]})})},HS=z.forwardRef(({agentConfigs:t,setAgentConfigs:e,onDuplicateAgent:n,disabled:r},i)=>{const[o,s]=z.useState(!1);z.useImperativeHandle(i,()=>({openModal:()=>s(!0)}));const a=h=>{const p={id:crypto.randomUUID(),expert:h,model:"gemini-2.5-flash",provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}};e(m=>[...m,p])},c=(h,p)=>{e(m=>m.map(w=>w.id===h?p:w))},f=h=>{e(p=>p.filter(m=>m.id!==h))},d=sp.filter(h=>!t.some(p=>p.expert.id===h.id));return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h3",{className:"text-base font-medium text-[var(--text)]",children:"Agent Ensemble"}),d.length>0&&S.jsxs("button",{onClick:()=>s(!0),disabled:r,className:"flex items-center justify-center gap-2 px-3 py-1 bg-[var(--accent)] text-[#0D1411] text-sm font-semibold rounded-lg shadow-md hover:brightness-110 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx(nm,{className:"w-4 h-4","aria-hidden":"true"}),"Add Expert"]})]}),S.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:t.length>0?t.map((h,p)=>S.jsx(C4,{config:h,onUpdate:c,onRemove:f,onDuplicate:n,disabled:r,displayId:p+1},h.id)):S.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-[var(--text-muted)]",children:'No experts configured. Click "Add Expert" to get started.'})}),S.jsx(x4,{isOpen:o,onClose:()=>s(!1),onAddExpert:a,availableExperts:d})]})});HS.displayName="AgentEnsemble";const yi=5,P0=200,T4=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result?.split(",")[1];i?e(i):n(new Error("Failed to read file as base64."))},r.onerror=i=>n(i),r.readAsDataURL(t)}),S4=({prompt:t,onPromptChange:e,images:n,onImagesChange:r,onSubmit:i,isLoading:o=!1,disabled:s=!1,inputRef:a})=>{const c=z.useRef(null),f=a||z.useRef(null),d=z.useCallback(async y=>{const v=y.target.files;if(!v)return;let _=[...n];for(const E of Array.from(v)){if(_.length>=yi){alert(`You can only upload a maximum of ${yi} images.`);break}if(E.type.startsWith("image/"))try{const A=await T4(E),k={id:`${E.name}-${Date.now()}`,file:E,base64:A};_.push(k)}catch(A){console.error("Error reading file:",A),alert("There was an error processing one of the images.")}}r(_),c.current&&(c.current.value="")},[n,r]),h=z.useCallback(y=>{r(n.filter(v=>v.id!==y))},[n,r]),p=()=>{c.current?.click()},m=z.useRef({}),w=z.useMemo(()=>{const y=m.current,v=n.map(E=>{let A=y[E.id];return A||(A=URL.createObjectURL(E.file),y[E.id]=A),{...E,url:A}}),_=new Set(n.map(E=>E.id));return Object.keys(y).forEach(E=>{_.has(E)||(URL.revokeObjectURL(y[E]),delete y[E])}),v},[n]);z.useEffect(()=>()=>{Object.values(m.current).forEach(y=>URL.revokeObjectURL(y)),m.current={}},[]);const g=y=>{y.key==="Enter"&&!y.shiftKey&&!y.nativeEvent.isComposing&&(y.preventDefault(),!s&&!o&&(t.trim()||n.length>0)&&i())};z.useEffect(()=>{if(f.current){f.current.style.height="auto";const y=f.current.scrollHeight;y>P0?(f.current.style.height=`${P0}px`,f.current.style.overflowY="auto"):(f.current.style.height=`${y}px`,f.current.style.overflowY="hidden")}},[t]);const C=!s&&(!!t.trim()||n.length>0);return S.jsxs("div",{className:"bg-[var(--surface-2)] p-2 rounded-2xl shadow-2xl border border-[var(--line)] flex flex-col gap-2",children:[w.length>0&&S.jsx("div",{className:"flex flex-wrap gap-2 px-2 pt-1",children:w.map(y=>S.jsxs("div",{className:"relative group flex-shrink-0",children:[S.jsx("img",{src:y.url,alt:"Image preview",className:"w-20 h-20 rounded-lg object-cover border border-[var(--line)]"}),S.jsx("button",{onClick:()=>h(y.id),disabled:s||o,className:"absolute top-1 right-1 p-0.5 bg-black/60 text-[var(--text)] rounded-full hover:bg-[var(--danger)] focus:outline-none focus:ring-2 focus:ring-[var(--danger)] disabled:opacity-50","aria-label":"Remove image",children:S.jsx(Zs,{className:"w-5 h-5","aria-hidden":"true"})})]},y.id))}),S.jsxs("div",{className:"flex items-end gap-2",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsxs("button",{type:"button",onClick:p,disabled:s||o||n.length>=yi,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:n.length>=yi?`Maximum ${yi} images reached`:`Add image (${n.length}/${yi})`,children:[S.jsx(nm,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Add Image"})]}),S.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:d,className:"hidden","aria-hidden":"true"}),S.jsxs("button",{type:"button",disabled:!0,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-full transition-colors disabled:opacity-50",title:"Use microphone (coming soon)",children:[S.jsx(c4,{className:"w-5 h-5","aria-hidden":"true"}),S.jsx("span",{className:"sr-only",children:"Use microphone"})]})]}),S.jsx("textarea",{ref:f,value:t,onChange:y=>e(y.target.value),onKeyDown:g,placeholder:"Ask me anything, or add up to 5 images...",className:"w-full flex-grow bg-transparent text-[var(--text)] placeholder-[var(--text-muted)] text-base resize-none focus:outline-none p-2 min-h-[44px]",rows:1,disabled:s||o}),S.jsx("button",{type:"button",onClick:i,disabled:!C||o,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold rounded-lg shadow-md transition-all duration-300 bg-[var(--accent)] text-[#0D1411] hover:brightness-110 disabled:bg-[var(--surface-1)] disabled:text-[var(--text-muted)] disabled:cursor-not-allowed",title:"Run Orchestration",children:o?S.jsxs(S.Fragment,{children:[S.jsx(jp,{className:"w-5 h-5 animate-spin","aria-hidden":"true"}),"Processing..."]}):S.jsxs(S.Fragment,{children:[S.jsx(Vu,{className:"w-5 h-5","aria-hidden":"true"}),"Run"]})})]})]})},E4=({answer:t,title:e="Arbiter's Final Answer",isStreaming:n=!1,className:r,...i})=>{const[o,s]=z.useState(""),a=z.useRef(null);z.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),z.useEffect(()=>{if(!n){a.current&&clearInterval(a.current),a.current=null,s(t);return}if(t===""&&o!==""){a.current&&clearInterval(a.current),a.current=null,s("");return}a.current||(a.current=window.setInterval(()=>{s(d=>{if(d.length<t.length){const h=t.substring(d.length,d.length+1);return d+h}else return a.current&&clearInterval(a.current),a.current=null,d})},15))},[t,n]);const c=o||n,f=n&&(!a.current||o.length===t.length);return S.jsx("div",{className:`final-answer-glow rounded-xl shadow-2xl ${r}`,...i,children:S.jsxs("div",{className:"bg-[var(--surface-2)] p-0 rounded-xl flex flex-col w-full min-h-[200px]",children:[S.jsx("div",{className:"p-4 border-b border-[var(--line)] flex items-center justify-between gap-3 flex-shrink-0",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(Vu,{className:"w-6 h-6 text-[var(--accent)]","aria-hidden":"true"}),S.jsx("h2",{className:"text-xl font-bold text-[var(--text)]",children:e})]})}),S.jsx("div",{className:"p-4 flex-grow min-h-0 overflow-y-auto max-h-[70vh]",children:c?S.jsxs("p",{className:"text-[var(--text)] whitespace-pre-wrap font-serif leading-relaxed",children:[o,f&&S.jsx("span",{className:"inline-block w-2 h-5 bg-[var(--accent)] animate-pulse ml-1"})]}):S.jsx("div",{className:"flex items-center justify-center h-full",children:S.jsx("p",{className:"text-[var(--text-muted)] italic",children:"Waiting for arbiter's response..."})})})]})})},A4=t=>{const e=new Date,n=new Date(t),r=Math.floor((e.getTime()-n.getTime())/1e3);if(r<60)return"Just now";const i=Math.floor(r/60);if(i<60)return`${i}m ago`;const o=Math.floor(i/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`},I0=({status:t})=>{switch(t){case"IN_PROGRESS":return S.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[var(--accent-2)] animate-pulse",title:"In Progress",children:S.jsx("span",{className:"sr-only",children:"In Progress"})});case"COMPLETED":return S.jsx("div",{title:"Completed",children:S.jsx(em,{className:"w-4 h-4 text-[var(--success)]","aria-hidden":"true"})});case"FAILED":return S.jsx("div",{title:"Failed",children:S.jsx(Zs,{className:"w-4 h-4 text-[var(--danger)]","aria-hidden":"true"})});default:return null}},k0=z.forwardRef(({history:t,selectedRunId:e,onSelectRun:n,onNewRun:r,onViewCurrentRun:i,currentRunStatus:o,className:s,isMobile:a},c)=>{const[f,d]=z.useState(!0);return S.jsxs("aside",{className:`bg-[var(--surface-2)] border-r border-[var(--line)] flex flex-col transition-all duration-300 ease-in-out ${f?"w-64":"w-16"} ${s??""}`,children:[S.jsxs("div",{className:"flex-shrink-0 p-2 flex items-center justify-between border-b border-[var(--line)]",children:[f&&S.jsx("h2",{className:"text-lg font-semibold ml-2",children:"History"}),S.jsx("button",{onClick:()=>d(!f),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-lg transition-colors",title:f?"Collapse Sidebar":"Expand Sidebar",children:f?S.jsx(zS,{className:"w-6 h-6","aria-hidden":"true"}):S.jsx(a4,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsx("div",{className:"flex-shrink-0 p-2",children:S.jsxs("button",{ref:c,id:a?"mobile-history-new-run":void 0,onClick:r,className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-semibold rounded-lg transition-colors ${e?"bg-[var(--surface-1)] hover:bg-[var(--surface-active)] text-[var(--text)]":"bg-[var(--accent)] text-[#0D1411] hover:brightness-110"}`,children:[S.jsx(nm,{className:"w-5 h-5","aria-hidden":"true"}),f&&S.jsx("span",{children:"New Run"})]})}),S.jsx("nav",{className:"flex-grow p-2 overflow-y-auto",children:S.jsxs("ul",{className:"space-y-1",children:[o!=="IDLE"&&S.jsx("li",{children:S.jsxs("button",{onClick:i,className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${e?"hover:bg-[var(--surface-active)]":"bg-[var(--surface-1)]"}`,title:"View current run","aria-current":e?void 0:"page",children:[S.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center",children:S.jsx(I0,{status:o})}),f&&S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"text-sm font-medium text-[var(--text)] truncate",children:"Current Run"}),S.jsx("p",{className:"text-xs text-[var(--text-muted)] capitalize",children:o.replace("_"," ").toLowerCase()})]})]})}),t.length===0&&o==="IDLE"?S.jsx("li",{className:"text-center py-4 text-sm text-[var(--text-muted)]",children:"No past runs yet. Submit a prompt to create one."}):t.map(h=>S.jsx("li",{children:S.jsxs("button",{onClick:()=>n(h.id),className:`w-full text-left flex items-center gap-3 p-2 rounded-md transition-colors ${e===h.id?"bg-[var(--surface-1)]":"hover:bg-[var(--surface-active)]"}`,children:[S.jsx("div",{className:"flex-shrink-0 w-4 h-4 flex items-center justify-center mt-0.5",children:S.jsx(I0,{status:h.status})}),f&&S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"text-sm font-medium text-[var(--text)] truncate",children:h.prompt||"Image-based prompt"}),S.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:A4(h.timestamp)})]})]})},h.id))]})})]})}),Vc=({options:t,value:e,onChange:n,disabled:r=!1,"aria-label":i})=>S.jsx("div",{role:"tablist","aria-label":i,className:`flex w-full p-1 bg-[var(--surface-1)] border border-[var(--line)] rounded-lg ${r?"opacity-70 cursor-not-allowed":""}`,children:t.map((o,s)=>S.jsxs("button",{onClick:()=>!r&&n(o.value),type:"button",role:"tab","aria-selected":e===o.value,disabled:r,"aria-disabled":r,title:o.tooltip,className:`relative flex-1 px-3 py-1.5 text-sm font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-1)] z-10
            ${s===0?"rounded-l-md":""}
            ${s===t.length-1?"rounded-r-md":""}
            ${e===o.value?"text-[#0D1411]":"text-[var(--text)] hover:bg-[var(--surface-active)]"}
            ${r?"cursor-not-allowed":""}
          `,children:[e===o.value&&S.jsx("span",{className:"absolute inset-0 bg-[var(--accent)] rounded-md -z-10 motion-safe:transition-transform"}),S.jsx("span",{className:"relative",children:o.label})]},o.value))}),P4=()=>{const t=z.useRef(typeof window<"u"?window.innerHeight*.01:0);return z.useEffect(()=>{const e=()=>{const i=window.visualViewport,s=(i?i.height:window.innerHeight)*.01;if(document.documentElement.style.setProperty("--vh",`${s}px`),i){const a=window.innerHeight-i.height-i.offsetTop;document.documentElement.style.setProperty("--keyboard-height",`${a}px`)}t.current=s};let n;const r=()=>{clearTimeout(n),n=setTimeout(e,100)};return e(),window.addEventListener("resize",r),window.visualViewport?.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),window.visualViewport?.removeEventListener("resize",r),clearTimeout(n)}},[]),t},I4=(t,e,n=!0)=>{const r=z.useRef(e);z.useEffect(()=>{r.current=e},[e]),z.useEffect(()=>{if(!n)return;const i=o=>{o.key===t&&r.current(o)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[t,n])};var rm={exports:{}};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var WS=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Yl=WS.join(","),qS=typeof Element>"u",ri=qS?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xl=!qS&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Zl=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),o=i===""||i==="true",s=o||n&&e&&t(e.parentNode);return s},k4=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},JS=function(e,n,r){if(Zl(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Yl));return n&&ri.call(e,Yl)&&i.unshift(e),i=i.filter(r),i},KS=function t(e,n,r){for(var i=[],o=Array.from(e);o.length;){var s=o.shift();if(!Zl(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,f=t(c,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:s,candidates:f})}else{var d=ri.call(s,Yl);d&&r.filter(s)&&(n||!e.includes(s))&&i.push(s);var h=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!Zl(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(h&&p){var m=t(h===!0?s.children:h.children,!0,r);r.flatten?i.push.apply(i,m):i.push({scopeParent:s,candidates:m})}else o.unshift.apply(o,s.children)}}return i},YS=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ar=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||k4(e))&&!YS(e)?0:e.tabIndex},R4=function(e,n){var r=ar(e);return r<0&&n&&!YS(e)?0:r},M4=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},XS=function(e){return e.tagName==="INPUT"},b4=function(e){return XS(e)&&e.type==="hidden"},N4=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},D4=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},F4=function(e){if(!e.name)return!0;var n=e.form||Xl(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=D4(i,e.form);return!o||o===e},L4=function(e){return XS(e)&&e.type==="radio"},V4=function(e){return L4(e)&&!F4(e)},U4=function(e){var n,r=e&&Xl(e),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==e){var s,a,c;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&i;){var f,d,h;r=Xl(i),i=(f=r)===null||f===void 0?void 0:f.host,o=!!((d=i)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return o},R0=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},B4=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=ri.call(e,"details>summary:first-of-type"),s=o?e.parentElement:e;if(ri.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var c=e.parentElement,f=Xl(e);if(c&&!c.shadowRoot&&i(c)===!0)return R0(e);e.assignedSlot?e=e.assignedSlot:!c&&f!==e.ownerDocument?e=f.host:e=c}e=a}if(U4(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return R0(e);return!1},O4=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ri.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Ql=function(e,n){return!(n.disabled||Zl(n)||b4(n)||B4(n,e)||N4(n)||O4(n))},Id=function(e,n){return!(V4(n)||ar(n)<0||!Ql(e,n))},$4=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},z4=function t(e){var n=[],r=[];return e.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,c=R4(a,s),f=s?t(i.candidates):a;c===0?s?n.push.apply(n,f):n.push(a):r.push({documentOrder:o,tabIndex:c,item:i,isScope:s,content:f})}),r.sort(M4).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},ZS=function(e,n){n=n||{};var r;return n.getShadowRoot?r=KS([e],n.includeContainer,{filter:Id.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:$4}):r=JS(e,n.includeContainer,Id.bind(null,n)),z4(r)},QS=function(e,n){n=n||{};var r;return n.getShadowRoot?r=KS([e],n.includeContainer,{filter:Ql.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=JS(e,n.includeContainer,Ql.bind(null,n)),r},Or=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ri.call(e,Yl)===!1?!1:Id(n,e)},G4=WS.concat("iframe").join(","),ll=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ri.call(e,G4)===!1?!1:Ql(n,e)};const H4=Object.freeze(Object.defineProperty({__proto__:null,focusable:QS,getTabIndex:ar,isFocusable:ll,isTabbable:Or,tabbable:ZS},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function kd(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function W4(t){if(Array.isArray(t))return kd(t)}function q4(t,e,n){return(e=Z4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function K4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M0(Object(n),!0).forEach(function(r){q4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y4(t){return W4(t)||J4(t)||Q4(t)||K4()}function X4(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z4(t){var e=X4(t,"string");return typeof e=="symbol"?e:e+""}function Q4(t,e){if(t){if(typeof t=="string")return kd(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kd(t,e):void 0}}var N0={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r._setPausedState(!0)}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},j4=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},eB=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},us=function(e){return e?.key==="Tab"||e?.keyCode===9},tB=function(e){return us(e)&&!e.shiftKey},nB=function(e){return us(e)&&e.shiftKey},D0=function(e){return setTimeout(e,0)},Ro=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},La=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},rB=[],iB=function(e,n){var r=n?.document||document,i=n?.trapStack||rB,o=b0({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:tB,isKeyBackward:nB},n),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(b,x,U){return b&&b[x]!==void 0?b[x]:o[U||x]},f=function(b,x){var U=typeof x?.composedPath=="function"?x.composedPath():void 0;return s.containerGroups.findIndex(function(Q){var G=Q.container,H=Q.tabbableNodes;return G.contains(b)||U?.includes(G)||H.find(function(B){return B===b})})},d=function(b){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=x.hasFallback,Q=U===void 0?!1:U,G=x.params,H=G===void 0?[]:G,B=o[b];if(typeof B=="function"&&(B=B.apply(void 0,Y4(H))),B===!0&&(B=void 0),!B){if(B===void 0||B===!1)return B;throw new Error("`".concat(b,"` was specified but was not a node, or did not return a node"))}var K=B;if(typeof B=="string"){try{K=r.querySelector(B)}catch(V){throw new Error("`".concat(b,'` appears to be an invalid selector; error="').concat(V.message,'"'))}if(!K&&!Q)throw new Error("`".concat(b,"` as selector refers to no known node"))}return K},h=function(){var b=d("initialFocus",{hasFallback:!0});if(b===!1)return!1;if(b===void 0||b&&!ll(b,o.tabbableOptions))if(f(r.activeElement)>=0)b=r.activeElement;else{var x=s.tabbableGroups[0],U=x&&x.firstTabbableNode;b=U||d("fallbackFocus")}else b===null&&(b=d("fallbackFocus"));if(!b)throw new Error("Your focus-trap needs to have at least one focusable element");return b},p=function(){if(s.containerGroups=s.containers.map(function(b){var x=ZS(b,o.tabbableOptions),U=QS(b,o.tabbableOptions),Q=x.length>0?x[0]:void 0,G=x.length>0?x[x.length-1]:void 0,H=U.find(function(V){return Or(V)}),B=U.slice().reverse().find(function(V){return Or(V)}),K=!!x.find(function(V){return ar(V)>0});return{container:b,tabbableNodes:x,focusableNodes:U,posTabIndexesFound:K,firstTabbableNode:Q,lastTabbableNode:G,firstDomTabbableNode:H,lastDomTabbableNode:B,nextTabbableNode:function(O){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=x.indexOf(O);return ne<0?oe?U.slice(U.indexOf(O)+1).find(function(j){return Or(j)}):U.slice(0,U.indexOf(O)).reverse().find(function(j){return Or(j)}):x[ne+(oe?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(b){return b.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(b){return b.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},m=function(b){var x=b.activeElement;if(x)return x.shadowRoot&&x.shadowRoot.activeElement!==null?m(x.shadowRoot):x},w=function(b){if(b!==!1&&b!==m(document)){if(!b||!b.focus){w(h());return}b.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=b,j4(b)&&b.select()}},g=function(b){var x=d("setReturnFocus",{params:[b]});return x||(x===!1?!1:b)},C=function(b){var x=b.target,U=b.event,Q=b.isBackward,G=Q===void 0?!1:Q;x=x||La(U),p();var H=null;if(s.tabbableGroups.length>0){var B=f(x,U),K=B>=0?s.containerGroups[B]:void 0;if(B<0)G?H=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:H=s.tabbableGroups[0].firstTabbableNode;else if(G){var V=s.tabbableGroups.findIndex(function(Pe){var he=Pe.firstTabbableNode;return x===he});if(V<0&&(K.container===x||ll(x,o.tabbableOptions)&&!Or(x,o.tabbableOptions)&&!K.nextTabbableNode(x,!1))&&(V=B),V>=0){var O=V===0?s.tabbableGroups.length-1:V-1,oe=s.tabbableGroups[O];H=ar(x)>=0?oe.lastTabbableNode:oe.lastDomTabbableNode}else us(U)||(H=K.nextTabbableNode(x,!1))}else{var ne=s.tabbableGroups.findIndex(function(Pe){var he=Pe.lastTabbableNode;return x===he});if(ne<0&&(K.container===x||ll(x,o.tabbableOptions)&&!Or(x,o.tabbableOptions)&&!K.nextTabbableNode(x))&&(ne=B),ne>=0){var j=ne===s.tabbableGroups.length-1?0:ne+1,ve=s.tabbableGroups[j];H=ar(x)>=0?ve.firstTabbableNode:ve.firstDomTabbableNode}else us(U)||(H=K.nextTabbableNode(x))}}else H=d("fallbackFocus");return H},y=function(b){var x=La(b);if(!(f(x,b)>=0)){if(Ro(o.clickOutsideDeactivates,b)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}Ro(o.allowOutsideClick,b)||b.preventDefault()}},v=function(b){var x=La(b),U=f(x,b)>=0;if(U||x instanceof Document)U&&(s.mostRecentlyFocusedNode=x);else{b.stopImmediatePropagation();var Q,G=!0;if(s.mostRecentlyFocusedNode)if(ar(s.mostRecentlyFocusedNode)>0){var H=f(s.mostRecentlyFocusedNode),B=s.containerGroups[H].tabbableNodes;if(B.length>0){var K=B.findIndex(function(V){return V===s.mostRecentlyFocusedNode});K>=0&&(o.isKeyForward(s.recentNavEvent)?K+1<B.length&&(Q=B[K+1],G=!1):K-1>=0&&(Q=B[K-1],G=!1))}}else s.containerGroups.some(function(V){return V.tabbableNodes.some(function(O){return ar(O)>0})})||(G=!1);else G=!1;G&&(Q=C({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),w(Q||s.mostRecentlyFocusedNode||h())}s.recentNavEvent=void 0},_=function(b){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=b;var U=C({event:b,isBackward:x});U&&(us(b)&&b.preventDefault(),w(U))},E=function(b){(o.isKeyForward(b)||o.isKeyBackward(b))&&_(b,o.isKeyBackward(b))},A=function(b){eB(b)&&Ro(o.escapeDeactivates,b)!==!1&&(b.preventDefault(),a.deactivate())},k=function(b){var x=La(b);f(x,b)>=0||Ro(o.clickOutsideDeactivates,b)||Ro(o.allowOutsideClick,b)||(b.preventDefault(),b.stopImmediatePropagation())},R=function(){if(s.active)return N0.activateTrap(i,a),s.delayInitialFocusTimer=o.delayInitialFocus?D0(function(){w(h())}):w(h()),r.addEventListener("focusin",v,!0),r.addEventListener("mousedown",y,{capture:!0,passive:!1}),r.addEventListener("touchstart",y,{capture:!0,passive:!1}),r.addEventListener("click",k,{capture:!0,passive:!1}),r.addEventListener("keydown",E,{capture:!0,passive:!1}),r.addEventListener("keydown",A),a},N=function(){if(s.active)return r.removeEventListener("focusin",v,!0),r.removeEventListener("mousedown",y,!0),r.removeEventListener("touchstart",y,!0),r.removeEventListener("click",k,!0),r.removeEventListener("keydown",E,!0),r.removeEventListener("keydown",A),a},D=function(b){var x=b.some(function(U){var Q=Array.from(U.removedNodes);return Q.some(function(G){return G===s.mostRecentlyFocusedNode})});x&&w(h())},F=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(D):void 0,q=function(){F&&(F.disconnect(),s.active&&!s.paused&&s.containers.map(function(b){F.observe(b,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(b){if(s.active)return this;var x=c(b,"onActivate"),U=c(b,"onPostActivate"),Q=c(b,"checkCanFocusTrap");Q||p(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=m(r),x?.();var G=function(){Q&&p(),R(),q(),U?.()};return Q?(Q(s.containers.concat()).then(G,G),this):(G(),this)},deactivate:function(b){if(!s.active)return this;var x=b0({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},b);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,N(),s.active=!1,s.paused=!1,q(),N0.deactivateTrap(i,a);var U=c(x,"onDeactivate"),Q=c(x,"onPostDeactivate"),G=c(x,"checkCanReturnFocus"),H=c(x,"returnFocus","returnFocusOnDeactivate");U?.();var B=function(){D0(function(){H&&w(g(s.nodeFocusedBeforeActivation)),Q?.()})};return H&&G?(G(g(s.nodeFocusedBeforeActivation)).then(B,B),this):(B(),this)},pause:function(b){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,b)):this},unpause:function(b){return s.active?(s.manuallyPaused=!1,i[i.length-1]!==this?this:this._setPausedState(!1,b)):this},updateContainerElements:function(b){var x=[].concat(b).filter(Boolean);return s.containers=x.map(function(U){return typeof U=="string"?r.querySelector(U):U}),s.active&&p(),q(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(b,x){if(s.paused===b)return this;if(s.paused=b,b){var U=c(x,"onPause"),Q=c(x,"onPostPause");U?.(),N(),q(),Q?.()}else{var G=c(x,"onUnpause"),H=c(x,"onPostUnpause");G?.(),p(),R(),q(),H?.()}return this}}}),a.updateContainerElements(e),a};const oB=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:iB},Symbol.toStringTag,{value:"Module"})),sB=O0(oB),aB=O0(H4);function so(t){"@babel/helpers - typeof";return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(t)}var Uc,Bc;function lB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eE(r.key),r)}}function cB(t,e,n){return e&&uB(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fB(t,e,n){return e=jl(e),dB(t,jS()?Reflect.construct(e,n||[],jl(t).constructor):e.apply(t,n))}function dB(t,e){if(e&&(so(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hB(t)}function hB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jS=function(){return!!t})()}function jl(t){return jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jl(t)}function pB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rd(t,e)}function Rd(t,e){return Rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Rd(t,e)}function mB(t,e,n){return(e=eE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eE(t){var e=gB(t,"string");return so(e)=="symbol"?e:e+""}function gB(t,e){if(so(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(so(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qo=z,yB=sB,vB=yB.createFocusTrap,wB=aB,_B=wB.isFocusable,CB=parseInt((Uc=(Bc=/^(\d+)\./.exec(qo.version))===null||Bc===void 0?void 0:Bc[1])!==null&&Uc!==void 0?Uc:0,10),im=function(t){function e(n){var r;lB(this,e),r=fB(this,e,[n]),mB(r,"getNodeForOption",function(s){var a,c=(a=this.internalOptions[s])!==null&&a!==void 0?a:this.originalOptions[s];if(typeof c=="function"){for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];c=c.apply(void 0,d)}if(c===!0&&(c=void 0),!c){if(c===void 0||c===!1)return c;throw new Error("`".concat(s,"` was specified but was not a node, or did not return a node"))}var p=c;if(typeof c=="string"){var m;if(p=(m=this.getDocument())===null||m===void 0?void 0:m.querySelector(c),!p)throw new Error("`".concat(s,"` as selector refers to no known node"))}return p}),r.handleDeactivate=r.handleDeactivate.bind(r),r.handlePostDeactivate=r.handlePostDeactivate.bind(r),r.handleClickOutsideDeactivates=r.handleClickOutsideDeactivates.bind(r),r.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:r.handleDeactivate,onPostDeactivate:r.handlePostDeactivate,clickOutsideDeactivates:r.handleClickOutsideDeactivates},r.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var i=n.focusTrapOptions;for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){if(o==="returnFocusOnDeactivate"||o==="onDeactivate"||o==="onPostDeactivate"||o==="checkCanReturnFocus"||o==="clickOutsideDeactivates"){r.originalOptions[o]=i[o];continue}r.internalOptions[o]=i[o]}return r.outsideClick=null,r.focusTrapElements=n.containerElements||[],r.updatePreviousElement(),r}return pB(e,t),cB(e,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var r=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return r||(r===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var r=this.getDocument();r&&(this.previouslyFocusedElement=r.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(r){var i=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,r):this.originalOptions.clickOutsideDeactivates;return i&&(this.outsideClick={target:r.target,allowDeactivation:i}),i}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var r=this,i=function(){var s=r.getReturnFocusNode(),a=!!(r.originalOptions.returnFocusOnDeactivate&&s!==null&&s!==void 0&&s.focus&&(!r.outsideClick||r.outsideClick.allowDeactivation&&!_B(r.outsideClick.target,r.internalOptions.tabbableOptions))),c=r.internalOptions.preventScroll,f=c===void 0?!1:c;a&&s.focus({preventScroll:f}),r.originalOptions.onPostDeactivate&&r.originalOptions.onPostDeactivate.call(null),r.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(i,i):i()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var r=this.focusTrapElements.some(Boolean);r&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(r){if(this.focusTrap){r.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var i=!r.active&&this.props.active,o=r.active&&!this.props.active,s=!r.paused&&this.props.paused,a=r.paused&&!this.props.paused;if(i&&(this.updatePreviousElement(),this.focusTrap.activate()),o){this.deactivateTrap();return}s&&this.focusTrap.pause(),a&&this.focusTrap.unpause()}else r.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var r=this,i=this.props.children?qo.Children.only(this.props.children):void 0;if(i){if(i.type&&i.type===qo.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var o=function(c){var f=r.props.containerElements;i&&(CB>=19?typeof i.props.ref=="function"?i.props.ref(c):i.props.ref&&(i.props.ref.current=c):typeof i.ref=="function"?i.ref(c):i.ref&&(i.ref.current=c)),r.focusTrapElements=f||[c]},s=qo.cloneElement(i,{ref:o});return s}return null}}])}(qo.Component);im.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:vB};rm.exports=im;rm.exports.FocusTrap=im;var xB=rm.exports;const TB=Md(xB),F0="openai_api_key",L0="gemini_api_key",V0="openrouter_api_key",SB=20,U0={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},Va={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:12}}},EB=({message:t,type:e,onClose:n})=>{z.useEffect(()=>{const i=setTimeout(n,5e3);return()=>clearTimeout(i)},[n]);const r=e==="success"?"bg-[var(--success)] border-[var(--success)] text-[var(--text)]":"bg-[var(--danger)] border-[var(--danger)] text-[var(--text)]";return S.jsxs("div",{className:`fixed bottom-5 right-5 p-4 rounded-lg shadow-2xl border z-50 animate-fade-in-up flex items-center gap-4 ${r}`,style:{animationDuration:"0.3s"},children:[S.jsx("span",{children:t}),S.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-[var(--surface-active)]","aria-label":"Close notification",children:S.jsx(tm,{className:"w-5 h-5","aria-hidden":"true"})})]})},B0=()=>{const t=sp.slice(0,4);if(t.length<4)return[];const e=[];return e.push({id:crypto.randomUUID(),expert:t[0],model:Nn,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[1],model:Nn,provider:"gemini",status:"PENDING",settings:{effort:"dynamic",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e.push({id:crypto.randomUUID(),expert:t[2],model:Rx,provider:"openrouter",status:"PENDING",settings:{temperature:.7,topP:1,topK:50,frequencyPenalty:0,presencePenalty:0,repetitionPenalty:1}}),e.push({id:crypto.randomUUID(),expert:t[3],model:kx,provider:"openai",status:"PENDING",settings:{effort:"medium",verbosity:"medium",generationStrategy:"single",confidenceSource:"judge",traceCount:8,deepConfEta:90,tau:.95,groupWindow:2048}}),e},AB=t=>({id:t.agentId,name:t.expert.name,persona:t.expert.persona,status:t.status,content:t.content,error:t.error||null,model:t.expert.model,provider:t.expert.provider}),PB=()=>{P4();const[t,e]=z.useState(""),[n,r]=z.useState([]),[i,o]=z.useState(B0()),[s,a]=z.useState(sn),[c,f]=z.useState("medium"),[d,h]=z.useState("dynamic"),[p,m]=z.useState([]),[w,g]=z.useState(""),[C,y]=z.useState(null),[v,_]=z.useState(!1),[E,A]=z.useState(null),[k,R]=z.useState(!1),[N,D]=z.useState([]),[F,q]=z.useState(null),[I,b]=z.useState(""),[x,U]=z.useState(""),[Q,G]=z.useState(""),[H,B]=z.useState(!1),[K,V]=z.useState([]),[O,oe]=z.useState(null),[ne,j]=z.useState(!1),ve=z.useRef(null),Pe=z.useRef(null),he=z.useCallback(()=>{j(!1),ve.current?.focus()},[]);I4("Escape",he,ne);const _e=z.useRef(null),Ye=z.useRef(null),[Be,Lt]=z.useState({}),kt=z.useRef(w),T=z.useRef(p),J=z.useRef(C),W=z.useRef(E),M=z.useRef(null),P=z.useRef(!1),L=z.useRef(void 0);z.useEffect(()=>{kt.current=w},[w]),z.useEffect(()=>{T.current=p},[p]),z.useEffect(()=>{J.current=C},[C]),z.useEffect(()=>{W.current=E},[E]),z.useEffect(()=>{if(!v&&P.current){P.current=!1;const ie=W.current?"FAILED":"COMPLETED";if(L.current){const pe={id:`${Date.now()}`,timestamp:Date.now(),...L.current,finalAnswer:kt.current,agents:T.current,status:ie,arbiterSwitchWarning:J.current};D(Te=>[pe,...Te]),L.current=void 0}}},[v]),z.useEffect(()=>{const ie=localStorage.getItem(F0);ie&&(b(ie),_0(ie));const pe=localStorage.getItem(L0);pe&&(U(pe),w0(pe));const Te=localStorage.getItem(V0);Te&&(G(Te),C0(Te))},[]);const Y=z.useCallback(ie=>{b(ie),_0(ie),localStorage.setItem(F0,ie)},[]),X=z.useCallback(ie=>{U(ie),w0(ie),localStorage.setItem(L0,ie)},[]),$=z.useCallback(ie=>{G(ie),C0(ie),localStorage.setItem(V0,ie)},[]),ee=z.useMemo(()=>i.filter(ie=>ie.provider==="openai").length,[i]),re=z.useMemo(()=>i.filter(ie=>ie.provider==="openrouter").length,[i]),te=z.useCallback(async()=>{F&&q(null);const ie=t.trim()||(n.length>0?`Analyze these ${n.length} image(s) and provide a detailed description.`:"");if(!(!ie||v||i.length===0)){if(ie&&!K.includes(ie)&&V(pe=>[ie,...pe].slice(0,SB)),ee>0&&!I){A("Please set your OpenAI API key in the settings to use OpenAI models."),B(!0);return}if(re>0&&!Q){A("Please set your OpenRouter API key in the settings to use OpenRouter models."),B(!0);return}_(!0),A(null),g(""),R(!1),m([]),y(null),P.current=!1,L.current={prompt:ie,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d};try{const pe=at=>{const lt=at.map(ut=>({id:ut.agentId,name:ut.name,persona:ut.persona,status:"RUNNING",content:"",error:null,model:ut.model,provider:ut.provider}));m(lt),o(ut=>ut.map(Zn=>({...Zn,status:"RUNNING"})))},Te=at=>{m(lt=>{const ut=lt.findIndex(Zn=>Zn.id===at.agentId);if(ut>-1){const Zn=AB(at);return lt.map((nE,rE)=>rE===ut?Zn:nE)}return lt}),o(lt=>lt.map(ut=>ut.id===at.agentId?{...ut,status:at.status}:ut))},{stream:Re,switchedArbiter:Se}=await e4({prompt:ie,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d},{onInitialAgents:pe,onDraftComplete:Te});Se&&y("The selected GPT-5 arbiter was automatically switched to Gemini 2.5 Pro due to a large input size to prevent errors. Gemini models support larger context windows."),R(!0);let Me="",we="";const be=()=>{we&&(Me+=we,g(Me),we=""),M.current=requestAnimationFrame(be)};M.current=requestAnimationFrame(be);for await(const at of Re)we+=at.text;M.current&&cancelAnimationFrame(M.current),we&&(Me+=we,g(Me))}catch(pe){console.error(pe);const Te=pe instanceof Error?pe.message:"An unexpected error occurred.";A(Te),m(Re=>Re.map(Se=>({...Se,status:"FAILED",error:Te}))),o(Re=>Re.map(Se=>({...Se,status:"FAILED"})))}finally{_(!1),R(!1),P.current=!0}}},[t,n,v,i,s,c,d,ee,I,re,Q,K,F]),ue=z.useCallback(()=>{e(""),r([]),o(B0()),a(sn),f("medium"),h("dynamic"),m([]),g(""),_(!1),A(null),R(!1),y(null)},[]),xe=z.useCallback(()=>{q(null),ue()},[ue]),ge=z.useCallback(()=>{q(null)},[]),gt=z.useCallback(ie=>{N.find(Te=>Te.id===ie)&&q(ie)},[N]),kr=z.useCallback(ie=>{gt(ie),he()},[gt,he]),Xt=z.useCallback(()=>{xe(),he()},[xe,he]),Rr=z.useCallback(()=>{ge(),he()},[ge,he]),Oe=z.useCallback(ie=>{o(pe=>{const Te=pe.find(we=>we.id===ie);if(!Te)return pe;const Re={...Te,id:crypto.randomUUID(),status:"PENDING"},Se=pe.findIndex(we=>we.id===ie),Me=[...pe];return Me.splice(Se+1,0,Re),Me})},[]),Mr=z.useRef(te),ui=z.useRef(!1);z.useEffect(()=>{Mr.current=te},[te]),z.useEffect(()=>{const ie=pe=>{if(pe.isComposing||pe.repeat)return;const Te=pe.target,Re=Te.tagName,Se=Re==="INPUT"||Re==="TEXTAREA"||Te.isContentEditable,Me=pe.key.toLowerCase(),we=!(pe.metaKey||pe.ctrlKey||pe.altKey);if((pe.metaKey||pe.ctrlKey)&&Me==="enter"){pe.preventDefault(),Mr.current();return}if(we&&!Se&&!ui.current)switch(Me){case"a":pe.preventDefault(),Ye.current?.openModal();break;case"/":pe.preventDefault(),_e.current?.focus();break;default:if(Me>="1"&&Me<="9"){const at=parseInt(Me,10)-1,lt=T.current[at];if(!lt||!(lt.status==="COMPLETED"||lt.status==="FAILED"))return;Lt(Zn=>({...Zn,[lt.id]:!Zn[lt.id]}))}}};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[]);const Vt=z.useMemo(()=>{if(!v)return{total:0,agentPercent:0,phase:"idle"};const ie=.5,pe=.5,Te=i.filter(be=>be.status==="COMPLETED"||be.status==="FAILED").length,Re=i.length>0?Te/i.length:0;let Se=k?.5:0;!v&&w&&(Se=1);const Me=(Re*ie+Se*pe)*100,we=k?"arbitrating":"drafting";return{total:Math.min(Me,100),agentPercent:Re*100,phase:we}},[i,v,k,w]),Qs=ie=>ie.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").slice(0,50)||"orchestration-results",Ut=z.useMemo(()=>N.find(ie=>ie.id===F),[N,F]),ke=z.useMemo(()=>Ut?{prompt:Ut.prompt,images:Ut.images,agentConfigs:Ut.agentConfigs,arbiterModel:Ut.arbiterModel,openAIArbiterVerbosity:Ut.openAIArbiterVerbosity,geminiArbiterEffort:Ut.geminiArbiterEffort,finalAnswer:Ut.finalAnswer,agents:Ut.agents,arbiterSwitchWarning:Ut.arbiterSwitchWarning,isHistoryView:!0}:{prompt:t,images:n,agentConfigs:i,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d,finalAnswer:w,agents:p,arbiterSwitchWarning:C,isHistoryView:!1},[Ut,t,n,i,s,c,d,w,p,C]);z.useEffect(()=>{ui.current=ke.isHistoryView},[ke.isHistoryView]);const Uu=async()=>{const ie=ke,pe=ie.agents.filter(be=>be.status==="COMPLETED");if(!ie.finalAnswer&&pe.length===0&&ie.images.length===0)return;const Te=new MA,Re=Qs(ie.prompt);if(ie.finalAnswer){const be=`# Prompt

${ie.prompt}

---

# Arbiter's Final Answer

${ie.finalAnswer}`;Te.file(`${Re}-final-answer.md`,be)}pe.forEach((be,at)=>{const lt=`# Prompt

${ie.prompt}

---

# Agent ${at+1} (${be.provider}, ${be.name})

${be.content}`,ut=`${Re}-agent-${at+1}-${be.name.toLowerCase().replace(/\s+/g,"-")}.md`;Te.file(ut,lt)}),ie.images.length>0&&ie.images.forEach(be=>{Te.file(be.file.name,be.file)});const Se=await Te.generateAsync({type:"blob"}),Me=URL.createObjectURL(Se),we=document.createElement("a");we.href=Me,we.download=`${Re}.zip`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(Me)},js=z.useCallback(()=>{try{const ie=i.map(be=>({expertId:be.expert.id,model:be.model,provider:be.provider,settings:be.settings})),Te=JSON.stringify({version:ky,prompt:t,agentConfigs:ie,arbiterModel:s,openAIArbiterVerbosity:c,geminiArbiterEffort:d,openAIApiKey:I,geminiApiKey:x,openRouterApiKey:Q,queryHistory:K},null,2),Re=new Blob([Te],{type:"application/json"}),Se=URL.createObjectURL(Re),Me=document.createElement("a");Me.href=Se;const we=new Date().toISOString().split("T")[0];Me.download=`orchestrator-session-${we}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(Se)}catch(ie){console.error("Failed to save session:",ie),oe({message:"An error occurred while trying to save the session.",type:"error"})}},[t,i,s,c,d,I,x,Q,K]),br=z.useCallback(ie=>{const pe=new FileReader;pe.onload=Te=>{try{const Re=Te.target?.result;if(!Re)throw new Error("File is empty or could not be read.");const Se=JSON.parse(Re);if(Se.version!==ky){oe({message:`This session file is from a different version (v${Se.version}) and cannot be loaded.`,type:"error"});return}if(!Array.isArray(Se.agentConfigs))throw new Error("Invalid session file format: agentConfigs is missing or not an array.");const Me=Se.agentConfigs.map(we=>{const be=sp.find(lt=>lt.id===we.expertId);if(!be)return console.warn(`Expert with ID "${we.expertId}" not found. Skipping.`),null;const at={id:crypto.randomUUID(),expert:be,model:we.model,provider:we.provider,status:"PENDING"};return we.provider==="gemini"?{...at,provider:"gemini",settings:we.settings}:we.provider==="openrouter"?{...at,provider:"openrouter",settings:we.settings}:{...at,provider:"openai",settings:we.settings}}).filter(we=>we!==null);xe(),e(Se.prompt??""),o(Me),a(Se.arbiterModel??sn),f(Se.openAIArbiterVerbosity??"medium"),h(Se.geminiArbiterEffort??"dynamic"),Y(Se.openAIApiKey??""),X(Se.geminiApiKey??""),$(Se.openRouterApiKey??""),V(Se.queryHistory??[]),B(!1),oe({message:"Session loaded successfully!",type:"success"})}catch(Re){console.error("Failed to load session:",Re);const Se=Re instanceof Error?Re.message:"An unknown error occurred.";oe({message:`Error loading session file: ${Se}`,type:"error"})}},pe.onerror=()=>{oe({message:"Failed to read the session file.",type:"error"})},pe.readAsText(ie)},[Y,X,$,xe]),ci=z.useCallback(ie=>{e(ie)},[]),ea=ke.agents.length>0||ke.finalAnswer,ta=v||k,om=z.useMemo(()=>ta?"IN_PROGRESS":F?"IDLE":E?"FAILED":ea?"COMPLETED":"IDLE",[ta,E,ea,F]);return S.jsxs("div",{className:"bg-[var(--bg)] text-[var(--text)] font-sans flex",style:{minHeight:"calc(var(--vh, 1vh) * 100)"},children:[S.jsx(k0,{history:N,selectedRunId:F,onSelectRun:gt,onNewRun:xe,onViewCurrentRun:ge,currentRunStatus:om,className:"hidden md:flex"}),S.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[O&&S.jsx(EB,{message:O.message,type:O.type,onClose:()=>oe(null)}),S.jsx(v4,{isOpen:H,onClose:()=>B(!1),onSaveOpenAIApiKey:Y,currentOpenAIApiKey:I,onSaveGeminiApiKey:X,currentGeminiApiKey:x,onSaveOpenRouterApiKey:$,currentOpenRouterApiKey:Q,onSaveSession:js,onLoadSession:br,queryHistory:K,onSelectQuery:ci}),S.jsx("div",{className:"flex-1 overflow-y-auto scrollable-area",children:S.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("header",{className:"text-center py-8 relative fixed-header",children:[S.jsx("div",{className:"absolute top-8 left-0 md:hidden",children:S.jsx("button",{ref:ve,onClick:()=>j(!0),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-active)] rounded-lg","aria-label":"Open history",children:S.jsx(r4,{className:"w-6 h-6","aria-hidden":"true"})})}),S.jsx("img",{src:"/HeavyOrc/assets/banner.svg",alt:"HeavyOrc banner",className:"mx-auto mb-4 w-full max-w-2xl"}),S.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-[var(--text)] flex items-center justify-center gap-3",children:[S.jsx(t4,{className:"w-10 h-10 text-emerald-400","aria-hidden":"true"}),"HeavyOrc"]}),S.jsxs("div",{className:"absolute top-8 right-0 flex items-center gap-2",children:[S.jsxs("button",{onClick:Uu,disabled:!ea||v,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-[var(--surface-1)] text-[var(--text)] font-semibold rounded-lg shadow-md hover:bg-[var(--surface-active)] disabled:bg-[var(--surface-2)] disabled:text-[var(--text-muted)] disabled:cursor-not-allowed transition-colors",title:"Save final answer and all drafts to a ZIP file",children:[S.jsx(BS,{className:"w-4 h-4","aria-hidden":"true"}),"Save"]}),S.jsx("button",{onClick:()=>B(!0),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors rounded-full hover:bg-[var(--surface-active)]",title:"Settings","aria-label":"Open Settings",children:S.jsx(o4,{className:"w-6 h-6","aria-hidden":"true"})})]}),S.jsx("p",{className:"mt-4 text-lg text-[var(--text-muted)] max-w-3xl mx-auto",children:"Directly configure a 'Mixture-of-Experts' ensemble. Parallel agents generate diverse drafts, and a final arbiter synthesizes the optimal response."})]}),S.jsxs("main",{className:"max-w-4xl mx-auto space-y-8 pb-40",children:[E&&!ke.isHistoryView&&S.jsx("div",{className:"p-3 bg-[var(--danger)] bg-opacity-20 text-[var(--danger)] border border-[var(--danger)] rounded-lg text-sm text-center",children:E}),ee>0&&!I||re>0&&!Q&&S.jsxs("p",{className:"text-xs text-[var(--warn)] text-center p-2 bg-[var(--warn)] bg-opacity-20 rounded-md border border-[var(--warn)]",children:["An API key is required for one or more of your agents.",S.jsx("button",{onClick:()=>B(!0),className:"ml-1 underline font-semibold hover:text-[var(--warn)] focus:outline-none focus:ring-2 focus:ring-[var(--warn)] rounded",children:"Set API Key"})]}),(ea||ta&&!ke.isHistoryView)&&S.jsxs(di.div,{className:"space-y-8",initial:"hidden",animate:"visible",variants:U0,children:[ke.arbiterSwitchWarning&&S.jsx(di.div,{className:"bg-[var(--warn)] bg-opacity-20 border border-[var(--warn)] text-[var(--warn)] px-4 py-3 rounded-lg relative",role:"alert",variants:Va,children:S.jsxs("div",{className:"flex items-start",children:[S.jsx(s4,{className:"w-5 h-5 mr-3 mt-0.5 text-[var(--warn)] flex-shrink-0","aria-hidden":"true"}),S.jsxs("div",{children:[S.jsx("strong",{className:"font-bold",children:"Automatic Model Switch:"}),S.jsx("span",{className:"block sm:inline sm:ml-2",children:ke.arbiterSwitchWarning})]})]})}),(ke.finalAnswer||ta&&!ke.isHistoryView)&&S.jsx(di.section,{variants:Va,children:S.jsx(E4,{answer:ke.finalAnswer,isStreaming:k&&!ke.isHistoryView})}),ke.agents.length>0&&S.jsx(di.section,{variants:Va,children:S.jsx(A0,{title:"Contributing Agent Drafts",defaultOpen:!1,children:S.jsx(di.div,{className:"grid-adaptive-cols gap-4 pt-4",variants:U0,children:ke.agents.map((ie,pe)=>S.jsx(di.div,{variants:Va,children:S.jsx(p4,{agent:ie,displayId:pe+1,isCollapsed:Be[ie.id]||!1,onToggleCollapse:()=>Lt(Te=>({...Te,[ie.id]:!Te[ie.id]}))})},ie.id))})})})]}),S.jsxs("div",{className:"space-y-6 bg-[var(--surface-2)] p-6 rounded-xl shadow-2xl border border-[var(--line)]",children:[S.jsx(HS,{ref:Ye,agentConfigs:ke.agentConfigs,setAgentConfigs:o,onDuplicateAgent:Oe,disabled:v||ke.isHistoryView}),S.jsx("div",{className:"border-t border-[var(--line)] pt-4",children:S.jsx(A0,{title:"Arbiter Settings",defaultOpen:!0,children:S.jsx("div",{className:"space-y-4",children:S.jsx(IB,{arbiterModel:ke.arbiterModel,setArbiterModel:a,openAIArbiterVerbosity:ke.openAIArbiterVerbosity,setOpenAIArbiterVerbosity:f,geminiArbiterEffort:ke.geminiArbiterEffort,setGeminiArbiterEffort:h,isLoading:v||ke.isHistoryView})})})})]})]})]})}),S.jsx("footer",{className:"sticky bottom-0 z-10 bg-[var(--surface-1)] bg-opacity-80 backdrop-blur-lg border-t border-[var(--line)] flex-shrink-0 fixed-footer",children:S.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-3 space-y-3",children:[v&&S.jsxs("div",{children:[S.jsx("div",{className:"w-full bg-[var(--surface-2)] rounded-full h-2.5",children:S.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${Vt.total}%`}})}),S.jsx("p",{className:"text-center text-xs text-[var(--text-muted)] mt-1",children:Vt.phase==="arbitrating"?"Arbiter is synthesizing...":`Agents drafting... (${Math.round(Vt.agentPercent)}%)`})]}),S.jsx(S4,{prompt:ke.prompt,onPromptChange:e,images:ke.images,onImagesChange:r,onSubmit:te,isLoading:v,disabled:v||ke.isHistoryView||i.length===0,inputRef:_e})]})})]}),ne&&S.jsx(TB,{focusTrapOptions:{initialFocus:()=>Pe.current??void 0,onDeactivate:()=>ve.current?.focus()},children:S.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[S.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:he}),S.jsx(k0,{ref:Pe,history:N,selectedRunId:F,onSelectRun:kr,onNewRun:Xt,onViewCurrentRun:Rr,currentRunStatus:om,className:"relative h-full",isMobile:!0})]})})]})},IB=({arbiterModel:t,setArbiterModel:e,openAIArbiterVerbosity:n,setOpenAIArbiterVerbosity:r,geminiArbiterEffort:i,setGeminiArbiterEffort:o,isLoading:s})=>{const a=[{label:"Gemini 2.5 Flash",value:Nn,provider:"gemini",tooltip:"Google's fast and cost-effective model for general arbitration."},{label:"Gemini 2.5 Pro",value:sn,provider:"gemini",tooltip:"Google's most capable model, with a large context window and strong reasoning. Recommended for complex synthesis."},{label:"GPT-5 Mini",value:ip,provider:"openai",tooltip:"OpenAI's lightweight GPT-5 model for quick arbitration with lower latency."},{label:"GPT-5 (Med)",value:bx,provider:"openai",tooltip:"OpenAI's powerful GPT-5 model with standard reasoning. A strong, balanced choice for arbitration."},{label:"GPT-5 (High)",value:Zf,provider:"openai",tooltip:"GPT-5 with enhanced, step-by-step reasoning. May produce higher quality synthesis for nuanced topics at a higher latency."},{label:"OR Claude Haiku",value:Mx,provider:"openrouter",tooltip:"Anthropic's fastest model via OpenRouter. Ideal for quick, responsive arbitration."}],c=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],f=[{label:"Dynamic",value:"dynamic"},{label:"High",value:"high"},{label:"Medium",value:"medium"},{label:"Low",value:"low"},{label:"None",value:"none"}],d=a.find(p=>p.value===t),h=d?.value===Nn?f:f.filter(p=>p.value!=="none");return S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Arbiter Model"}),S.jsx(Vc,{"aria-label":"Arbiter Model",options:a,value:t,onChange:e,disabled:s})]}),d?.provider==="openai"?S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Arbiter Verbosity"}),S.jsx(Vc,{"aria-label":"Arbiter Verbosity",options:c,value:n,onChange:r,disabled:s})]}):d?.provider==="gemini"?S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-[var(--text)] mb-2",children:"Thinking Effort"}),S.jsx(Vc,{"aria-label":"Arbiter Thinking Effort",options:h,value:i,onChange:o,disabled:s})]}):null]})},tE=document.getElementById("root");if(!tE)throw new Error("Could not find root element to mount to");const kB=$c.createRoot(tE);kB.render(S.jsx(Oc.StrictMode,{children:S.jsx(PB,{})}));
